var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,i=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&l(e,t,a[t]);if(r)for(var t of r(a))s.call(a,t)&&l(e,t,a[t]);return e};import{d as c,y as o,r as d,aL as h,o as g,M as v,t as u,a7 as m,g as y,a as f,A as p,u as w,ax as x,an as L,am as D,b as I,aa as C,V as b,e as R,n as P,k as F,h as S,j as k,x as j,Y as A,F as B,q as E,p as W,v as H,s as M,W as z}from"./index-7e9c327e.js";import{W as Y}from"./worker-efe1e0e9.js";import{_ as T}from"./plugin-vue_export-helper-46f75680.js";var N=c({name:"preview",components:{},props:{},emits:[],setup(e,r){const{proxy:n}=y(),s=o();let l=d({projectData:h(),emptyColor:"#00000000",bgCanvas:null,canvas:null,realCanvas:null,ctx1:null,ctx2:null,ctx3:null,isDrawing:!1,isErasering:!1,isDrawShape:!1,isMoving:!1,isSelecting:!1,isCopy:!1,isScale:!1,shapeFillColor:"#000000ff",brushColor:"#000000ff",brushSize:1,eraserSize:1,canvasWidth:32,canvasHeight:32,scale:1,isCheckedRatio:!0,isShowReferenceLine:!1,widthHeightRatio:1,drawAreaList:[],currentTool:0,drawRecord:[],drawShapeList:[],gridInfo:"[]",myColorList:n.$config.colorList,myColor:"#ffffffff",myColorGroup:1,isAddGroup:!1,myGroupName:"",addMyColorVisible:!1,editMyColorMask:null,currentDrawShape:"rect",currentDrawTransform:"hReverse",historyRecord:[],historyMaxLength:10,currentHistoryIndex:0,historyTimer:null,lastX:0,lastY:0,currentFrameIndex:0,currentLayerIndex:0,currentFrameId:0,currentLayerId:0,currentFrameLayerVisible:!0,currentEditLayer:{index:-1,name:""},FrameTimer:null,maxFrame:12,maxLayer:30,exportVisible:!1,exportLoaidng:!1,loading:!1,isSpace:!1,isShift:!1,isDragging:!1,dragData:{x:0,y:0},canvasBeginPos:{x:0,y:0,centerX:0,centerY:0},moveData:{x:0,y:0,centerX:0,centerY:0,list:[]},selectData:{selectLayerId:0,x:-1,y:-1,originList:[],selectList:[],copyList:[]},selectType:"select",previewLoading:!1,selectActiveColor:"#3c8bfb8f",isExpandColorSelector:!0,colorStatList:[],worker:null,isExportProject:!1,AnimationFrameId_1:null,zIndex:{max:13,min:8},isSaveProject:!0,pinDouMode:!1,pinDouDrawMode:!1,pinDouData:null,tolerance:0,curvature:4,curveType:{isPress:!1,pressKey:"0"},curveEndPos:[],isHorizontal:!1,isVertical:!1,isCenter:!1,drawList:[],removeDrawList:[],LayerMenu:{visible:!1,top:0,left:0,contextData:null},selectLayerList:[],pindouHighlight:null,isHidePindouMode:!1,pindouBrand:"mard",isScaling:!1,scaleWhitePointPos:[],scaleAreaData:null,scaleRatio:0,emptyLayerData:[],exportStyleOptions:{isShowGrid:!1,gridBackgroundColor:"#ffffffff"},layerAlpha:100,isHideLinmoMode:!1,linmoMode:!1,linmoPhoto:null,linmoPhotoStyle:{transform:"translate(0px, 0px) rotate(0deg) scale(1, 1)",opacity:1,zIndex:0,display:"block"},linmoPhotoDom:null,dragLinmoPhoto:{enable:!1,startX:0,startY:0,translateX:0,translateY:0},scaleTimer:null,loadingText:"正在加载项目..."});const c={requireVisibleImg:f((()=>e=>e?s.themeValue?new URL("../../assets/light/visible.png",window.location.href).href:new URL("../../assets/dark/visible.png",window.location.href).href:s.themeValue?new URL("../../assets/light/hidden.png",window.location.href).href:new URL("../../assets/dark/hidden.png",window.location.href).href)),checkzIndex:f((()=>{let e={zIndex:0};return s.isFullWork?e.zIndex=l.zIndex.max:e.zIndex=l.zIndex.min,e}))};let I={handleBack(){n.$router.replace("/module")},drawPixelArea(e=0,a=0){0===e&&0===a&&(e=l.canvasBeginPos.x,a=l.canvasBeginPos.y,l.canvasBeginPos.centerX=l.canvasBeginPos.x+l.scale*l.canvasWidth/2,l.canvasBeginPos.centerY=l.canvasBeginPos.y+l.scale*l.canvasHeight/2),l.drawAreaList=[],l.ctx2.clearRect(0,0,l.bgCanvas.width,l.bgCanvas.height),l.ctx2.globalAlpha=.25;for(let t=0;t<l.canvasHeight;t++)for(let r=0;r<l.canvasWidth;r++){l.ctx2.fillStyle=(t+r)%2==0?"rgba(0, 0, 0, 0.5)":"rgba(100, 100, 100, 0.5)";let n=l.scale,s=l.scale,i=r*n+e,c=t*s+a;l.ctx2.fillRect(i,c,n,s),l.drawAreaList.push([i,c])}},getCurrentLayerData:(e=l.currentFrameIndex,a=l.currentLayerIndex)=>l.drawRecord[e].layer[a].layerData,getCurrentLayerId:(e=l.currentFrameIndex,a=l.currentLayerIndex)=>l.drawRecord[e].layer[a].layerId,getCurrentFrameId:(e=l.currentFrameIndex)=>l.drawRecord[e].frameId,handleWheelEvent(e){e.preventDefault();const a=e.deltaY>0?-1:1;l.scale+=a,l.scale=Math.max(1,l.scale),l.scale>60&&(l.scale=60),I.handleResizeDraw()},handleResizeCanvas(e){l.scale+=e,l.scale=Math.max(1,l.scale),l.scale>60&&(l.scale=60),I.handleResizeDraw()},handleResizeDraw(){I.drawPixelArea(),I.reDraw(!1)},startDrawing(){l.canvas.addEventListener("mousedown",I.start),l.canvas.addEventListener("mousemove",I.draw),l.canvas.addEventListener("mouseup",I.stop),l.canvas.addEventListener("touchstart",I.mobileStart),l.canvas.addEventListener("touchmove",I.mobileDraw),l.canvas.addEventListener("touchend",I.stop),l.canvas.addEventListener("mouseout",I.leave),l.canvas.addEventListener("wheel",I.handleWheelEvent)},mobileStart(e){let a={offsetX:e.touches[0].clientX-l.canvas.getBoundingClientRect().left,offsetY:e.touches[0].clientY-l.canvas.getBoundingClientRect().top};I.start(a)},start(e){if(e.offsetX>=l.drawAreaList[0][0]&&e.offsetX<l.drawAreaList[l.drawAreaList.length-1][0]+l.scale&&e.offsetY>=l.drawAreaList[0][1]&&e.offsetY<l.drawAreaList[l.drawAreaList.length-1][1]+l.scale){I.stop();const a=Math.floor((e.offsetY-l.drawAreaList[0][1])/l.scale),t=Math.floor((e.offsetX-l.drawAreaList[0][0])/l.scale);if(l.isSpace){l.isDragging=!0;let e=t*l.scale+l.canvasBeginPos.x,r=a*l.scale+l.canvasBeginPos.y;l.dragData.x=e,l.dragData.y=r}}},draw(e){if(e.offsetX>=l.drawAreaList[0][0]&&e.offsetX<l.drawAreaList[l.drawAreaList.length-1][0]+l.scale&&e.offsetY>=l.drawAreaList[0][1]&&e.offsetY<l.drawAreaList[l.drawAreaList.length-1][1]+l.scale){const a=Math.floor((e.offsetY-l.drawAreaList[0][1])/l.scale),t=Math.floor((e.offsetX-l.drawAreaList[0][0])/l.scale);if(l.isSpace){l.canvas.style.cursor="grabbing";let e=t*l.scale+l.canvasBeginPos.x,r=a*l.scale+l.canvasBeginPos.y;I.startDrag(e,r)}}else l.canvas.classList=""},mobileDraw(e){let a={offsetX:e.touches[0].clientX-l.canvas.getBoundingClientRect().left,offsetY:e.touches[0].clientY-l.canvas.getBoundingClientRect().top};I.draw(a)},startDrag(e,a){if(l.isDragging){const t=e-l.dragData.x,r=a-l.dragData.y;let n=l.drawAreaList[0][0]+t,s=l.drawAreaList[0][1]+r,i=n+l.scale*l.canvasWidth/2,c=s+l.scale*l.canvasHeight/2;I.drawPixelArea(n,s),I.reDraw(!1,!1,{x:n,y:s,centerX:i,centerY:c})}},handleLayerImg(){let e=1;e=l.canvasWidth>l.canvasHeight?Math.floor(Math.max(1,40/l.canvasWidth)):Math.floor(Math.max(1,40/l.canvasHeight));let a=l.drawRecord[l.currentFrameIndex].layer[l.currentLayerIndex].layerData,t=0;l.realCanvas.width=l.canvasWidth*e,l.realCanvas.height=l.canvasHeight*e,l.ctx3.clearRect(0,0,l.realCanvas.width,l.realCanvas.height),l.ctx3.globalAlpha=1;for(let r=0;r<l.canvasHeight;r++)for(let n=0;n<l.canvasWidth;n++){let s=a[n+r*l.canvasWidth][2];s===l.emptyColor&&t++,l.ctx3.fillStyle=s,l.ctx3.fillRect(n*e,r*e,e,e)}t>=l.canvasHeight*l.canvasWidth?l.drawRecord[l.currentFrameIndex].layer[l.currentLayerIndex].currentLayerImg=I.handleGridImg():l.drawRecord[l.currentFrameIndex].layer[l.currentLayerIndex].currentLayerImg=l.realCanvas.toDataURL("image/png")},handleGridImg(){l.realCanvas.width=40,l.realCanvas.height=40,l.ctx3.globalAlpha=.25,l.ctx3.clearRect(0,0,l.realCanvas.width,l.realCanvas.height);for(let e=0;e<l.realCanvas.height;e++)for(let a=0;a<l.realCanvas.width;a++)l.ctx3.fillStyle=(e+a)%2==0?"rgba(0, 0, 0, 0.5)":"rgba(100, 100, 100, 0.5)",l.ctx3.fillRect(6*a,6*e,6,6);return l.realCanvas.toDataURL("image/png")},handleFrameImg(e,a=!0){let t=0;const r=l.drawRecord[l.currentFrameIndex].layer;l.realCanvas.width=5*l.canvasWidth,l.realCanvas.height=5*l.canvasHeight,l.ctx3.clearRect(0,0,l.realCanvas.width,l.realCanvas.height),l.ctx3.globalAlpha=1;for(let n=r.length-1;n>=0;n--)if(r[n].isRender)for(let e=0;e<l.canvasHeight;e++)for(let a=0;a<l.canvasWidth;a++){let s=r[n].layerData[a+e*l.canvasWidth][2];s===l.emptyColor&&t++,l.ctx3.fillStyle=s,l.ctx3.fillRect(5*a,5*e,5,5)}if(t>=l.canvasHeight*l.canvasHeight*r.length)l.drawRecord[l.currentFrameIndex].currentFrameImg="";else{let e=l.realCanvas.toDataURL("image/png");l.drawRecord[l.currentFrameIndex].currentFrameImg=e}I.handleLayerImg(),l.worker.postMessage({type:3,currentFrameData:JSON.parse(JSON.stringify(l.drawRecord[l.currentFrameIndex].layer))}),l.worker.onmessage=e=>{l.colorStatList=e.data}},reDraw(e=!0,a=!0,t=l.canvasBeginPos,r=!0){let n=0;l.ctx1.clearRect(0,0,l.canvas.width,l.canvas.height),l.drawRecord.length-1<l.currentFrameIndex&&(l.currentFrameIndex=l.drawRecord.length-1);let s=l.drawRecord[l.currentFrameIndex].layer,i=l.drawRecord[l.currentFrameIndex].layer[l.currentLayerIndex].layerId;for(let c=s.length-1;c>=0;c--)if((r||s[c].layerId!==i)&&s[c].isRender)for(let e=0;e<s[c].layerData.length;e++)if(!(s[c].layerData[e][0]>=l.canvasWidth||s[c].layerData[e][1]>=l.canvasHeight||s[c].layerData[e][0]<0||s[c].layerData[e][1]<0)&&s[c].layerData[e][2]!==l.emptyColor){let a=s[c].layerData[e][0]*l.scale+t.x,r=s[c].layerData[e][1]*l.scale+t.y;l.ctx1.fillStyle=s[c].layerData[e][2],l.ctx1.fillRect(a,r,l.scale,l.scale),n++}e&&(l.FrameTimer&&clearTimeout(l.FrameTimer),l.FrameTimer=setTimeout((()=>{n>0?I.handleFrameImg(l.ctx1,a):I.handleFrameImg(l.ctx2,a)}),300))},stop(){l.isDragging&&(l.isDragging=!1,l.canvasBeginPos.x=l.drawAreaList[0][0],l.canvasBeginPos.y=l.drawAreaList[0][1])},leave(){I.stop(),l.canvas.className=""},computeScale(){l.canvasWidth>l.canvasHeight?l.scale=Math.max(1,l.canvas.width/l.canvasWidth/2*2):l.scale=Math.max(1,l.canvas.height/l.canvasHeight/2*2),l.scale=Math.round(l.scale)-2},handleChangeLayer(e){l.currentLayerIndex=e,l.currentLayerId=I.getCurrentLayerId(),l.layerAlpha=l.drawRecord[l.currentFrameIndex].layer[l.currentLayerIndex].alpha||100,l.selectLayerList=[l.currentLayerIndex]},handleChangeLayerVisible(e){if(e<0){for(let e=0;e<l.drawRecord[l.currentFrameIndex].layer.length;e++)l.drawRecord[l.currentFrameIndex].layer[e].isRender=!l.currentFrameLayerVisible;return l.currentFrameLayerVisible=!l.currentFrameLayerVisible,void I.reDraw()}let a=l.drawRecord[l.currentFrameIndex].layer[e].isRender;l.drawRecord[l.currentFrameIndex].layer[e].isRender=!a,I.reDraw(!0,!1)},handleChangeFrame(e){l.currentFrameIndex=e,l.currentFrameId=I.getCurrentFrameId(),I.handleChangeLayer(0),I.reDraw(!0,!1)},handlekeyDownEvent(e){if(" "===e.key)return e.preventDefault(),void(l.isSpace=!0);l.canvas.className=""},handleKeyUpEvent(e){" "===e.key&&(l.isSpace=!1,l.canvas.style.cursor="")},addKeyBoardEvent(){window.addEventListener("keydown",I.handlekeyDownEvent),window.addEventListener("keyup",I.handleKeyUpEvent)},handleResizeWindowEvent(e){const a=document.querySelector(".pixelBox");l.canvas.width=null==a?void 0:a.clientWidth,l.canvas.height=null==a?void 0:a.clientHeight,l.bgCanvas.width=null==a?void 0:a.clientWidth,l.bgCanvas.height=null==a?void 0:a.clientHeight,I.computeScale(),l.canvasBeginPos.x=l.bgCanvas.width/2-l.canvasWidth*l.scale/2,l.canvasBeginPos.y=l.bgCanvas.height/2-l.canvasHeight*l.scale/2,l.canvasBeginPos.centerX=l.canvasBeginPos.x+l.scale*l.canvasWidth/2,l.canvasBeginPos.centerY=l.canvasBeginPos.y+l.scale*l.canvasHeight/2,I.drawPixelArea(),I.reDraw(!1,!1)},handleResizeWindow(){window.addEventListener("resize",I.handleResizeWindowEvent)},handleInitData(){l.currentTool=0,l.historyRecord=[],l.currentFrameIndex=0,l.currentLayerIndex=0,l.currentFrameId=0,l.currentLayerId=0,l.shapeFillColor="#000000ff",l.brushColor="#000000ff",l.isCheckedRatio=!0,l.isShowReferenceLine=!1,l.isVertical=!1,l.isHorizontal=!1,l.isCenter=!1,l.brushSize=1,l.eraserSize=1,l.widthHeightRatio=1,l.tolerance=0,l.selectType="select",l.currentDrawShape="rect",l.currentDrawTransform="hReverse",l.projectData=h(),l.pinDouMode=!1,l.pinDouDrawMode=!1,l.selectLayerList=[l.currentLayerIndex],l.pindouHighlight=null,l.pindouBrand="mard",l.isHidePindouMode=!1,l.isScaling=!1,l.scaleWhitePointPos=[],l.scaleAreaData=null,l.scaleRatio=0,l.colorStatList=[],l.layerAlpha=100,l.isHideLinmoMode=!1,l.linmoMode=!1,l.linmoPhoto=null,l.currentHistoryIndex=0},handleImportProject(){if(s.checkIsLogin())return;if(!l.projectData)return n.$message.error(n.$t("message.importFailed"));let e=JSON.parse(JSON.stringify(l.projectData));e.createAt=p(),e.updateAt=e.createAt,e.projectId=w.v1(),e.tip="新项目",e.isTop=0,s.saveProject(e).then((e=>{e&&n.$message.success(n.$t("message.importSucceeded")+"，请在我的项目中查看")})).catch((e=>{n.$message.error(n.$t("message.importFailed"))}))},handleDownloadProject(){if(s.checkIsLogin())return;if(!l.projectData)return n.$message.error(n.$t("message.downloadFailed"));let e=JSON.parse(JSON.stringify(l.projectData));x(JSON.stringify(e),"application/json",e.projectName)},async handleReadProjectData(){I.handleInitData(),l.loading=!0;let e=n.$route.params.projectId;L(`${e}.json`,(async e=>{let a=await D(e);a?I.handleProjectData(a):I.handleProjectData(null)}),(e=>{n.$message.error(e),I.handleProjectData(null)}))},handleProjectData(e){if(e){l.projectData.projectId=e.projectId,l.projectData.projectName=e.projectName,l.projectData.updateAt=e.updateAt,l.projectData.createAt=e.createAt,l.projectData.desc=e.desc,l.canvasWidth=Number(e.width),l.canvasHeight=Number(e.height),l.projectData.width=e.width,l.projectData.height=e.height,l.projectData.frameImg=e.frameImg,l.projectData.tip=e.tip,l.projectData.isTop=e.isTop,l.projectData.data=e.data;const a=document.querySelector(".pixelBox");l.canvas=document.getElementById("Canvas"),l.bgCanvas=document.getElementById("PixelCanvas"),l.realCanvas=document.getElementById("RealCanvas"),l.canvas.width=null==a?void 0:a.clientWidth,l.canvas.height=null==a?void 0:a.clientHeight,l.bgCanvas.width=null==a?void 0:a.clientWidth,l.bgCanvas.height=null==a?void 0:a.clientHeight,l.ctx1=l.canvas.getContext("2d"),l.ctx2=l.bgCanvas.getContext("2d"),l.ctx3=l.realCanvas.getContext("2d"),I.computeScale(),l.ctx1.lineCap="square",l.ctx1.save(),l.canvasBeginPos.x=l.bgCanvas.width/2-l.canvasWidth*l.scale/2,l.canvasBeginPos.y=l.bgCanvas.height/2-l.canvasHeight*l.scale/2,l.canvasBeginPos.centerX=l.canvasBeginPos.x+l.scale*l.canvasWidth/2,l.canvasBeginPos.centerY=l.canvasBeginPos.y+l.scale*l.canvasHeight/2,I.drawPixelArea(),I.startDrawing(),I.addKeyBoardEvent(),I.handleResizeWindow(),l.projectData.data?(l.worker.postMessage({type:4,variables:JSON.parse(JSON.stringify(e.data)),canvasWidth:l.canvasWidth}),l.worker.onmessage=e=>{try{l.drawRecord=e.data,l.drawRecord.length&&I.reDraw(),I.handleChangeLayer(l.currentLayerIndex),l.loading=!1}catch(a){n.$message.error("项目预览失败"),window.location.reload()}}):(n.$message.error("项目预览失败"),n.$router.replace("/module"))}else setTimeout((()=>{n.$router.replace("/module")}),2e3)}};return g((()=>{l.worker=new Y,I.handleReadProjectData()})),v((()=>{l.canvas&&(l.canvas.removeEventListener("mousedown",I.start),l.canvas.removeEventListener("mousemove",I.draw),l.canvas.removeEventListener("mouseup",I.stop),l.canvas.removeEventListener("touchstart",I.mobileStart),l.canvas.removeEventListener("touchmove",I.mobileDraw),l.canvas.removeEventListener("touchend",I.stop),l.canvas.removeEventListener("mouseout",I.leave),l.canvas.removeEventListener("wheel",I.handleWheelEvent),window.removeEventListener("keydown",I.handlekeyDownEvent),window.removeEventListener("keyup",I.handleKeyUpEvent),window.removeEventListener("resize",I.handleResizeWindowEvent))})),C=i(i(i({},u(l)),I),c),a(C,t({editSpaceStore:s,copyText:m}));var C}});const O=["element-loading-text"],X={class:"back flex-start"},$={class:"flex-end"},_={class:"flex-start flex-nowarp full-w",style:{flex:"1"}},V={class:"pixelBox scrollbar"},U={id:"RealCanvas"},J={key:0,class:"flex-start frame-list scrollbar scrollYHidden",ref:"frameBox",id:"frame-box"},q=["onClick"],G=["src"],K={class:"full-h flex-nowarp flex flex-column"},Q={key:0,style:{flex:"1","margin-top":"15px"},class:"full-w scrollHidden"},Z={ref:"layerBox",id:"layer-box",class:"scrollbar scrollY full-w layer-list",style:{height:"calc(100% - 50px)"}},ee=["data-key","onClick"],ae={class:"flex-start",style:{gap:"10px"}},te=["onClick"],re=["src"],ne={key:0,class:"layer-img flex-center"},se=["src"];var le=T(N,[["render",function(e,a,t,r,n,s){const l=I("ArrowLeftBold"),i=I("el-icon"),c=I("FolderAdd"),o=I("el-tooltip"),d=I("Download"),h=I("el-header"),g=I("el-footer"),v=I("el-main"),u=I("el-divider"),m=I("el-aside"),y=I("el-container"),f=C("loading");return b((R(),P("div",{class:"container full-h",style:H(e.checkzIndex),"element-loading-text":e.loadingText,"element-loading-background":"#00000000"},[F(y,{class:"full-h flex-warp"},{default:S((()=>[F(v,{class:"flex-column-center",style:{display:"flex",padding:"0","min-width":"500px"}},{default:S((()=>[F(h,{class:"flex-between"},{default:S((()=>[k("div",X,[F(i,{onClick:e.handleBack},{default:S((()=>[F(l)])),_:1},8,["onClick"]),k("h1",null,j(e.projectData.projectName),1)]),k("div",$,[F(o,{content:"导入项目",placement:"bottom"},{default:S((()=>[F(i,{style:{"margin-right":"25px"},onClick:e.handleImportProject},{default:S((()=>[F(c)])),_:1},8,["onClick"])])),_:1}),F(o,{content:"下载项目",placement:"bottom"},{default:S((()=>[F(i,{onClick:e.handleDownloadProject},{default:S((()=>[F(d)])),_:1},8,["onClick"])])),_:1})])])),_:1}),k("div",_,[k("div",V,[k("canvas",{id:"PixelCanvas",width:"512",height:"512",onContextmenu:a[0]||(a[0]=e=>e.preventDefault())},null,32),k("canvas",{id:"Canvas",width:"512",height:"512",onContextmenu:a[1]||(a[1]=e=>e.preventDefault())},null,32),b(k("canvas",U,null,512),[[A,!1]])])]),F(g,{class:"flex-start"},{default:S((()=>[a[2]||(a[2]=k("div",{class:"text-center"},"帧",-1)),e.drawRecord.length?(R(),P("div",J,[(R(!0),P(B,null,E(e.drawRecord,((a,t)=>(R(),P("div",{key:a.frameId,onClick:a=>e.handleChangeFrame(t),class:M(["frame-item pointer",{active:e.currentFrameIndex===t}])},[a.currentFrameImg?(R(),P("img",{key:0,draggable:"false",src:a.currentFrameImg},null,8,G)):W("",!0)],10,q)))),128))],512)):W("",!0)])),_:1,__:[2]})])),_:1}),F(m,null,{default:S((()=>[k("div",K,[e.drawRecord.length?(R(),P("div",Q,[a[3]||(a[3]=k("h1",{class:"flex-between"},"图层面板",-1)),F(u,{"border-style":"dashed"}),k("div",Z,[(R(!0),P(B,null,E(e.drawRecord[e.currentFrameIndex].layer,((a,t)=>(R(),P("div",{draggable:"true","data-key":a.layerId,"data-node":"LI",key:a.layerId,class:M(["layer-item flex-between pointer full-w",{active:e.currentLayerIndex===t,select:e.selectLayerList.includes(t)}]),style:{gap:"10px"},onClick:a=>e.handleChangeLayer(t)},[k("div",ae,[k("div",{class:"pointer layer-pic",onClick:z((a=>e.handleChangeLayerVisible(t)),["stop"])},[k("img",{src:e.requireVisibleImg(a.isRender)},null,8,re)],8,te),a.currentLayerImg?(R(),P("div",ne,[k("img",{draggable:"false",src:a.currentLayerImg},null,8,se)])):W("",!0),k("div",null,j(a.layerName),1)])],10,ee)))),128))],512)])):W("",!0)])])),_:1})])),_:1})],12,O)),[[f,e.loading]])}],["__scopeId","data-v-0d0abf01"]]);export{le as default};
