var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,s=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&a(e,n,t[n]);if(o)for(var n of o(t))r.call(t,n)&&a(e,n,t[n]);return e},c=(e,o)=>t(e,n(o));import{_ as d,d as l,r as p,t as u,a8 as h,b as f,f as m,h as g,e as _,j as y,n as v,l as w,v as q,g as k,z as b,A as C,ap as x,al as I}from"./index-6a0d579b.js";import{v as P}from"./validator-ad586801.js";const L=l({name:"ForgetPasswordDialog",components:{},props:{visible:{type:Boolean,default:!1}},emits:["close"],setup(e,t){const{proxy:n}=k();let o=p({dialogVisible:e.visible,isCheck:!1,loading:!1,username:"",newPassword:"Xsgz421"}),i={handleClose(){o.dialogVisible=!1,t.emit("close")},async handleValidate(e){await P.validateEmail(e).catch((e=>{n.$message.error(e)}))},handleReset(e){const t=n.$bmob.Query("User");t.set("id",e),t.set("password",n.$utils.secret.MD5(o.newPassword)),t.save().then((e=>{o.loading=!1,o.isCheck=!0})).catch((e=>{o.loading=!1,n.$message.error("找回失败")}))},async handleConfirm(){if(""===o.username.trim())return n.$message.warning("情输入用户名");o.loading=!0;const e=n.$bmob.Query("User");e.equalTo("username","==",o.username),e.select("isEnable"),e.limit(1),e.find().then((e=>(o.loading=!1,e.results.length?e.results.length&&e.results[0].isEnable&&"0"===e.results[0].isEnable?n.$message.warning("账号已被禁用"):void i.handleReset(e.results[0].objectId):n.$message.warning("用户不存在")))).catch((e=>{o.loading=!1,n.$message.error("找回失败")}))}};return c(s(s({},u(o)),i),{copyText:h})}}),S={key:1,class:"tips"},E={class:"dialog-footer"},T=b("取 消"),j=b("确 定"),M=b("复 制");var R=d(L,[["render",function(e,t,n,o,i,r){const a=f("el-input"),s=f("el-button"),c=f("el-dialog");return _(),m(c,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),title:"重置密码","before-close":e.handleClose,class:"z-dialog",center:"","close-on-click-modal":!1,width:350},{footer:g((()=>[y("span",E,[v(s,{onClick:e.handleClose},{default:g((()=>[T])),_:1},8,["onClick"]),e.isCheck?(_(),m(s,{key:1,type:"primary",onClick:t[1]||(t[1]=t=>e.copyText(e.newPassword))},{default:g((()=>[M])),_:1})):(_(),m(s,{key:0,type:"primary",onClick:e.handleConfirm,loading:e.loading},{default:g((()=>[j])),_:1},8,["onClick","loading"]))])])),default:g((()=>[e.isCheck?(_(),w("div",S," 当前密码已经重置为"+q(e.newPassword)+"，登录后记得修改密码喔~ ",1)):(_(),m(a,{key:0,modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),size:"large",placeholder:"请输入用户名",clearable:""},null,8,["modelValue"]))])),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-1967ef92"],["__file","D:/project/pixel-grid/src/components/dialog/ForgetPasswordDialog.vue"]]);function O(){const{proxy:e}=k();C();const t=p({temp1:`response_type=code&client_id=${x.QQ_APP_ID}&redirect_uri=https://localhost:8088/about&state=xsgz`});return c(s({},{getAuthorizeCode:()=>new Promise(((n,o)=>{I.get(`https://graph.qq.com/oauth2.0/authorize?${t.temp1}`).then((e=>{n(e)})).catch((t=>{o(t),e.$message.error(t)}))})),getAccessToken(t){if(!t)return;let n=`grant_type=authorization_code&client_id=${x.QQ_APP_ID}&client_secret=${x.QQ_APP_KEY}&code=${t.code}&redirect_uri=https://localhost:8088/about&fmt=json&need_openid=1`;return new Promise(((t,o)=>{I.get(`https://graph.qq.com/oauth2.0/token?${n}`).then((e=>{t(e)})).catch((t=>{o(t),e.$message.error(t)}))}))},getOpenId:t=>t?new Promise(((n,o)=>{e.$http.getQQopenID(t).then((e=>{n(e)})).catch((e=>{o(e)}))})):e.$message.error("请求参数异常"),getUserInfo(t){if(!t||!t.accessToken||!t.openId)return e.$message.error("请求参数异常");let n=`access_token=${t.accessToken}&oauth_consumer_key=${x.QQ_APP_ID}&openid=${t.openId}`;return new Promise(((t,o)=>{I.get(`https://graph.qq.com/user/get_user_info?${n}`).then((e=>{t(e)})).catch((t=>{o(t),e.$message.error(t)}))}))}}),{data:t})}var D=function(){function e(){}var t=window.ActiveXObject&&~~navigator.userAgent.match(/MSIE\s+(\d+)/)[1],n=(o._reg=/\{(\w+)\}/g,{str2dom:function(e){var t=[],n=arguments.callee._temp=arguments.callee._temp||document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.push(n.removeChild(n.firstChild));return 1<t.length?function(){for(var e=document.createDocumentFragment(),n=0;n<t.length;n++)e.appendChild(t[n]);return e}():t[0]},format:o,extend:function(t,n){var o=e;return o.prototype=n.prototype,t.prototype=new o,t.constructor=t}});function o(e,t){return e.replace(arguments.callee._reg,(function(e,n){return null!==t[n]?t[n]:n}))}var i,r,a=(i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},{stringify:window.JSON&&JSON.stringify?JSON.stringify:function e(t){var n,o,a=[],s="";for(n in t){switch(typeof(s=void 0!==(s=t[n])?s:"")){case"string":o=s,i.lastIndex=0,s=i.test(o)?'"'+o.replace(i,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+o+'"';break;case"object":s=e(s);break;case"function":continue}a.push('"'+n+'":'+s)}return"{"+a+"}"},parse:function(e){e=e||"{}";var t={};try{t=new Function("return ("+e+")")()}catch(n){v.error("JSON.parse => parse鏁版嵁鏍煎紡閿欒:"+e)}return t}});var s,c,d,l,p,u,h,f=(document.implementation.hasFeature("XPath","3.0")&&(XMLDocument.prototype.selectNodes=function(e,t){t=t||this;for(var n=this.createNSResolver(this.documentElement),o=this.evaluate(e,t,n,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),i=[],r=0;r<o.snapshotLength;r++)i[r]=o.snapshotItem(r);return i},Element.prototype.selectNodes=function(e){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes(e,this);throw"For XML Elements Only"}),{stringify:function(e){return e.xml||(new XMLSerializer).serializeToString(e)},parse:function(e){var n=t?new ActiveXObject("Microsoft.XMLDOM"):document.implementation.createDocument("text/xml","",null);if(t)return n.loadXML(e)?n:null;try{for(var o=n.childNodes,i=o.length-1;0<=i;i--)n.removeChild(o[i]);var r=(new DOMParser).parseFromString(e,"text/xml"),a=n.importNode(r.documentElement,!0);return n.appendChild(a),n}catch(s){return null}}}),m={extend:function(){var e,t,n,o=arguments,i=arguments.length,r=!1,a=1,s=o[0];for("boolean"==typeof s&&(r=s,s=arguments[1]||{},a=2),"object"!=typeof s&&"function"!=typeof s&&(s={}),i===a&&(s={},--a);a<i;a++)if(null!=(e=arguments[a]))for(var c in e)t=s[c],s!==(n=e[c])&&(r&&n&&"object"==typeof n&&!n.nodeType?(t=t||(n instanceof Array?[]:"object"==typeof n?{}:n),s[c]=object.extend(r,t,n)):void 0!==n&&(s[c]=n));return s}},g=(s=/"/g,c={genHttpParamString:function(e){return this.commonDictionaryJoin(e,null,null,null,window.encodeURIComponent)},splitHttpParamString:function(e){return this.commonDictionarySplit(e,null,null,null,window.decodeURIComponent)},commonDictionarySplit:function(e,t,n,o,i){var r,a,s,c={};if(!e||"string"!=typeof e)return c;if("string"!=typeof n&&(n=""),"string"!=typeof o&&(o="="),(r=e.split(t="string"!=typeof t?"&":t))&&r.length)for(var d=0,l=r.length;d<l;++d)1<(a=r[d].split(o)).length?(s=(s=a.slice(1).join(o).split(n)).slice(n.length,s.length-n.length).join(n),c[a[0]]="function"==typeof i?i(s):s):a[0]&&(c[a[0]]=!0);return c},commonDictionaryJoin:function(e,t,n,o,i){var r,a,c=[];if(!e||"object"!=typeof e)return"";if("string"==typeof e)return e;for(a in"string"!=typeof t&&(t="&"),"string"!=typeof n&&(n=""),"string"!=typeof o&&(o="="),e)r=(e[a]+"").replace(s,'\\"'),c.push(a+o+n+("function"==typeof i?i(r):r)+n);return c.join(t)}},{stringify:function(e){return c.genHttpParamString(e)},parse:function(e){return c.splitHttpParamString(e)},getParameter:function(e){return e=new RegExp("(\\?|#|&)"+e+"=([^&#]*)(&|#|$)"),e=location.href.match(e),decodeURIComponent(e?e[2]:"")}}),_=(d=[/&(?!amp;|lt;|gt;|#039;|quot;|#39;)/g,/</g,/>/g,/\x27/g,/\x22/g],l=["&amp;","&lt;","&gt;","&#039;","&quot;"],{escHTML:function(e){for(var t=e,n=0,o=d.length;n<o;n++)t=t.replace(d[n],l[n]);return t},format:n.format}),y=(p=document.domain||"",{set:function(e,t,n,o,i){var r;return i&&(r=new Date).setTime(r.getTime()+36e5*i),document.cookie=e+"="+t+"; "+(i?"expires="+r.toGMTString()+"; ":"")+(o?"path="+o+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+p+";"),!0},get:function(e){return e=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),(e=document.cookie.match(e))?e[1]:""},del:function(e,t,n){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(n?"path="+n+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+p+";")}}),v=(h=(u={log:3,info:2,warn:1,error:0}).info,{log:w("log"),info:w("info"),warn:w("warn"),error:w("error"),setLevel:function(e){return h=u[e]||h}});function w(e){return function(t){window.console&&console[e]}}var q=(k.list=[],k.fired=!1,q||(q=!0,document.addEventListener?document.addEventListener("DOMContentLoaded",(function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),k()}),!1):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"!==document.readyState&&"loaded"!==document.readyState||(document.detachEvent("onreadystatechange",arguments.callee),k())})),document.documentElement.doScroll&&function(){try{document.documentElement.doScroll("left"),document.body.appendChild}catch(e){return k.fired||setTimeout(arguments.callee,0)}k()}())),{domReady:function(e){"function"==typeof e&&(k.fired||"complete"===document.readyState||"loaded"===document.readyState?(k(),e()):k.list.push(e))},add:function(e,t,n){e&&t&&n&&(e&&e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n))},remove:function(e,t,n){e&&t&&n&&(e&&e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n))}});function k(){var e;for(k.fired=!0;e=k.list.shift();)e()}function b(e,t,n){setTimeout((function(){b.send(e,t,n)}),0)}function C(e,t,n,o){setTimeout((function(){C.send(e,t,n,o)}),0)}return b.send=function(e,t,n){},C.send=function(){},{Like:{_insertButton:e},Share:{},Toolkit:n,JSON:a,XML:f,Object:m,QueryString:g,String:_,Cookie:y,Console:v,Event:q,pv:b,valueStat:C,reportBNL:function(e,t){},getVersion:function(){return"1.0.1"}}}();!function(e){function t(e){return"string"==typeof e?document.getElementById(e):e}function n(e){return o&&(o.dataset&&o.dataset[e]||o.getAttribute("data-"+e))}var o,i,r=D.getVersion();~~e.QueryString.getParameter("__qc_wId")||~~e.Cookie.get("__qc_wId")||(i=+new Date%1e3,document.cookie=["__qc_wId="+i,"; path=/"].join(";"));for(var a,s=/qc_jssdk/i,c=document.getElementsByTagName("script"),d=0,l=c.length;d<l;d++)if(((a=c[d]).src||"").match(s)){o=a;break}var p=e.Toolkit,u=e.JSON,h=(e.XML,e.Object),f=(e.QueryString,e.String,e.Cookie),m=e.Console,g=function(){},_=window.ActiveXObject&&~~navigator.userAgent.match(/MSIE\s+(\d+)/)[1],y={PMCrossPage:"https://graph.qq.com/jsdkproxy/PMProxy.html#"+r,FLACrossPage:"https://graph.qq.com/jsdkproxy/FLAProxy.swf",getCrossSolution:function(){var t=window.postMessage?"PMProxy":window.ActiveXObject&&function(){var e=!0;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){e=!1}return e}()||navigator.plugins&&navigator.plugins["Shockwave Flash"]?"FLAProxy":(e.Console.error("鏈壘鍒板彲鐢ㄧ殑璺ㄥ煙閫氫俊鏂规"),"EMPProxy");return e.Console.info("纭畾璺ㄥ煙浠ｇ悊绛栫暐锛�"+t),t}},v=1e3;function w(e,t,n,o){this.uri=e,this.paras=t||{},this.fmt=n||"json",this.method=(o||"get").toLocaleLowerCase(),this.successPool=[],this.errorPool=[],this.completePool=[],this.seq=v++}e.getConfig=function(){return y},w.prototype.success=function(e){return this.successPool.push(e),this},w.prototype.error=function(e){return this.errorPool.push(e),this},w.prototype.complete=function(e){return this.completePool.push(e),this},w.prototype.send=g,w.prototype._onCallback=function(e,t,n){var o;200==e.status||204==e.status?(o=e.responseText,~~(o=new q(o,e.status,t,n)).code?this.onError(o):this.onSuccess(o)):this.onError(new q("",e.status,t,n))},w.prototype.onSuccess=function(e){for(var t=this.successPool,n=0;n<t.length;n++)t[n](e);this.onComplete(e)},w.prototype.onError=function(e){for(var t=this.errorPool,n=0;n<t.length;n++)t[n](e);this.onComplete(e)},w.prototype.onComplete=function(e){for(var t=this.completePool,n=0;n<t.length;n++)t[n](e)};var q=function(e,t,n,o){this.status=t||-1,this.fmt=n||"json",this.code=this.ret=-1,this.data=null,this.seq=o||-1,this.parseData(e),this.code&&q[this.code]&&q[this.code](this.data,this.dataText)};q.prototype.parseData=function(t){var n;this.dataText=t,"xml"===this.fmt?(this.data=e.XML.parse(t||"<root></root>"),n=this.data.selectNodes("//ret")[0],this.code=this.ret=n&&n.firstChild.nodeValue||-1):(this.data=e.JSON.parse(t||"{}"),this.code=this.ret=void 0!==this.data.ret?~~this.data.ret:this.data.data&&void 0!==this.data.data.ret?~~this.data.data.ret:-1)},q.prototype.stringifyData=function(){return this.dataText},q[100013]=function(t,n){e.Login.signOut(),e.Console.warn("api杩斿洖token澶辨晥")};var k,b,C=e.Toolkit.extend((function(){w.apply(this,arguments),this.xhr=C.createInstance()}),w);function x(){this.requests=[],this.invokes=[],this.readyPool=[],this.isReady=!1,this.timeStamp=+new Date,this.init()}e.Object.extend(C.prototype,{send:function(){var t=this.xhr,n=this.method,o=this.fmt,i=this,r=e.QueryString.stringify(i.paras),a="post"==n?this.uri:this.uri.indexOf("?")<0?this.uri+"?"+r:this.uri.replace(/[&?]*/g,"")+"&"+r;t.open(n,a,!!this.async);try{t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("X-Requested-From","_TC_QC_jsProxy_")}catch(s){}t.onreadystatechange=function(){4===t.readyState&&i._onCallback(t,o,i.seq)},t.send(r||null)}}),C.createInstance=window.XMLHttpRequest?function(){return new window.XMLHttpRequest}:function(){return new window.ActiveXObject("Microsoft.XMLHTTP")},x.prototype.init=g,x.prototype.ready=function(e){this.readyPool.push(e)},x.prototype.onReady=function(){this.isReady=!0;for(var e=this.readyPool,t=0;t<e.length;t++)e[t]()},x.prototype.send=function(e){var t;for(e&&this.requests.push(e);this.isReady&&(t=this.requests.shift());)x.pendingRequests.push(t),D.Console.log("seq no :"+t.seq+"璇锋眰鍙戣捣  ts -> "+ +new Date),this._doSend(t)},x.prototype._doSend=function(e){},x.prototype._preDispatch=function(e,t,n,o){var i=(t.data||t.currentTarget&&t.currentTarget.data||{}).split("@@@");"invoke"===i[0]?this.invoke(i[1]):this.dispatch(i[1]||t,n,o)},x.prototype.invoke=function(e){var t;for(e&&this.invokes.push(e);this.isReady&&(t=this.invokes.shift());)this._doInvoke(t)},x.prototype._doInvoke=function(e){},x.prototype.dispose=function(){b=null,this.onDispose()},x.prototype.onDispose=function(){},x.pendingRequests=[],x.dispatchReceive=function(e,t,n,o){for(var i=x.pendingRequests,r=0;r<i.length;r++)if(i[r].seq==e)return D.Console.log("seq no :"+e+"鍝嶅簲鏀跺埌  ts -> "+ +new Date),i[r]._onCallback({status:n,responseText:t},o,e),void i.splice(r,1)},x.invoke=(k=[],function(t){if(t&&k.push(t),!b)return e.Console.info("Proxy鏈垵濮嬪寲锛宨nvoke鍏ユ爤"),void x.generateProxy();for(var n;n=k.shift();)b._doInvoke(n)}),x.generateProxy=function(e){var t={PMProxy:L,FLAProxy:I,EMPProxy:S};return e?new t[e]:b=b||new(t[y.getCrossSolution()])},x.getFunction=function(e){var t;e=e.split(".");for(var n=0;n<e.length;n++)t=(t||window)[e[n]];return t},e._create_fla_proxy=function(){e._create_fla_proxy=g,document._qc_cross_request_flash_proxy||t("_qc_cross_request_flash_proxy")||new I};var I=e.Toolkit.extend((function(){x.apply(this,arguments)}),x);e.Object.extend(I.prototype,{prefix:"_TC_QC_flaProxy_",init:function(){var t,n,o=this,i=(t=window.name.match(/oauth2Login_(\d+)/),n=~~e.Cookie.get("__qc_wId"),t&&t[1]?i=t[1]:window._b_is_qc_cb_win?i=1e4+n:(i=n,document.cookie=["__qc_wId="+i,"; path=/"].join(";")),e.Console.info("璺ㄥ煙绐楀彛鏍囪瘑鍙� __qc_wId : "+i),i),r=(i=I.getFlashHtml({src:y.FLACrossPage,width:"100%",height:"100%",allowScriptAccess:"always",id:"_qc_cross_request_flash_proxy",name:"_qc_cross_request_flash_proxy",flashVars:"suffix="+this.timeStamp+"&conId="+i+"&conId_receive="+(i<1e4?i+1e4:i-1e4)}),this.cot=document.createElement("div"));r.style.cssText="position:fixed; _position:absolute; top:-999px; left: -999px; width:1px; height:1px; margin:0; padding:0; display:none;",r.innerHTML=i,D.Event.domReady((function(){document.body.appendChild(r),r.style.display="block"})),window[this.prefix+"onFlashReady_"+this.timeStamp]=function(){e.Console.info("FLAProxy浠ｇ悊鍒涘缓鎴愬姛锛岃€楁椂"+(new Date-o.timeStamp)),setTimeout((function(){o.isReady=!0,o.send(),o.invoke()})),e.Login._check()||document._qc_cross_request_flash_proxy.initConn()},window[this.prefix+"onFlashRequestComplete_"+this.timeStamp]=function(e,t,n){setTimeout((function(){o._preDispatch(o,e,t,n)}))},window[this.prefix+"onFlashInvokeBack_"+this.timeStamp]=function(){var e=arguments;setTimeout((function(){var t=x.getFunction(e[0]),n=e[1];-1<e[0].indexOf(".")?t.apply(null,n):t(n)}))}},_doSend:function(n){var o=n.uri,i=e.QueryString.stringify(n.paras),r=n.seq,a=n.fmt,s=n.method;(n=document._qc_cross_request_flash_proxy.httpRequest||t("_qc_cross_request_flash_proxy").httpRequest)?n(o,i,s,a,r):function(){throw new Error("flash proxy 鍒濆鍖栧け璐�")}()},dispatch:function(e,t,n){var o=e.currentTarget.data;e="complete"!=e.type?404:200;x.dispatchReceive(t,o,e,n)},_doInvoke:function(e){var n=document._qc_cross_request_flash_proxy.jsCallSwf||t("_qc_cross_request_flash_proxy").jsCallSwf;n&&n.apply(null,e)}}),I.getFlashHtml=function(e,t,n){var o,i=[],r=[],a=!!window.ActiveXObject;for(o in t=t||9,e)switch(o){case"noSrc":case"movie":continue;case"id":case"name":case"width":case"height":case"style":void 0!==e[o]&&i.push(" ",o,'="',e[o],'"');break;case"src":a?r.push('<param name="movie" value="',e.noSrc?"":e[o],'"/>'):i.push(' data="',e.noSrc?"":e[o],'"');break;default:r.push('<param name="',o,'" value="',e[o],'" />')}return a?i.push(' classid="clsid:',n||"D27CDB6E-AE6D-11cf-96B8-444553540000",'"'):i.push(' type="application/x-shockwave-flash"'),location&&location.protocol.indexOf("https")<0&&i.push(' codeBase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab#version=',t,'"'),"<object"+i.join("")+">"+r.join("")+"</object>"};var P="https://graph.qq.com",L=e.Toolkit.extend((function(){x.apply(this,arguments)}),x);e.Object.extend(L.prototype,{init:function(){var t=this;t._connFrame=document.createElement("iframe"),t._connFrame.style.cssText="width:0px; height:0px; display:none; overflow:hidden;";var n=function(){n.fire(),n.fire=g};function o(e){!e.origin||e.origin!=P&&"https://qzonestyle.gtimg.cn"!=e.origin||t._preDispatch(t,e)}n.fire=function(){e.Console.info("PMProxy浠ｇ悊鍒涘缓鎴愬姛锛岃€楁椂"+(new Date-t.timeStamp)),t.isReady=!0,t.send(),t.invoke()},t._connFrame.onload=n,t._connFrame.addEventListener&&t._connFrame.addEventListener("load",n,!1),t._connFrame.attachEvent&&t._connFrame.attachEvent("onload",n),t._connFrame.src=y.PMCrossPage,D.Event.domReady((function(){document.body.appendChild(t._connFrame)})),window.addEventListener?window.addEventListener("message",o,!1):window.attachEvent("onmessage",o)},_doSend:function(t){t=e.QueryString.stringify({uri:t.uri,paras:e.QueryString.stringify(t.paras),fmt:t.fmt,method:t.method}),this._connFrame.contentWindow.postMessage(t,P)},dispatch:function(t){var n=(i=t.data.split(":<.<<#:"))[0],o=i[1],i=(t=i[2],i[3]);e.Console.log("data:\t"+i),x.dispatchReceive(n,i,o,t)},_doInvoke:function(t){var n;e.Console.log("invoke:\t"+t),"string"==typeof t&&(t=(n=t.split("#"))[0],n=n[1]&&n[1].split(","),x.getFunction(t).apply(null,n))},onDispose:function(){this._connFrame.parentNode.removeChild(this._connFrame),this._connFrame=null}});var S=e.Toolkit.extend((function(){x.apply(this,arguments)}),x);e.Object.extend(S.prototype,{init:function(){e.Console.info("init:"+arguments)},_doSend:function(t){e.Console.info("_doSend:"+arguments)},dispatch:function(t){e.Console.info("dispatch:"+arguments)}}),e.XHRRequest=C,e.request=function(e,t,n,o){return new C(e,t,n,o)};var E,T,j=[];function M(t){var n=e.Login._getTokenKeys();if(O<=0)throw new Error("鎰忓鐨勮皟鐢ㄤ簡缁戝畾token鍒皉eq鐨勬柟娉� bindTokenPara");return t.paras.oauth_consumer_key=O,t.paras.access_token=n.accessToken,t.paras.openid=n.openid,t.paras.format=t.fmt,t}function R(t,n,o,i){b=x.generateProxy();var r=$(t);t=r.api||t,i=i||r.method;var a=new w(t,n=n||{},o,i);return 0<O?setTimeout((function(){var n=e.Login._getTokenKeys();n.openid&&n.accessToken?b.send(M(a)):(T.push(a),e.Console.log("openid涓巃ccessToken涓㈠け锛岃皟鐢ㄨ姹傚叆鏍� : ["+t+"]锛屾爤澶у皬锛�"+T.length))}),10):(T.push(a),e.Console.log((b.isReady&&O<0?"token鑾峰彇澶辫触锛岃璋冪敤鐢ㄦ埛鐧诲綍娴佺▼":"api浠ｇ悊灏氭湭鍒濆鍖栨垚鍔�")+"锛岃皟鐢ㄨ姹傚叆鏍� : ["+t+"]锛屾爤澶у皬锛�"+T.length)),a.success((function(){D.valueStat(r.statId,1,0)})).error((function(e){e=e||{},D.valueStat(r.statId,1,"number"==typeof e.ret?e.ret:1)})),a}e.api=(T=[],R._ready=function(){var t;for(e.Console.info("init鎴愬姛锛屽紑濮嬭Е鍙慳pi璋冪敤鍫嗘爤");t=T.shift();)b.send(M(t))},R.getDoc=(E=null,function(e,t){var n,o,i;E&&t?t(E[e]):(n=e,o=t||g,(i=document.createElement("script")).type="text/javascript",i.src="https://qzonestyle.gtimg.cn/qzone/openapi/qc_jsdkdoc.js",document.body.appendChild(i),window.on_qc_jsdkdoc_loaded=function(e){E=e,o&&o(E[n]),document.body.removeChild(i),i=null})}),R),e.Login=function(){var n,o,i,r={A_XL:{styleId:5,size:"230*48"},A_L:{styleId:4,size:"170*32"},A_M:{styleId:3,size:"120*24"},A_S:{styleId:2,size:"105*16"},B_M:{styleId:7,size:"63*24"},B_S:{styleId:6,size:"50*16"},C_S:{styleId:1,size:"16*16"}};function a(n){n.clientId&&D.init({appId:n.clientId});var o=D.getAppId();if(o<0)D.getAppId(arguments);else{n.size=n.size||"B_M";var i=t(n.btnId),a=(r[n.size]||r.B_M).styleId,s=n.fullWindow||!1,c=n.btnMode||"standard";n.redirectURI=n.redirectURI||A;var d,l;s={size:a,fullWindow:s,url:arguments.callee._getPopupUrl(n)};if(n&&n.btnId){if(!i)throw new Error("鏈壘鍒版彃鍏ヨ妭鐐�:");i.innerHTML=arguments.callee.getBtnHtml(s,c,n);var p;c=i.firstChild.onclick;n.showModal?((p=document.createElement("DIV")).style="position: absolute; visibility: hidden; width: 500px;height: 620px; padding: 0px; margin: 0px;border:1px #ddd solid; background: white;",p.innerHTML='<iframe id="qq_login_iframe" frameborder="0" width="100%" height="100%"></iframe>',p.style.top=0,p.style.left=window.innerWidth/2-250+"px",document.body.appendChild(p),i.firstChild.onclick=function(){var e,t=document.getElementById("qq_login_iframe");t.src||(e="?",e+="response_type=token&",e+="client_id="+o+"&",e+="redirect_uri="+n.redirectURI,t.src="https://graph.qq.com/oauth2.0/authorize"+e),p.style.visibility="visible"}):i.firstChild.onclick=(d=c,window.addEventListener?window.addEventListener("unload",u,!1):window.attachEvent("onunload",u),function(){return l&&l.close(),l=d(),e._create_fla_proxy(),D.pv("graph.qq.com","/open/connect/click"),!1})}}function u(){l&&l.close(),D.Cookie.del("__qc_wId")}}function s(e,t,n,i){var r,s;function d(){for(var e=0;e<y.length;e++)(0,y[e])(c)}return o=o||e.access_token,i||null===n||v.push((r=e,function(){(n||g)(r),a(r)})),i||null===t||y.push((s=e,function(e){(t||function(e,t){D.Login.fillUserInfo(t.btnId,e)})(e,s)})),c?d():o?l((function(t){t?D.api("get_user_info").success((function(e){c=e.data,d()})).error((function(e){D.Console.error("Login => getMe 鑾峰彇鏁版嵁澶辫触"+e)})):a(e)})):a(e),D.valueStat(350368,1,0),null}a.TEMPLATE=['<a href="javascript:;" onclick="{onclick};"><img src="{src}" alt="{alt}" border="0"/></a>'].join(""),(a.getBtnHtml=function(e,t,n){return arguments.callee.MODE[t]&&arguments.callee.MODE[t](e,n)}).MODE={standard:function(e){var t=1e4+~~f.get("__qc_wId");return p.format(a.TEMPLATE,{src:"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_"+e.size+".png",onclick:e.fullWindow?"return window.open('"+e.url+"', 'oauth2Login_"+t+"');":"return window.open('"+e.url+"', 'oauth2Login_"+t+"' ,'height=525,width=585, toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes')",alt:"QQ鐧诲綍"})},showUserAfterLogin:function(e,t){var n=u.stringify(t);t=(r[t.size]||r.B_M).size.split("*");return'<iframe frameBorder="0" scrolling="no" src="https://qzs.qq.com/qzone/openapi/frames/login_button.html#para='+encodeURIComponent(n)+'" width="'+Math.max(200,t[0])+'" height="'+t[1]+'" allowTransparency="true"></iframe>'}},a._getPopupUrl=function(e){var t=e.scope||"all",n=e.redirectURI||"",o=e.display||"";e=e.appId||D.getAppId(),n=n||"http%3A%2F%2Fqzonestyle.gtimg.cn%2Fqzone%2Fopenapi%2Fredirect-1.0.1.html";return _<=6&&(n="https://graph.qq.com/jsdkproxy/redirect_ie6.html#"+encodeURIComponent(n)),e=["client_id="+e,"response_type=token"],t&&e.push("scope="+t),n&&(0<n.indexOf("://")&&(n=encodeURIComponent(n)),e.push("redirect_uri="+n)),"mobile"==o&&e.push("display="+o),"https://graph.qq.com/oauth2.0/authorize?"+e.join("&")};var c,d=function(){return o||function(){var e,t,n=location&&location.hash.match(/access_token=([^&]*)/i);if((t=f.get("__qc__k"))&&(e=t.split("="),t.length&&2!=e.length))throw new Error("QQConnect -> cookie : __qc__k 鏍煎紡闈炴硶");o=n&&n[1]||e&&e[1]}()},l=function(){var e,t=[];function r(e,n,o){for(var i;i=t.shift();)setTimeout(function(t){return function(){t(e,n,o)}}(i))}d();var a,s,c=function(e){m.error(e+" : _getMeError"),window.callback({error_description:e})},l=function(t){s=s||window.callback,t&&l.cbPool.push(t),window.callback=function(t){if(clearTimeout(e),t.openid){var r,c=n=(i=t).openid,d=o;for(m.log(" getMe => openId & accessToken "+[c,d,a?"閫氳繃me鎺ュ彛":"閫氳繃鏈湴"]);r=l.cbPool.shift();)r(c,o,t);a=null,window.callback=s}},d()?i?window.callback(i):a||((a=document.createElement("script")).type="text/javascript",a.src="https://graph.qq.com/oauth2.0/me?access_token="+o,a.onerror=function(){c("me鎺ュ彛杩斿洖鏍煎紡閿欒")},(t=document.getElementsByTagName("head")[0])&&t.appendChild(a),e=setTimeout((function(){c("me鎺ュ彛瓒呮椂")}),5e3)):c("access_token涓㈠け")};return l.cbPool=[],function(e,n){n?t.unshift(e):t.push(e),l(r),D.valueStat(350371,1,0)}}(),y=[],v=[];return h.extend(s,{insertButton:a,getMe:l,showPopup:function(e){return e=a._getPopupUrl(e||{}),D.valueStat(350369,1,0),window.open(e)},signOut:function(){n="",document.cookie=["__qc__k=","path=/;"].join(";"),function(){o=void 0,c=i=null;for(var e=0;e<v.length;e++)(0,v[e])();D.valueStat(350370,1,0)}()},_getTokenKeys:function(){return{openid:n,accessToken:o}},check:function(){return D.valueStat(350372,1,0),!!o},_check:function(){return!!(i&&o&&c)},_onLoginBack:function(e,t,o){e&&t&&(n=e,document.cookie=["__qc__k="+["TC_MK",t].join("="),"path=/"].join(";")),i={client_id:i&&i.client_id||-1,openid:n},d(),D.Event.domReady((function(){D.init(),o||D.Login({},null,null,1)}))},reset:function(){y=[],v=[]},fillUserInfo:function(e,n){var o=t(e);e=['<span class="qc_item figure"><img src="{figureurl}" class="{size_key}"/></span>','<span class="qc_item nickname" style="margin-left:6px;">{nickname}</span>','<span class="qc_item logout"><a href="javascript:QC.Login.signOut();" style="margin-left:6px;">閫€鍑�</a></span>'].join("");o&&(o.innerHTML=D.String.format(e,{nickname:D.String.escHTML(n.nickname),figureurl:n.figureurl}))}}),s}();var O=-1,F=null,A="";e.init=function(t){F=t=t||F||{};var n=e.Login._getTokenKeys();if(O=t.appId,A=t.redirectURI,n.openid)e.Login.getMe((function(n,o,i){!~~i.error&&(i.client_id<=0||i.client_id%1e6==t.appId%1e6)?(O=i.client_id=t.appId||t.clientId||t.app_id||t.client_id||-1,e.api._ready&&e.api._ready()):e.Console.error(i.error_description||"appId/client_id 涓嶅尮閰�")}),!0);else if(x.invoke(),j.length&&-1<t.appId)for(var o=0;o<j.length;o++)j[o]()},e.getAppId=function(e){return e&&j.push((function(){e.callee.apply(null,e)})),O},e.invoke=function(){x.generateProxy("FLAProxy").invoke(arguments)};var z,Q,B,$=(z={get_user_info:{api:"https://graph.qq.com/user/get_user_info",method:"get",statId:350373},add_topic:{api:"https://graph.qq.com/shuoshuo/add_topic",method:"post",statId:350374},add_one_blog:{api:"https://graph.qq.com/blog/add_one_blog",method:"post",statId:350375},add_album:{api:"https://graph.qq.com/photo/add_album",method:"post",statId:350376},upload_pic:{api:"https://graph.qq.com/photo/upload_pic",method:"post",statId:350377},list_album:{api:"https://graph.qq.com/photo/list_album",method:"get",statId:350391},add_share:{api:"https://graph.qq.com/share/add_share",method:"post",statId:350378},check_page_fans:{api:"https://graph.qq.com/user/check_page_fans",method:"get",statId:350379},add_t:{api:"https://graph.qq.com/t/add_t",method:"post",statId:350380},add_pic_t:{api:" https://graph.qq.com/t/add_pic_t",method:"post",statId:350381},del_t:{api:"https://graph.qq.com/t/del_t",method:"post",statId:350382},get_repost_list:{api:"https://graph.qq.com/t/get_repost_list",method:"get",statId:350383},get_info:{api:"https://graph.qq.com/user/get_info",method:"get",statId:350384},get_other_info:{api:"https://graph.qq.com/user/get_other_info",method:"get",statId:350385},get_fanslist:{api:"https://graph.qq.com/relation/get_fanslist",method:"get",statId:350386},get_idollist:{api:"https://graph.qq.com/relation/get_idollist",method:"get",statId:350387},add_idol:{api:"https://graph.qq.com/relation/add_idol",method:"post",statId:350388},del_idol:{api:"https://graph.qq.com/relation/del_idol",method:"post",statId:350389},get_tenpay_addr:{api:"https://graph.qq.com/cft_info/get_tenpay_addr",method:"get",statId:350390}},function(e){return z[e]||{}});Q=n("appid"),B=n("redirecturi"),Q&&(e.Console.info("妫€娴嬪埌鑷姩鍒濆鍖栧弬鏁癨nappId:"+Q+"\nrUri:"+B),isNaN(Q)?e.Console.error("鍙傛暟appid閿欒"):B&&0!=B.indexOf("http")?e.Console.error("鍙傛暟rediectURI閿欒"):e.Event.domReady((function(){e.init({appId:Q,redirectURI:B})}))),n("callback")?(window._b_is_qc_cb_win=!0,D.Login.getMe((function(e,t,n){if(window.opener){D.Console.info("cb_method_1:window.opener.QC.Login._onLoginBack");try{window.opener.QC.Login._onLoginBack(e,t)}catch(o){D.Console.info("cb_method_2:window.opener.postMessage");try{window.opener.postMessage("invoke@@@QC.Login._onLoginBack#"+[e,t].join(","),"*")}catch(i){D.Console.info("cb_method_3:QC.invoke");try{D.invoke("QC.Login._onLoginBack",e,t)}catch(r){D.Console.info("cb_method_5:[empty]")}}}}else{D.Console.info("cb_method_4:QC.invoke");try{D.invoke("QC.Login._onLoginBack",e,t)}catch(o){}}setTimeout((function(){(7<_?window.open("about:blank","_self"):window).close()}),1e3)})),D.pv("graph.qq.com","/open/connect/channel/pv")):(Q&&D.Login.check()?(D.Event.domReady((function(){D.Login.getMe((function(e,t){D.Login._onLoginBack(e,t,1)}))})),D.pv("graph.qq.com","/open/connect/logged_in/pv")):D.pv("graph.qq.com","/open/connect/pv"),D.reportBNL(11236,Q))}(D),window.qc=D,"function"==typeof Object.freeze&&Object.freeze(D);var F="/static/png/qq-f0d75e21.png";export{R as F,D as Q,F as q,O as u};
