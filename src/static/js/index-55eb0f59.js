var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,o=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&i(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{d as c,y as d,r as u,o as p,R as h,t as g,at as f,aj as m,av as v,aw as w,a7 as y,a as D,a3 as x,a4 as b,ax as V,ay as $,az as j,g as k,b as C,aa as S,e as _,n as P,V as O,j as R,k as z,h as N,ap as E,F as I,q as K,p as L,f as T,X as A,l as U,x as B,v as F,T as J}from"./index-7e9c327e.js";import{g as M}from"./grid-429fa51c.js";import{h as q}from"./hot-15b909cf.js";import{e as X}from"./empty-6f34f8e8.js";import{_ as Y}from"./plugin-vue_export-helper-46f75680.js";var G=c({name:"pindou",components:{},props:{},emits:[],setup(e,a){const{proxy:t}=k(),l=d();let s=u({list:[],isloading:!0,searchValue:"",searchColorValue:"",searchData:[],filterValue:[0],filterOptions:[{value:0,label:"全部"},{value:1,label:"低分辨率"},{value:2,label:"中分辨率"},{value:3,label:"高分辨率"},{value:4,label:"动态"},{value:5,label:"静态"}],currentPage:1,total:0,previewSearchData:[],previewData:null,previewLoading:!1});const r={getFrameImg:D((()=>e=>e&&""!==e?`${b()}pindouImg/${e}.png`:M))};let i={handleSearchColor(){if(""===s.searchColorValue.trim())return s.previewSearchData=[],void t.$message.warning("请输入拼豆色号");let e=new RegExp(s.searchColorValue,"i");s.previewSearchData=s.previewData.value.data.filter((a=>e.test(a.color)||e.test(a.name)))},search(){if(""===s.searchValue.trim())return t.$message.warning("请输入搜索词");let e=new RegExp(s.searchValue,"i");s.searchData=s.list.filter((a=>e.test(a.data.pindouName)||e.test(a.data.pindouKey)||e.test(a.data.desc)))},handleDownload({pindouKey:e,pindouName:a}){x.get(`${b()}pindou/${e}.json`).then((a=>{let t=a.data;V(JSON.stringify(t),"application/json",e)})).catch((e=>{t.$message.error("下载失败 - "+e)}))},handlePreview({pindouKey:e,pindouName:a}){s.previewSearchData=[],x.get(`${b()}pindou/${e}.json`).then((t=>{let l=t.data;s.previewLoading=!0,s.previewData={id:e,value:{data:l,label:a}}})).catch((e=>{s.previewLoading=!1,t.$message.error("预览失败 - "+e)}))},handleCurrentChange(e){s.currentPage=e,i.getData()},getData(){x.get(`${b()}json/pindou${s.currentPage}.json`).then((e=>{if("coco.zwpyyds.com"===window.location.hostname)return s.total=1,s.list=e.data.data.filter((e=>"coco"===e.data.pindouKey)),void(s.isloading=!1);s.total=e.data.total,s.list=$(e.data.data,"createAt"),s.list=s.list.filter((e=>e.data.isEnable&&1===e.data.isEnable)),s.isloading=!1})).catch((e=>{t.$message.error(e),s.isloading=!1}))},filterData(e,a,t){let l=new RegExp(s.searchValue,"i");return e.filter((e=>""!==s.searchValue?(l.test(e.data.projectName)||l.test(e.data.desc))&&e.data.width*e.data.height<=a&&e.data.width*e.data.height>t:e.data.width*e.data.height<=a&&e.data.width*e.data.height>t))},filterData2(e,a){let t=new RegExp(s.searchValue,"i");return e.filter((e=>""!==s.searchValue?(t.test(e.data.projectName)||t.test(e.data.desc))&&e.data.tag.includes(a):e.data.tag.includes(a)))},handleFilter(e){if(s.isloading=!0,s.filterValue.length<=0&&(s.filterValue=[0]),s.filterValue.length>1)if(0===s.filterValue[s.filterValue.length-1])s.filterValue=[0];else{let e=s.filterValue.findIndex((e=>0===e));e>=0&&s.filterValue.splice(e,1)}if(s.searchData=[],s.filterValue.includes(0)&&(s.searchData=[...s.searchData,...i.filterData(s.list,4900,36)]),s.filterValue.includes(1)&&(s.searchData=[...s.searchData,...i.filterData(s.list,400,36)]),s.filterValue.includes(2)&&(s.searchData=[...s.searchData,...i.filterData(s.list,1600,400)]),s.filterValue.includes(3)&&(s.searchData=[...s.searchData,...i.filterData(s.list,4900,1600)]),s.filterValue.includes(4)){i.filterData2(s.list,1).forEach((e=>{s.searchData.find((a=>a.id===e.id))||s.searchData.push(e)}))}if(s.filterValue.includes(5)){i.filterData2(s.list,0).forEach((e=>{s.searchData.find((a=>a.id===e.id))||s.searchData.push(e)}))}s.isloading=!1},handleReset(){s.searchValue=""},handleImport({pindouKey:e,pindouName:a}){x.get(`${b()}pindou/${e}.json`).then((s=>{let r=s.data;l.savePindouData({id:e,value:{data:r,label:a}}).then((e=>{if(e){let e=Object.keys(l.pindouMaps).map((e=>({value:e,label:l.pindouMaps[e].label})));t.$utils.cache.pindou.set(JSON.stringify(e)),t.$message.success(t.$t("message.importSucceeded"))}})).catch((e=>{t.$message.error(t.$t("message.importFailed"))}))})).catch((e=>{t.$message.error("下载失败 - "+e)}))},onSortPindouList(){s.previewSearchData.length?s.previewSearchData=j(s.previewSearchData):s.previewData.value.data=j(s.previewData.value.data)}};return p((()=>{i.getData()})),h((()=>{""===s.searchValue.trim()&&(s.searchData=[])})),n(o(n(o(o({},g(s)),i),{Download:f,ArrowDownBold:m}),r),{hexToRgba:v,extractRgbaToString:w,copyText:y})}});const H={class:"full-layout scrollbar routerview flex-center"},Q={class:"full-layout flex flex-column","element-loading-background":"#00000000"},W={class:"flex-start searchBox"},Z={key:0,class:"full-layout scrollbar grid-box scrollAuto"},ee={class:"frameImg"},ae=["src"],te={class:"info"},le={class:"flex-between",style:{"padding-bottom":"5px"}},se=["title"],re={class:"project-time text-left"},ie={class:"twoline project-desc"},oe={key:1,class:"full-layout flex-center scrollbar scrollAuto"},ne={class:"flex-start",style:{"margin-bottom":"20px",gap:"20px",padding:"0 10px"}},ce={class:"input-search",style:{width:"250px"}},de={class:"full-layout",style:{height:"calc(100% - 60px)"}},ue={class:"flex-center flex-warp scrollbar scrollY full-h",style:{"column-gap":"15px",padding:"10px"}},pe=["onClick"],he={class:"color-name"},ge={class:"color-meta flex-column-start",style:{gap:"10px"}},fe={style:{"font-size":"15px"}},me={style:{"font-size":"12px"}};var ve=Y(G,[["render",function(e,a,t,l,s,r){const i=C("search"),o=C("el-icon"),n=C("el-input"),c=C("el-skeleton-item"),d=C("el-skeleton"),u=C("el-image"),p=C("el-tag"),h=C("el-button"),g=C("el-dropdown-item"),f=C("el-dropdown-menu"),m=C("el-dropdown"),v=C("el-tooltip"),w=C("el-empty"),y=C("Search"),D=C("Sort"),x=C("el-drawer"),b=S("loading");return _(),P("div",H,[O((_(),P("div",Q,[R("div",W,[z(n,{modelValue:e.searchValue,"onUpdate:modelValue":a[0]||(a[0]=a=>e.searchValue=a),style:{width:"150px"},placeholder:"请搜索拼豆",onKeyup:E(e.search,["enter"])},{prefix:N((()=>[z(o,{class:"el-input__icon"},{default:N((()=>[z(i)])),_:1})])),_:1},8,["modelValue","onKeyup"]),R("button",{class:"pixelButton",onClick:a[1]||(a[1]=(...a)=>e.handleReset&&e.handleReset(...a))},"重 置"),R("button",{class:"pixelButton",onClick:a[2]||(a[2]=a=>e.$router.push("/customPindou"))},"自定义拼豆")]),!e.list.length&&!e.searchData.length||e.isloading?e.isloading||e.searchData.length&&e.list.length?L("",!0):(_(),P("div",oe,[z(w,{image:X,description:"空空如也","image-size":200},null,8,["image"])])):(_(),P("div",Z,[(_(!0),P(I,null,K(e.searchData.length?e.searchData:e.list,(a=>(_(),P("div",{key:a.id,class:"download-item"},[R("div",ee,[z(u,{src:e.getFrameImg(a.data.pic),fit:"cover",class:"full-layout"},{placeholder:N((()=>[z(d,{animated:"",class:"full-layout"},{template:N((()=>[z(c,{variant:"image",style:{height:"100%"}})])),_:1})])),_:2},1032,["src"]),a.data.isTop?(_(),P("img",{key:0,src:q,class:"top"},null,8,ae)):L("",!0),""!==a.data.tip?(_(),T(p,{key:1,size:"small",type:"success",class:"size",effect:"dark"},{default:N((()=>[U(B(a.data.tip),1)])),_:2},1024)):L("",!0)]),R("div",te,[R("div",le,[R("h4",{class:"oneline project-name",title:a.data.pindouName+a.data.pindouKey.toUpperCase()},B(a.data.pindouName),9,se),z(m,{trigger:"click",size:"small"},{dropdown:N((()=>[z(f,null,{default:N((()=>[z(g,{onClick:t=>e.handleImport(a.data),icon:"Upload"},{default:N((()=>[U(B(e.$t("message.import")),1)])),_:2},1032,["onClick"]),z(g,{onClick:t=>e.handlePreview(a.data),icon:"View"},{default:N((()=>[U(B(e.$t("message.preview")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),default:N((()=>[z(h,{type:"primary",icon:e.ArrowDownBold,size:"small",style:{"margin-left":"5px"}},null,8,["icon"])])),_:2},1024)]),R("div",re,B(a.data.createAt),1),z(v,{content:a.data.desc,effect:"light"},{default:N((()=>[R("div",ie,B(a.data.desc),1)])),_:2},1032,["content"])])])))),128))])),e.previewData?(_(),T(x,{key:2,modelValue:e.previewLoading,"onUpdate:modelValue":a[5]||(a[5]=a=>e.previewLoading=a),title:`${e.previewData.value.label} - 色号预览（${e.previewData.value.data.length}色）`,direction:"rtl",size:"80%",onClose:a[6]||(a[6]=a=>{e.previewLoading=!1,e.previewData=null,e.searchColorValue=""})},{default:N((()=>[R("div",ne,[R("div",ce,[z(o,null,{default:N((()=>[z(y)])),_:1}),O(R("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=a=>e.searchColorValue=a),placeholder:"请搜索色号",onKeyup:a[4]||(a[4]=E(((...a)=>e.handleSearchColor&&e.handleSearchColor(...a)),["enter"]))},null,544),[[A,e.searchColorValue]])]),z(o,{style:{"margin-right":"15px"},class:"pointer",size:"16",onClick:e.onSortPindouList},{default:N((()=>[z(D)])),_:1},8,["onClick"])]),R("div",de,[R("ul",ue,[(_(!0),P(I,null,K(e.previewSearchData.length?e.previewSearchData:e.previewData.value.data,(a=>(_(),P("li",{key:a.name,class:"color-item",onClick:t=>e.copyText(`#${a.color}`)},[R("div",{style:F({backgroundColor:`#${a.color}`}),class:"color-preview"},[R("div",he,B(a.name),1)],4),R("div",ge,[R("span",fe,B(`#${a.color}`.toUpperCase()),1),R("span",me,B(e.extractRgbaToString(e.hexToRgba(a.color))),1)])],8,pe)))),128))])])])),_:1},8,["modelValue","title"])):L("",!0)])),[[b,e.isloading]]),(_(),T(J,{to:"body"}))])}],["__scopeId","data-v-ec2b6304"]]);export{ve as default};
