var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(l,t,o)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[t]=o,s=(e,l)=>{for(var t in l||(l={}))a.call(l,t)&&n(e,t,l[t]);if(o)for(var t of o(l))i.call(l,t)&&n(e,t,l[t]);return e},d=(e,o)=>l(e,t(o));import{d as r,y as u,z as p,r as c,M as g,t as f,b as h,e as m,f as b,h as x,j as w,k as y,l as v,x as V,n as T,F as L,p as P,ae as S,ak as C,aA as R,aB as U,g as k,aa as _,V as j,v as $,s as z,Y as G,q as H,o as E,at as F,a as D}from"./index-7e9c327e.js";import{W as I}from"./worker-efe1e0e9.js";import{p as A,_ as O}from"./pro-5bf8b402.js";import{_ as W}from"./plugin-vue_export-helper-46f75680.js";import{I as B}from"./IframeDialog-305e487f.js";const M=r({name:"PixelDrawDialog",components:{},props:{visible:{type:Boolean,default:!1}},emits:["close","import"],setup(e,l){const t=u(),{proxy:o}=k(),a=p();let i=c({loading:!1,dialogVisible:e.visible,mode:"NORMAL",targetSize:0,fileList:[],fileListTemp:[],fileTypes:["image/jpg","image/jpeg","image/png"],pxSize:1,gdSize:0,pxType:1,poster:"",transformPoster:"",scrollHeight:0,isLoad:!1,gdColor:"#808080",aiImageResults:[],compressSize:.8}),n={handleChangeAI(){if(t.checkVipFunction("AIPixelDraw"))return i.mode="NORMAL"},handleChangeTargetSize(){i.aiImageResults&&i.aiImageResults.length&&(i.transformPoster="data:image/png;base64,"+i.aiImageResults[i.targetSize].image)},handleExceed(e,l){a.value.clearFiles();const t=e[0];t.uid=S(),a.value.handleStart(t)},handleAIChangeImage(e){let l={image:e.split(",")[1]};o.$http.AIPixelDraw(l).then((e=>{var l;i.loading=!1;let t=e.data.content;(null==t?void 0:t.data)&&(null==(l=null==t?void 0:t.data)?void 0:l.images)&&(i.aiImageResults=t.data.images||[],i.transformPoster="data:image/png;base64,"+i.aiImageResults[i.targetSize].image,o.$message.success("转换完成"),C((()=>{let e=o.$refs.scroll;e&&(i.scrollHeight=e.scrollHeight,e.scrollTop=i.scrollHeight)})))})).catch((e=>{i.loading=!1}))},handleClose(){i.dialogVisible=!1,l.emit("close")},handleConfirm(){if(!i.fileList.length)return o.$message.warning("上传文件不能为空");i.loading=!0;const e=new Image,l=URL.createObjectURL(i.fileList[0].raw);e.src=l,e.onload=function(){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const a=t.getContext("2d");if(a.drawImage(e,0,0),"AI"===i.mode)return e.width>1024||e.height>1024?(i.loading=!1,o.$message.warning("图片分辨率必须小于1024")):void n.handleAIChangeImage(t.toDataURL("image/jpeg",i.compressSize));const s=a.getImageData(0,0,t.width,t.height).data,d=new I;d.postMessage({type:12,variables:s,pxSize:i.pxSize,options:{width:e.width,height:e.height}}),d.onmessage=e=>{URL.revokeObjectURL(l);const s=e.data;i.transformPoster=n.handleDrawImage(t,a,s),i.loading=!1,i.transformPoster&&(o.$message.success("转换完成"),C((()=>{let e=o.$refs.scroll;e&&(i.scrollHeight=e.scrollHeight,e.scrollTop=i.scrollHeight)})))}}},handleDrawImage(e,l,t){if(l.clearRect(0,0,e.width,e.height),1===i.pxType)for(let o=0;o<t.length;o++){let e=t[o][0]*i.pxSize,a=t[o][1]*i.pxSize;l.fillStyle=t[o][2],l.fillRect(e,a,i.pxSize,i.pxSize)}else if(2===i.pxType){let e=i.pxSize/2-.5;for(let o=0;o<t.length;o++){let a=t[o][0]*i.pxSize+e,n=t[o][1]*i.pxSize+e;l.fillStyle=t[o][2],l.beginPath(),l.arc(a+.5,n+.5,e,0,2*Math.PI),l.closePath(),l.fill()}}else if(3===i.pxType){let e=10,o=i.pxSize,a=i.pxSize;for(let n=0;n<t.length;n++){let s=t[n][0]*i.pxSize,d=t[n][1]*i.pxSize;l.fillStyle=t[n][2],l.beginPath(),l.moveTo(s+e,d),l.lineTo(s+o-e,d),l.arcTo(s+o,d,s+o,d+e,e),l.lineTo(s+o,d+a-e),l.arcTo(s+o,d+a,s+o-e,d+a,e),l.lineTo(s+e,d+a),l.arcTo(s,d+a,s,d+a-e,e),l.lineTo(s,d+e),l.arcTo(s,d,s+e,d,e),l.closePath(),l.fill()}}if(i.gdSize>0){if(i.gdSize>=i.pxSize)return o.$message.warning("网格尺寸应小于像素尺寸"),null;let t=Math.floor(e.width/i.pxSize),a=Math.floor(e.height/i.pxSize);l.strokeStyle=i.gdColor,l.lineWidth=i.gdSize,l.beginPath();for(let e=0;e<=a;e++)l.moveTo(0,e*i.pxSize),l.lineTo(i.pxSize*t,e*i.pxSize);for(let e=0;e<=t;e++)l.moveTo(e*i.pxSize,0),l.lineTo(e*i.pxSize,a*i.pxSize);l.stroke()}return e.toDataURL("image/png")},handleChange(e,l){if(i.fileList=l,i.fileTypes.includes(e.raw.type))i.poster=URL.createObjectURL(e.raw);else{let l=i.fileList.findIndex((l=>l.uid===e.uid));i.fileList.splice(l,1),o.$message.warning("导入文件格式不正确")}},handleDownload(){R(i.transformPoster,"像素画 - "+U(i.fileList[0].name))}};return g((()=>{URL.revokeObjectURL(i.poster)})),d(s(s({},f(i)),n),{uploadRef:a})}}),N={class:"content scrollbar",ref:"scroll"},X={key:1,class:"poster flex-center"},Y=["src"],q={style:{"margin-bottom":"10px",gap:"10px"},class:"flex-column-center"},J={class:"flex-between full-w"},K={style:{width:"100px",gap:"10px"},class:"flex-start"},Z=["src"],Q={class:"flex-between full-w"},ee={class:"flex-between full-w"},le={class:"flex-between full-w"},te={class:"flex-between full-w"},oe={class:"flex-between full-w"},ae={class:"flex-between full-w"},ie={key:2,class:"flex-column-start full-w",style:{gap:"5px"}},ne={class:"flex-between full-w"},se={class:"poster flex-center"},de=["src"],re={class:"dialog-footer"};var ue,pe=W(M,[["render",function(e,l,t,o,a,i){const n=h("upload-filled"),s=h("el-icon"),d=h("el-upload"),r=h("el-switch"),u=h("el-slider"),p=h("el-option"),c=h("el-select"),g=h("el-color-picker"),f=h("el-radio"),S=h("el-radio-group"),C=h("el-button"),R=h("el-dialog");return m(),b(R,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[8]||(l[8]=l=>e.dialogVisible=l),title:"像素画转换","before-close":e.handleClose,"close-on-click-modal":!1,"lock-scroll":!1,class:"z-dialog",center:"",width:400},{footer:x((()=>[w("span",re,[y(C,{onClick:e.handleClose},{default:x((()=>[v(V(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),y(C,{type:"primary",onClick:e.handleConfirm,loading:e.loading},{default:x((()=>l[22]||(l[22]=[v("转 换")]))),_:1,__:[22]},8,["onClick","loading"])])])),default:x((()=>[w("div",N,[y(d,{ref:"uploadRef",class:"flex-column-center","show-file-list":!1,drag:"",limit:1,"auto-upload":!1,accept:".png,.jpg,.jpeg","on-change":e.handleChange,"on-exceed":e.handleExceed,"file-list":e.fileList,"onUpdate:fileList":l[0]||(l[0]=l=>e.fileList=l)},{tip:x((()=>l[10]||(l[10]=[w("div",{class:"el-upload__tip"}," 支持上传 .png/jpg 文件 ",-1)]))),default:x((()=>[""===e.poster?(m(),T(L,{key:0},[y(s,{class:"el-icon--upload"},{default:x((()=>[y(n)])),_:1}),l[9]||(l[9]=w("div",{class:"el-upload__text"},[v(" 拖拽文件到这 或者 "),w("em",null,"点击这里上传")],-1))],64)):(m(),T("div",X,[w("img",{src:e.poster,style:{"object-fit":"contain"},draggable:"false",class:"image-pixelated"},null,8,Y)]))])),_:1},8,["on-change","on-exceed","file-list"]),w("div",q,[w("div",J,[w("p",K,[l[11]||(l[11]=v(" AI转换 ")),w("img",{style:{width:"20px"},src:A||O},null,8,Z)]),y(r,{modelValue:e.mode,"onUpdate:modelValue":l[1]||(l[1]=l=>e.mode=l),"active-value":"AI","inactive-value":"NORMAL",onChange:e.handleChangeAI},null,8,["modelValue","onChange"])]),"AI"===e.mode?(m(),T(L,{key:0},[w("div",Q,[l[12]||(l[12]=w("p",{style:{width:"100px"}},"图片压缩",-1)),y(u,{modelValue:e.compressSize,"onUpdate:modelValue":l[2]||(l[2]=l=>e.compressSize=l),min:.1,max:1,"show-input":"",step:.1},null,8,["modelValue"])]),w("div",ee,[l[13]||(l[13]=w("p",{style:{width:"100px"}},"目标尺寸",-1)),y(c,{modelValue:e.targetSize,"onUpdate:modelValue":l[3]||(l[3]=l=>e.targetSize=l),placeholder:"请选择目标尺寸",onChange:e.handleChangeTargetSize},{default:x((()=>[y(p,{label:"32x32",value:3}),y(p,{label:"48x48",value:2}),y(p,{label:"64x64",value:1}),y(p,{label:"128x128",value:0})])),_:1},8,["modelValue","onChange"])])],64)):(m(),T(L,{key:1},[w("div",le,[l[14]||(l[14]=w("p",{style:{width:"100px"}},"像素尺寸",-1)),y(u,{modelValue:e.pxSize,"onUpdate:modelValue":l[4]||(l[4]=l=>e.pxSize=l),"show-input":"",min:0,max:100},null,8,["modelValue"])]),w("div",te,[l[15]||(l[15]=w("p",{style:{width:"100px"}},"网格尺寸",-1)),y(u,{modelValue:e.gdSize,"onUpdate:modelValue":l[5]||(l[5]=l=>e.gdSize=l),"show-input":"",min:0,max:20},null,8,["modelValue"])]),w("div",oe,[l[16]||(l[16]=w("p",{style:{width:"100px"}},"网格颜色",-1)),y(g,{modelValue:e.gdColor,"onUpdate:modelValue":l[6]||(l[6]=l=>e.gdColor=l)},null,8,["modelValue"])]),w("div",ae,[l[19]||(l[19]=w("p",{style:{width:"100px"}},"像素类型",-1)),y(S,{modelValue:e.pxType,"onUpdate:modelValue":l[7]||(l[7]=l=>e.pxType=l)},{default:x((()=>[y(f,{value:1},{default:x((()=>l[17]||(l[17]=[v("方形")]))),_:1,__:[17]}),y(f,{value:2},{default:x((()=>l[18]||(l[18]=[v("圆形")]))),_:1,__:[18]})])),_:1},8,["modelValue"])])],64)),e.transformPoster?(m(),T("div",ie,[w("p",ne,[l[21]||(l[21]=v(" 预 览 ")),y(C,{type:"success",text:"",onClick:e.handleDownload},{default:x((()=>l[20]||(l[20]=[v("下 载")]))),_:1,__:[20]},8,["onClick"])]),w("div",se,[w("img",{src:e.poster,style:{"object-fit":"contain"},draggable:"false",class:"image-pixelated"},null,8,de)])])):P("",!0)])],512)])),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-72b55cd6"]]),ce={exports:{}};ue=ce,function(e){var l=function(){return{escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:l,mimeType:function(e){var t,o,a=l(e).toLowerCase();return(t="application/font-woff",o="image/jpeg",{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:o,jpeg:o,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[a]||""},dataAsUrl:function(e,l){return"data:"+l+";base64,"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(e){return e.toBlob?new Promise((function(l){e.toBlob(l)})):function(e){return new Promise((function(l){for(var t=window.atob(e.toDataURL().split(",")[1]),o=t.length,a=new Uint8Array(o),i=0;i<o;i++)a[i]=t.charCodeAt(i);l(new Blob([a],{type:"image/png"}))}))}(e)},resolveUrl:function(e,l){var t=document.implementation.createHTMLDocument(),o=t.createElement("base");t.head.appendChild(o);var a=t.createElement("a");return t.body.appendChild(a),o.href=l,a.href=e,a.href},getAndEncode:function(e){var l=3e4;return s.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),new Promise((function(t){var o,a=new XMLHttpRequest;if(a.onreadystatechange=n,a.ontimeout=d,a.responseType="blob",a.timeout=l,a.open("GET",e,!0),a.send(),s.impl.options.imagePlaceholder){var i=s.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(o=i[1])}function n(){if(4===a.readyState)if(200===a.status){var l=new FileReader;l.onloadend=function(){var e=l.result.split(/,/)[1];t(e)},l.readAsDataURL(a.response)}else o?t(o):r("cannot fetch resource: "+e+", status: "+a.status)}function d(){o?t(o):r("timeout of "+l+"ms occured while fetching resource: "+e)}function r(e){t("")}}))},uid:(e=0,function(){return"u"+l()+e++;function l(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}),delay:function(e){return function(l){return new Promise((function(t){setTimeout((function(){t(l)}),e)}))}},asArray:function(e){for(var l=[],t=e.length,o=0;o<t;o++)l.push(e[o]);return l},escapeXhtml:function(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(e){return new Promise((function(l,t){var o=new Image;o.onload=function(){l(o)},o.onerror=t,o.src=e}))},width:function(e){var l=t(e,"border-left-width"),o=t(e,"border-right-width");return e.scrollWidth+l+o},height:function(e){var l=t(e,"border-top-width"),o=t(e,"border-bottom-width");return e.scrollHeight+l+o}};var e;function l(e){var l=/\.([^\.\/]*?)$/g.exec(e);return l?l[1]:""}function t(e,l){var t=window.getComputedStyle(e).getPropertyValue(l);return parseFloat(t.replace("px",""))}}(),t=function(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,l,i){return n()?Promise.resolve(e):Promise.resolve(e).then(o).then((function(t){var o=Promise.resolve(e);return t.forEach((function(e){o=o.then((function(t){return a(t,e,l,i)}))})),o}));function n(){return!t(e)}},shouldProcess:t,impl:{readUrls:o,inline:a}};function t(l){return-1!==l.search(e)}function o(t){for(var o,a=[];null!==(o=e.exec(t));)a.push(o[1]);return a.filter((function(e){return!l.isDataUrl(e)}))}function a(e,t,o,a){return Promise.resolve(t).then((function(e){return o?l.resolveUrl(e,o):e})).then(a||l.getAndEncode).then((function(e){return l.dataAsUrl(e,l.mimeType(t))})).then((function(o){return e.replace((a=t,new RegExp("(url\\(['\"]?)("+l.escape(a)+")(['\"]?\\))","g")),"$1"+o+"$3");var a}))}}(),o=function(){return{resolveAll:function(){return e().then((function(e){return Promise.all(e.map((function(e){return e.resolve()})))})).then((function(e){return e.join("\n")}))},impl:{readAll:e}};function e(){return Promise.resolve(l.asArray(document.styleSheets)).then((function(e){var t=[];return e.forEach((function(e){try{l.asArray(e.cssRules||[]).forEach(t.push.bind(t))}catch(o){}})),t})).then((function(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return t.shouldProcess(e.style.getPropertyValue("src"))}))})).then((function(l){return l.map(e)}));function e(e){return{resolve:function(){var l=(e.parentStyleSheet||{}).href;return t.inlineAll(e.cssText,l)},src:function(){return e.style.getPropertyValue("src")}}}}}(),a=function(){return{inlineAll:function o(a){return a instanceof Element?i(a).then((function(){return a instanceof HTMLImageElement?e(a).inline():Promise.all(l.asArray(a.childNodes).map((function(e){return o(e)})))})):Promise.resolve(a);function i(e){var l=e.style.getPropertyValue("background");return l?t.inlineAll(l).then((function(l){e.style.setProperty("background",l,e.style.getPropertyPriority("background"))})).then((function(){return e})):Promise.resolve(e)}},impl:{newImage:e}};function e(e){return{inline:function(t){return l.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(t||l.getAndEncode).then((function(t){return l.dataAsUrl(t,l.mimeType(e.src))})).then((function(l){return new Promise((function(t,o){e.onload=t,e.onerror=o,e.src=l}))}))}}}}(),i=void 0,n=!1,s={toSvg:d,toPng:function(e,l){return r(e,l||{}).then((function(e){return e.toDataURL()}))},toJpeg:function(e,l){return r(e,l=l||{}).then((function(e){return e.toDataURL("image/jpeg",l.quality||1)}))},toBlob:function(e,t){return r(e,t||{}).then(l.canvasToBlob)},toPixelData:function(e,t){return r(e,t||{}).then((function(t){return t.getContext("2d").getImageData(0,0,l.width(e),l.height(e)).data}))},impl:{fontFaces:o,images:a,util:l,inliner:t,options:{}}};function d(e,t){return function(e){void 0===e.imagePlaceholder?s.impl.options.imagePlaceholder=i:s.impl.options.imagePlaceholder=e.imagePlaceholder,void 0===e.cacheBust?s.impl.options.cacheBust=n:s.impl.options.cacheBust=e.cacheBust}(t=t||{}),Promise.resolve(e).then((function(e){return u(e,t.filter,!0)})).then(p).then(c).then((function(e){return t.bgcolor&&(e.style.backgroundColor=t.bgcolor),t.width&&(e.style.width=t.width+"px"),t.height&&(e.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach((function(l){e.style[l]=t.style[l]})),e})).then((function(o){return function(e,t,o){return Promise.resolve(e).then((function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)})).then(l.escapeXhtml).then((function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"})).then((function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+o+'">'+e+"</svg>"})).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}))}(o,t.width||l.width(e),t.height||l.height(e))}))}function r(e,t){return d(e,t).then(l.makeImage).then(l.delay(100)).then((function(o){var a=function(e){var o=document.createElement("canvas");if(o.width=t.width||l.width(e),o.height=t.height||l.height(e),t.bgcolor){var a=o.getContext("2d");a.fillStyle=t.bgcolor,a.fillRect(0,0,o.width,o.height)}return o}(e);return a.getContext("2d").drawImage(o,0,0),a}))}function u(e,t,o){return o||!t||t(e)?Promise.resolve(e).then((function(e){return e instanceof HTMLCanvasElement?l.makeImage(e.toDataURL()):e.cloneNode(!1)})).then((function(o){return function(e,t,o){var a=e.childNodes;return 0===a.length?Promise.resolve(t):i(t,l.asArray(a),o).then((function(){return t}));function i(e,l,t){var o=Promise.resolve();return l.forEach((function(l){o=o.then((function(){return u(l,t)})).then((function(l){l&&e.appendChild(l)}))})),o}}(e,o,t)})).then((function(t){return function(e,t){return t instanceof Element?Promise.resolve().then(o).then(a).then(i).then(n).then((function(){return t})):t;function o(){function o(e,t){function o(e,t){l.asArray(e).forEach((function(l){t.setProperty(l,e.getPropertyValue(l),e.getPropertyPriority(l))}))}e.cssText?t.cssText=e.cssText:o(e,t)}o(window.getComputedStyle(e),t.style)}function a(){function o(o){var a=window.getComputedStyle(e,o),i=a.getPropertyValue("content");if(""!==i&&"none"!==i){var n=l.uid();t.className=t.className+" "+n;var s=document.createElement("style");s.appendChild(d(n,o,a)),t.appendChild(s)}function d(e,t,o){var a="."+e+":"+t,i=o.cssText?n(o):s(o);return document.createTextNode(a+"{"+i+"}");function n(e){var l=e.getPropertyValue("content");return e.cssText+" content: "+l+";"}function s(e){return l.asArray(e).map(t).join("; ")+";";function t(l){return l+": "+e.getPropertyValue(l)+(e.getPropertyPriority(l)?" !important":"")}}}}[":before",":after"].forEach((function(e){o(e)}))}function i(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}function n(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement&&["width","height"].forEach((function(e){var l=t.getAttribute(e);l&&t.style.setProperty(e,l)})))}}(e,t)})):Promise.resolve()}function p(e){return o.resolveAll().then((function(l){var t=document.createElement("style");return e.appendChild(t),t.appendChild(document.createTextNode(l)),e}))}function c(e){return a.inlineAll(e).then((function(){return e}))}ue.exports=s}();var ge=ce.exports;const fe=r({name:"HalfFrameDialog",components:{},props:{visible:{type:Boolean,default:!1}},emits:["close","import"],setup(e,l){const{proxy:t}=k(),o=p();let a=c({loading:!1,dialogVisible:e.visible,fileList:[],fileListTemp:[],fileTypes:["image/jpg","image/jpeg","image/png"],fgStyle:{top:"50%",borderRadius:10,boxShadow:"1px 1px 10px",boxShadowColor:"#80808050"},bgRatioList:[[1440,2560,270,480],[2560,1440,480,270],[1600,1200,400,300]],fgWidth:90,fgHeight:40,bgBlur:10,bgRatio:0,fgPos:30,fgRadius:20,fgShadow:0,fgShadowColor:"#000000",fgPoster:"",bgPoster:"",poster:"",transformPoster:"",scrollHeight:0,isLoad:!1}),i={handleExceed(e,l){o.value.clearFiles();const t=e[0];t.uid=S(),o.value.handleStart(t)},handleClose(){a.dialogVisible=!1,l.emit("close")},handleConfirm(){if(!a.fileList.length)return t.$message.warning("上传文件不能为空");a.loading=!0,setTimeout((()=>{const e=document.getElementById("poster");e.style.width=a.bgRatioList[a.bgRatio][0]+"px",e.style.height=a.bgRatioList[a.bgRatio][1]+"px",ge.toPng(e).then((function(e){const l=new Image;l.src=e,l.onload=function(){const e=document.createElement("canvas");e.width=a.bgRatioList[a.bgRatio][0],e.height=a.bgRatioList[a.bgRatio][1];e.getContext("2d").drawImage(l,0,0),R(e.toDataURL("image/png"),`半框 - ${U(a.fileList[0].name)}`),URL.revokeObjectURL(a.bgPoster),URL.revokeObjectURL(a.fgPoster),a.bgPoster="",a.fgPoster="",a.loading=!1}})).catch((e=>{URL.revokeObjectURL(a.bgPoster),URL.revokeObjectURL(a.fgPoster),a.bgPoster="",a.fgPoster="",a.loading=!1,t.$message.error("保存失败")}))}),200)},handleDrawImage:(e,l,t)=>(l.clearRect(0,0,e.width,e.height),e.toDataURL("image/png")),handleChange(e,l){if(a.fileList=l,a.fileTypes.includes(e.raw.type))a.bgPoster=URL.createObjectURL(e.raw),a.fgPoster=URL.createObjectURL(e.raw);else{let l=a.fileList.findIndex((l=>l.uid===e.uid));a.fileList.splice(l,1),t.$message.warning("导入文件格式不正确")}},handleDownload(){R(a.transformPoster,"半框 - "+U(a.fileList[0].name))}};return g((()=>{URL.revokeObjectURL(a.bgPoster),URL.revokeObjectURL(a.fgPoster)})),d(s(s({},f(a)),i),{uploadRef:o})}}),he={class:"content scrollbar",ref:"scroll","element-loading-text":"正在保存图片...","element-loading-background":"var(--el-bg-color)"},me=["src"],be=["src"],xe={class:"fun-box scrollY scrollbar full-h full-w"},we={class:"flex-column-center fun-list"},ye={class:"flex-between full-w"},ve={class:"flex-between full-w"},Ve={class:"flex-between full-w"},Te={class:"flex-between full-w"},Le={class:"flex-between full-w"},Pe={class:"flex-between full-w",style:{gap:"20px"}},Se={class:"flex-between full-w"},Ce={class:"dialog-footer"};var Re=W(fe,[["render",function(e,l,t,o,a,i){const n=h("upload-filled"),s=h("el-icon"),d=h("el-upload"),r=h("el-slider"),u=h("el-color-picker"),p=h("el-radio"),c=h("el-radio-group"),g=h("el-button"),f=h("el-dialog"),P=_("loading");return m(),b(f,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[9]||(l[9]=l=>e.dialogVisible=l),title:"半 框","before-close":e.handleClose,"close-on-click-modal":!1,"lock-scroll":!1,top:"5vh",class:"z-dialog",center:"",width:400},{footer:x((()=>[w("span",Ce,[y(g,{onClick:e.handleClose},{default:x((()=>[v(V(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),y(g,{type:"primary",onClick:e.handleConfirm,loading:e.loading},{default:x((()=>l[22]||(l[22]=[v("保 存")]))),_:1,__:[22]},8,["onClick","loading"])])])),default:x((()=>[j((m(),T("div",he,[y(d,{ref:"uploadRef",class:"flex-column-center","show-file-list":!1,drag:"",limit:1,"auto-upload":!1,accept:".png,.jpg,.jpeg","on-change":e.handleChange,"on-exceed":e.handleExceed,"file-list":e.fileList,"onUpdate:fileList":l[0]||(l[0]=l=>e.fileList=l)},{tip:x((()=>l[11]||(l[11]=[w("div",{class:"el-upload__tip"}," 支持上传 .png/jpg 文件 ",-1)]))),default:x((()=>[""===e.bgPoster?(m(),T(L,{key:0},[y(s,{class:"el-icon--upload"},{default:x((()=>[y(n)])),_:1}),l[10]||(l[10]=w("div",{class:"el-upload__text"},[v(" 拖拽文件到这 或者 "),w("em",null,"点击这里上传")],-1))],64)):(m(),T("div",{key:1,id:"poster",class:"poster flex-center",style:$({width:`${e.bgRatioList[e.bgRatio][2]}px`,height:`${e.bgRatioList[e.bgRatio][3]}px`,position:"relative",top:"0"})},[w("img",{src:e.bgPoster,style:$([{"object-fit":"cover"},{filter:`blur(${e.bgBlur}px)`,transform:"scale(1.2)"}]),draggable:"false"},null,12,me),w("img",{src:e.fgPoster,class:"fg",style:$([{top:`${e.fgPos}%`,borderRadius:`${e.fgRadius}px`,boxShadow:`0px 0px ${e.fgShadow}px ${e.fgShadowColor}`,height:`${e.fgHeight}%`,width:`${e.fgWidth}%`},{"object-fit":"cover"}]),draggable:"false"},null,12,be)],4))])),_:1},8,["on-change","on-exceed","file-list"]),w("div",xe,[w("div",we,[w("div",ye,[l[12]||(l[12]=w("p",{style:{width:"70px"}},"模 糊",-1)),y(r,{modelValue:e.bgBlur,"onUpdate:modelValue":l[1]||(l[1]=l=>e.bgBlur=l),"show-input":"",min:0,max:30},null,8,["modelValue"])]),w("div",ve,[l[13]||(l[13]=w("p",{style:{width:"70px"}},"宽 度",-1)),y(r,{modelValue:e.fgWidth,"onUpdate:modelValue":l[2]||(l[2]=l=>e.fgWidth=l),"show-input":"",min:10,max:90},null,8,["modelValue"])]),w("div",Ve,[l[14]||(l[14]=w("p",{style:{width:"70px"}},"高 度",-1)),y(r,{modelValue:e.fgHeight,"onUpdate:modelValue":l[3]||(l[3]=l=>e.fgHeight=l),"show-input":"",min:10,max:90},null,8,["modelValue"])]),w("div",Te,[l[15]||(l[15]=w("p",{style:{width:"70px"}},"位 置",-1)),y(r,{modelValue:e.fgPos,"onUpdate:modelValue":l[4]||(l[4]=l=>e.fgPos=l),"show-input":"",min:0,max:100},null,8,["modelValue"])]),w("div",Le,[l[16]||(l[16]=w("p",{style:{width:"70px"}},"圆 角",-1)),y(r,{modelValue:e.fgRadius,"onUpdate:modelValue":l[5]||(l[5]=l=>e.fgRadius=l),"show-input":"",min:0,max:100},null,8,["modelValue"])]),w("div",Pe,[l[17]||(l[17]=w("p",{style:{width:"60px"}},"阴 影",-1)),y(r,{modelValue:e.fgShadow,"onUpdate:modelValue":l[6]||(l[6]=l=>e.fgShadow=l),min:0,max:10},null,8,["modelValue"]),y(u,{modelValue:e.fgShadowColor,"onUpdate:modelValue":l[7]||(l[7]=l=>e.fgShadowColor=l),"show-alpha":""},null,8,["modelValue"])]),w("div",Se,[l[21]||(l[21]=w("p",{style:{width:"70px"}},"分辨率",-1)),y(c,{modelValue:e.bgRatio,"onUpdate:modelValue":l[8]||(l[8]=l=>e.bgRatio=l)},{default:x((()=>[y(p,{value:0},{default:x((()=>l[18]||(l[18]=[v("手机")]))),_:1,__:[18]}),y(p,{value:1},{default:x((()=>l[19]||(l[19]=[v("电脑")]))),_:1,__:[19]}),y(p,{value:2},{default:x((()=>l[20]||(l[20]=[v("平板")]))),_:1,__:[20]})])),_:1},8,["modelValue"])])])])])),[[P,e.loading]])])),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-063877b2"]]);const Ue=r({name:"BorderDrawDialog",components:{},props:{visible:{type:Boolean,default:!1}},emits:["close","import"],setup(e,l){const{proxy:t}=k(),o=p(),a=u();let i=c({loading:!1,dialogVisible:e.visible,fileList:[],fileListTemp:[],fileTypes:["image/jpg","image/jpeg","image/png"],fgStyle:{top:"50%",borderRadius:10,boxShadow:"1px 1px 10px",boxShadowColor:"#80808050"},bdTemplate:"0",fontFamilyOptions:[{label:"像素字体",value:"PixelFont"},{label:"方正黑体",value:"Founder Heiti"},{label:"宋体",value:"SimSun"},{label:"方正楷体",value:"SimKai"},{label:"阿里巴巴普惠体",value:"AlibabaPuHuiTi-Black"},{label:"辰宇落雁体",value:"ChenYuluoyan"},{label:"钟齐志莽行书",value:"ZhiMangXing"},{label:"Autumn Flowers",value:"AutumnFlowers"}],bgRatioList:[[1440,2560,270,480],[2560,1440,480,270],[1600,1200,400,300]],fgWidth:90,fgHeight:40,bgBlur:10,bdType:0,bdColor:"#ffffff",bdTextColor:"#000000",bdTextSecondColor:"#000000",bdText:"像素格子",bdTextSize:16,bdTextPos:[50,50],bdTextFamily:"PixelFont",isEnableTextGradient:!1,bdLogo:"/logo.png",logoSize:1,bdTextWeight:400,bdTextStyle:"normal",bdHeight:10,bdLogoGap:5,bdGap:1,bdTextRotate:-22,bdTextWidth:120,bdTextHeight:64,bdTextGaps:[90,90],bdTextFont:{fontSize:16,color:"rgba(0, 0, 0, 0.15)",fontWeight:400,fontFamily:"PixelFont",fontStyle:"normal"},isEnableLogo:!1,isVerticalLogo:!1,fgPos:30,fgRadius:20,fgShadow:0,fgShadowColor:"#000000",fgPoster:"",bgPoster:"",poster:"",transformPoster:"",scrollHeight:0,isLoad:!1,realPicHeight:0,realPicWidth:0,renderPicWidth:0,renderPicHeight:0,bdRenderHeight:0,bdRealHeight:0,bdRenderGap:0,bdRealGap:0}),n={handleChangeTemplate(e){"0"===e?(i.bdColor="#ffffff",i.isEnableTextGradient=!1,i.bdTextColor="#000000",i.bdTextSecondColor="#000000",i.isEnableLogo=!0,i.bdLogo="/logo.png",i.bdText="像素格子",i.bdTextFamily="PixelFont"):"1"===e&&(i.bdColor="#B81E19",i.isEnableTextGradient=!0,i.bdTextColor="rgba(223, 206, 132, 1)",i.bdTextSecondColor="#c1a940",i.isEnableLogo=!0,i.bdLogo="/bdLogo/blessing.png",i.bdText="事业有成 阖家欢乐",i.bdTextFamily="AlibabaPuHuiTi-Black")},handleBorderSize(){let e=Math.max(i.renderPicHeight,i.renderPicWidth)*(i.bdHeight/100),l=Math.max(i.realPicHeight,i.realPicWidth)*(i.bdHeight/100);i.bdRenderHeight=Math.floor(e),i.bdRealHeight=Math.floor(l)},handleBorderGap(){i.bdGap>i.bdHeight&&(i.bdGap=i.bdHeight,t.$message.warning("间距不能大于边框大小"));let e=Math.max(i.renderPicHeight,i.renderPicWidth)*(i.bdGap/100),l=Math.max(i.realPicHeight,i.realPicWidth)*(i.bdGap/100);i.bdRenderGap=Math.floor(e),i.bdRealGap=Math.floor(l)},handleLoad(e){const l=document.querySelector(".fg");i.renderPicWidth=l.offsetWidth,i.renderPicHeight=l.offsetHeight,n.handleBorderSize(),1===i.bdType&&n.handleBorderGap()},handleUploadLogo(){if(a.checkVipFunction("borderMarkCustomLogo"))return;const e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg",e.addEventListener("change",(function(){const l=e.files[0];if(l){const e=new FileReader;e.onload=function(e){i.bdLogo=e.target.result},e.readAsDataURL(l)}})),document.body.appendChild(e),e.click(),document.body.removeChild(e)},handleExceed(e,l){o.value.clearFiles();const t=e[0];t.uid=S(),o.value.handleStart(t)},handleClose(){i.dialogVisible=!1,l.emit("close")},handleConfirm(){if(!i.fileList.length)return t.$message.warning("上传文件不能为空");i.loading=!0,setTimeout((()=>{const e=document.getElementById("poster"),l=document.querySelector(".water-mask-box"),o=document.querySelector(".mask"),a=document.querySelector(".logo"),n=document.querySelector(".fg");let s=e.offsetWidth,d=e.offsetHeight;0===i.bdType?(n.style.height=i.realPicHeight+"px",n.style.width=i.realPicWidth+"px",l.style.height=i.bdRealHeight+"px"):1===i.bdType?(n.style.height=i.realPicHeight+"px",n.style.width=i.realPicWidth+"px",l.style.padding=`${i.bdRealHeight}px ${i.bdRealHeight}px ${i.bdRealHeight-i.bdRealGap}px ${i.bdRealHeight}px`,l.style.gap=`${i.bdRealGap}px`):2!==i.bdType&&3!==i.bdType||(n.style.height=i.realPicHeight+"px",n.style.width=i.realPicWidth+"px");let r=~~(Math.max(e.offsetWidth,e.offsetHeight)/Math.max(s,d));3===i.bdType&&(i.bdTextFont.fontSize=r*i.bdTextFont.fontSize,i.bdTextGaps[0]=r*i.bdTextGaps[0],i.bdTextGaps[1]=r*i.bdTextGaps[1]),o&&(o.style.fontSize=r*i.bdTextSize+"px"),a&&(a.style.height=a.getBoundingClientRect().height*r+"px",a.style.width=a.getBoundingClientRect().width*r+"px",l.children[0].style.gap=r*i.bdLogoGap+"px"),ge.toPng(e).then((function(e){const l=new Image;l.src=e,l.onload=function(){const e=document.createElement("canvas");if(0===i.bdType)e.width=i.realPicWidth,e.height=i.realPicHeight+i.bdRealHeight;else if(1===i.bdType){let l=document.querySelector(".mask-1").offsetHeight;e.width=2*i.bdRealHeight+i.realPicWidth,e.height=i.bdRealHeight+i.realPicHeight+(i.bdRealHeight-i.bdRealGap)+i.bdRealGap+l}else 2!==i.bdType&&3!==i.bdType||(e.width=i.realPicWidth,e.height=i.realPicHeight);e.getContext("2d").drawImage(l,0,0),R(e.toDataURL("image/png"),`边框水印 - ${U(i.fileList[0].name)}`),i.bgPoster&&URL.revokeObjectURL(i.bgPoster),URL.revokeObjectURL(i.fgPoster),i.bgPoster="",i.fgPoster="",i.loading=!1,i.bdTextFont.fontSize=i.bdTextFont.fontSize/r,i.bdTextGaps[0]=i.bdTextGaps[0]/r,i.bdTextGaps[1]=i.bdTextGaps[1]/r}})).catch((e=>{i.bgPoster&&URL.revokeObjectURL(i.bgPoster),URL.revokeObjectURL(i.fgPoster),i.bgPoster="",i.fgPoster="",i.loading=!1,i.bdTextFont.fontSize=i.bdTextFont.fontSize/r,t.$message.error("保存失败")}))}),400)},handleDrawImage:(e,l,t)=>(l.clearRect(0,0,e.width,e.height),e.toDataURL("image/png")),handleChange(e,l){if(i.fileList=l,i.fileTypes.includes(e.raw.type)){i.fgPoster=URL.createObjectURL(e.raw);const l=new Image;l.src=i.fgPoster,l.onload=()=>{i.realPicHeight=l.height,i.realPicWidth=l.width}}else{let l=i.fileList.findIndex((l=>l.uid===e.uid));i.fileList.splice(l,1),t.$message.warning("导入文件格式不正确")}},handleDownload(){R(i.transformPoster,"像素画 - "+U(i.fileList[0].name))}};return g((()=>{""!==i.bgPoster&&URL.revokeObjectURL(i.bgPoster),""!==i.fgPoster&&URL.revokeObjectURL(i.fgPoster)})),d(s(s({},f(i)),n),{uploadRef:o})}}),ke={class:"content scrollbar",ref:"scroll","element-loading-text":"正在保存图片...","element-loading-background":"var(--el-bg-color)"},_e={key:1,class:"scrollbar scrollY",style:{"max-height":"600px"}},je={id:"poster",class:"poster flex-column-center"},$e=["src"],ze=["src"],Ge=["src"],He=["src"],Ee={key:2,class:"water-mask-box"},Fe=["src"],De=["src"],Ie=["src"],Ae={class:"fun-box scrollY scrollbar full-h full-w",style:{flex:"1"}},Oe={class:"flex-column-center fun-list"},We={class:"flex-between full-w"},Be={class:"flex-between full-w"},Me={key:0,class:"flex-between full-w"},Ne={key:1,class:"flex-between full-w"},Xe={key:2,class:"flex-between full-w"},Ye={class:"flex-between full-w"},qe={class:"flex-between full-w"},Je={class:"flex-end",style:{gap:"5px"}},Ke={class:"flex-between full-w"},Ze={class:"flex-between full-w"},Qe={class:"flex-between full-w"},el={class:"flex-between full-w"},ll={class:"flex-between full-w"},tl={class:"flex-between full-w"},ol={class:"flex-end",style:{gap:"10px"}},al={class:"flex-between full-w"},il={style:{width:"100px",gap:"10px"},class:"flex-start"},nl=["src"],sl={class:"flex-end",style:{gap:"10px"}},dl={class:"flex-between full-w"},rl={class:"flex-between full-w"},ul={class:"flex-between full-w"},pl={key:3,class:"flex-between full-w"},cl={key:4,class:"flex-between full-w",style:{gap:"20px"}},gl={class:"flex-between full-w"},fl={class:"flex-between full-w"},hl={class:"flex-between full-w"},ml={class:"flex-between full-w"},bl={class:"flex-between full-w"},xl={class:"flex-between full-w"},wl={class:"flex-between full-w"},yl={class:"flex-between full-w"},vl={class:"flex-between full-w"},Vl={class:"flex-between full-w"},Tl={style:{width:"100px",gap:"10px"},class:"flex-start"},Ll=["src"],Pl={class:"flex-end",style:{gap:"10px"}},Sl={class:"flex-between full-w"},Cl={class:"dialog-footer"};var Rl=W(Ue,[["render",function(e,l,t,o,a,i){const n=h("upload-filled"),s=h("el-icon"),d=h("el-watermark"),r=h("el-upload"),u=h("el-radio"),p=h("el-radio-group"),c=h("el-option"),g=h("el-select"),f=h("el-color-picker"),S=h("el-slider"),C=h("el-input"),R=h("el-input-number"),U=h("el-switch"),k=h("el-link"),E=h("el-space"),F=h("el-button"),D=h("el-dialog"),I=_("loading");return m(),b(D,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[39]||(l[39]=l=>e.dialogVisible=l),title:"边框水印","before-close":e.handleClose,"close-on-click-modal":!1,"lock-scroll":!1,top:"5vh",class:"z-dialog",center:"",width:400},{footer:x((()=>[w("span",Cl,[y(F,{onClick:e.handleClose},{default:x((()=>[v(V(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),y(F,{type:"primary",onClick:e.handleConfirm,loading:e.loading},{default:x((()=>l[78]||(l[78]=[v("保 存")]))),_:1,__:[78]},8,["onClick","loading"])])])),default:x((()=>[j((m(),T("div",ke,[y(r,{ref:"uploadRef",style:{flex:"1"},class:"flex-column-center","show-file-list":!1,drag:"",limit:1,"auto-upload":!1,accept:".png,.jpg,.jpeg","on-change":e.handleChange,"on-exceed":e.handleExceed,"file-list":e.fileList,"onUpdate:fileList":l[4]||(l[4]=l=>e.fileList=l)},{tip:x((()=>l[41]||(l[41]=[w("div",{class:"el-upload__tip"}," 支持上传 .png/jpg 文件 ",-1)]))),default:x((()=>[""===e.fgPoster?(m(),T(L,{key:0},[y(s,{class:"el-icon--upload"},{default:x((()=>[y(n)])),_:1}),l[40]||(l[40]=w("div",{class:"el-upload__text"},[v(" 拖拽文件到这 或者 "),w("em",null,"点击这里上传")],-1))],64)):(m(),T("div",_e,[w("div",je,[0===e.bdType?(m(),T(L,{key:0},[w("img",{src:e.fgPoster,class:"fg fg0",onLoad:l[0]||(l[0]=(...l)=>e.handleLoad&&e.handleLoad(...l)),style:{"object-fit":"contain"},draggable:"false"},null,40,$e),w("div",{class:"water-mask-box full-w",style:$({backgroundColor:e.bdColor,height:`${e.bdRenderHeight}px`})},[w("div",{class:z(["water-mask-content",{"flex-column":e.isVerticalLogo,"flex-row":!e.isVerticalLogo}]),style:$({left:`${e.bdTextPos[0]}%`,top:`${e.bdTextPos[1]}%`,gap:`${e.bdLogoGap}px`})},[e.isEnableLogo&&e.bdLogo?(m(),T("img",{key:0,src:e.bdLogo,class:"logo",style:$({transform:`scale(${e.logoSize})`,height:"20px",width:"20px"})},null,12,ze)):P("",!0),w("p",{style:$({color:e.bdTextColor,fontFamily:e.bdTextFamily,fontSize:`${e.bdTextSize}px`,fontWeight:e.bdTextWeight,fontStyle:e.bdTextStyle,background:e.isEnableTextGradient?`text linear-gradient(to right, ${e.bdTextColor}, ${e.bdTextSecondColor})`:"none"}),class:z(["mask oneline",{gradientColor:e.isEnableTextGradient}])},V(e.bdText),7)],6)],4)],64)):P("",!0),1===e.bdType?(m(),T("div",{key:1,class:"water-mask-box flex-column-center",style:$({backgroundColor:e.bdColor,gap:`${e.bdRenderGap}px`,padding:`${e.bdRenderHeight}px ${e.bdRenderHeight}px ${e.bdRenderHeight-e.bdRenderGap}px ${e.bdRenderHeight}px`})},[w("img",{src:e.fgPoster,onLoad:l[1]||(l[1]=(...l)=>e.handleLoad&&e.handleLoad(...l)),style:$([{top:`${e.fgPos}%`,borderRadius:`${e.fgRadius}px`,boxShadow:`0px 0px ${e.fgShadow}px ${e.fgShadowColor}`},{"object-fit":"contain"}]),class:"fg fg1",draggable:"false"},null,44,Ge),w("div",{class:z(["flex-center full-w mask-1",{"flex-column":e.isVerticalLogo,"flex-row":!e.isVerticalLogo}]),style:$({gap:`${e.bdLogoGap}px`})},[e.isEnableLogo&&e.bdLogo?(m(),T("img",{key:0,src:e.bdLogo,class:"logo",style:$({transform:`scale(${e.logoSize})`,height:"20px",width:"20px"})},null,12,He)):P("",!0),w("p",{style:$({color:e.bdTextColor,fontFamily:e.bdTextFamily,fontSize:`${e.bdTextSize}px`,fontWeight:e.bdTextWeight,fontStyle:e.bdTextStyle,background:e.isEnableTextGradient?`text linear-gradient(to right, ${e.bdTextColor}, ${e.bdTextSecondColor})`:"none"}),class:z(["mask oneline",{gradientColor:e.isEnableTextGradient}])},V(e.bdText),7)],6)],4)):P("",!0),2===e.bdType?(m(),T("div",Ee,[w("img",{src:e.fgPoster,onLoad:l[2]||(l[2]=(...l)=>e.handleLoad&&e.handleLoad(...l)),class:"fg fg2",style:{"object-fit":"contain"},draggable:"false"},null,40,Fe),w("div",{class:z(["water-mask-content",{"flex-column":e.isVerticalLogo,"flex-row":!e.isVerticalLogo}]),style:$({left:`${e.bdTextPos[0]}%`,top:`${e.bdTextPos[1]}%`,gap:`${e.bdLogoGap}px`})},[e.isEnableLogo&&e.bdLogo?(m(),T("img",{key:0,src:e.bdLogo,class:"logo",style:$({transform:`scale(${e.logoSize})`,height:"20px",width:"20px"})},null,12,De)):P("",!0),w("p",{style:$({color:e.bdTextColor,fontFamily:e.bdTextFamily,fontSize:`${e.bdTextSize}px`,fontWeight:e.bdTextWeight,fontStyle:e.bdTextStyle,background:e.isEnableTextGradient?`text linear-gradient(to right, ${e.bdTextColor}, ${e.bdTextSecondColor})`:"none"}),class:z(["mask oneline",{gradientColor:e.isEnableTextGradient}])},V(e.bdText),7)],6)])):P("",!0),3===e.bdType?(m(),b(d,{key:3,class:"watermark",content:e.bdText,font:e.bdTextFont,rotate:e.bdTextRotate,gap:e.bdTextGaps,image:e.isEnableLogo?e.bdLogo:"",width:e.isEnableLogo?e.bdTextWidth:120,height:e.isEnableLogo?e.bdTextHeight:64},{default:x((()=>[w("img",{src:e.fgPoster,class:"fg fg3",onLoad:l[3]||(l[3]=(...l)=>e.handleLoad&&e.handleLoad(...l)),style:$([{},{"object-fit":"contain"}]),draggable:"false"},null,40,Ie)])),_:1},8,["content","font","rotate","gap","image","width","height"])):P("",!0)])]))])),_:1},8,["on-change","on-exceed","file-list"]),w("div",Ae,[w("div",Oe,[w("div",We,[l[46]||(l[46]=w("p",{style:{width:"100px"}},"样式",-1)),y(p,{modelValue:e.bdType,"onUpdate:modelValue":l[5]||(l[5]=l=>e.bdType=l),size:"small"},{default:x((()=>[y(u,{value:0,size:"small"},{default:x((()=>l[42]||(l[42]=[v("经典")]))),_:1,__:[42]}),y(u,{value:1,size:"small"},{default:x((()=>l[43]||(l[43]=[v("边框")]))),_:1,__:[43]}),y(u,{value:2,size:"small"},{default:x((()=>l[44]||(l[44]=[v("无边框")]))),_:1,__:[44]}),y(u,{value:3,size:"small"},{default:x((()=>l[45]||(l[45]=[v("全屏水印")]))),_:1,__:[45]})])),_:1},8,["modelValue"])]),[0,1,2].includes(e.bdType)?(m(),T(L,{key:0},[w("div",Be,[l[47]||(l[47]=w("p",{style:{width:"100px"}},"模板",-1)),y(g,{modelValue:e.bdTemplate,"onUpdate:modelValue":l[6]||(l[6]=l=>e.bdTemplate=l),onChange:e.handleChangeTemplate},{default:x((()=>[y(c,{label:"自定义",value:"0"}),y(c,{label:"新春水印",value:"1"})])),_:1},8,["modelValue","onChange"])]),[0,1].includes(e.bdType)?(m(),T("div",Me,[l[48]||(l[48]=w("p",{style:{width:"100px"}},"边框背景",-1)),y(f,{modelValue:e.bdColor,"onUpdate:modelValue":l[7]||(l[7]=l=>e.bdColor=l)},null,8,["modelValue"])])):P("",!0),[0,1].includes(e.bdType)?(m(),T("div",Ne,[l[49]||(l[49]=w("p",{style:{width:"100px"}},"边框大小",-1)),y(S,{modelValue:e.bdHeight,"onUpdate:modelValue":l[8]||(l[8]=l=>e.bdHeight=l),onChange:e.handleBorderSize,"show-input":"",min:10,max:100},null,8,["modelValue","onChange"])])):P("",!0),[1].includes(e.bdType)?(m(),T("div",Xe,[l[50]||(l[50]=w("p",{style:{width:"100px"}},"间距",-1)),y(S,{modelValue:e.bdGap,"onUpdate:modelValue":l[9]||(l[9]=l=>e.bdGap=l),"show-input":"",onChange:e.handleBorderGap,min:0,max:100},null,8,["modelValue","onChange"])])):P("",!0),w("div",Ye,[l[51]||(l[51]=w("p",{style:{width:"100px"}},"水印内容",-1)),y(C,{modelValue:e.bdText,"onUpdate:modelValue":l[10]||(l[10]=l=>e.bdText=l),placeholder:"请输入水印"},null,8,["modelValue"])]),j(w("div",qe,[l[52]||(l[52]=w("p",{style:{width:"100px"}},"水印位置",-1)),w("div",Je,[y(R,{style:{width:"120px"},modelValue:e.bdTextPos[0],"onUpdate:modelValue":l[11]||(l[11]=l=>e.bdTextPos[0]=l)},null,8,["modelValue"]),y(R,{style:{width:"120px"},modelValue:e.bdTextPos[1],"onUpdate:modelValue":l[12]||(l[12]=l=>e.bdTextPos[1]=l)},null,8,["modelValue"])])],512),[[G,[0,2].includes(e.bdType)]]),w("div",Ke,[l[53]||(l[53]=w("p",{style:{width:"100px"}},"水印大小",-1)),y(S,{modelValue:e.bdTextSize,"onUpdate:modelValue":l[13]||(l[13]=l=>e.bdTextSize=l),"show-input":"",min:12,max:60},null,8,["modelValue"])]),w("div",Ze,[l[54]||(l[54]=w("p",{style:{width:"100px"}},"水印字重",-1)),y(S,{modelValue:e.bdTextWeight,"onUpdate:modelValue":l[14]||(l[14]=l=>e.bdTextWeight=l),"show-input":"",min:300,max:1e3},null,8,["modelValue"])]),w("div",Qe,[l[55]||(l[55]=w("p",{style:{width:"100px"}},"水印样式",-1)),y(g,{modelValue:e.bdTextStyle,"onUpdate:modelValue":l[15]||(l[15]=l=>e.bdTextStyle=l)},{default:x((()=>[y(c,{label:"正体",value:"normal"}),y(c,{label:"斜体",value:"italic"})])),_:1},8,["modelValue"])]),w("div",el,[l[56]||(l[56]=w("p",{style:{width:"100px"}},"水印字体",-1)),y(g,{modelValue:e.bdTextFamily,"onUpdate:modelValue":l[16]||(l[16]=l=>e.bdTextFamily=l)},{default:x((()=>[(m(!0),T(L,null,H(e.fontFamilyOptions,(e=>(m(),b(c,{style:$({fontFamily:e.value}),key:e.value,label:e.label,value:e.value},null,8,["style","label","value"])))),128))])),_:1},8,["modelValue"])]),w("div",ll,[l[57]||(l[57]=w("p",{style:{width:"100px"}},"水印渐变",-1)),y(U,{modelValue:e.isEnableTextGradient,"onUpdate:modelValue":l[17]||(l[17]=l=>e.isEnableTextGradient=l)},null,8,["modelValue"])]),w("div",tl,[l[58]||(l[58]=w("p",{style:{width:"100px"}},"水印颜色",-1)),w("div",ol,[y(f,{modelValue:e.bdTextColor,"onUpdate:modelValue":l[18]||(l[18]=l=>e.bdTextColor=l),"show-alpha":""},null,8,["modelValue"]),e.isEnableTextGradient?(m(),b(f,{key:0,modelValue:e.bdTextSecondColor,"onUpdate:modelValue":l[19]||(l[19]=l=>e.bdTextSecondColor=l),"show-alpha":""},null,8,["modelValue"])):P("",!0)])]),w("div",al,[w("p",il,[l[59]||(l[59]=v(" Logo ")),w("img",{style:{width:"20px"},src:A||O},null,8,nl)]),w("div",sl,[y(U,{modelValue:e.isEnableLogo,"onUpdate:modelValue":l[20]||(l[20]=l=>e.isEnableLogo=l)},null,8,["modelValue"]),y(k,{type:"primary",underline:!1,onClick:e.handleUploadLogo},{default:x((()=>l[60]||(l[60]=[v("上传LOGO")]))),_:1,__:[60]},8,["onClick"])])]),w("div",dl,[l[61]||(l[61]=w("p",{style:{width:"100px"}},"Logo大小",-1)),y(S,{modelValue:e.logoSize,"onUpdate:modelValue":l[21]||(l[21]=l=>e.logoSize=l),"show-input":"",min:.1,max:3,step:.1},null,8,["modelValue"])]),w("div",rl,[l[62]||(l[62]=w("p",{style:{width:"100px"}},"Logo间距",-1)),y(S,{modelValue:e.bdLogoGap,"onUpdate:modelValue":l[22]||(l[22]=l=>e.bdLogoGap=l),"show-input":"",min:5,max:100},null,8,["modelValue"])]),w("div",ul,[l[63]||(l[63]=w("p",{style:{width:"100px"}},"垂直排列",-1)),y(U,{modelValue:e.isVerticalLogo,"onUpdate:modelValue":l[23]||(l[23]=l=>e.isVerticalLogo=l)},null,8,["modelValue"])]),1===e.bdType?(m(),T("div",pl,[l[64]||(l[64]=w("p",{style:{width:"100px"}},"图片圆角",-1)),y(S,{modelValue:e.fgRadius,"onUpdate:modelValue":l[24]||(l[24]=l=>e.fgRadius=l),"show-input":"",min:0,max:100},null,8,["modelValue"])])):P("",!0),1===e.bdType?(m(),T("div",cl,[l[65]||(l[65]=w("p",{style:{width:"100px"}},"图片阴影",-1)),y(S,{modelValue:e.fgShadow,"onUpdate:modelValue":l[25]||(l[25]=l=>e.fgShadow=l),min:0,max:10},null,8,["modelValue"]),y(f,{modelValue:e.fgShadowColor,"onUpdate:modelValue":l[26]||(l[26]=l=>e.fgShadowColor=l),"show-alpha":""},null,8,["modelValue"])])):P("",!0)],64)):P("",!0),[3].includes(e.bdType)?(m(),T(L,{key:1},[w("div",gl,[l[66]||(l[66]=w("p",{style:{width:"100px"}},"水印内容",-1)),y(C,{modelValue:e.bdText,"onUpdate:modelValue":l[27]||(l[27]=l=>e.bdText=l),placeholder:"请输入水印"},null,8,["modelValue"])]),w("div",fl,[l[67]||(l[67]=w("p",{style:{width:"100px"}},"水印宽度",-1)),y(S,{modelValue:e.bdTextWidth,"onUpdate:modelValue":l[28]||(l[28]=l=>e.bdTextWidth=l),"show-input":"",min:10,max:999},null,8,["modelValue"])]),w("div",hl,[l[68]||(l[68]=w("p",{style:{width:"100px"}},"水印高度",-1)),y(S,{modelValue:e.bdTextHeight,"onUpdate:modelValue":l[29]||(l[29]=l=>e.bdTextHeight=l),"show-input":"",min:10,max:999},null,8,["modelValue"])]),w("div",ml,[l[69]||(l[69]=w("p",{style:{width:"100px"}},"旋转角度",-1)),y(S,{modelValue:e.bdTextRotate,"onUpdate:modelValue":l[30]||(l[30]=l=>e.bdTextRotate=l),"show-input":"",min:-180,max:180},null,8,["modelValue"])]),w("div",bl,[l[70]||(l[70]=w("p",{style:{width:"100px"}},"水印大小",-1)),y(S,{modelValue:e.bdTextFont.fontSize,"onUpdate:modelValue":l[31]||(l[31]=l=>e.bdTextFont.fontSize=l),"show-input":"",min:12,max:30},null,8,["modelValue"])]),w("div",xl,[l[71]||(l[71]=w("p",{style:{width:"100px"}},"水印字重",-1)),y(S,{modelValue:e.bdTextFont.fontWeight,"onUpdate:modelValue":l[32]||(l[32]=l=>e.bdTextFont.fontWeight=l),"show-input":"",min:300,max:1e3},null,8,["modelValue"])]),w("div",wl,[l[72]||(l[72]=w("p",{style:{width:"100px"}},"水印样式",-1)),y(g,{modelValue:e.bdTextFont.fontStyle,"onUpdate:modelValue":l[33]||(l[33]=l=>e.bdTextFont.fontStyle=l)},{default:x((()=>[y(c,{label:"正体",value:"normal"}),y(c,{label:"斜体",value:"italic"})])),_:1},8,["modelValue"])]),w("div",yl,[l[73]||(l[73]=w("p",{style:{width:"100px"}},"水印字体",-1)),y(g,{modelValue:e.bdTextFont.fontFamily,"onUpdate:modelValue":l[34]||(l[34]=l=>e.bdTextFont.fontFamily=l)},{default:x((()=>[(m(!0),T(L,null,H(e.fontFamilyOptions,(e=>(m(),b(c,{style:$({fontFamily:e.value}),key:e.value,label:e.label,value:e.value},null,8,["style","label","value"])))),128))])),_:1},8,["modelValue"])]),w("div",vl,[l[74]||(l[74]=w("p",{style:{width:"100px"}},"水印颜色",-1)),y(f,{modelValue:e.bdTextFont.color,"onUpdate:modelValue":l[35]||(l[35]=l=>e.bdTextFont.color=l),"show-alpha":""},null,8,["modelValue"])]),w("div",Vl,[w("p",Tl,[l[75]||(l[75]=v(" Logo ")),w("img",{style:{width:"20px"},src:A||O},null,8,Ll)]),w("div",Pl,[y(U,{modelValue:e.isEnableLogo,"onUpdate:modelValue":l[36]||(l[36]=l=>e.isEnableLogo=l)},null,8,["modelValue"]),y(k,{type:"primary",underline:!1,onClick:e.handleUploadLogo},{default:x((()=>l[76]||(l[76]=[v("上传LOGO")]))),_:1,__:[76]},8,["onClick"])])]),w("div",Sl,[l[77]||(l[77]=w("p",{style:{width:"100px"}},"间距",-1)),y(E,null,{default:x((()=>[y(R,{modelValue:e.bdTextGaps[0],"onUpdate:modelValue":l[37]||(l[37]=l=>e.bdTextGaps[0]=l),"controls-position":"right"},null,8,["modelValue"]),y(R,{modelValue:e.bdTextGaps[1],"onUpdate:modelValue":l[38]||(l[38]=l=>e.bdTextGaps[1]=l),"controls-position":"right"},null,8,["modelValue"])])),_:1})])],64)):P("",!0)])])])),[[I,e.loading]])])),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-6cea9db6"]]);const Ul=r({name:"PintuDialog",components:{},props:{visible:{type:Boolean,default:!1}},emits:["close","import"],setup(e,l){const{proxy:t}=k(),o=u(),a=p();let i=c({loading:!1,dialogVisible:e.visible,fileList:[],fileListTemp:[],fileTypes:["image/jpg","image/jpeg","image/png"],ptGgColCount:2,ptGgCount:2,ptType:0,fgStyle:{top:"50%",borderRadius:10,boxShadow:"1px 1px 10px",boxShadowColor:"#80808050"},bgRatioList:[[1024,1024,512,512],[1600,1200,800,600],[1200,1600,600,800],[2560,1440,960,540],[2560,1440,540,960]],minPinjie:2,maxPinjie:6,ptPinjieType:0,bgColor:"#ffffff",bgPadding:15,fgFit:0,bgGap:15,fgWidth:90,fgHeight:40,bgBlur:10,bgRatio:0,fgPos:30,fgRadius:20,fgShadow:5,fgShadowColor:"#000000",fgShadowX:0,fgShadowY:0,fgPoster:"",bgPoster:"",poster:"",transformPoster:"",scrollHeight:0,isLoad:!1,fgPosterList:[]}),n={handleReset(){for(let e=0;e<i.fgPosterList.length;e++)URL.revokeObjectURL(i.fgPosterList[e].imgUrl);i.fgPosterList=[],i.fileList=[]},handleExceed(e,l){let o=0===i.ptType?i.ptGgCount:i.maxPinjie;e.length>o&&t.$message.warning("上传文件数量已达上限")},handleClose(){i.dialogVisible=!1,l.emit("close")},handleConfirm(){if(!i.fileList.length)return t.$message.warning("上传文件不能为空");i.loading=!0,setTimeout((()=>{const e=document.getElementById("poster");if(0===i.ptType){e.style.width=2*e.offsetWidth+"px",e.style.padding=2*i.bgPadding+"px",e.style.gridColumnGap=2*i.bgGap+"px",e.style.gridRowGap=2*i.bgGap+"px";const l=e.children;for(let e=0;e<l.length;e++)l[e].style.borderRadius=2*i.fgRadius+"px",l[e].style.boxShadow=`${2*i.fgShadowX}px ${2*i.fgShadowY}px ${2*i.fgShadow}px ${i.fgShadowColor}`}else if(1===i.ptType){const l=e.children;for(let e=0;e<l.length;e++)l[e].style.maxWidth="none",l[e].style.width=i.fgPosterList[e].width+"px",l[e].style.height=i.fgPosterList[e].height+"px";e.parentNode.style.maxWidth="none"}ge.toPng(e).then((function(l){R(l,(0===i.ptType?"宫格":"拼接")+"拼图");for(let e=0;e<i.fgPosterList.length;e++)URL.revokeObjectURL(i.fgPosterList[e].imgUrl);i.fgPosterList=[],i.fileList=[],i.loading=!1,e.parentNode.style.maxWidth="500px"})).catch((e=>{for(let l=0;l<i.fgPosterList.length;l++)URL.revokeObjectURL(i.fgPosterList[l].imgUrl);i.fgPosterList=[],i.fileList=[],i.loading=!1,t.$message.error("保存失败")}))}),200)},handleDrawImage:(e,l,t)=>(l.clearRect(0,0,e.width,e.height),e.toDataURL("image/png")),handleChange(e,l){if(i.fileList=l,i.fileTypes.includes(e.raw.type)){i.fgPosterList=[];for(let e=0;e<i.fileList.length;e++){const l=URL.createObjectURL(i.fileList[e].raw),t={imgUrl:l,width:0,height:0},o=new Image;o.src=l,o.onload=()=>{t.width=o.width,t.height=o.height},i.fgPosterList.push(t)}}else{let l=i.fileList.findIndex((l=>l.uid===e.uid));i.fileList.splice(l,1),t.$message.warning("导入文件格式不正确")}},handleDownload(){R(i.transformPoster,"拼图 - "+U(i.fileList[0].name))}};return E((()=>{var e;o.versionInfoData?i.maxPinjie=Number(o.versionInfoData[o.userData?Number(null==(e=o.userData)?void 0:e.vip):0].fun.find((e=>e.includes("pinjieCount"))).split("-")[1]):t.$message.warning("版本信息异常")})),g((()=>{for(let e=0;e<i.fgPosterList.length;e++)URL.revokeObjectURL(i.fgPosterList[e].imgUrl)})),d(s(s({},f(i)),n),{uploadRef:a,editSpaceStore:o})}}),kl={class:"content scrollbar",ref:"scroll","element-loading-text":"正在保存图片...","element-loading-background":"var(--el-bg-color)"},_l={key:1,class:"scrollbar scrollY",style:{"max-height":"600px","max-width":"500px"}},jl=["src"],$l=["src"],zl={class:"fun-box scrollbar full-h full-w",style:{flex:"1"}},Gl={class:"flex-column-start fun-list"},Hl={class:"flex-between full-w"},El={key:0,class:"flex-between full-w",style:{gap:"10px"}},Fl={key:1,class:"flex-between full-w",style:{gap:"10px"}},Dl={key:0},Il={class:"flex-between full-w"},Al={key:2,class:"flex-between full-w"},Ol={key:3,class:"flex-between full-w"},Wl={class:"flex-between full-w"},Bl={key:4,class:"flex-between full-w"},Ml={key:5,class:"flex-between full-w",style:{gap:"20px"}},Nl={key:6,class:"flex-between full-w",style:{gap:"20px"}},Xl={class:"flex-end",style:{gap:"5px"}},Yl={key:7,class:"flex-between full-w"},ql={class:"dialog-footer"};var Jl=r({name:"tool",components:{PixelDrawDialog:pe,HalfFrameDialog:Re,BorderDrawDialog:Rl,PintuDialog:W(Ul,[["render",function(e,l,t,o,a,i){const n=h("upload-filled"),s=h("el-icon"),d=h("el-upload"),r=h("el-radio"),u=h("el-radio-group"),p=h("el-input-number"),c=h("el-option"),g=h("el-select"),f=h("el-color-picker"),S=h("el-slider"),C=h("el-button"),R=h("el-dialog"),U=_("loading");return m(),b(R,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[15]||(l[15]=l=>e.dialogVisible=l),title:"拼 图","before-close":e.handleClose,"close-on-click-modal":!1,"lock-scroll":!1,top:"5vh",class:"z-dialog",center:"",width:400},{footer:x((()=>[w("span",ql,[y(C,{onClick:e.handleClose},{default:x((()=>[v(V(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),y(C,{type:"primary",plain:"",onClick:e.handleReset},{default:x((()=>l[35]||(l[35]=[v("重 置")]))),_:1,__:[35]},8,["onClick"]),y(C,{type:"primary",onClick:e.handleConfirm,loading:e.loading},{default:x((()=>l[36]||(l[36]=[v("保 存")]))),_:1,__:[36]},8,["onClick","loading"])])])),default:x((()=>[j((m(),T("div",kl,[y(d,{ref:"uploadRef",style:{flex:"1"},class:"flex-column-center","show-file-list":!1,drag:"",multiple:"",limit:0===e.ptType?e.ptGgCount:e.maxPinjie,"auto-upload":!1,accept:".png,.jpg,.jpeg","on-change":e.handleChange,"on-exceed":e.handleExceed,"file-list":e.fileList,"onUpdate:fileList":l[0]||(l[0]=l=>e.fileList=l)},{tip:x((()=>l[17]||(l[17]=[w("div",{class:"el-upload__tip"}," 支持上传 .png/jpg 文件 ",-1)]))),default:x((()=>[e.fgPosterList.length?(m(),T("div",_l,[0===e.ptType?(m(),T("div",{key:0,id:"poster",class:"poster flex-center",style:$({backgroundColor:`${e.bgColor}`,padding:`${e.bgPadding}px`,gridColumnGap:`${e.bgGap}px`,gridRowGap:`${e.bgGap}px`,"--grid-column":e.ptGgColCount})},[(m(!0),T(L,null,H(e.fgPosterList,((l,t)=>(m(),T("img",{key:t,src:l.imgUrl,class:"fg",style:$({borderRadius:`${e.fgRadius}px`,boxShadow:`${e.fgShadowX}px ${e.fgShadowY}px ${e.fgShadow}px ${e.fgShadowColor}`,objectFit:0===e.fgFit?"contain":"cover"}),draggable:"false"},null,12,jl)))),128))],4)):(m(),T("div",{key:1,id:"poster",class:"poster1 scrollbar scrollX",style:$({flexDirection:0===e.ptPinjieType?"row":"column",flexWarp:"none",backgroundColor:`${e.bgColor}`,overflowX:"auto"})},[(m(!0),T(L,null,H(e.fgPosterList,((l,t)=>(m(),T("img",{key:t,src:l.imgUrl,class:"fg",style:$({objectFit:0===e.fgFit?"contain":"cover",width:"auto",height:"auto",maxWidth:"200px"}),draggable:"false"},null,12,$l)))),128))],4))])):(m(),T(L,{key:0},[y(s,{class:"el-icon--upload"},{default:x((()=>[y(n)])),_:1}),l[16]||(l[16]=w("div",{class:"el-upload__text"},[v(" 拖拽文件到这 或者 "),w("em",null,"点击这里上传")],-1))],64))])),_:1},8,["limit","on-change","on-exceed","file-list"]),w("div",zl,[w("div",Gl,[w("div",Hl,[l[20]||(l[20]=w("p",{style:{width:"100px"}},"样式",-1)),y(u,{modelValue:e.ptType,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ptType=l),style:{gap:"15px"}},{default:x((()=>[y(r,{value:0},{default:x((()=>l[18]||(l[18]=[v("宫格")]))),_:1,__:[18]}),y(r,{value:1},{default:x((()=>l[19]||(l[19]=[v("拼接")]))),_:1,__:[19]})])),_:1},8,["modelValue"])]),0===e.ptType?(m(),T("div",El,[l[21]||(l[21]=w("p",{style:{width:"100px"}},"宫格列数",-1)),y(p,{modelValue:e.ptGgColCount,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ptGgColCount=l),"controls-position":"right",min:1,max:4},null,8,["modelValue"])])):P("",!0),0===e.ptType?(m(),T("div",Fl,[l[22]||(l[22]=w("p",{style:{width:"100px"}},"图片数量",-1)),y(g,{modelValue:e.ptGgCount,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ptGgCount=l),disabled:e.fileList.length,style:{width:"100px"}},{default:x((()=>[y(c,{label:"2",value:2}),y(c,{label:"4",value:4}),y(c,{label:"6",value:6}),y(c,{label:"9",value:9})])),_:1},8,["modelValue","disabled"]),e.editSpaceStore.userData&&e.editSpaceStore.userData.vip>0?(m(),T("div",Dl,[y(p,{style:{width:"100px"},disabled:e.fileList.length,modelValue:e.ptGgCount,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ptGgCount=l),"controls-position":"right",min:1,max:18},null,8,["disabled","modelValue"])])):P("",!0)])):P("",!0),w("div",Il,[l[23]||(l[23]=w("p",{style:{width:"100px"}},"背景颜色",-1)),y(f,{modelValue:e.bgColor,"onUpdate:modelValue":l[5]||(l[5]=l=>e.bgColor=l)},null,8,["modelValue"])]),0===e.ptType?(m(),T("div",Al,[l[24]||(l[24]=w("p",{style:{width:"100px"}},"内边距",-1)),y(S,{modelValue:e.bgPadding,"onUpdate:modelValue":l[6]||(l[6]=l=>e.bgPadding=l),"show-input":"",min:0,max:100},null,8,["modelValue"])])):P("",!0),0===e.ptType?(m(),T("div",Ol,[l[25]||(l[25]=w("p",{style:{width:"100px"}},"图片间距",-1)),y(S,{modelValue:e.bgGap,"onUpdate:modelValue":l[7]||(l[7]=l=>e.bgGap=l),"show-input":"",min:0,max:100},null,8,["modelValue"])])):P("",!0),w("div",Wl,[l[28]||(l[28]=w("p",{style:{width:"100px"}},"图片显示",-1)),y(u,{modelValue:e.fgFit,"onUpdate:modelValue":l[8]||(l[8]=l=>e.fgFit=l),style:{gap:"15px"}},{default:x((()=>[y(r,{value:0},{default:x((()=>l[26]||(l[26]=[v("保持比例")]))),_:1,__:[26]}),y(r,{value:1},{default:x((()=>l[27]||(l[27]=[v("放大占满")]))),_:1,__:[27]})])),_:1},8,["modelValue"])]),0===e.ptType?(m(),T("div",Bl,[l[29]||(l[29]=w("p",{style:{width:"100px"}},"图片圆角",-1)),y(S,{modelValue:e.fgRadius,"onUpdate:modelValue":l[9]||(l[9]=l=>e.fgRadius=l),"show-input":"",min:0,max:100},null,8,["modelValue"])])):P("",!0),0===e.ptType?(m(),T("div",Ml,[l[30]||(l[30]=w("p",{style:{width:"110px"}},"图片阴影",-1)),y(S,{modelValue:e.fgShadow,"onUpdate:modelValue":l[10]||(l[10]=l=>e.fgShadow=l),min:0,max:10},null,8,["modelValue"]),y(f,{modelValue:e.fgShadowColor,"onUpdate:modelValue":l[11]||(l[11]=l=>e.fgShadowColor=l),"show-alpha":""},null,8,["modelValue"])])):P("",!0),0===e.ptType?(m(),T("div",Nl,[l[31]||(l[31]=w("p",{style:{width:"100px"}},"阴影偏移",-1)),w("div",Xl,[y(p,{style:{width:"120px"},modelValue:e.fgShadowX,"onUpdate:modelValue":l[12]||(l[12]=l=>e.fgShadowX=l)},null,8,["modelValue"]),y(p,{style:{width:"120px"},modelValue:e.fgShadowY,"onUpdate:modelValue":l[13]||(l[13]=l=>e.fgShadowY=l)},null,8,["modelValue"])])])):P("",!0),1===e.ptType?(m(),T("div",Yl,[l[34]||(l[34]=w("p",{style:{width:"100px"}},"拼接方式",-1)),y(u,{modelValue:e.ptPinjieType,"onUpdate:modelValue":l[14]||(l[14]=l=>e.ptPinjieType=l),style:{gap:"15px"}},{default:x((()=>[y(r,{value:0},{default:x((()=>l[32]||(l[32]=[v("横向拼接")]))),_:1,__:[32]}),y(r,{value:1},{default:x((()=>l[33]||(l[33]=[v("竖向拼接")]))),_:1,__:[33]})])),_:1},8,["modelValue"])])):P("",!0)])])])),[[U,e.loading]])])),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-3268171e"]]),IframeDialog:B},props:{},emits:[],setup(e,l){const t=u(),{proxy:o}=k();let a=c({visible1:!1,visible2:!1,visible3:!1,visible4:!1,visibleIframe:!1,iframeUrl:"",iframeName:"",toolList:[{id:1,isVip:!1,name:"像素画",pic:"/pic/tool1.jpg",height:"250px",isLoad:!1},{id:4,isVip:!1,name:"边框水印",pic:"/pic/tool4.jpg",height:"250px",isLoad:!1},{id:3,isVip:!1,name:"半 窗",pic:"/pic/tool3.jpg",height:"250px",isLoad:!1},{id:2,isVip:!1,name:"拼 图",pic:"/pic/tool2.jpg",height:"250px",isLoad:!1},{id:5,isVip:!1,name:"图片取色",pic:"/pic/tool5.png",height:"250px",isLoad:!1,url:"html/colorPicker.html",isFrame:!0}]});const i=D((()=>e=>new URL(`pic/tool${e}.jpg`,window.location.href).href));let n={handleVisible({id:e,isFrame:l,name:t,url:i}){l?o.$refs.IframeDialog.handleOpen(t,i):a[`visible${e}`]=!0}};return E((()=>{})),d(s(s({},f(a)),n),{Download:F,editSpaceStore:t,getPoster:i})}});const Kl={class:"full-layout scrollbar routerview flex-center"},Zl={class:"full-layout flex flex-column"},Ql={class:"scrollbar scrollAuto grid-box"},et=["onClick"],lt={class:"frameImg"};var tt=W(Jl,[["render",function(e,l,t,o,a,i){const n=h("el-skeleton-item"),s=h("el-skeleton"),d=h("el-image"),r=h("PixelDrawDialog"),u=h("HalfFrameDialog"),p=h("BorderDrawDialog"),c=h("PintuDialog"),g=h("IframeDialog");return m(),T("div",Kl,[w("div",Zl,[l[4]||(l[4]=w("div",{class:"flex-between flex-warp",style:{padding:"20px 20px 10px 20px","row-gap":"10px"}},[w("h2",{class:"title"},"工具箱")],-1)),w("div",Ql,[(m(!0),T(L,null,H(e.toolList,(l=>(m(),T("div",{key:l.id,class:"tool-item",style:$({height:l.height}),onClick:t=>e.handleVisible(l)},[w("div",lt,[y(d,{src:e.getPoster(l.id),fit:"cover",class:"full-layout img",onLoad:e=>l.isLoad=!0},{placeholder:x((()=>[y(s,{animated:"",class:"full-layout"},{template:x((()=>[y(n,{variant:"image",style:{height:"100%"}})])),_:1})])),_:2},1032,["src","onLoad"]),j(w("p",{class:"text text-center full-w"},V(l.name),513),[[G,l.isLoad]])])],12,et)))),128))])]),e.visible1?(m(),b(r,{key:0,visible:e.visible1,onClose:l[0]||(l[0]=l=>e.visible1=!1)},null,8,["visible"])):P("",!0),e.visible2?(m(),b(u,{key:1,visible:e.visible2,onClose:l[1]||(l[1]=l=>e.visible2=!1)},null,8,["visible"])):P("",!0),e.visible3?(m(),b(p,{key:2,visible:e.visible3,onClose:l[2]||(l[2]=l=>e.visible3=!1)},null,8,["visible"])):P("",!0),e.visible4?(m(),b(c,{key:3,visible:e.visible4,onClose:l[3]||(l[3]=l=>e.visible4=!1)},null,8,["visible"])):P("",!0),y(g,{ref:"IframeDialog"},null,512)])}],["__scopeId","data-v-7e636af7"]]);export{tt as default};
