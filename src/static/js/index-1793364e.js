var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,o=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&i(e,t,a[t]);return e},s=(e,l)=>a(e,t(l));import{c,E as d,M as g,a as A,P as h,R as u,b as p,L as m,d as C,U as y,S as f,V as v,e as w,u as D,g as S,p as L,_ as x,f as b}from"./pica-44eded81.js";import{d as I,y as k,r as B,o as R,t as M,b as F,e as E,f as T,h as P,j as O,k as U,l as H,x as J,n as Q,p as Y,v as V,g as X,av as W,B as j,al as N,C as K,aK as G,M as z,aa as q,V as Z,F as $,q as _,W as ee,s as ae,aL as te,S as le,R as ne,ar as re,ah as ie,ai as oe,a7 as se,aJ as ce,a as de,A as ge,I as Ae,ak as he,u as ue,aP as pe,bg as me,aR as Ce,bh as ye,bi as fe,bj as ve,aU as we,aV as De,bk as Se,aY as Le,aM as xe,aN as be,aw as Ie,aX as ke,bl as Be,bm as Re,aZ as Me,aA as Fe,a_ as Ee,bn as Te,bo as Pe,ad as Oe,bp as Ue,a$ as He,b0 as Je,bq as Qe,aG as Ye,ao as Ve,an as Xe,br as We,bs as je,bt as Ne,am as Ke,b1 as Ge,b2 as ze,bf as qe,Y as Ze,ap as $e,T as _e}from"./index-7e9c327e.js";import{_ as ea}from"./plugin-vue_export-helper-46f75680.js";import{W as aa}from"./worker-efe1e0e9.js";import{r as ta}from"./xlsx-eef54bab.js";import{I as la}from"./IframeDialog-305e487f.js";import{e as na}from"./binary-50e6c5e6.js";var ra="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABCBJREFUeF7tmlvoVVUQxn9CZvhmEb2YikZqkYWKt8QISgy1QDDKiEpEvAteQlAwsAgvBUVqEmKJguWDUSFUIoLXjK6WJiR28aHIG4mE+aB8cILj5qyZdc7eZ++z++95XbPWnvn2zKy5rG50cerWxfWnAqCygC6OQOUCXdwAqiBYuUDlAtkiMAN4J/JI8W6O5PXYXgJWOkwPA/uSPFm7wBFgpCdtbV28oyN5PbaOAeCaJ2liPasf0BEATAO2NwnAU8D7Te5pxN4RAOwF5GfN0OfA+GY2BHg7AoCQ+f8L3GwomYUbFA7AE8CHASX1lx81AJgI7E5pBYUD8DEwKaDEcmARcFtgfRcwpewAWNH/QWCxo2RaNyjUAmTenwX+4G9AX2A+8Kbxl8cB+1NYQaEA6Bp7MiD8NuBZ4D7ge0PBrcBzZQXgMtAzIHx9uvsDcG+bboPCLED+fcBQ6i7gVG39LWCuwTsGONyiFRQGwBbg+YDQRxN1wVTgA0PB9cC8sgHwB3BHQOh1wNK6NfGdAW4K8F8BbikTAA8A3xgCTwY+SawrKXrE2DMC+LIFEApxAcunLwJ9gEsJZVYAqwwFVwPLygLAz8CAgLAfAUqPk/RQo6ZEHdNZ4PYyAHA3cNIQdAnwWoN1ZXy/Ancae4cBXzcJQu4usCYR4JLyWr6s5OgZQ0G5ySudDoCCn4JgI/oJGGwoMBPYZKyfBvp3MgC9gd8NAZUbTDfW7wF+dBS830mdk9tzdQF1X/XBEM0G3nYU/BaQkiF6EVjbhBXkCoCqtrEpg9gGQECF6BgwpBMB6AWcNwT7zogN9dvkIt5MQIXT8UgQcrMANTaU4oZIQxEFOY+GAl85TPrW695BtfXcAFDv7rFIodKyHQJUbcZQLgD0qKW23WMkyohnkJNw/feZXADw7u+MdL7hmIVOKy1XAFTLq6bPkz4FJkR8MBcLOAfcGiFM1iz1XaXQ2W0HoJW5X1ZAqI2mvMGitgOgO9tKb7NSttE5Gro8XjQAKmHV4AjRRmBOiyjEvCnoVyujC3EBtbbU4LDoBeDdFgHQwESDE4tmORVkW13gDWCBId3fwCjgRIsAqDegHoFF3vywrQB4A409zvTXw0VR/ouIG0ZdJHWVG1HbANCDBz18sEjdG3Vx0lBMim09qmobAC8DGm9bpAitSJ2GYhTYacwgY/a39ErMi9C/1Pz/zzTa1wos75HEP7VWmYYxSWoLAMMjhhSaDOuhU1pShqk4oHhgkcZw7+UFgAYUrzoCNVOzeyB53WLt3wE8nRcA3hhLcqg1dtDTLHLde0ShYy4AA4G/Emdm7gKqw717XcML3f9XIxX02PTCVDHHIz24SOYNmQPgCfG/WU/7OKn0QFQAlP4XplSgsoCUAJZ+e2UBpf+FKRWoLCAlgKXffh3aZu5BJ3AjewAAAABJRU5ErkJggg==",ia="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABHBJREFUeF7tm1+IVUUcxz9zz1xJqocCI6M/SEWggQ9RixJobbUVFqa4KNFDkltQiCn04oMGEcQW1FbEUmL1IFSQVqQSooIWPpgvUe2D/aE/RIUiJKGeOU4c5qxsy71n5syc9Zx7dg8sLMzvN/P9fu5vzpk7c65gml9imvtnBsBMBTSMQBvu0DACXNaCwXPwXZ7FRk2BCJYJ+GzcsIKrgT+nBQAJG4FXJpj9TcF1tgJvRAVEMCjgg4lmNWxL4InGA5CwGPiyg9G7FBxsOoDrpbnJXTrJ6OcKltnMp+29PAVaEr4B5k82qmF1MmlKdIPRswAk7AYe6GDsqILbXT79nq2ACN4S8FQnkwLWxrC9sQAkPAe81MXgfgX9ruZ7rgIiWC5gZzeDGlYkOe1dKqYIr+piZ8F8Dbs13NBFxU4FK4oq7JWbYCRhD3BvjsF+BfsbCSCCNwQ8nVP62xNYW9R8T9wD2rBew2s55pSAvhiONQ6AhPsxz/u8qfqqgmd9zNe6Ai6BecrM+1tyzJ2IoO8s/NA4ABI+BR6yGHtewVZf87WtAAkvA5ssxg4rWAokjQLQhiENow6mBhR84RCXG1KrdYCEJZh5P9tibFiZJXHwVScAc7PFzkKLq2NZ6f8T7L5O+wESPgRW2UxpeCSBXbY41/ZaVICEF4DNNtEa3kzgGVtckfbKAUTwmID3HUSPZaWfu83t0M//QioF0IY+bW56V9iEa3g0gR22uKLtlQKQcADzLM+9NHh/2bH1XRkAaVZwWxwE/hLB0jPwky3Wp70qANdK+NVFsIB1MbzjEusTUwmACFYJ89jLvdLTnhhW2+JC2qsCMCpgyCL8RAuWnINvQwzacisBIM3G5fI8cQI2xPkbITZvTu1VAbDdAPcoeNDJQWBQJQBSzXlL3xYssL3YEOj7QnplADIIw8ACYKGGf9Nvgi14L4avyzJo66dUAG247by5ufULuDEbPF26HtWwYypWcjaDtvbSAEgYAPZaBvxIwaBN1MVsLwVA+slrs4d3jYt4VaNj+VIAOG5gXmCj4XgCN7vAmuqYYACT38wqIPiiPeos640CkjuESnNU7bU/p2FlAh+HKQjLLqMCtqUvJXjK8DrR9RyrY1owAAmfAA/7iorgppCTHd9xx/PKAHAE6PMVUvYmZ1EdwQAi+FHAvKIDT/gEhmJ42zc/NC8YgITTHd7TK6Jrs4IXiySUGRsKYI6EvwIFOb3RGThG1/QgABLuBA4FiPtbwVUB+cGpQQAicNnZ6SpSw7sJPB7sIqADbwDSvI+3L2Dss8A9Cg4H9BGc6gvgcglfAbcGKKh07nuvA7JPfn3A4ud3Ze4dPwfAKy3VuQIk3K1hjXD4EUKOul3KzPlTpTkI7MgKINvDfzLd5fEdK/3624KRGF737WOq8qwA0oGlOb9Lj7Gs53gThMbZI/KQMr/iOjlVJkL6dQIwPoCE+7LXVRcBV47/CfhDwxjwvYCx9H9lfsaSQqj1VQhArZ14ipsB4AmuMWnTvgL+A9IQ2UG8tFF1AAAAAElFTkSuQmCC",oa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABKNJREFUeF7tm2uoFkUYx3+HBEsUikxQLKKge5R+UMIsE4KCii50wQ8hUlgJRhEYKKhBYoqoSBdNqQgJCrp+sPqihiFkiQgqiSlCBFoQnfBD9iX+h93DOs3OzmX33T3vOQPvh5ednXn+v3nm8szMDjDK08Ao188YgDEPqCYwFdgMPA68D6wHjla/NjJy+HSBB4CvCnKOAE/0CwQfAA8DnxntGQthFXAr8A9wHND/VpMPgEuBfcDNCRBuAt4E5hll7AHuaZOADwDZJwEfR0IoezfX3SoEXwCxEKrEtw4hBEAohDLxn2SqNasUUyueEArAF4JLvGYQJXWp1iHEAPCBYBsv1PK5+LzlW4cQC6AKgjlj2MR3AkIKABeEYt92iW8dQiqAKgg+4luFUAeAG7MB7RbLgiYEQCsDYyqA6zLxtzlWc52GkALg2kz8TEO8BJvTW2chxAK4OguQbjfEfwQsKJnjOwkhBsCVwC5LXPAh8HQBiG2O7xyEUADaHNkNXG+0/HvAIss40HkIIQCmAPuBawyh24DFjkGw0xB8AVwOHASuMoS+DbzgEO+a49cByzzebXSd4ANAGyLaAZpmGLsFWJoowKf+YhW1xw5VBkwCfgGuMIRuAl4KEG9rRQVGeWgcUlStEFwAJgC/ApcZ1m0AXgmx2Mh7P3AW+CmhjNoglAEYD/wBTDSMfAN4NcHwOl+1QfgceCSkEhuAccDfwMVGQWuA5SGF9yCvDcLqkN1mE4D+/wtcZBj/GrCyB4JiqjAhfAo85luQCeB3YLLvyx3NFw1gbeC83FH9RHeBL4EHu6rK067iIKhtOa1fnKnYBbSeX1j1Qoeffw/cmdk3H3jeEpb/z/wiAJ3TdXWgq+J+AJhVyLQXuCsLzRWilyZzEFSkZ57fVVXe9vNDwIyCES8CWqkq/QzMBv4qM9K2DhhJENTHi3uR04EfAIXteXIu3spWgiMBgilegt/K+r7Z4HcD39m8wBULdBmCTfy9wLclrv41oBjEOQjanncRgk28bP8CeMgxID0HbDWfV4XDyt8lCGXiXa2faz6czRS6nTKcfAB0BUKZeNmnqe4pj+noZWBjDIC2IbjEz8mu8Hjo50TmBX/mmX09IM/fRndwiZddO0p2pMuArABejwXQa0+oEn8DcMyn6Qt5fsvWDkNeEOoBvfQEidex23mHQO0qK4oNTU9mp1fRAJr2BInXEvZchTKN7Lp3GJq2A8+meECTniDxc4HhgapEnYIdBT0x6TSg880kD2gCgsQrlNWucVXamUV7VfnKnutI/3DsGGAWWsfsIPH3ZVvxPqJS63xUJ9x1AUgdEyRey9iTPsqzPKkAtGHyTp0AYiFIvHZxFbuHpFQAQ3uHdQMIhRB761z1vAs8E0LMyKvu9k0TAHwhpIhXHSlbeGcA3W8abApAFYRU8Spfuz4/Wk6tfZxCAZECo1qmQVeF+tBCH1wUky5FL6npixNdxtLJUEi6AH6THpAb1fRXIvqkR3eTzJtpJpRB4AON/EX4vQAQ0jopee8ABENXefS7BNBRn065taqU+FNmBf0EIAreGIAobH300pgH9FFjRkkZ9R7wH8oaAlD3xfYnAAAAAElFTkSuQmCC",sa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA/1JREFUeF7tm1mojVEUx3/3wZAnZM7wYPZEyFCEFBkye0CUDCkyFS9ePEpxUcrwgosiQxmvTKXIcOOJ0lUuMocXN8MD/W/fzrbvd+75zjnfPufeu++q3Tmds/ca/t/a315r7b3L8E/dgblAP6AT0Dn6NN+lwSfgc9TM9+fAGeCjTxXLPDGXsXOAmcC4AmVcBc4C14CaAnnVG542ACuA+cCUtBWN+F0CzgOH0+KfFgBy8XXAhISK/QI+RE1DukatdcLxt4F9kWckHBLfrVAAZLAMFwCZ6B1wATgZGfwe+JqhcwegWwSGppBarwZ4a2oICAGSF+ULQEdgByCXj6MX0Zy9DFzMS7N/gyYCM6I2IAMvTYntwJtcZeUDwChgD6BPl6qAg1HLVZck/VcBasNjOmvV2AacTsLI9MkVgMVARQkMd0U2BMRuYFNSEHIB4DiwyGH8Ddjq8Ylns0NAyOB2Tsd7wNhsg/V/UgD+xDB7AiwHHicR5LHP5GhZ7BMjI6t9WTsAd4ExDnOtxQuB3x4Ny4V1W+AOMMIZdALQtM1I2QDYBWx0RpfH/JaLsj77HgGWOgKWAJq+sdQQAAuAU86oo8AynxakwFvvhA0On9HA/TjemQDoCdwA7HX3ETAyBQWLweIcMNsSJOOnAV9c4ZkAOOQEOUpCBgE/iqF9CjJaAQ+AoRYvBUsrkwCg8PaW1bEWmAVcT0GxYrIYBtwE2ltCFVX+FzbHeYBycDu2X13Cdb5QwBQnHLCYKHeYZzN1AZDhAsCQQlt3aSlUqWKP17vLDp0FgICoIxcAub6d0jblp29sdL1AU0BToR4Ayuz08mtOT9/Y4nqBXoZ1RRXbA5S2TrcAaA5PP5MXVAJTbQAUR7+0jFdqObDYk9WzvGqgryWjP1BtPEAuoTzekELgzZ4VKjb7/cAaS+gWYKcB4IpxiajDJCcWKLayPuSpqqTSnCElT+MFQBerOKk/XwO9fWjQCHi+BbRPYaiHAJBbyD0M7QXWNwJlfaigoEjLoqG1AsDNnuqFiz40KRFPN8wvFwDHAOXMhoYAz0qkoG+xg4GnlpAKAaCtJ3snRyXvTHV73wr65q99BzslrhQAdpSkHZs2vrUoMf+fgNmBqhIACoBMQbE5rwAG91fWblONAPhulZWbUtUnX0d6aGW4tS0AtEyBlpdgyzIYfCAUfCgcfDIUfDqsgCLogogACL4kFnxRVF4QdFlcAAS/MSIQgt4aEwDBb44KhKC3xwVA8AckBELQR2QEQPCHpARC0MfkTMEx6IOSBoSgj8oaEII+LG1ACPq4vAEh6AsTBoSgr8wYEIK+NGXvyQV7bc7dmAz24qQLRLBXZ10ggr08Hbdn36ivz/8FMCQkbhaq+iwAAAAASUVORK5CYII=",ca="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABACAYAAABFqxrgAAAAAXNSR0IArs4c6QAAAytJREFUeF7tm03IjUEUgJ+vbGwkIkpZ+PJTYiUkIUnJT8hCJBILKxSRBTYsPpItChs7vyUb5SeJshARCxKJEAsbJdHp3u/rM817z8y8t/ed93ZmO2feOee5Z86cmTO3D2v0GQMMgjiBeULNEGYBs4HxwDPgFfChjuVZhyfMAE4Byz0GXwY2A7+qhFE1hCPA4QADxUPEOyppVUJYDNwJtOojMClQtrRYlRAeAXMjNB4A9kfIJ4tWBWFaO/DFKPoG6I8ZkCpbFYTVwPUEJWXn+JowLmpIVRBCA6Kr/BLgbpRFCcIGocJkyTwBMAgGoRWozBOaDGEXsCFhxykaImlzbOvm9ngIeOhToGiLPA9sjdW4AfLeg1kRhL8NMChFRfEsScD+awahQ7JkngAYBIPQChnmCQbBPGFo+7TlYMuh5Qw3gFUpKVnmY9YDV0IzxvnAni4foOrmcwLYF3OAcmWftuuGdRsSO39Q7SL0ovUTMCFWgwzkL4achkMh/AZGZGBUrAq3gBXaoFAITd0ynwBzugFhHPBF+1Cm/e+ByZpuIZ4wE3iufSjTfnnnMFLTLQTCUuC29qGM+1UbVQFgI3ApYyM11cYC3zsJhUDY3X5eo02Wa/904HVZCMeBA7laGKDXQuBBWQjngO0Bk+Uqsg64WhbCNWBNrhYG6LUTOFsWgrjSgoDJchWRytOxshDkkaW8OSpqUmx1A6z7TO+oZ7ArI4WRe47cImB4+S5Exp3qNCDBvbCF7A7fANlmiprvSY2bZgsEgTW8uTK+6pA8+XMhuBUkV8bVU7b3TWUhaOeG3CFIoresDITRwA9lsecOQV7GSiE2eTlM1RKNdoHTLaHntBw+AxPLQJBE437DPeGPdheiBca1votJB0ruy0HUHQX8LPoxNQg7gDMN9wRRfwrwNhXCQS3RaEBMENvnAY9TIZwE9vaAJ6wEbqZCkNvaLT0AYRtwIRWC0NNua5sQGOV/E1KD8DYtMGopqXy0CRB8afsQEA2CPOOTuDCmw5LIHcILQGLCu1RPGBynPcR0M0affJUyg3pLqeClEtPsz6ECSFsOGsSe6DcI5gktR/4HM7/lQe4OcgQAAAAASUVORK5CYII=",da="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABVhJREFUeF7lm2nod0MUxz/PC1FkSciSEEr2vZSthITspbx4xNMjW5ZQSpbywlL2nSgp2Ze8QNnihV22F2QvIgnZIjHfX3N/3ef+5947Z+7M/f/+/aZ+Pcs9851zvnPuzDln5i5jztuyObefxSJgDWBDYCNgTT8JXwL6jdrGIGBf4DBgP2+0DF87YOVHwA6jWg9FPGA94ODabzODUXsAbxvkB4vm9IDVgbP9z2J03YiVwJ2DrTIA5CLgZG/4LoaxQ6IyXiSM1oYScIQ3/KBMGsv99RqM1oYQcJpbxW8roOnOwPsFcIOQqQRcAlxRSMmrgYsKYS+ATSHgeSCXy4fs/BaQF/w4BglWAv4bQyngHOCGMcayEPAxsN0YSgHvAfsDv5YeL5aAR93CdExpZRr41wAXlh4zhoArgYtLK9KCr4hSa06x1kfAScD9xUbvB37Fvwr9kokSXQSs5pKYN4Ch0V2iatNuDwMnDAVp699FgFbi6xIGfgb4yr02fwNbAUcmYDS7FCOhjYB1/exvY1Q+lM0dDzxkxAmJiwTlHL9nwJpCtBGgRU+Ln6XJTaVkqO0OvGUBa5F91W2N5wFvZsCaQIQI0Ox/CGxqGORB4MQe+UeAYw2YbaI/AecD92XAChJwNPCYEfwMV+25taeP9vSrjLhd4rcDt/jJSoYNecCNwFlGRJH2RE+fXGtBfZg/PAk3A18bdW59Bb5w7rWFEewmXxfo6nY3cIoRN1b8ez8BihueAn6L7dj0gD396h/bv5L7C9BCp3wh1DYGPgHWsgInyP/rgqcXgZd9LqF84hf/dz17qY7ZJEA5vnL9lNZV1X0N2CcFtECfa91WekGF2yRgqKJyxeuBz4B/gG19HrFOAUNSIT9wi/xObQR8CmydirxE+ul10FYfXAT1MHRosURsi1ZzE1d9/k7S9VdAx1V/RkMsbcG9q8W+TsDmPolZ2qbFaX8coCLPKh6QugXGDTlbUsonJplu3QPmiYBz/W61CgGK/hQFzkObhu51D9A5fXQIGWBJGeE3fo89ZMZZ3NVXnhdkgyKgurBgsWG6rfhOlwGXWgBGltUR/s/NNUD/TkmEpgtKw4gnM5XDcnMjw0VAMBBSEVSLoaUd2EwwZtwLdOiiVyBIgAoMp1us9yWqUPF0Vj3gDkAn20ECNJsvGAkInekf4FNSI9Qo4oc7L1flOkiA/vMHV2XZwKiKskjtAp8De83wAqh64vp120IlMdXaRr2mYiR7iPgDgE67pi1EgOLktvL2kMGrvjrrU/FEKenyHIAGDBkvEjoJ0Bahsrj29tztcgeoGKFqJQqlbTrr4sWOrnap16CTAD0sEcg8Cxwa0K7EWCESmuRPZNpOhlTE1ElOTi9oO+8/yl2JeTy3qzXwNPs6tpsUQWI8oIQX6CRHZ3vNdqZbmVVWL9mCs9/lAXqW2wtUbVKc8XrDUpWwFTeUaq2z30dACS+QMnf5TEz7sfLy7UtZ7nFbZz+GAMncuwjbVS5Oeu8Z9V2RqRQp7aa5DK7j3AOc2gccS4BwUlLlvvFLPX/XnRHuFgNuIUB4Y12UjNG9SybarmjB2mjv1PPpoZpm7q9Pbra0YKYQIPySR90W/euyOvXVNmtqqQRoEN3qnp6ymkbNL9wWZPWONISAKk5YkTlk7lW6JlDFFfUEy9I/y0dTihhVPxiTiMpwlbcWxPcWBoZ6QH2sMYjIZnileE4CKswhn82FJk8r+9O+xqiAbFLPz9VKENDUrfpwUiu0tih9ONnVVJNU0PWcNzzbpcjQoGMQ0BxXJ08iQveIqz1bBqugqj+zXoXt85TFIKBPp1Gfzz0B/wPjYNBBiLq4+wAAAABJRU5ErkJggg==",ga="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABM5JREFUeF7tm1vIVVUQx3/fow9BaQpChkRlKqjoQ0lB9SB28Q4J3kANFEODMq2ezKeuJKSIIeaFpFBQFFGUwktlBWmWGF5SJLUH74EPvojxl3Xgc39r9l57n7XP3nzfGThPa2bNzH+vy8ysOR30cOro4f7TBqC9Ano4AmVtgccA/Z4E+rUQ4xPAOfe7EaI3NgCjgU+BZ0OUl8zzCfBulo6YALwFfJ6lsMXjp4Cn0nTGAuBp4JcWOxeq7gDwosUcA4DewBFgYKhFFfC9Caz06Y0BwMfA0gqcyquyD3A9KRQDgB3ABI81bwN7gb/yWtok/xbgNc8czwC/lgHASWBQYuKtwNQmHSkq/jKw2yM8E9hcBgB3PcqWAx8U9SCCXLBNMbZAsLIIjoVOEWxTG4BASB8BFrrwdggwNEMu9hYY4G4a7W+F1n8AG4B1hh1RV4BO1NXAw4FgiS0mAA8C+4ERHv0KcBToJCkaALOB9Tkcb7DGBOCjlJj+sJF3RAHgceBMAedjr4CdwHjDjlvAA2WtAN2l2nNFyLcCpgAj3Rd7wS3dn4CjwLYUJV8C84zxs4A+VPQtkPb1fwb2ddK4LCAO2A5MSnHyG+A94B8Pz9yUw24VsKgMAKxoypdUpO23YcBBQAdZFp12IAisJCmoSgJ9zIXgF8oAQKh+4ZnYFzdYAEj+WpbXifE7zilfKKvbSGeBwFR+ocPxpjF/04egD3HpygPAOGBUTgDE/p8D4VAB2YZI5QAIQCsXUO1AWVl/YLLh5CX3tX8vCELlAFh2y3GlpQ3SbaAgx0fKMscAFwuAUEsAbgO9PM5M96Wpju83B5jOhjxUSwCGA38aXugK/NAYS63p1fUQTNql6tCKjE+ofGOBwbMrJRr0idRqBXwFvB64fuXoqwbvt8C0wHlqA8B37iALtPse2w/Ac4bA2pSwuLNILQBQZKd09d883jteXX++9FfD2kraUmlUOQA68RUIfV/A+YaIMlFfoqPx910kaE1fOQBFTu6kM4+61yYFTD5SrWJjXW+BGADIN50Fygt8Ob/GxyYy0wYe3WIFNJxRoPS1kYeIRxnn8cRK6FYAyLf5wJqU86QvcLXTeLcDQL4tBj4zQEiG2d0SAPmuooiVZWoFaCWIWgrAFU/JXJnc4CauwDRRdaC8YzCoUKI3iz3ASwke7xO59TKUpyDyo1GaVvVGoW0ZlJY3qAT3vEfpKw6Y+4ZiAKDXGRUuk6SGJVVzVbsvgzYBs3JM/ATwd5I/BgAz3DWVw5aWs2pLaAV0oRgAaFJry7TcU0Oh9+uLNxYA1slbBwDmuIdUry0xAZACq12mCiB0Lb4BqFvFpNgASJEORLXNqUtUV1Ljbm4FCDp4dRWqW1SvRpkF1TIAKMvRPFdzsA1tAAyoSkE7+LP4GUuxyVoB1t3ujaaadCxU3Nf/l9kLnDW5BYDV+1tF/596klT48DViq3liYpaTRW4B9f/mfdltxo6iskEt8UUAkIz1RF7U2Nhy593rc5f+3zyKsvoE9XCpB8w6krf3N6+hWQBoPl8vcF49sflDntqCdIYAoInq0hKvpqolgPqUolAoAFL2kOsU1Z+hsjpFoxjnJrkM6JWp8WeomHO3/ziZZwVERb4uk7UBqMuXqMqOHr8C/gds2CJQOXaWTAAAAABJRU5ErkJggg==",Aa="data:image/png;base64,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",ha="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAWJJREFUeF7tmlsSwiAMRdOd6cocV6Y702F8/BV6M9cC9fQbSDi5CRRYQv9OEXGrdDtHxF0ftk+PJWEWACiAFKAGUARZBdYJ/MUyeKko4Hr0fUBi6zBul8xGaNzZJDwDQESUre2RPuk/pCjgcaDZyysQAFAAKUANoAj++yow2z7A+is+207Qfh4JgMnyfwgFFCd6nQcMA8BaiAQVAsB9J5EpgvYooIDtBOzwUcB2+N+W9igIPthtowCB/qepPQqCD3bbKECgjwLeBOwyFIJgt00KCPRJAVLgRcCeh4IK7bZnrAG1M8xyLyjfDQoB6K4A1ddm+9kU0JyQ2gAAKrGNRTAxbJ8uv1BAn5kkrQIgAa61FieG7NcFBSTYo4DG2XyCab8upECC/WzvCapTzCggwWzcLgAYNzb7eDabAuxvE2YEYH2bAIB9Ms1mpbULTb0Wt3m3w0AAGOGJzA6BXjWBAtwKeAKdXou6GAsZSwAAAABJRU5ErkJggg==",ua="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABShJREFUeF7tmlvIFVUUx38+BPkQZBmVRRRqRUqpgfVQURR2LwrUshKjCErKyrAbWlqY3aMbVEpWFpZkUUnahaJ6yCjsXiZYIV5QqAzJBIn4H2ZknGb2WntmtO9wZsHhg++s2/7vtfe67NOPHqd+Pb5+WgDaCOhxBNoj0OMB0F6C7RFoj0CPI9AegR4PgEazwFXAscDhwDBgT2A9sA54EXgf+LmvAd7EEdDC08Vb63sa0OcLi3F3fV8HgAOAF4DTKjg7DlhUQa5xkaoAjExCekANj/oECFUAOAT4tcbCU9FfgFMA/f3fqAoAa4FBDXk8H7i8IV2V1MQC8CRwdSVL5UIXAwsb1ulWFwOAbvqn3Jr9jCuAE4C//CJBTqXfc4FrclzvAo8CW7L/jwHg8yTPW37OBFYCuiBPBsZaAsCdgOTq0mPAeGC/EkW/Aw8Bd6ffewHw7r4WocVkyXNsfgCGA//UQEDRKT899DhwrRi9AHh2/23grBLrbyRhGXKuzl1wD3CLZ+UZnhuARzwAXAAsdig/Cfi4hO8c4E1Dx+uAbMXSccCnsUIJ/xkeAJ4DJhoGtAO3GTyeKBgF6FKMIR25O2IEMrwzLQAOAnQ+9woYkMPa/Z1u1wJ+XYgfGI7OAW6NXIx2X1FQhZZZAEwGdGGE6C5ghtP6K0ZWULeoyzAmJYq3v9N+nu1PCwDLYSk8EfjE6cAlwAKDV8dNTZaXvgKO9jLn+H60AFgDHBxQ/k2kcXWQ2mUVK2WkLlGNkpdeBS70Muf4FoQAOAr4zlD8IHBTpPG3gLMDMn8DR0Y0XPcC0yJ9SNmnhAC4AphrKD4deCfS+IRkQhQSU5Fi3T2p/GDgowoN2ibNMkIAPFFQT2ed3gAcGLn4lF3H4NCAbGxNoLpf/sZQ564JAaCUpdRVRkuBM2MsZnifBSYFZP8AjgA2Rui3/M2qUnmuDBcshWW8rKmQbJWcnTqhxQuEEHVK1QgAFNIDDf7fkl5FTVOHyiJgCLDKUHYR8HKEg1lWhb81IV4OHO/Ur2m0+pUQadenAwJhBxUBsA+g4ibfT+eVK0R/cjpYxPY8cJkhr5HZhw4b1wMPG3yHFY3f8gDo9lVtLRBCtBnY2+FYiGUMsMzQMQ+40mHH6lZL65UsANatn/VDu6LdqUsCQECESJ3kkgCDZ1YxG7i9SEcKgEJRIRlDlmMeXR67FtjW7quwGpFMqf7jkwBQHf2eceMXLeZbQO8D2z0rDfB4avkpyTwvr0Yzvs5kJ0DPhCZFAkDpRnOyKlQ0AovVo1L6fkNIPcl5wJcZPk/oiz3YrAkAT8dX5p8ePS+NXXGOf/9kYWqUQqTiSIOXz4DrnNOj16xGSQBYHV/IqZhcHdJTp6EJ6dW7pV6lS0kA1HnpUVGxb80IkLg6T4X3Hg3oSlWoLrjR0icA1HicbzGWfP81cExF2bxYndleXpcKNJ19s5cQAMqPOx4KIhdzM3BfpEyI3XOrW+a2JveSZ5Ld6QU8FVmRURkamhwhy6mY7628HtKlX6OozQ2e+6yCtBCaCjwQ42XylJV/BYpUUcruGaHnhTWdVmq0mqKd5LKlsAoGT90tBU3kfwss709vlB61eRrPqeqLonwzpEjQp2zSox8z6KFkV+18kfOnAiq7danJL/02QbPK74HViT96u6hERe2w2kaBMDpJcUpzelWdBbwEbKtkqY8KWWPxPup2c261ADSHZXdqaiOgO/etOa/bCGgOy+7U1EZAd+5bc163EdAclt2pqecj4F/KqNXHqVth1wAAAABJRU5ErkJggg==",pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA6BJREFUeF7tmkvITVEUgL+fCMkzkgiRZ54zA2VmJkWIUooowk+I8siAKIrIM5FHeZYykBIjIyZCSiGZGDEykdKqc+v6nXPP2o+1zzmx6p/8d9279/eddfbZe5/dxT8eXTXknw68TdWvugmYCtwFlqeSUCcBkzP4mcCbVBLqImBSBj+7rfSTSKiDgAnAPWBuzn1vLqFqAeOA+8C8DoOeqYQqBYwFHgKzFCO+mYSqBIwGHgMzFPCtFBMJVQgYBTwDpjjAm0lILWAk8ByY6AFvIiGlgOHAC2B8AHx0CakEDAVeAWMiwEeVkELAYOAdIPd+7AgeGK0FDAQ+ACNik8eaMVoKGAB8AaT8rcO7EqwE9AO+AoOsyUMrwUJAH+A7IBWQOpwrIbaA3sAPoG9qct9KiClAfusnIBKqDnUlxBTwC+hVNblrJcQSIGXfv0bw6slSDAHfgCE1hFdJCBUgjzpZ4NQ9CseEEAGfAdnUaErkSvAV8B6QjUxNSMMuGx+a3/TN+UuCj4DXDkD7sw3P2w7f8YXTfu8PCa4CXpZsYLZ3Yi9wJPuHvO2ppQQXAbKTM1+peTdwrEduXSR4VcBTYKESfgdwoiC3agleY8AjYJESfitwqiS3KgleT4EHwGIl/GbgjDI3tQSvecAdYJkSaCNwXpnbSksloePCqGgQ3AUcVQKtBy4pc3umWUsoXRXmCVgAPAFkY6Ms1gJXypIqGhNK4aVfeQIuAHJVy2INcK0sSfl57EpQwRcJkOMp00o6vhq4qYTTpsWSoIbPEyCvqz+V9HglcEtL5ZgXKsEJPk+AHFaQffxOIed35AlhFb4SnOGLboGPivd3dZPgBV8k4AawSnF5LSUcAvYp+iAp3vBFAmR0v6ps3ELCYWCPsv0g+CIB8v+zgMzuNBFTgqwgd2oaDb3yrTaKZoLyLl8mQ+3H1qwHxuPA9pTwnSpAPnMdjUMq4SSwJTV8mYBUEk4Dm5Tw8vg9GPMYrWZHyLISzgEbHOClyqKGRoBVJVwE1ilp5MpHh9fcAu39i1kJlwFZSWrCDN5VQKxKkDmGzDU0YQrvIyBUwnVAVpKaMIf3FeArYSmwQkOeLbZM7vme7WsHwbx+u44JSnaztFzWEAE+lWBGp/hhEwFNkmAmoCkSTAU0QYK5gJYE2VCZo7gnU6ckESBQcl7oALAtNWFJe8kEtPqxBOgGhmV/cma4ypNkyQXUrADyuxM6D2gEZKdO/hfQ+EsYCPAbQNrMQVfLiLkAAAAASUVORK5CYII=",ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAqhJREFUeF7tmzFrFFEQx3/XWooKSsAm+gUsYgRDrAyKhRobtdRCSEAtrNJYBiGJCBZqZ7QwJFhENIIYEBIE8wWChQGbREkXW8P/uAfL5i63e7frPvzfwHFbvHtv5se8vZn3ZmqUL0eBK0A/cAg43PgOz9LgF/C78QnP68A8sFWmirWSJpexl4FLwNku1/gALAAfgY0u59rz86IB3AJGgfNFK9qY7x3wFnhR1PxFAZCLjwPDRSnWZp5l4EnDM7paslsAMliGC0AVoq0hEALSkXQK4CAwCcjlYxBtiYfAz7zKdAJgAHgM6Dsm0b/GBDCXR6m8AG4As3kWqGDsNHA/67p5ALwCrmeduOJxq8CZLDpkBfA3y2QRjmlrX9sBwAowGKFxWVR6DWjbtpR2AKaAe1lWinjMTUDbt6nsB+Aa8CZiw/Kodhr42uwHrQD0AZ+Ak3lWiXisjL8AbKd1bAXgeURBTlFcFSzdzgJA4e3nolaNbJ5z6bC5mQcoB68qti+bl3KHq8lF0gBkuAD8zyIAAlGXNAC5/r9KaauCrMxRW2EPAGV2evk5iF6G9UOVpAcsAhcdrAeWgJEkgOPADxPjg5kngO/BA+QSz8wAPAAeBQDvg0sYQfgCDAnAEWDTyPCkqccE4A7w1BTAmADoCOmuKYAZAXgJKGd2lFkB0NVTWTc5sUNdEoBvwKnYNS1JvzUBUACkQMhRNgRgBzjgaD3wpwegtwV6L8He36B9IGQfCtsnQ/bpsGIg6wMRAbA/ErM/FJUXWB+LC4D9xYggWF+NCYD95aggWF+PC4B9gYQgWJfICIB9kZQgWJfJhTNS60LJAMG6VDZAsC6WDhCsy+UDBOuGiQDBumUmQLBumkpeI9q2zaXvUm0bJ9MgbFtn0yBsm6eblRlE3T6/C5GrlF/ZTA2NAAAAAElFTkSuQmCC",Ca="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAATBJREFUeF7tm1ESgyAMRNeb1ZPZnqw9WoePToFqDDKMRR7fTIQ1JLuBTJJukp7aHw9J9/1pfzEjrHNxrGSeACD1gNcKasFDwujVA6w9/XhAvsn4ePQKwCwpBiE+HgCQxwA8IIv0wx0BK3OsBRNHpjltyid4WwsoSoOn7aThhwEgBEFreFliw59UbTpPg4lBAMADOALEAIKggQBZwFksqc5VDQ2QBjM5DA+IEYAIQYQgQhAhiBBEaBsBmCBM0Hdv2JDJVpuGCkOF06sxtABaIEIAMYQYQgwhhhBDiCHE0CYCqEHUIGrQ9Yy2WrM2NIAcRg4jh5OnstQDqAdQD/giQEGEgggFEQoiV1B8R5k0r8VL2uaGaJigZ2j0niE8YHQPGL511sqnvbbOWnsq4gGXBOAN2hyzQUhLL4IAAAAASUVORK5CYII=",ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABVZJREFUeF7tm3WobUUUxn8PAwXBQmzBRLEQ6xnY2AgmdreoYGG3GKioz1YExRYLUbHFfgYmKqjYgfEQxcB/lO8xI+Nw9jkTa587cF1wuJd7ZtW3Z8+quVOY5DRlkvvP/wCMaQesDWzmPvMB8wP6KZoB/OR+3gM8DXw4Jrt63wHHAIcAy2U69AowDbg9ky97eV+vwAbAKcDm2Rb9l+E+4BLgpUo5nex9AHAEcKWxwacC5xnLnCnOGoC7gZ37MBS4H9jBWrYlADrI/MFmbaeXdwuwj6VwKwDuAHa1NGyIrMOAa610WQCwH3CTlUGJcnYD7kxcO3RZLQDzuBN6BQtjMmR8AKwL/JzBM3BpLQDnunBXa0cJv6KCokMV1QCwmnv6c1RZUM78p9sFb5aLqAuDJwLn1yg34D0LOLNGTs0OeAbYqEa5Ae90YGqNnFIAFgK+rVFsyLsY8HWpvFIAtgIeKVVqzLc18GipzFIA9gBuLVVqzLcncFupzFIAjgSuKFVqzHeUK52LxJYCoJP3jCKN9kxVkaAUgL0AFSYt0IQAsD7w/Bi9V8r7BPC6a52pjabP0oCigEAootIdsATweZHGdCaFWXWEngQeSGfLW1kKgLT8CsyVpy5ptcKrHL/XotgZpbEGgHeAlUcpyPj+G9f2ujqDp3ppKgByVL2+QwON6vvpbxakOK6o8skAYQsELfUVg5a6uk/+LFA36g3gIeBZQIVSEqUAcBpwNvAXsDzwqZO8lKsGF0zS1L2o6xRXZ/lYQJnerBk6fgDUm1Q32dvayT4MABU6eiphwRMbezxwUYZx8dJBzi/uHD+6Qq5YdYgKBH2yAdgOeHAA1xfuvf/FfTcL8CKgyU8uPQ5sETGt49pr2mlWpEnT3l0F06AdsKkLO10nfJx67gLclWnta8BaEY9a3jr5+6A/3E5+NRYeA6Anqf77wkOseBfYBvgyWJOTGg/q5Ohdv7gPzyOZSwKfhX8LAVjJxd9lEwzRaavXJKRUEOJe3jgrS/UN5Oe/zdQQgMsBbe9U0vAyXj8KhLibu6pLcRXqxkXKKrf3yjwAOnnfBubNtELnhQ6Z1J2gvCFMdK4DDs7UabFcE+vrJcgDcHLF8HFuwEcFb5w6RvsDOwXW/gboHVScFq3uihsLh3JlKGlawwMwO/AWUDPc0Bhc1VpMyiH2dfO8G4GDggUT9fS9CTN3gXbAti6FzEUxXn86cE6HEEUXhdWn3PeaJSinGOe7H5v2HLChANBBpgPQgh52tbni/DDasqaRaWGokzFVAFwG1KadsU0qaXW9patZeRVwuKEjpaKmCYDHDK6ydBmgpENVY5yPK+KsUmq1Id90AaDOjjo8fdJxEQi/A3P2qTBR9scCQGXubIkMpcvC3v2iwFelgoz5ZgiA74Damn6UXRu7RoXWKTRqrtgECYD3K3OAFEeUEPlKr7kd8AKwXooXFWvUSlPi46mpM+AE4MIK51JY43t+TUWBZYCPUryoWKPtH9YFTeUB8kuJiwqYvkj9uUUC4U1lgrLrQOCGvrx3ctXv0yVoUVO1gPe77ysvl7pur9fXTDXoDeqzKSkdmvxowKJhhqiZfkC48/t+Ks12hEIQNILW0+mD3gPWDEZXzfQEY2f/7sN7J/Mk4IJAfjNd4dhn1fK79wCEWmea1KgG8dTEXGCQr9Z3ga9xt0vDoco4DuHkydAgEDYJprSlG0JTWt0pGnWttYnZYJeTBwA7ZmaMLwP6Z4qbB7TOu/Q0MR0e9qR1MUFps1pa+t1/dEnhR/eR42qMfl+6ZYAJvx9QYbsp64TfEDH1pjVhKVdkWrPZ1J5JD8A/CCkHATPcQVEAAAAASUVORK5CYII=",fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABJ9JREFUeF7tmkuoVlUUx3+XQBwE6UBtkJCTSjALDdEIEqIcmFEDHYgvlCwVwV4QNMhmhYoOLDVQywihBoqKkg+UfJSYmVKJOTBIMA18gISIA/nLPnA4d5+z99rnfF927rfgcLnsvdba///eZz32+foY4NI3wPHTI6B3AgY4A71XYIAfgF4QbPsrsBzQUyptJkDAPwQ+qiKhrQRk4LOd1/8iop+0kYAieIE+C8wAfi0y0DYCfODPO/C/tP0E+MBfcOB/KouCbTkBPvB/OfA/tj0L+MBfcuCPhAq9bp2AR4HJwPPAE8CQ3HMb0G5dzD1a+PeAxqrEB/4fB/5QCLzGO0nAWOAVYCowMWYxnjk/OyLe8oz5wF9z4PfH+usEAQvcIl6KXUTFvG+dreIUH/ibbu4ei98mCZgCaKf0twmxgL/lwO+0Om6CgIeAVYB2vimxgL/jwG9LcV6XgCeBzcD4FOclOhbwMqEKTzpJUoeAhcAGo1e9pztcaarK7CTwADDJPY8Y3vm86/eBT4xruTc9lQBfEAr5PwYsAbwlaYVyrK/Krq/MfgoB7wArQ2gL4+uBRUYdTY8Fn5lWAN5r8WMl4FXAGmwUmVUPlImC6A3PoBV8ZmICcCKWBAsBw4EDwJhY48AfwOOe+YofzwJ/llxWpIKXq9PAi4AqwqBYCFDA08JjRbn5ZUdaXkedmbJG2TtbB3zmZ1NsWo4lYC7wRSxyN+8rYE5B5xtgegJ4RfmPjf4VcD8L6cQScBh4LmSsMP5eIVjOBrYkgFeel4g8i6i50uv3b5VSDAFqZnZZPLu5xYi8D1CX57ubKzv2WZGjV6b0UqNibUuBtXUJOOhaWSsHDwOXc0rZDW3RTgi85g8FrloXAJwCxtUl4KiL2Fb/I11/nwFQqxoLXsdX+pmMAP62LgA4HmrFY16BmcDXCc5DNXpVtC/2A2qtv0tYw6zQ2mMIGAz8DowyLmA18HaJTijVKXsoi2TyLrDC6F99xjMhnRgCZGMx8GnIWGHc2tVl6j49ZQ9lEYvMA74MKcQSIDsbgfkhg248FfxvnkrzBZeFdBJj5XPgjZjJFgKGAUplTwUMW8Er4P3gXjPfh8xzwGMxYNwcff0RaVdidCwEyJ5K26prJyv4UKDU3cG0GCC5Oa8B22N1rATIrkpMX3HRNPh1wJuxQNy8EKH9zKUQICPLAEX5qsClsZgip7iop13AVbdoEaXrrRYFzU0lQLpqalSfW3de5bAeFVhKVRKVugI+2t0dPGgEUuw7otXrEJCR4LuQDOX56AUGJuo+QdHedAuUt1mXAN/6ugVeafmDQr9hJrZpAroBXiWx4k9KadxYEPwvdl7HXDFHO9+YNHUCynZ+jWulFeBSRAXSbvct4UyKgZBOEwTEpjp9Htejjx/Zo5Z3EHA996iS024LvKrEjkpdAmLBdxREHeN1CPjfg69TCLUCfCoBrQGfQkCrwFsJaB14CwGtBB9LQGvBxxKgebqR1c1sJuaLhzq5upO6ljpAF42v1/1NTifBpNi2ECD7ugRJ/kFSygI7rWMloNPr6br9HgFdp/w+c9g7AffZhnR9OXcBC2PsQVriZsoAAAAASUVORK5CYII=",va="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA9xJREFUeF7tm0voTVEUhz8TRTJQIjLyGFEklIFHCmWAgZCBV0pe5ZlQJJJEIUyEgZCBKOWRvKKEGDBRTCRCmZpqaR+djvPYj7X3ubf/3cPbOWut+521z/39zlm3H3189evj358egF4HpCFwCvgFHLBINw3YDHwDdlocH3RIii1wBthgqjwO7Gio+CKwyhxzFtgY9A0bTo4NYATwDhhi6ngMzG6o6REwyxwjXTMB+BoLQmwA2wC56tlyBSDnbQdOdCuAl8CUQACvgKndCGAhcLNQuE8HSIhFwK0YEGJugavAMiUA14Dl3QRgvLn5FWv27QCJIzfD99oQYnXAIWBvSbEhAA4D+7oBwABz9UcrABBg2U/iJ9MFvzUhxOiA1cCFiiJdOyAPQEKuAUQoqa0YAO4BcxUBjAVGmnj3gXlq3x7U3eAM4ElNgT4d8Kyw92cCT7UgaHdAXveX1egDYC0g+z9bqv5AE0BR92sBEO8gOmCpCajqDzQBFHW/JgDZ93dzAdX8gSaAou7XBCCx3gCTTFA1f6AFoEz3awPYBJzOBVXxB1oAynS/NoCBwHdgkAms4g80AFTpfm0AEu8ksCUXONgfaACo0v0xAEwE3uYCB/uDUAB1uj8GAIl5B5hvggf7g1AAdbo/FoAlwPVc8CB/EAqgTvfHAiBxPwKZ2wzyByEAmnR/TAB7ANn/2fL2ByEAmnR/TADDzYuTYH/gC8BG98cEILEvAStD/YEvABvdHxtAcQt6+QNfADa6PzYAif8cmB7iD3wA2Or+FADkWcH5EH/gA8BW96cAIDl+AEN9/YErABfdnwrAUWCXrz9wBeCi+1MBGAd88PUHLgBcdX8qAJLnBrDYxx+4AHDV/SkBLABu+/gDFwCuuj8lAMklgxhyj5Jl7Q9sAfjo/tQAthYGKaz8gS0AH92fGsBg4CfQ3yS2en9gA8BX96cGIPnOAetd/IENAF/d3waAycDrXOJGf2ADwFf3twFAcj4A5tj6gyYAIbq/LQAySnPF1h80AQjR/W0BkLyfgVE2/qAOQKjubxPA/sJYbuX7gzoAobq/TQAyUPHFxh9UAdDQ/W0CkNyXgRVN/qAKgIbubxuAzBU8bPIHVQA0dH/bACR//ie81B+UAdDS/VoAyuK4fJaN2ck5//mDMgDHLGb6XQrIH+s6I+Sbp+o8mS/Iv10unRLL/2FBuwB5gLmuIehu4Ih2YhNPhrezByd/PyrrgGHAQUAeNWkuua+8AKQL6pa0rNy9x2gmN6/Vpbvlrzj/VpMSVK6h88L1AHTeNUlbUa8D0vLuvGy9Dui8a5K2oj7fAX8ApJMmUPBPFUMAAAAASUVORK5CYII=",wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAvRJREFUeF7dmzuMD0EYwH9XKCgoNAoKCgWFgoSEhIRERCTez4aWmhYtNS2N17lDIiISEhISEgqJu+IKCgqNgoJCI18yK3t7+5h9fDPz7XSX/8433+93s7MzO7MTjLNsAG4BR4HZOsSJEfJvcvBrgZkmCWMTsAW4DazO/WNrJYxJwDbgDrCypFdXShiLgB0OfkXNLV0qYQwCdgF3geUe49kCCdYF7HHwSz3gs0vmSbAsYB9wD1jcAn6BBKsCDjj4RR3g50mwKOAIMNkDPF91xqIAARhCwpxMkqwK6Cvhi5shvrcsoKuEb64HvZUA1gXIWCC3g2/57q5/nVWwLKAt/A/gMPAyb8uqgDL4y8DFiq7wCzgEPC/+blFAFfwl4DxwpQD5x8E/LZNjTUAdfMZ3Frjm/vjr4B9XDRKWBPjAZ5yngRvAQeDhGN4ItYHPeOXpcL/p8WChB3SBb+L+/3vqAlThU58IqcOnLCAIfKoCgsGnKCAofGoCgsOnJCAKfCoCosGnICAqfGwB0eFjCkgCPpaAZOBjCCiDlxcZ8jYnSgm5GEoOPmQPSBI+lIBk4UMISBpeW0Dy8JoCTMBrCTADryHAFPzQAszBDynAJHwbAXWbDGbhfQXsd9tLcvC4uNNiGt5HwF4Hn53GykswD98kYDfwAFhSWKaJBLkliiczoq7qui4lq1aDO4FpYJlnYJPwVT1gu4P3OXsrMczClwnYCkwBdaeu851CXmSIALMlfwtsdqP8qpY0F4CrLeskc3kmYKM7frqmY2bngOsd60atJgLkAyN5pMk3Nn3KGeBmnwAx6oqAT8D6gRovmywNFFonjAhY53pAHwlyGkvgH+mkqRc1GwP6SPjt4J/opakXOf8U6CLhJ3AMeKaXom7k4kywjQQ5eyvwL3RT1I1eNhX2kSCnro8Dr3TT049etRaok/AVOAG80U9Pv4W6rbEyCZ+Bk8A7/dTCtNC0N5iXIN/YCPyHMKmFaaVJgGSRSTgFfAyTVrhW/gFIAaRuLK3ybQAAAABJRU5ErkJggg==",Da="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABhFJREFUeF7lmwXIbUUQx38PBQMVFbs7ERsDFRVbLJ6BHaio2N3dnRjPQsVEUFFUxMDubkwExRYEEcTg/5iVffv23LO7d8/9Pu4dOPB99+6Z2f//7JmdnZk7gdGQ5YAPY1AnjAD+lYHDgL1GlYAjjYDFgL9DEkZhBTwMbAlsAjwxagTMDXwBzAicB5w4KgTMAqxl12kG+gPgMuAl3yEO2ytwDbAmsEqLc/8LeBmYOGwEbG5PXSRoBcwUIeJjWwVaCZNKCVgf0HX6ON5G9RpsCtxrc3wMOCqMB0oJOAS4ElgHeGEckzCdOcH5gOOAC2s5wRuA/YBjgYvGgIA5geWBd4BfW+zfDuwGrA68XouAV03hg8C2AyJgVkAefStgcc/me8DVgB5KTPaxQGjFWpGgIqrPTdmPwELAnx2TIJIFfqUedh4Ftoh8v6gRcHgtArYBHvCUbQQ82SEBO3iOrM3M+8AKbYP870uc4NnASZ6SU4GzcoxmjI2B/wS4HngL0EHn0kCf5nZuqo0SAh63uNrZ0P+bpRrMGBcDfz9wAPBToOdf7/+3jZgkU20EzA6sZg5PXlSXtpRQPgXeCK7fk2YQHxQDL4c7MXais93oAk/VbMBvKfabCLjEAz5DiqJgjMA7Qo7OvD8G/hFg+x7OVkHZ056dDYBnUuzGCJgDeMie9rQpShrG6AloOWoyqRIDr1dMn/daUYpH/BWgOCF8TaJz6PUKzOUtffca6LMm+coAKzh505zUN6nIDaQLW91tT9mT7xXs6IE9DyxtN+l1dH+3mm/zAb4CrQb5gEkWhbnvXrGoUAFJqcSe/LNGyg89lGpOd5tvcMMuB45InUgOAU7nFcChngGFwlqCpRID/6KB/7aH0umBe4CtvTHulUtygLqvhADF1YqvnSgwks8okRh4hdk7Al/3UDizPfkw8tsuCNJa51RCwDLAR6ZZjmnhhANJbCIx8ApuBP6zHjPX1qxlv3EwZqeMiPH/W0sI0M0iQEQ0xd9tzMfAy4cIvBIWTSInLPDhzrKzfd5md6rvSwlwR0wlGZVszJGm2F45OxEQLWAA8wN3AesGxnaxz3Pm0PcKkBOUM1wPeC7DctvBpomERYA7Lc3lm9vVPs+YwpRDS1eAjsTn2xNLNd4G3ukJSVjCQGoL9mV34I5U403jSgnItZsKPiThHwOvU58vewQ7Ue58+n4FcgzmgvdJEAHh+X5P4LacCfQa2/UKKAXfNOe9gVtrgZeeLgmoDV65vVtqgu+SgNrg9wVuqg2+KwJqg1f6/cYuwHdBQG3w+9vpsyv8VX1AbfDK/Sn52anUcoK1wR8IXNcpclNeg4Da4A8Crh0E+Bo+oDb4gwHV+EtF2eC2WuEUuvtZAbXBq+KsGl+pqPtjDWDtHAWlBNQGr9PlVTkTj4xVGl61wwWA71J1lRBQG7yKljpa9yNqhNQpUpKVFssloDZ4ZW+Vxe1XtGU6x6lj+gmpCnMIqA1eDYx6b2uIkiVKi0lUIdowVWkqASo0qPigIkQNUblM5bcaotqAijJKmUn+ABYEfklRnkqADiI6jdWQY4CLaygyHXraYX+C0uVK2LZKCgHqtFKHVQ3poqdInWquGdLN8YzUDrYUAs6JtZgWsHF8UMAsUDH5FqXHtN+7a9kGRUrdq2znLtUcppIUAtR2oo6sfkReWd65ROR/1ADpAKvnp0S+9MjQ66FOk6TToAYuVWLR7impHfjmVDHWDlRT7nMZ7ZQVoB6c5GprMMuTAb1C/Yq/5PW33yaXoltdbf7roL8nSwoBpfv/KYAaqroQ9fw5Upp2p5s90OpZiEoKAbpRtfqwJNULWJedY6FdhdJhQKWe4LB7rC8C5sk4YGhb0jY0KFH3ymuBseSSXeoKkP55rUqjhqSYKBoT8Kp5+0QWfUf9s50Ik7pXcwhwc9ET1g8SVgWmsYbldy2RIRLGQvxIVUGbts0kKSEgSfGAB6liJKcnOTMSGTZOZ1gIWBJQd5hE3eT6pViSDAsBAqveIoXJygh9n4Q+MQ5I1TXW47Tt6bdCA8kJjjXYJvsDzQqPVxKy5jVMPiALuBs88gT8B9WaF2Vt2x79AAAAAElFTkSuQmCC",Sa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAZtJREFUWEft109LFlEUBvCfW7dS4C4/Qpsi3FSgQeiyZWDgqnLZSkEFW7U0W4jQn61L3RSEgdUiEPoGtRMSP4NyZN4Y5p0r5wVhXMwDlxm455z7zLn3nufMmI4x1vH6rh2B+5jGIm4VsvMN7/GpMf8UD7FQ8PuLHfxAxLhAMwNbeJ7clilE0ECQ/YUbCd93eFEi8C8ZJPw/4FkV6CU2E4uHyQlulgicJYOEWaTxQWW/htURfP9nvrkFPYE+A51n4ABRjDJYR5z+wAy+ZJwat2eoEI1yn+s3aBzfcTtBYglvS3VgAvOYQ7y34Tc+Ip513Kt849mGU+xjD/F+gWsnRokMXq1JWwYm8egSNTzE1wKNO3hcmAvh+ozj+nyTQCjhq0sWH/iG8t1tLJS5QUHiDUIRW89AJsjAN5QwFDEwW31dZn/qIjZ0CDsvRD2BPgOdZ+BPogYMrlq9KY1WPFr1DKIWREfdWgeWsZGJUgUZtOVRPX8mya/gdYlA9AJPqlHq8Y+wXY0616ii4VvqJ6Id361G8cck+fFXZ9bL8TnWN14hjB+BSAAAAABJRU5ErkJggg==",La="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAqdJREFUeF7tmz1PF0EQhx8qE0NC6RdAe0opjEQtNECtJVTS2UCLttKrlZQSKDXYaCAkWGiiH0C+gKWJIbEzv+QWl8u97P35717uZre9fZvndmd2ZnZn6LfsA7PAo76mMdPXwMBr4Gkx/g6w1cdc+gIgwQXALyvAh9QQ+gCwCJzWCHoL+JkSQmoA2u+/gOs1Qv4GbgB/U0FIDeA7sNAi3HtgdYwA3gGPAwV7DrwIrHulaqlWwDYgobqUdWC3S4NJ6qYAoL+uvz9JuQ98nqRhaJvYALTfPxaKLXROfr2z4pAUzTLEBCBNL+HvTCK51+YTsBzLMsQEcBc4uqLwrvkScDylvi51ExOABhKEqiKlWP4mAes0fxThNbHYAOp+mlZGFQD96aQlA0iK+/9geQXkLZB1QFaC2QqUFLBsfTaDqa1Sl3PANeD2lI6kMc2gttZX4DwEZiiAm8ArQO7pNM7lsQA4/+MEeAb8aIMQAuAe8AaYLzobAgBNVbFHQdhrgtAGYA14W+pgKADctOVg1UajmgCokby2chkaAM1fq+BJ1UqoAiBldwAoUVFVhghAckgfKDjzxxeqDEDK7hsw17BvhgpAIskyPAC+OPl8AAo7KSbfVqYVnKg6CbaNHfK9Lgjjt90oFPtFQOQlsBnS+4jqyLJtaAUcAg9HJFgXUQ4ygAKX6S3gloxpJeggmDaDDoLpg5CvQesyukM8CHU6CvsQTDtDDoRpd9hXjmYDIr5yNBsS63K8DKkbKyQWMvalOm0Roc4dBjbIAHJuMOcGc24w5wZLCjPnBnNydITZYdPX5MxflDR/VVZK3vRlaWflTF+XdxDqMs1NvtNoHkw4Ibs8mWnM6Qd6nEHVUrvDph9N6Y+YfzYnCKYfTrp9afrprINg+vG0g9D78/l/mgjHlbfxECwAAAAASUVORK5CYII=",xa="data:image/png;base64,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",ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABKxJREFUeF7tm/2VTEEQxWsjIANEgAgQASJABGwEiAARIAJEwEbARoAIrAg4vzmv59S2nte3qnfejjPT5/jH635Vdbs+75s9sj1fR3tuvx0AOHjAOAJPzeyxmd0yszMz+2Zm78zs/firz73hkZNz1cl5MyJnJARQ4vNkeEsHgLg3gTKi41bljADwdcb4YjAg3B6x3sy2KicLwDMzeyUa9mQKCXH7uW2E1lvxYEpOFgDlVorePyYvID9EFq6PnOvioZS3ZQH4Iyq19LawPeEDk0V7DwDudnPp6+3IOxWS8j+vyHpAJDkthdOiSRCjFC/46RqkDBAkwl/CwdTt896sB3CW7Py9oxwV4IZgwKYtD8zsg3AeGcgKrxEA1DB4aWYvwpqZRcpgyv1HPKCl3ImZ3TWz12bGfFAW9Z8bivYBgPa8Ao6uktD7YmZ33LNsr5EOgZZyxQ0BB4WuOAUZjPAYdRFeNEG8qyyGHjrQTeGX8rRMCPSUQ8FWq8xgxM0pi2mS6a+s31PO8V5UXwLP8JBQLsgAQFIiOc0px7O6SmA8IPQWYcSU6Vcrxlue9tHMHvYE+OdRAFTlkBHZ63XCeM6WNVfiWok44mnhHFAPQb36y43cd8b0klUmdOqEGBqKIh6QUU7pFeY89lMVbq29LU87nqpRNxpUAIg3mh6fldXMXpfFrlJug+rOddKUS68KgJKVNxk2AoBa2tKlVwEAspPY90tVrFUyIx7AXrXNbYVoaZw2yqwB8AxvKWUY4V2fAUdlaeqSGTWe/Wr5ZC9J9poTQijwf1xisQdvXjPJBYAe8+oVV+OylZwyAHCG2k5F6S1V5pqxLgCoHJ+SlYuSJE3VU3qG9cqnP1+X3k3vXpVLAIgwvL4fn1Maxrj07T3j1Oe4Lh1hb0WS7jEAqLffE/w/Pj8BgF0lOBcB9ACAyO0tchuXIOQUD1CpLfRTk2AkEal2b6P1XiXB0iAoPL86b5fP174pUQ1t7Yuwy2rztZpkfSNEx6WAoDZCKqOrAHPRjRDG0zSd1a0w4UD9LkCwkWbG83sRqrue1RVj6z2FbFXO1s0XVBr6ensIT3qK1VpiGOp9O+gZpg5DcyzyRhkKABweobpbivWMLs/VqTPNV6gApOftYJWpgVHzTZqvUAFAsQwlFvm60/IKpeosQokV5Wqqu0dARuMyA3KERf4H5IgHcDhCdbfYICWmIyzv4rQ4INTz9iYCMhuXKsitxBfhK+QyWLsNN4vr+96gbpFVIzZVA4XlrSsTNR/qa+ufxlB67uMoz6MfUBSQffi0vjco4TWcA/wLagKykJeZRNbyhDmQ68QXmRXOyYomQX9Y7fXDcTkJiQxUi/9AAh2Vz16puHQoqyCr7fKFhoDCJUbY3FYYqD+S6vUjw7NA/YIIiaL2/aP75A+iXlA2Byi3P2pQ9HzKC7IA7CqTHLYnfGC6lr0HQPmVaHHhbI2OlEFk9X6t0gyprAdEkmC6Rge5hJScLACgqXhB6laqq9qqnBEAcNE5JnnNvEbTebV/q3JGACh6Eg7846erdH7lz+bWzOsgALUcJj4mUdhiRnOmwvS6CADSwnfh4AGAXbiFy9Rh7z3gL2UMOr6Iy8FKAAAAAElFTkSuQmCC",Ia="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAZFJREFUeF7tW1ESATEMfQ7DOTgJN8FJcBLOwWGYGGPMtjsb0XS78Trja5us9/qSSrQzAMvXZ4vvx0xhsgNg8S2u9wDEfmicXxiG5n0+F98XAXAAsPnG8mPulAkQGEcBcDeCF7OpE/AEQAKogJQBjbR/4G0000TtfSFAAkZbI98XUwFdfhkCPdsgc4BvKI7mnTmAOaDDgMS6VFLdsRpNpL4vTrBGTXZqGkmAmqqgE6mAoAurhkUFqKkKOtFTAfPCnN0K+3u68ybgWuhLLwC4EZDru2t68UPYRAGtEZDg8uwHtEhA1WqQBDQYAlRAzX4AQ4Ah0N42yBzAHJDpCeb+Hi/xE5lJkEmQSbC5Yoi7QG4X+PtyeKiutz5vcRdIsJTY7voI+vuWmFU5Ve08FVAViPVlJMDKXBQ7KiDKSlpxUAE8IpM/Lh9VGVWLIWtYetqRgJo9Qc+VtPqmAqiAil1hq0w97RgCDAFlCGhkeAGgOVTd6tXZ9yEp68VJEhBFAVaJRlDAXooeuT6/NtwgnzoBRwCnB1WTnTg2BcnzAAAAAElFTkSuQmCC",ka="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAV1JREFUeF7tm9FtwzAMRC+btZO0m7TdpJs0m6Wg0QSopACXCIbh89M35YTHo0iR4knSi6Q3Se96fJ2MLZ+SPgy5kcirpLOx9+dPD0P0JvJV3y4FZv7gngEoJL5LgcsjsDWyewdAAAADxi7gUHvCczbb2rn7PRcAgM1stO4Pw4AWX1zgThTgDFjXFTf7OmcAZ8Agl6+bVLvqFpa4Ol1TDzvbeABgQxUqCANCDWurBQNsqEIFYUCoYW21rmXxdkOVyhNXpxf1AOoBVIWHnaHU6EBBhILIoCAyao7iAolJwCjikQeQB5AHkAcQBQYn/qHCYD2Ta5fzNG2PkbLTNdXStnEAwIYqVBAGhBrWVgsG2FCFCsKAUMPaahUDDv9EhsvQ0S9DMAAG9Aikhkc6Q3SG6Az9R4DGyMTYXNUNnUfVM5Opa47OLlSYGZwEgBQGPEvRBAYsw9PPjs/vHYBlfP4XSV93F84e01kAAAAASUVORK5CYII=",Ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAZBJREFUeF7t219LFUEcBuDHb+YplCiKxEiKwigiJSkUlaLoj1IYFYqimIRiKIaRFEURRfXRZO9CsLMHPHj0nbndYXZ5Zmd+czFvF7rxR/P2FE+ad+uIHtV3Pq7xJY2uAlD+gLIEyh5QNsFSBWqVwb81ykondamWdrPWUhlsNthRfF4AqoPQ/9reClGdBo9C+/cU2MC+y7dVgGrgqQ4X2DtpBwrwCNPJAA/xLBngAZ4nA9zHTDLAPbxIBpjEy2SACbxKBhjH62SAMcwmA4xiLhngLuaTAe5gIRlgBIvJALexlAwwjOVkgCG8SQa4hZVkgJt4mwxwA6vJANexlgxwDevJAIN4lwxwFRvJAFewmQxwGVvJAJfwPhlgANvJABfxIRngAj4mA/RjJxmgD5+SAc7jczLAOXxJBjiLr8kAZ/AtGeA0vicDnMKPZIBe/EwG6MGvZICT+J0McKLm1frDNGrrRcljeVW2bmLkMGe1Xe8ut8Vbic3FByZKcLIkR0t0tmSHS3i6XQX5gMct6fG68fldocLlQVoqjmoAAAAASUVORK5CYII=",Ra="data:image/png;base64,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",Ma="data:image/png;base64,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",Fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAXBJREFUeF7tm1ESwiAMRNOb6ck8mt5Mhw9ntA2SWJgh5PW3bQrLZhOW6SYiT/FfVxF5GF+bJX4Zbxn317UBAAwgBWbJ0c/cHKExLg04iIUieFYRvBjFcv/Ymfg3Edl/1w2AdQB/zm/oa3cAgAGkQHoN0ETG3Al6ytBQNRsdvNYKpwKgVqcjl0EzcQoDUl8AkHr5RQQGwIDkCJACixKgbIfNrfCKGLj8gPQAaJ5g9L2AiwEAoOQADHAcfc2oIaQArjCuMK5welcYAHblKd3ZoHkztGInaO5NOBdQGoY3epwLmHkU+EEsscCL12XoMKALjIGDwIDAi9dl6KsygHMBjyPUhUqTBcET9DBgxd0gDIABuMLnXOGaF2D5j6AUhFodbhWLnvE1U/Twfc9PU6qpWJmRJkKtyY+Or34fABy/zY1eodHxYYCGQEkBj2D1FCmTb/9DY1qaYhbBVqCI912dYMQJtsYMAJ5WuIVmxPswwMqAFweTr7ssdMTaAAAAAElFTkSuQmCC",Ea="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABACAYAAAC5vjEqAAAAAXNSR0IArs4c6QAAAppJREFUeF7tmeFRBDEIhd9VYAlqJ5ailWkpdqLXwXWgE2d33LnZhAeBXFa5vxcIfBACmxPy1yRwSj5tAglIyJAEFADoCcArgIdF9yeAFwDvkx1XFzstGfSxgbMyKZAeJwPkYqcF0FcFhEVXJFMXOy1OuWwcSWbR7WKnJ6Brn0fVputaI7FX+axaLERmz7ARtWmv1rQgqXxWLV52vQC4k8K0+d+yh0I9akdpT8d554Jx76RLSr8BuCe9mAVQgfOsbUc8jXcpiiT07bLQfRNQQCddUxkayYYfoftmBhEZ5DKzAKrbxFBq1CLa4O9yKEpcZpY/AGiXQwHkdYY1/Yg6HQwC2gzatT8B/ZJ3A6SdfQzBDxGRZkM3QNrZJ8Rbo9LWbOgGSFtrtLVA67uXPQloIV8LWAJKQNzhvFkGRdcazn3h2gaQgIQvn9MBqvVNUl+y5oJVXjshhBfpWmRafRPzzdoqHw5Ie+ZVqav4Zi31OdZ9Kf9asxilgHDU6uCq2iovyVH+JSDig5kLae31SWTeNBmkfeeqMbfWAql/kgJo3Zc5YueiXPvO9V8A/byjSdErMLTX5TXAVoYyL5298tJRbTIYAaiWoexLZ6/89ICYsz5ijekkjMigEc4zeyQggVICmg0Qk9ZHWBN2ix3BecbGBESMW9UlPbcYE50jrOnOIK9ZbUZYYifPZJDXrDYbIKqTZwBJjpn6C0mp4f8QOxJQTwUnoxgSOXLv7bIQOzKDMoOqL6lUkmYG3TCDpAj1vqxK+tf/u5KgS3ixQPqo3nKk92WVgdTlY5ewA6CiQrKhJwCM/iZkyTgmQtEOROsPB9Qzq4mzEIBo/eGArLMaNQt1vNux+sMBMcfwsGs8atBhnWcMT0ADGkUmEIdd8w1nQ8Jw8ELiSwAAAABJRU5ErkJggg==",Ta="data:image/png;base64,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",Pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAtFJREFUeF7t2T/oVEcQwPGPnYWglWghpIoWiQpaJBKIIGgRE7TQQvwHAf+QSsQqgoKtYuc/kCSKCFooKoKCWPgPQUFEEGy0CEJSWVikCCGMvIPzeXq7d7+nnLsDjytuZ3bed2dmd/ZNU7hMK/z9VQA1AgonUFOg8ACoRbCmQE2BwgnUFCg8AOouUFOgpsDHIfAFluN7LMCsvic8eNX3PMF13MOfXbvXZQosxE/4Ad+M+CIB4Sou4fGINj6o1gWAn7EeK6fY4YiKczg5lXanEsAq7EL8dinXcBjxO7ZMBYCZOIRY+Y8pEQm/4q9xJh0XwNf4DUvGcWIM3RfY3hTNkcyMA2AbjmfO+ropaE/xCA/xHxYhimY86zA90+4eHMzUeTN8VAD7sS9zwrv4pXnxD6muwBF8mWl/A85m6owEYPcItI9hZ6ZzsfX9mKkTu8/5HJ3cCFiDCzkT4HJzHshUezP8KHZkKq7FxVSdHACzcQNfpRrHM8wfMH5Ts7rf4l/cwm2cGDD2DpZlzBknyUijv1N0cgBEwYvClyr/YHUDrV8nDjNR6AZJFMWlrT8WN4BmpE7cgIzdYaikAtiC34dae3vAaWxu6TxI2DIjhyOX++UMosjlyFb8MUwhFUCE6HfDjLX+b29NOdtmgAuAPdmLA5nzD4qmd0ykAIhm5krm5DE8jsRxfu/JKUTup0g7CiKVopjmykZE9LxXUgDcbFrZ3MnntI6pzxFtcYpEGzyvb+BcvExRbI25P6wTrQASqBafAsGo6CIYAIrfBgNC0QehAFD8UTggFN0M9TaMotvhHoSiL0R6EHLO9j2dz+ZKrPdCRV+K9iAUfS3ef5Iu9sNIu50o9tNYG0SxH0cHNZhFfh5P6LQ//ZCUC5FP72WHHlQAHcKdCNM1AiZimTp0skZAh3AnwnSNgIlYpg6drBHQIdyJMF0jYCKWqUMnawR0CHciTP8Phw+oQQpn1acAAAAASUVORK5CYII=",Oa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAMlQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqjwnTgAAAEN0Uk5TABefiz6Z/7lhCb/chCynT8pyGu2VkniAQJuMN6Qig+RHqApszjCR81W3GHqgY8UmiepLrg5x0zOX+Vm8G3/iQY4Zr/C50noAAAF9SURBVHic7dftR0RBFAbw83BLItWXtfshErEikYhE9c9nScSKxCrpRe+bskW7aXdOMnubl3Nm9lN2vszsNfO79uHOnAFlNowIQL91c4AJGOQ9GZjuMoPXLKDfpvCSB/SHwFMWQDSDtjxQF0CaQD2APFAvQMJAQ4Ao0DAgCDQGUCxQARAOVARQIFAp4A1UDngC1QDkClQJ/A1UDVAp0BRgKNA0YBDoQx5ANHtvA5W2Gpi/tYGqdiukuWuygfQ2Bv4TUP16Uy78qF3ZQO1R/erKpQ0kfEy9XgkohAv5VY7PuehE1y4ANzzdtaFEgUVwbL4tLQwsARdm4N9UQ8AycMbTA9u6H6ijZfrIweIBVnD+yVNiR5sTKOqnPBAcrg5gFSemlx3vZWANOOYpwgJjGFhH0/SKEscCNoAjfqwpsn6BTeDQDJRl3g+whQPT6wvNAbANNPhxQqlbdHZad+ZHYrFdTPJ/yCz38y4cGVee3f3MS9cems9Z1770NgZGAHwD3S6KQYresBsAAAAASUVORK5CYII=",Ua="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABIBJREFUeF7tmmvIZlMUx/+/css3JF/M0JgYJkbIdaIpRMwoRYMmQ5OMcSmDlCmKSRiKXJs0aJThA81IMdKU2yD3e5HrB3KNJHz4a7m83tve+zzPe57zPMf7rK977X3W/7/XWmfvtTaa5sI0x68hAUMPmOYMDENgmjvAMAkOQ2AYAjUyYHuZpLUVl1wG3FtRN6tm+xpJVxfWWgBsGa9TawjY3irpsIqgtgJHVNRtDQHuBBBQywYMhAfYPlPSg50QIGkxsKHDORPUB4WAZyQt6BDMZuD4DucMLAEp9/9d0nYpkHWEQd89wPYpkh5LgNws6bjMLp8EPDEVLxgEAjZJOjkB4ipJl0raJTH+KHBq2wnIZf+jJK2UlAQ51TDoqwfYDvd+KrGDnwN72L5I0m2ZXT4aeLZbL+g3AfEbOz1h/Hpgie39Jb2VAfgAcHZbCfhF0o4J40eOu7bfkTS3F3+DvnmA7Yjv5zI7Nxv4OMZt3y5pRUb3SODFbrygnwSsk7Q0YfTLwMi9wPZpkh7OALwDuLBtBHwlabeE0WuAy/8dsx16X0raJqH/G7BDawiwfaCk1zMGLwQeHz1uOw5Fx2bmHAq80ikJfQmBQkz/KGkm8PM4AlZJujYD8AbgyrYQ8JGkvRLGbgTieDxGbB8jaUJRYpTSt8CuA0+A7b0lfZgx9DLg5kkIiPv/Z5JmZOYeDLzWCQmNh4DtGyWNJLhJjE3Gsu31ks7KAFwFrB50AiL5RRKcTD4A9k0BsH2epHsyAD8BZg0sAbZ3l/RFxsB1wLkZAvaT9G4B4Dwgd3Qen1uaK4rajuprfDAly4G7cwBtvyFpXkbnCuCmql7QaA6wHbe2+VNJYrbvlLQ8s8bbwAEDR4DtnSR9nzHsTSCVG0am2Y4QKfUE5gLvVSGhMQ+wHYWNNRmj1gKR5LJi+yBJrxbUVgK3lNaK8SYJiNrdiVWMqkHnBSBum0VphADb20uKo+22RYvqU5gD5A5cf32pKQJK/+/6YP+30iVArpTWKAFxl487fZPyJHBC6YNNecB3knYuGdOD8ZGqUmrtnhPQZd+vLi5WAHFuSEoTBMQ/O3m8rQtpYp1NwKJ+ExBX2JkZI+4CLuiGiIpvCvYEwoZJpaceYHuhpI0FcOcA93VJQGT5aJzk5HwgeYPsNQG3Sro4Y91Pkg4H3u+SgKgNRI0gJ9n+Ya8JyDY0JD0N5Lq/WWS2Z0t6qcIfZgYQVeUJ0jMCbMeDh3j4kJPVQBQ7uxbbVY7YyUdVvSTgOknR3s7JIiDa411LRQCPAJP2ICvO7/yVWIUM/ek/8f911+j/PsvHBav0SOJXSbOAaMaMkZ4QYPsQSaUmxQZg8VTAx1zbccKMPBD5ICdLgfubIiAaFNcXDKp8Zy+RVKFaHEs8BJzRFAGlNlbYMR94vgSuyniFRxSxzA+S9gG+Gb1m7SFge46k0n89mhfx//+jCsCSju3oJMdL05IsAcacG2onoGTB/2m8lqeqbSZkSECbd68O24ceUAeLbV5j6AFt3r06bB96QB0stnmNPwFVUUpfVBacpAAAAABJRU5ErkJggg==",Ha="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABEpJREFUeF7tm12oZ1MYxn8PV2IuKEIzJKSMciEmmhoMBiFGppFczMRQI81QbuYCJaWhfCYxDS6mhjI+YiQNxcjFcCMfF+MjHwmRIiX06NU+Oo7/2WvtvfbM/v/3OatO59R+117P89trrb32etcRc7xojvtnHsB8DxgYAdtnAA8ChwCrJH1UZ3FQQ8D2JcBL0wwfKem7OQHA9i3AfdPMfi1pUaqDD6IH2F4FbJ9hdouk6wYPwPZZwO4RRs+R9OagAdg+BohJ7uAZRl+WFPNBskzsELB9APABcPIIl6slzRwSI2FMMoBXgItGuNoj6fTko68CJhKA7UeBG2cxuVbS1sECsH0bcM8sBndJWp5rPuImqgfYvhzYUWNwpaS66/+rOjEAbMdkF+P+2FkA7JC0ssnTn5geYPtAYCdwfo3B5ZJ2DRXAw8D6GnNbJa1tan4ieoDtm4EHasz9CSyR9P7gANi+sBr3dXPV/ZI2tjE/1j3A9nHVuD+pxtyP1dP/dIgAXgQuTRi7U9Idbc2PbQ+wfS9wa8LY28DZkv4aFADb64DHMkytkPRaRlxtyFgthGwvq8b9QQljmyXFkri4jA0A20dV5k9NuIrXXXT9X4rdj9O3gO1ngKsyTF0h6fmMuKyQsegBtu8CNmUofkTSTRlx2SG9A7B9LfB0huJPqq5fu82dcZ//hPQKwPaSatwfmiH8GknbMuIahfQN4I14qhmKW3/spO7dGwDbsYK7PSUQ+LLq+p9nxDYO6QWA7YXAV5lqr5f0RGZs47C+AMTrLl57qbJd0upUUMn1vgDEUjeWvHUlvvSWSfqwxGCqbl8AYuMyNjjrygZJdRshKW9Z1/sCkJoAd0q6OMtBYVAvAEJzYum7OHWwodD3v9V7A1BB2AwsBuID6LdqUfSUpPe6Mpi6T6cAbJ9WTW6RnTm+ajyWrnuAbftiJZcymLreGQDbK4BXEw0+KykOM4xN6QRA9eRjD+/oHGeSOmk3p61UTCdCbOdsYE7XslfSiSlx++N6MYARJ7Nyde+3V12doC4ARKq67f7clZKeyyW2L+K6ALAFaJWXi1R3m4xulyC6APACcFmBqBMktc7sFLT7T9UuALwb6akCIZ1ucjbV0QWAz4DI47Ut6yQ93rZyab0uAPw64pxeE12bJN3dpEKXsUUAbB8OfF8oKOtEZ2Ebs1YvBbAUeKtA3A+SjiioX1y1FEDOzk6dyCclrSl2UXCD1gBsxxff6wVt/w6cJynS3L2VVgBsLwDeAU4pUN7r2J/S3RhA9eTj4FLbxc83wFJJXxTA66xqNgDb5wJXA8l/QqhRF1ndNZJ+7sxB4Y2SAGzHHv4NQKMzuDN07Y1/ZJL0UKHezqsnAUSLtiN/F2msnDzelMg/qldkvCbD/E+dq+/ghlkAptqxfUF1XPVM4LBpP98Ckb7+uPodf++WFBDGujQCMNZOWoqbB9AS3GCqzfke8DfEiy5QjTSDLgAAAABJRU5ErkJggg==",Ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABP5JREFUeF7tm1moHEUUhr8fBRcUFBdQVEQhLolE8xAR94CgoEENRsmDBFHcQDEICgouoLggiYgaN2IQCRgwLg8uL0ZRBDckEEVxQRDBKIgRH9SHX86l5zK3Z7q7uqcn03cpmIehq6vO/9Wp5ZzuFvO8aJ7rZwHAggdUELB9BPA4cAXwIvCopK/mCrjKKWD7YuDNPsE7gdVzBUIKgEuBbbkRbwTB9r3AKcA/wLeS4v9ESwqAg4APgcVNIdg+GXgSOC/XxnZJ50+SQCWAMC4T8EoTCCX39nRPFEISgKYQEsRPHEIygLoQSsRvzVTHrtJfJuIJtQCkQigTL2l11k5MqYlDqA0gBQIwbL3Y2hPfG3bbE4fQCEAChPyOMSC+KxAaA6iA0D+3C8V3AcJIABIgVIqfNIQ2AJyUzfklQw40yQAmtTCOBMD2okz80pLTXKchNAZg+/hM/LKc+Njn89tbZyE0AmD72CxAOjUnfoukNQXbWych1AZg+2jgrSFxwUuSrq5Y1DoHoRaALDnyHnBCbuQ3Sbomvw7MBk9IBmD7cOBj4Lic0GclXV+0CHYdQhIA24cAXwDH5IQ+Lemmkh1g6lIBhEck3VF177jPCZUAbEdCJDJAR+aMfULSLaMIkFTZf3/744gdSg2wfSDwPXBYTugGSbelii8Yxcgr9kLj5KbahlAIwPb+wM/AwTnrHpN0e7LFuYq2LwJ2Sfp8hDZaiyKHArC9D/A7cEDOyIcl3dnU8DbvK/CE1yRdVqefAQC29wb+AvbNNfSgpLvqND7uugUQ7quTbZ4BwHb8/w/YK2f8/ZLuGbegJu0PgfCqpFWpbeUB/AYcmnpzR+s1A2D7ISB5X+6o+DCr2RSw/QZwSYeFpZg2vQjaXiwpzi+lZXoK2N4ErK26ocPXP5J0VthnewVwo6R8WD5gfj+AeE7XyYUuAfqnkpb3HbjeB84B1kjaUnZ/fhGMSC///C6h/4lW+VLSaX3ibwU2ZP+/AU6X9GeRhcPOAbMJwk5J07lI20cBnwDxTkOvlB7eik6CswHCDPHZ3H8q5v6Q0T5X0gfDvKAsFugyhGHiLwDeLXD1tyVFDFK8CA67aLuLEAbEZ6P/OrCyZDW6QdIz+euV8XjHIBSJLxv9nuYdwHJJ8XbKdKkEkNHtgicMFZ/ZF1vdVQl70TpJ62sD6ACEMvFnZq/wJOjnu8wL/uhVTvKAvj12Ep5QKD4bmBeAgYx0CY27JT3QCMAEPKFK/InA1ylD31fnF2CJpCkvqOUBe9gTIpBZJunfIoG2I3qNKLZuuVJSpNWaAdgDnhDi4wj7d5ky27Gyx3uHdcvzkq4bCcAYIYT4s3suWjL6EexE0NOk/CQpnm8294AxTYcQv0LSripVtl+OaK+qXsn1pZJ2NFoD8o22dFgK8RdKilR8ZWmhz8slbWsFQAvTIcSvlPRDpfKsQgsAImGysTUAI0AI8askReyeXFoAMJU7bBVAAwiN3jrP+nkOuDaZ2GDFmG7vtA6gBoTG4rM+Rknh/QoskrR7LAASIIwkPms/sj6fDXlqneIU6yWta2UbLOvNdnxoER9c9JftwM1tfHFiO7K+Uye6GmUG/LF5QM+gcX8lkn3SE+8mVaXAdwObgY398McOoMbIjFTV9hlAfN8Ur/LEbz8gHvXFU+4IfDZL+jHfyZwB0JTeAoCm5ObKfQseMFdGsqmOee8B/wOI0FJfmKPdHQAAAABJRU5ErkJggg==",Qa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABGJJREFUeF7tm0moXEUUhr9/4YArDc44LJxdKSoOoBgRFAccoi40KIgxBBQn0I0blyIkUUEwZqNGBSUx4BhxCAQUNQ9dKYQIRsUZdWPQuPjlPOqGst59r7tf9+32pd6BSzfdVeec+m7VvadOVYmOxfZRwPXAicChwGHps/keHvwC/Jqu5vsOYKOkn7t0UV0otx2NvQ64GrhwSBtvA5uAdyTtGlLXjOojBWD7DuAG4LJRO5r0vQFslrR+VPpHAsB2dPG7gYv7dGwP8FO6osoR6dq/z/pbgSclRc8YSoYCYDsaHA0PALPJD8BrwEupwT9K+r2tsO1DgCMTjBhCcR07h+4AECACyLxkXgBsLwEeBaLLt8lXMWaBNyW9Pi/PUiXbS4Gr0nXyLLpiSDwi6btBbQ0MwPa5wONAfJYyBayTtG5QR/opb/tOIK6zWsrHW+NhSa/0o6spMxAA27cAG8bd8NJeDxBrJN3fL4S+Adh+Abi5UPwH8FBXd7xXIxKINcBBRdmPJF3Qq3783xcA225R9jlwu6TP+jHUVRnblwLxDDi+tCGpZ/t6FrD9IXB+oXwzcJOkf7pq2CB6bR8IbAPOLuq9KCmG7awyJwDbq4H7itprJZW/DeJvZ2VtPwvcWhhYLimGb6vMCsD2jcDLRa3nJN3WWQtGoNh2PBPuLVSdJ+njNvWtAGwfA7wH5O/d7ZLOGYGPnauw/SpwbWYoGn+FpN9mPCfavLH9TBHkxCTkVEl/de79CAzY3g/4BDgjU7de0oqeAFJ4+0FWcDdwjaR3R+Db2FTYPhN4Hzg4M7q0DJtnDAHbG4vYfuWk3vPD0kpxwtOZnk2SluV6/wMgzeoCQCNTkspXy7B+jbW+7e1F6Lwsn0WWAKLr51PaBXv3G8otvWCrpJhgTcteACmZEQ+/febuZxDKXrCiSarkAGLaemUGYMHf/Tl6wRZJl+/tAbYjjv46a/wOSaeMdbB2bMz2TuCEzMxJknZO9wDb8X7M5/CrJT3QsU9jVW/7KWBVZvRBSY81AN4CprtEkksk5bHAWJ3twpjtyCpFaq6RbZIuku3Ds+Rk/PmtpOO6cGLSOm1/D8Q6RSNHB4DoFtE9GnlC0j2TdrYL+7YjKIqUWiN3BYBy9jQjXOzCmUnobAnz1waA54HlmUOnS/pyEg52bdP2acAXmZ0NASCWnvKVnCWz5e27drBr/WndIZ8SbwkAeZS0R9IBXTsySf22/waaFaipABABUJNQ3GffAA10299kq027AsCfWVp5wWR95tuLbH+aJU93LwJYHAKLD8HF12D1gVD1oXD1k6G6p8MRUNiuNyGSAFSfEqs7KZp6Qb1p8QQgtrzVuzCSINS7NJYAxI7PehdHE4R6l8cTgFgdrneDRIJQ7xaZBKDuTVIJQr3b5LIMar0bJTMI9W6VzSDUu1k6g1DvdvkMQr0HJjII9R6ZySDUe2gqX5Or9thcuTBZ7cHJFhB1Hp1tAVHn4em2Nfv/+/H5fwH8MYxNlxwL3QAAAABJRU5ErkJggg==",Ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABACAYAAABFqxrgAAAAAXNSR0IArs4c6QAAA25JREFUeF7tm0+ITlEYxp+nbGwkk4lSFuRPyayENDFJSv6ELEQisbBCmciC2bAYki2K2czO35LNlCGJstCIWJBINMTCZkp6dPrGNM53v++ce+6437nTOdv7nHvf93ff85733HMukRqYGCBBMEGQIqGVECQtBdABoB3AEIDXJD+2YniWHgmSFgO4AGB9hsPXAewmOVImjFIhSDoN4JSHgx0kTXSU0kqDIGkNgPueXn0iOcdTW1hWJoQnAJbnsLiXZHcOfbC0FAiSFprEl9PKtyTn5+wTJC8LwmYAtwMsbCf5NaBfri5lQfBNiLbxXSQHc3kUIE4QyiqWckyNKRIyIjkNBwAJQoJQGxutjQRJhwDsCJhxGnUxZXPeNpHT40mSj7MMyJwiJV0FsDevxRXQZy7MGkFQBRwKMXGQZJfdMUFoVCxJSpGQIABIEBKEWt5MkZAgpEgYqyHScKgNhzsANoWUZJH32U7yhm/FuBLAkQleQLWazzmSx7wXULZQ0vPRfcNWO5L3+V57F14fWiV9BjArrwUR6PtIOlfDvhB+AZgSgVN5TbhHcoOrky+Eqi6onpFcVhiCpJkAhl03ivT6B5JzXbY5I0HSEgAvXDeK9PoIyaku23wgrAUw4LpRrNdJOn10CiTtBNAfq5MedrWR/N5M5wPh8OjxGo/nRSlZRPJNUQhnARyP0j0/ozpJPioK4QqA/X7Pi1K1jeTNohBuAdgSpXt+Rh0kebkoBBNKq/yeF6XK7DydKQrBnDUyZ44aNXMKxU6w9jG9nozOtsZsuT2wdKsBjN++89HYj7pI0iT3hs1ndvgGoK3JPeo2TTM+yvSQNLDGWoambndIkjny9w8EewcpQ2Ob2k9yV1EIrnVD7BAGSK4LhiBpOoAfjpEeO4QhkuYMddhwkLQAQNNCI+sMQWTD4QvJ2UUgdAJ4WPFI+E2y6beQpolR0lYAdR8mLSixDwdj7jSSPxu9TBeEAwAuVTwSjPnzSL4LhXACQNNCowI5wfi+guTTUAjnARydBJGwkeTdUAh9APZMAgj7SF4LhWDoub7WViExdpPsDYVgl61Z96kChLqyfbwjrtnBbFyYvDCjwmuHlwBMTngfFAl/O43+v9S47LT+ScjS2/8t/E/NOEOHSb5y5LT0c6gB5FxKuyhOhusJQoqEWhz/AS99NV/iCYsGAAAAAElFTkSuQmCC",Va="data:image/png;base64,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",Xa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABTlJREFUeF7tm0moHUUUhv9/6SLgFEFQEXEORNGFEQXNIkRjHEHBCaJCRNFA4hRX6so4kEAioogaRVEMKIZgUBTjlBhwFkOMMYjTQhMHyCIb+eU868l93VXdVd3V9zbv3YK3eV1V55yvpnOqziVmeOEMtx9jAOMZMMMJdLIEJB0HwP5OBHDEEBl/A2CP/ZH8M0ZuVgCSzgbwCIBzYoR3XOdhkvfUycgGQNJyAKvrBA75+7ckT66SmQWApLMAfDxk42LFbSE5P1S5NQBJhwL4FMCxsRqNoN4ykut8cnMAeAjA3SMwKlXkYST/KDbKAeB1AJd4tFkB4E2SO1I1bVNf0isArvT0MY/k9i4A7ARwUqHjDSSvamNI07aSLgTwhqf9dSRf7AKAPMIeIHl/UyPatpMUrVOOJRAtrK1hse3HAHLPAElHAbjNubenAphTMxpZl4Cko91JY+vbXOsvAawn+bRPj6wzQJLtqI8DODx2CgLIBkDSwQDeBXC6R/58kluK/88GQNISAM8mGD5ZNSeAVQBCPv1WkqW4IwsASccD+K6B8dYkJ4CNAC4O6LGf5KxOZoAkO0ttzTUpJQCSrgBwhosUzwdgU/cjAJ+RfDUkRNKTAJYGvn9P0gZqSmk9A2pGfxuAtwYk3lfnB0h6DcBlFSRfArCS5I8eY24E4N3sADxG8vYuAIS8qVJQUUVb0lwA7wGwjayu7HIQDFZxRM2pKoL+wlxwkj91AcCori12TLLkOIUAuPb76qwufP/HGVVyZd1pZHuBwbT4YhXJv3z951gCPuJIBLAYwJmJAKz63w7C+w3aTjTpAwADGIoF7O7AorIjAVweMPIX2/lJft4EQh8AhPTeTnLe5EdJdhqYk+MrFmUuIPlzKoS+AjhA8iDPhnUNgFKY6up9AsDieNsboktfAZxG8qvAprUSwIMBCyvv9Pq6CRb1WkFyTdUQSrJ445ZAnU0kQ95gqUnfZsAzJG+Kmb+SNgG4KFD3ZZJXR/YTfUfhvRCR1PYYnNTzbZILYpQe2Bg/AHBuoM1TJENu8f9N+jIDzLOzcPXXFADuHLfjzxf+2uc1JO3CNVj6AOAAgMUk30k1fmAmWCRaCnTc93tJWpjsLX0AkLxzFy2RdIx7bTKHyVeWkHyur6dAawBuKdheYHFBKeZ3hi8kORiZTvx7WsyAgaVgjtILQDCbZS7JrwdnwrQC4Eb0ZgBPVOwns0nuHYA28mMwyxIojOodAB4NQJjiZk+7GTAwsnYpEooy95KcPYo94HfPlflOkqc0PQJrznjLQLkzUGcHyTmSNgO4oFDH+0SewxP8MJASY/G8ubbZS03cYFdw53mELiJpYKaUHADswtIuLovFEpaWktyancB/R93zAK5P6PsEkru7AHCtO6YSdBl61c0kF/mktp4BbtPxBk9DNzMs0Dv6Vj0LgIqdtw8MbiC5PqRINgAOQihdZhQgzDG6leSGKuFZATgItiFa2pxlidoz+sTZPKRiG6+9GVi2qL0a1V6oZgfQlaEplzQpOowB+Gh1RTtlZIp1u9IpNANCZ7vXm2pjWGzbQP5fbS5wXf8hAKHc36Hn/0mynKSFgUTsjSQvrTOyySlg+b+pL7tt9GjaNiolPhmAO868T+RNNe2g3Q/2+uzL/02RVZkoKckeLu0Bs4/Fm/ubqmhtpqgkXy5wqpzc9Wuf2mIF1gJwy6EvKfGWVHUXSctTylKiADgIh7hMUfsxVF2maBblXCe/AbBXJvshlLm4WUs0gKxSe9TZGECPBmMkqoxnwEiw90jovwsUz1/cuQPxAAAAAElFTkSuQmCC",Wa="data:image/png;base64,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",ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAVhJREFUeF7tmlESwiAMROFmejLHk+nNcByrn+2u0wwJ8/qdkvDYBJrSm/mMMS6ttcfOa9fe+9Mcdpp5dz0DAAWQAtQAiiC7ANvgbWf7vC99DnDPDdnt7YNQ9gm58QFgO9q64NLau/WnjzFG2tn4gdkfYgBAAaQANYAi6BfbtG/8tQu8v+8rPaf2I0udBCP6kQCopP0UCtiCmNIPyATg1EKkqhAAAf8k7CIYsQooQCQQAR8FiPB/ZhGroMYQ4RsFqPS/dhGroMYQ4RsFqPRRwEYgQobqIkT4JgVU+qQAKfAhEJGHqgojfFesAXs9zKf9b1Cln6EGuLEq9qUUoEzItQGAS0wpRO6YM+0jFDBzPrZvALjIhBRwh5xqjwJc/CjguDfvMp1qTwq4+Je7V+gCWM3eTgEALEaglAIi7iZUBHDq3QQAVEpp4RTq3xMEQCECKOD4O4QUcNviL1l7bK6Sh3PiAAAAAElFTkSuQmCC",Na="data:image/png;base64,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",Ka="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABAFJREFUeF7tmkuoHEUUhr8TMUQJGiOKiKJiUKMkPnZZBNy5E0G5ioELF3JRUDQxJCGBRHGhKBiIKMYHovgAjQoBFyEgunKlG1ERBBVx40pXbkR+OWEuzOXOTJ/qrqruITkwm+HMVH1fn6quri7jHA8bGr+kW83sx1r9GpQASbcAnwALtSQMRoCkm0bw24AfakkYhABJW0bwt4+VfhUJvQuQdAPwKXDnhHFfXEKvAiRdB3wG3DVj0isqoTcBkq4FPge2B2b8YhJ6ESDpauAMcFsAfiWliITqAiRdBXwF3JwAX0xCVQGSrgS+Bm5sAV9EQjUBki4HvgGu7wCfXUIVAZIuA74DrskAn1VCcQGSLgV+Anzs547OE2NRAZI2Ar8AV+Qmz7ViLCZA0sXAH4CXf+loXQlFBEjaAPwJXFKavGslZBcg6ULgb8AroHYkV0JWAZIuAP4B1tcmb1sJ2QRI8v/6F3AJfUe4EnIK+A9Y1zd5aiVkESDJy/6iAcGHF0udBUj6C9g0QPiQhE4CJPmtzh9whh5T54TWAiT9DvimxrzERAmtBEj6GfCNzEh4wykbH5H/bJuzRkKyAEnfJwAdHW14fpzwm7Zw0d+tkpAkQNK3DRuY4504bGbP+xf+tgcYpISwAEm+k7MjqPmgmb04njsgCekVIOlL4O4g/D4zOzYpdwAS0ucASaeBe4LwT5rZy7Nye5SQfheQdAq4Nwj/uJm9GsntQUL6OkDSSeCBCBDwqJm9Hsw9m1ZRwswHo4mToKQDwAtBoGUzeyuYuyqtgoTGp8I1AiTtBL4AfGOjKZbM7J2mpJ7mhEZ479ckAW8AywGoRTN7L5DXmFKgEkLw0wT48ZStDb3eZWYfNpIlJGSUEIZfI2D0uvq3hn4/ZGYfJbCFUzNISIKfJMAPK/g+/qzw8zt+hygSHSQkw08bAr8G3t8NTUIr+GkCPgAeDlzeYhIkPQscCfTBU1rDTxOwCLwbbDy7BEnPAYeC7XeCnyjAv5T0mq/ugp3IJkGSP0HuD7bbGX6WAH+X74uh8WNrRSdGSS8BT9WEnypgVAWpmxitK0HSceCJ2vAzBdSSIOkV4LEgvN9+n8l5jLZxR6jFfTlcCZJOAI9E4c1sIZgbTmsUUKoSJL0J7A729GQJ+MYhMN65nJUg6W1gqW/4JAG5KkGSrzF8rRGJYld+pfHQEMhVCZLeB3ZFyIHi8MkVsNLxNsMBuB94cEjwrQW0HA5B9jJpZjax2pOHQMfhUIYu8K9FBMxTJRQTMC8SigqYBwnFBYxJ8A2VOwLDsmpKFQEjCX5e6GlgT1XChsaqCRhbK9wH7AU2jz5+Zri3k2TVBQzp6s/qS6d1wLxAnhcww8A5XwH/A2rJxVBTEUNHAAAAAElFTkSuQmCC",Ga="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAtpJREFUeF7tm7+PDVEUxz/fVilIiESDf0DhR0JsRYiCpWFLW0hIUKg0SpFYIlGwnaUgu1EQViI2kRAJ/4AobKLxIzraI2dzR8bbed7MvnnejfNO8vKmuHN+fHJn5t57zhEDFjNbDxwBNgNrgLXpv7h2D74C39KvuH4PzEr6MkgXNQjlZubBHgYOAbv7tPEUmAOeSVrsU9ey21sFYGYngaPAvrYdTfoeAw8lTbelvxUAZuZT/Aywty3HeuhZAG5I8pnRl/QFwMw8YA/cAQxDHICDcCArkhUBMLPVwGXAp3wO4o/EJUmfmjrTGICZbQeuA/6fk/hX46KkB02cagTAzE4AM00MDGHslKTzde3WBmBmd4HjdRUPedxrSbvq+FALgJlZHWW5jZHUM76eA8zsFbAzt+Bq+nNPkj+2XeWvAMzsKnCuprFch01I8se3UroCMLNjwP1co2ro1w5Jb6ruqQRgZhuB58DWhoZyHe7BH5D0vdPBbgBuZ7TIaQvqtKTJngDS8vZFW1Yz0zPWuWxeNgPMbHaIa/tB85qTNF428geAtKtzAP+zjJd3kZ0AfOr/qy3tsCAvSBorjP8GkA4z/OUXQSaLQ5UygEfAwQjRA/OS9nusSwDMbBPwMUjwRZhbJH0oAPj38VYwABckXSkAPAGWpkQgeSlpj8xsHfA5UODlUDc4gFPAzaAATjuAKeBsUADXHMAdYCIogBkH4KmnQWVycuc67wDeAtty93RA/r1zAL4A8oVQRFl0AD+AVRGjB36OAIwegdFLcPQZDL8QCr8UDr8Zir0dTkdicQ9EEoDwR2KxD0XTLIh7LJ4AeMlb3MRIghA3NZYAeMVn3ORoghA3PZ4AeHY4boFEghC3RCYBiF0klSDELZMrDkhDF0qWIMQtlS1BiFssXYIQt1y+BCFuw0QJQtyWmRKEuE1T5Rxi2La5zkRq2MbJChAxW2crQMRsnq6qMci9ff4XT5RUPoOa5Q4AAAAASUVORK5CYII=",za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAATpJREFUeF7tm1EOAiEMROnN3JOpJ9ObYfhQAZcuSBrC8vabVBhLZ6ah4r2/OOce7vi7i8jteNn4Fd77sM9rxU42AYA0A547qIUMCd+sGaCd6ScDkkNm2TErAJuIfEDIrgcA5DWADIgr/YpXQGOOvWJSwTTDlryLt7aBJhocdhLDHwYA0dBtEEmGf1J36IQG82gAQAYoCHAF6p1i90U1DEANiL0ARTBDABaABWCBMgLQIDRY3TE2pPHu0OgAdEDUFEUIIYRSBFCCKEGUIEqwiABSGCmMFK59PdIt2A0D4AXwAniB7wsRzBBmCDOUIIAbxA3iBnGDuMESAthh7DB2GDtcOU1iaOe7Q9MPoB9AP0DpB5yE6/8tFLwWbxmbW2Jggpmh1WeGyIDVM2D50VmNT2cdndXO1KQDTgnAC0L3zRTwbSWQAAAAAElFTkSuQmCC",qa="data:image/png;base64,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",Za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABO1JREFUeF7tmkmoHVUQhr8fQVwI6sJhkYBujIITKqIiKATNwii6iIugURSNGgRHCLhIslNU4sIx4BhESBaKEcUJRaNRNE44oC4MGHACBxAREUrqcTr0venhVPd9l0e/W9DcxTl1qv7/VNepOn3FIhctcvzMCJhFwCJnYPYKLPIAmCXBQb8CZrZR0samKB8sAQ4e2ABsaiJhkASUwBeb75GwqSoSBkdABXjH/TVwmaQvxkkYFAE14L9L4D8ddATUgP8+gf+oLhEOIgJqwP+QwL8/6FOgBvyPCfzOtkJvKhFgZkcD5wHnAscBh5aefwHfrb2lxx1/W5KP1UoN+F8T+LfawPv4vBFgZicBFwMXAmfmOFMx5+NExC3jYzXgf0/gX8+1N3ECzOwadwK4INeJhnnbJflaI1ID/q8E/uWI3YkRYGYrAN8p/52ERMD/k8DviBruTYCZHQLcB/jOT0oi4P9L4J/rYrwXAWZ2IvAEcFoX4zU6EfC+hFd427va70yAmV0HPBo07O/pC6k09cpsN3AAcFZ6lgTe+bLp9ZLuDvoyN70TATVJqM3+e8A6SZUlaZ1ywFZj11e3fpgAM7sNuLcN7dj4I5JuCOoQAF8svULSqxE7IQLM7BIgmmx2SPJ6oFI8iUr6c3ywA/hiiTMkfZhLQjYBZnYE8AZwQu7iwLeSllWA8/xxNrCn6rKiB3g39RlwviSvCFslQoAnPHc8V/xsXinJSdsnZuadmZ8ale9sT/CFncclZR3LWQSY2ZXAk7nI07ytktaMgd8GrOoAfj1wV9C+J9yH2nRyCXgHOKdtsbHxOyTtS5ZmdgXwdAfwRSns5EXEm6tlkv5uUmolwMy8mXkxYjnNHcnIZvYasLPqbq4h7OeKHDPzV6b2UqPBt5skPdCXgDdTKxvl4ChJPxdKZrahC3jXN7PDgN+iDgCfSDq1LwHvpowdtb9UkofhHABJ3qqOSMPO75W0tETekcBPUQeADyQ1tuI5r8Bq4JkOxhtr9JZsP9IPmJm31q908OFySY2+5xBwEPAVcEzQgc2Sbq3SyTjq1kjaWoqA24F7gvZ3Szq9TaeVgBTCNwIPti02Nh7t6gr1/fTMzE8PP0UicpWkp9oUsghIJDwGXN22YBrvCv5LSSOVppktT6eQR2KubJG0NmdyhIDDAT/KTm5ZOAreE+Uuf81qyuJvgGNzwKQ5/vVnuaRfcnSyCUhRsBJounaKgm9LlH53cFEOkNKcSyU9n6sTIiCRsA6oKi4mDf5h4PpcIGle+HYoTEAi4WZgc8m5iYE3s1NSwvVuMSKrJT0bUfC5nQhIJHhT4/V5FLx/9PDHCyy/EnPxUteBH5++JRwcBDLSd0R0OxNQkFB1IZlxzkd8bJq7B1gbvQUqL9iLgCrPpgjej+U7y/1GF1YnSsCUwHtJ7FVml9J4P44mRsAUwPtl5zZJvvMTk4kQ0AD+/tRKe4LrIl4gveTfEiR93mWBNp3eBLRdZhQOmJl/HvdnSenxlvdA4I/S45Wc7/auop1uA9FnvBcBueD7ODjfup0JGAL4zoXQUMB3ImBI4MMEDA18iIAhgs8mYKjgswgYMvgsAlLX5zeyfjNbSPjiYb7P867rZ9cBZrYFuLbvf3K6OjpfetkEpEhY1ecPSfMFos+6IQL6GFqoujMCFurOTMuvWQRMi+mFaud/XhkSXwnoZssAAAAASUVORK5CYII=",$a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABDJJREFUeF7tm02oVVUUx39rEijRIJCicJQ1MlDChAZZCCU4UAdS4kBNhEgLyg+ihCR8RDxeoA9tIuVAUhzIEwQrRF+RIBo1qIlgExHFBKcNV2zZDzb3nXvO/ljnnPvw7uF956y9zu+ufe7/v/d6wmM+5DF/fsYAxhXQAQFVPQo8FJFDTdOp6mrgQ+CeiOxvur70760vAVU9BnzgE50SkX11Savq98B2f81xEdld+pB197cKQFWfA/4CnvZJzIrImw0ArgBv+GseAi+LyN22ILQN4BNgKkg+FYC7da+IfLNQAVwHVhUCuCEiry44AKq6AZgZSDynAlyIjSJyvg0IrS0BVT0NvGsE4IyIbFkwAFR1uX/5DeacWwEujnsZ/m0NoZUKUNXDwOcVyZYAmBCRgyMPQFUX+W//BQMAs8FP4j++Cv6zhGBeAaq6A/huSJKpFRACcCHfExEnlMxGGwB+At4yBPAi8LyP97OIvG329GDrBlX1deCXmgRzKuA3IFz7a0TkVysIphUwoPurcswBsBNw639umPoDMwAVut8EgPMOqnoGeMcHNPUHlgAGdb8lALfufwwCmvkDSwCDut8MgAukqn8AK31QM39gAmCI7rcGsAeYDoKa+AMrAFW63xrAYuA+8KQPbOIPigHU6H5TAH4ZHAE+CgIX+wMLAMN0fxsAVgB/BoGL/UERgAbdbw7AV8FFYJ0PXuwPSgHU6f62AGwGzgbBi/xBKYA63d8KAF8Ft4A5t1nkD7IBROj+NgF8BkwEE2T7gxIA4X5/rDdJ9gJV2+iq+qw7OLHwB1kAInV/axXgl8FJYFupP8gFEKP72wYwaL2z/EEugBjd3yoAXwVXgddK/EEygATd3wUAt1dwosQf5ACI1f2tA/BV8C+wJNcfJAFI1P1dAfgaOJDrD1IBpOj+rgC8BNzM9QfRADJ0fycA/DI4B2zK8QcpAFJ1f5cA1gMXcvxBCoBU3d8ZAF8FrhHDnUm6Ee0PogBk6v6uAXwMhI0UUf4gFkCO7u8awFPAA+AJP3HU+UEjgALd3ykAvwy+Bd5P8QcxAHJ1fx8AXgF+DyZu9AcxAHJ1f+cAfBVcAtbG+oNaAIW6vy8ArpXmh1h/0ASgRPf3AsBXwW1gaYw/GArAQPf3CeALIGzLHXp+UAegVPf3CcA1VNyJ8QeVAIx0f28A/DI4BWxt8gfDAFjo/r4BuJ7ky03+YBgAC93fKwBfBeFPeKU/mAfAUPebAKgKkvjZXOe5u22eP6gCMAnU9vQnJhBennouUDBV5a3TIhKeLs/vEhv4hwXrBE6IyK66oKr6KfCV9cQ+3oyIzG2cPPqoqgKeAb4E3FaT5XDvlWsi4pofhw5VdSXr3t7LLCf3x+qTIhKeKNn2CRon3Em4RjPUSRY9TjIG0CP8kZh6XAEj8TX0mMS4AnqEPxJT/w8KjcRfC564jwAAAABJRU5ErkJggg==",_a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAzRJREFUeF7dmzuMDVEYx///QkFBoVFQUCgoFCQkJCQkIiLx2vVqaKlp7bbUtDTez0REJCQkJCQUEqtQUFBoFBQUir+czbmbuY+ZO3funMd3p9vsnO98v9+eOXPOnm+ICbwkbQBwDcA0yU9ViJw0fkmbPPxaAHPDJEyUAElbAFwHsLrwh62UMDECJG0DcAPAygGjulTCRAiQtMPDr6h4pAdKMC9A0i4ANwEsrzGf9UkwLUDSHg+/tAZ855YuCWYFSNoH4BaAxSPA90kwKUDSAQ+/qAF8t4QxAiRpKmkKwO2WOp+zOgLakPB5fpHUksnoYcYcCV/9CvGdWQHOeEMJ3wFMkXzjYlgX4OYC9zjUvX54+FedBmYFSBoV/ieAwyRfFG2ZFFACPwvgfMlQ+A3gEMlnvb83J6AMnuSMpLMALvRA/vXwTwbJMSWgCr4DJ+k0gEv+538e/lHZJGFGQB34goSTAK4AOEjyQdUMaULAKPAFCe5Vd2fY6yF7AU3gh0GbeQuEhs96IRQDPlsBseCzFBATPjsBseGzEpACPhsBqeCzEJASPrmA1PBJBeQAn0xALvBJBOQEH11ACfwMSfffnCRXtN1gjvDRRkCu8FEE5AwfXEDu8EEFWIAPJsAKfBABluBbF2ANvlUBFuFbE2AVvrYAdw5fdshgGb6WAEn7AbjjJVd43HXSYh1+qABJez18pxprQcIkwFcKkLQbwH0AS3q2adO+KqO3MiPprq7pVnLgblDSTgD3ACyrGdgk/MARIGm7h69Te+timIXvEyBpK4C7AKqqrouDYtZVZtQcJVnetvAISNoMwM3yq0bM9BzJiyO2yeb2eQGSNvry0zUNMztD8nLDtkmb0X9g5ErO3Dc241ynSF4dJ0CKtk7ARwDrW+q8b7HUUtxgYZyAdX74jyPBVWM5+IfBMg0UuDMHjCPhj4d/HCjHoGGLb4EmEn4BOELyadAsAwbvWgmO+Di42lsH/zxgfsFD9y2Fa0pwVddHSb4MnmHgDsr2AlWPwzcAx0i+DpxblPClR2MlI+ELgOMk30bJLkInlWeDPRLcNzYO/n2EvKJ1MfRwtCDhBMkP0TKL1NF/8VJ5dKfpnzwAAAAASUVORK5CYII=",et="data:image/png;base64,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",at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAa1JREFUWEftl80rRlEQxn/P1laUHX+CDckGhRJLS0VZ+VhaUShWlj4WUj62lmwoUT4Wbyn/ATtF/obR6L5v1+sezUJdizt1u7fOeeY8Z86ZZ+aKkk0lr8//ImBmA0A/MAt0JqJzAxxKOsmPm9kUMARMJ3AvwAFwL8l9fNm3CJjZLjAXPJYuSe4UM3OyNaAtgN2TNJ8i8BZ04vgjSTMZgQVgO7C4T3mX1J4iYEEnPu1G0mBGYA1YjWIlNSLffAQVgSoCpUfgGnAxiti6JL/9rgPDwGUElM+eIiEK53M+lcysBbgDugMkFiXtpHSgFZgAxgH/LrIn4FiSvxtmZn0Z1t9F9gGcA2eS/PvL/lcxCoTvz6f8iICZdQCjv1TDW0lXRUzMrAcYS7D0wnUh6TU/3izFXgmXflm8jq1J6m26A5EMchJbkvZSlzDipI6dkXSUpeGI7y54Po0iVpSGpQtRRaCKQOkReA5oQD3b8k2pt+KHwTR8kdSV0oFlYCPoKN+Wu3o+BMmvSNpMEfBeYDJ7Uj3+I7Avab9JCV1FHZvqJ96BU3+SPybBnf/ptKocfwJUte4haxA/JAAAAABJRU5ErkJggg==",tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAuZJREFUeF7tm71uFTEQhc+pkFAkSl4A6CmhiIgIBVFCDSVUpKOBlqSFHlJBSUTKIGhAREhQgAQPAC9AiYSQqA4a4UW+m/3x3Xu9y67tdv0339rH47FNDJgkPQewQnJjqG5wqIYlPQZw27X/kOS9IfoyCABJZrgB8NMWyRd9Q+gdgKSLAN7XGHqO5Nc+IfQKQNIKgO8ATtYY+QPAaZK/+4LQN4DPAM63GHdI8trkAEh6BuB6oGE7JHcD8y6UrZcRIOk+gJ05e3qL5NM5y8ydPToASfbX7e93Sesk33QpGFomKgBJNt9fmbCFdqiU7xuAjZgrQzQAkkzpzfjVjsYXxV4D2Iy1MsQEcAnA2wWNL4qvkTxaUl0z1UQDYK1IMghVyUSx/M0MrFT+WMZbx6ICqPtjkmxkHANAci3GX26qMwPom7ibGnkE5CmQNSCLYF4FSgJ8lJfB/9kPkHQCwIVleGUxHSHnfX4k+StkiQ9yhCSdBfAIwDqAhf3yWACc8eZjvANwh+SXNgitACRdBrAH4IyrbAwArKsWezQI+51dYUk3ATwpVTAWAEW3d0nWRqNqR4AkK2S7tnIaGwDr/z7JG1Uj4RgAJ3YHALZqhs4YAZgppgerJH/6ds0AcGL3CcCphnkzVgBmkq0MV0h+KOz7B0DSJoDDNtUEsKzITFVAJKD51ix1QRi/4DZJE/a/ARFJDwDcba16Whn2SG5T0ksAV6dlW7A1BxlA8lOgGCxJi6AHwXz+NJdBD4Lt+tJ0hHztbDjRHaMjFO4KlyCkuxnypkS62+GSOKYZECmJY5ohsWDHMjBjrJBYYPMz2VpDYl0qbSuTAeTj8Xw/IB+P5+PxfDyej8enfzye9DU576CyzS8K+b7wFryukWieYPJXZV2wNd3L0t4uMt3r8h6EupPmpvk/jQcTHoR5nsw0numHqGZonmgiWNUBSek+mnKimPazOQch3YeTnh6k+3TWg5Du42kPwuDP5/8APfbbngD8o/QAAAAASUVORK5CYII=",lt="data:image/png;base64,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",nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABQBJREFUeF7tW+1xFDEMlSqADiAVQCoAKoBUAKkAUgFQAVABUAFQAaQCkgpIKgAqEPNu7BvHsddP2rvNMTnP8IezV9JbfT5vVG750ltuv+wB2HvATATM7KWIvBCRhyLyR0TOROSTqn6e+egrx83seSHnbiHnwxw54RAwMyjxPRne0gFAPFFVgBJe25YzB4CfE8Zng89U9TBsvYiY2VblhAAws1ci8o407FhVP5F7a7dHaH0kz4bkRAFg3krW+0JEDr2hkFwfcu6TAIS8LQqAkUotuk1V3fa4D8AiM7v1ACDDP1j09Y6FnasqSrFrRT3Ak5xcCs3YvFwSTGHAeMElSqU3AWYQUiL8TYASevt4bsgDEgDIzr8Gyl2o6gFhQHOLmT0TkS/E+QNVRbVxrzkAsGHwVlXfeDVzlsGQ+4c9oKPcqao+NrP3IoL5IC+0wnhDrpbYzADa6wo49BNnZvZDRB4Vv4V6jTkAtJRbuWECBwrdKRT8rKrwGGqZGcILTRDmjbw+qCo6UJThVviFPM0dAiPlkoKtVhmDEd7ccJkZWmdMf3n9RUdYelHDQ+Bh8BBXLogAgKSE5NRVLoFQV4kfqvpkZL2ZPU5TZrn1Wox3PO2rqh6NZJS/uwBglUsAUIbUypoZRmyczatb4syslYhpT4MALwD1EDRZf83sq4g8LYyZTFadKXPSoEZCdA1FNABB5ZheYcpjv6lqGW7X9na88kRVUY2GiwIgxRuanjIrU5m9URaHShUbKHduJE269LIADLNyz6qZAFClbU7pHQJgZpiwEPvlYhVr1XOPB2Av1eZ2QnTVOE0JvAJAxfDiHA7DiNL1L1WVYmnMrC6ZXuOxnyqfqfIgyd4rhCAU8H95TM6M9ZpJXgFAMK+l4mxctspgBACcOVJVVJTJ1UmIrTNrxjoDwHJ8w6ycpZkZkiblKSPD0lukeMVG6e09flUu1cnwrvvxKaXNDIzxqm/f4MJly/Hoec6kewIA2Lc/kv0//n4KAHaS4FwKzT0AZsZwe0u9kKXlnMMDWGoLyrFJsGaFNmHYNlrvk1wGWS+g5u3UV+CZZVMyBwSaXXY0X6tJtmyEwNYwlx1sI8Qyugwwm26EzsE5gGGqW2GEA+p3BgIb0cyU/B5NdTdmdcbYes+KbGUONpovUGlohUt73pe31UsMQ6O7g5Ft7DDUZZGnBAwBwOE5VHeH3h4ZnX9np04MayG+ggUAAkJUt7PK1MCw+SbMV1AAJC9wU93O252WVwyrziKUWDHh1eVykoCcut1pWRvkHWkWuSWT9oDkBTTV3blAGca0h+VdnBZPINRUd5OAZG53Ol5Agdwhamm+Ist2eUACAH0BQqHsDa60yJ4LlA4IdVK7BnKjMqHm41uE7V6NJRC6l6Ppd9cFSg1CCp8a5HX43OjlaJEQawJyRV5GElnHC6ZuoOvER88KtSx3CBQAsL2+Oy6TF+XvgZmBatkPJIpcMGpzQ3EZAJlql2eXwfIBJJcY/nKj8ALmIynXhWhpRygEZra37Bzg3UdfiG4CgF1kkkNeEPWAnWSS998KL/ixNMshItxCNTrAK4a+Fo2GgIdJDtdoZ7INyQkBkEoU4wWht1KV263KmQMAOrUpJnnNvHrrWQXAVuWEASi6NYQD/uHTVXR++SOE0N8J9cBK4ZD/PA+T6KmIgDGiPobqPXc2AHPe7i6c3QOwC2/hJnW49R7wDzDP3rtNe0/hAAAAAElFTkSuQmCC",rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAbBJREFUeF7tW1FSAyEMTQ6j52hPojepexLrSew52sPEQemMFcawsWEJvp3ZLwiQxwskAVhEdkSU/gOt/JiZNRERebG0ndtdmDnJ//qJyHvWQav6vXwhohOLyCsRPa+RvNYNDkBS45gAEIvySWYCAAgAgAEVE2ihttVstpSrTXbVBABAw/a25Uxa+wYDauZeRQUM0D08Kw23lIMJwARKrxfbYI6kbkyTmfdb2qpX31VdvTqL0q4az0dRxDpOAGBFbhY5MGCWmbTqAQZYkdPkRORBq7OmnJkva+q31nVjQAbg3DoQpd6jGwA5b//TE1Rz8ZpiIwJQ1dUrHzAoAMURgFswBAC+FsGh1oCuCREwAAyACWANwCKIXQDbIPwALWZoLL9LMARHqOfJUCRPsAh9W66madQdFIBSV00Ra/mIANR08c4IWfEr5NwyQncbYdCG3BgQBQ8AEGWmvMYJBnghG6VdMODfX5HxOhgZ0QS6RoMAYEAEwICe+YABCUBgABiAu8L97geEXgMaB39quVQ98NPZTzX/8nASAMzCAOvr7hkYsCQTSE/nnwwvyKMDcCSitw/1iQrMKQ0a5wAAAABJRU5ErkJggg==",it="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAWlJREFUeF7tm1FywyAMRFc3a07S3qTJTXKT+Gbq2OOPJCaDkevxID9+gwJaViDWyNz9S9K3pB81NjOzmom7XyX91vp9+P1iZkPN1t0fkkY/WtpN0mBbJtg5ACNY9xEAb4HtuW8CAAQAMKAQAmuoHQ2bI+1Ki10MAQBYcbwduZLRsWFAKdyLqMCAeoYXpeGRdoQAIbDMejkG55vUS2ia2eXIWN1r7KKvew3Wy/9W7/O9OBKdJwBEkctiBwOyrGTUDxgQRS6LHQyYZfH3THDU8tO1oq/oAYiihSsiihCKUMrTAUkMSQxJbPElHE2QRIhEiERouTGQCZ4rE1w8L1vzNK3Hu/L8JPD16t+jI/8555Q5fwtAANCCVsa+MCDjqrb4BANa0MrYFwac/okMegB6AHoAesD78Ua9AIrQuRQh9gD2gFiSP6x5VL2lMlXSnqWzk9dbCicBIAsDotXdGRgwFU9Hy+d7B2Aqn/8DBKWonDfqmMYAAAAASUVORK5CYII=",ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAZRJREFUeF7t21FLFUEYBuDz/DMtlCgKRSmKojBCJSmMiiLJTIyiQlEUi1CKwiiUolCiyP7ZhnddmOcseDjqO3O7w+zyzM58czGvqqq6Go3GdqN5m8Kj5t0636Oqqp3vnGzhS7oVgPIHlCVQ9oCyCZYq0FIZ/NNCWTlIXXaWdrNWqww2G+wwPi8A9pq2XQ5JU4dkmv89BXbjv8u3LsAkHh9khF0mbV8BHmI6GWACM8kAD/AkGeA+niYD3MOzZIC7eJ4McAcvkgFu42UywC3MJgOMYy4Z4CbmkwFuYCEZYAyLyQDXsZQMMIrlZIARvEoGGMbrZIBreJMMcBUryQBDWE0GuIK3yQCX8S4Z4BLeJwNcxIdkgAtYSwY4j4/JAOfwKRngLD4nAwxiPRlgABvJAP34kgzQh6/JAGfwLRngNL4nA5zCZjLASWwlA5zAj2SAXvxMBujBr2SA4/idDHAMreSLOmbU7ouSR++qbI3QVMdmtY0vLrfF68Tm4gMTJThZkqMlOluywyU83caavG9Dl/R4jfj8X/KqTSOldXfcAAAAAElFTkSuQmCC",st="data:image/png;base64,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",ct="data:image/png;base64,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",dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAXFJREFUeF7tm10OgzAMg8nNxsl2tHGzTJP2MEG7xYOitHw89yd1jUkdau7uk/7MZrZEuiUafzGzeR2zJQrwM7YWAAMADOAViGvARiw24hEXwVtELA8e/z5N03peSQPCIvTP4lr3cfcHAMAAXoHLa8BGapQ8oGsRVES2lgpfCoDidzp62FHQztjWMgZ1ZkwAcCbaGeeCARl35cyYYMCZaGeca0gGvI/DsVQ4467sjUnyA/ZOlrG/BEDFFu/6LAAAWGJ4gpiiuMK4wrjCl3eFAWCVpV6uNhg7DI2YCivnE+oC7k5dQKHMaG2HdISUTQIABa0R28KAEXdVWRMMUNDqpS11AcUU7WVXlTixxRUGjHgahAEwgMLI7sJI8UJU6VfTkjrXvsO/lPzg8TemaGl+5dJU0VT8AoB6UaL1+EX8AUC4Ntd6h1qPDwNqGvBSzNBzsEiFfPsdIhsTwdDKO2skZYKdrS0ULgAoqXAI0s4awQCBAU8Mucy4H/7D2QAAAABJRU5ErkJggg==",gt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABACAYAAAC5vjEqAAAAAXNSR0IArs4c6QAAAo9JREFUeF7tm9FxwzAIhmGCjtB2k47STtaO0k0ab9AN1PPF7uVykn5AyJYd8iob0CdAIMVM8asS4OBTJxCAgIcEIG9AKaU3IvokopdF9oWIPpj5e6Rw9bJT7UEppZ8bOCuTCzO/DgbIxU4LoJQDwcxqWT2BppRc7FRPyktxTzizbC873QBlJrxJbsrkmnpdo/T0noBmQ7vnpkJOLELSpgILoF8iepKGiNYgqdz1uVIoFeRMzLzuviJVFkDzNv9FRM8SDQMBmojoXVuOqAGVoHglRQn022d66w1A3pV0eJDWx5fne7v6XgvDXj2LcjcxLoP8Ne3mUOTg1VudAFC+d/MKjRMAyvduAegatkUOWkDa3keeNbo/We0NPQHlYrX77JwUFHtDT0DZWC1NQLubaEFoc1/JngC0kA9AqHUonAeFB+3tQb1zjVdu2i3EApCxKa3UTaIza+v7hvrOp5I2KK7VTfDMGpw56+saryStjXltbK/yUWiiOseqVzq/+bhDVfhpC0IkPwCBBQhAJwCkuud6sBCb1iNX8T3XAwG63qOhbK7d1u/lpZRqHgpvOlvfX+2xzmMLQKWbWNFN51Io5jxc9P7wgJCHbjU+rAdtBQDpCUCAUAAaDRBy6aOMo0revIsdBQCyMwAZz6j/TxsQYdSNo/dHH/fwIJdebVBQsJKX5CDVfxIHBZEzS1SJQ0Bowtb6AsnVjveyIwChJK5dqUy37vJNxKh2hAeFB7V9hRQetJcHCXJK682qQAURKgSRkG4ehBQv4603q1DN0QHBFW5tdQIQyiHKD+juxXmEWEuvBnshcKuBQgzKRwI8AFl7NVEvVLnVQHMTyUdCmgEhBUcfD0Aohx19hXvbHx4ECP8BoTt+UlzUnakAAAAASUVORK5CYII=",At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABZBJREFUeF7tWlnMXlMUXQsPhgQxPBAxiwovhmjFkFYEoSkJauhDaWtqVAxNiKmJtoYi5qG0KoIYYiiaBkEblRgSEhQ1hETEEDQkhheWrN/55Prz3XvPucPf++m/X+/e+669zrTPPptYz4XrefwYJWB0BgwYA5KOAnAYgOMA7ATgOwDfA3iG5ILUcAZqCUi6GcAFBUG+DmAByWdjiRgYAiS9BOCIyMDmk7wiRncgCJB0N4BzYgLK6CwleXyZTecJkDQTwJ1lgeR8v4XkhUW2nSZA0iEAXqsYfM/sGJLL83x0lgBJuwL4vGbwNv8MwIEk1/bz1UkCJG0G4AcAGzdAgF2cQvKxQSLgTY9aQ8HbzWKSMwaCAEmLAExvMHi7eo7kpM4TIOkSANc1HLzd3Uvy7E4TIGkqgAdaCN4uryF5eWcJkHQ0gNyjqiYpvwMYR/K9ThIgaV8AbwPYsGageea+G3hp9ZV1egxK2g7AMgAmoQ35BMDhJL/uHAGSNgDgW9uxbUQO4A8AE0m+XOR/nc0ASYsBTGspeLudRnJJmf9WCZA0HsAcAD7bl5P8yYAkzQdwWRm4Gt/nkLw6xr41AiTdBmBWBsRqAJMBjAVwfwy4ijqLSJ4Za9smAZ8C2H0YEJOwA4AtYgEm6r1I0iWzaGmTgDfCaEeDqan4EYC9SSrFT5sEePp7GYyE/OqjlKRnXZK0RkDY7LwLn56EqJpyYdGjyGWrBAQSbgRwcbW4oqxmkbwjSrOP0kgQ8DiAk6oCLLG7lWRRmbz0t60SIKkXvNfo9QCizuZS1P8oLCM5MVI3V601AiRdC+DS8OepJB+U5KXgJVFXVpPcp64T27dCgCSXn+4LAGeTvKkHtmaZ225+IdlYHtE4AZL8euNXHEvfq6gknwyleXrOCG9J8ucmRr/xGSDpgHC3t+8lJHMvO5IODkRtkhDM/iTfSdAvVW1sBkhy2ttLRJ736y3Jv4oQSNoWwMcAtipB6nv9eJLflEaUqNAIAZK2AfAhAAf0Vgj+21gskr4Kd4Q8k8kkn4j1l6JXmwBJG4Xnq3EAvgjBv58CwrqSyt4CWiGhCQIeBnAaAJ/1k0i+UiH43dzgAKDoaGvs6Mviq0WApNsBnBccnkry0QrBb+6Hi9D1YXNP9bzMcQZJV5Iak8oESJoLoNeEcD5Jk5EskjzybnexrCQ5XtINAGb3cTaWpPeYxqQSAZIMziAt80heWQWRJFeGzgi23kQnkHS/j/eEswD4MWPH8H0FyQlV/lNkk0zAsCxvIcnUzo0hPJKcHV4UwPkl2MecK0b/EUlDy6ETp4Akt5w8HRA+RfKEKiMiySM7L2Pr2v2rVXzVtUmaAZL8guNsb1U47oaqvCki6VwAd2Vsct/uU/xW1Y0mQNLJALzLu9PiIJJrUn867J5g81rFjNT/99NPIcDprV9xniR5YurPJe0cssVe7j+X5FWpfprWTyHAG9XWAKqe936f2z4EcA9JL4V1LlEESNorjJ4B70HSjUfRIsmpcS/Lq7x5Rv8wQTGWAIMfyu9JRtn0MEhamcnyVpE8NAFf66rRwUjqPThMIflIDDJJ2bL4GpJjYuxGUieFAPfsuXcvqhg57KxfS7Lszj+Scf/7r1ICQkrq3T/bZTWdZO4DZ+bI7P1oU5JuVemcFBIg6QUAR+ag7ns/l2SilmZsdiH5ZeciD4ByCZA0BcBDJcBNkB9BXczw8nCrS7bHz81J/tZZKSKgTgeHR9xZnpOnTksRAb6cuMOjSPwk7RyhJx8AcE+O29Q7O+2zARUR4AtLWba2H8l3Jbmk9eegBB1LgAsSCwuG35XcMSR/6/QcLwFX5xRw9WbFIAdv7DF5gEtW7vbYE8CPoe4/s1e6+t8TMOgBluEvnQFlDgb9+ygBgz6CdfH/DbLtxVAmj61EAAAAAElFTkSuQmCC",ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAwNJREFUeF7tmU2IjVEYx3//nYViJRbKCgtfxQIpasosDLFgMTGUMmQlWVGULdn5mJKPSWpmQUhRsvAxKVOSUjYsJsXKwsJC/jq69M51Z+577r3vNLdznnq7i3uej/d3nuec85xXJC5K/P3JAHIGJE4gl0DiCZAXwVwCuQQSJ5BLIPEEyLtALoFcAjNAwPYSYAuwGVgOzC88IYJvhecd8BgYkzRRdXiVlYDtVcAOYBuwvsUXGQMeAvckvW3RxrRqHQdg+yCwB9ja4YBDVoxIutpJux0DYLsXOAaE3yrlEXBBUvhtW9oGYHsecB4IMz+TEjLhpKQv7ThtC4DtlcA1YG07QbSh+wkYlBTKoyVpGYDtQ8CVSK/fw4IGvAfeAOPAL2A1EBbN8OwG5kTaPSHpXKTOn+EtAbB9Bjgd6fAlcFRSePEpxXYPcBFYGmm/X9LtSJ14ALaPA7G0L0s6EhOc7ZAp22N0wu4jaTRGJyoDbO8E7sQ4AO5LCueBaLF9CTgcqbhL0t2yOqUB2F4APAFWlDUOfJC0rH687X212d0A/ASeAc8lDTUY+wLYGOEznCR7JH0toxMDICx4YeErKz+APkkB2j+xPVJb6BrZGZe0rm78mhqguWUdA0OSBsuMLwXA9n7gehmDhTHDkgbqXuZ1iS1zVFI4SRah3QL6I/0fkHSjmU5ZACFFNzUzVvf/pK0pctsckDT8157tU8DZSP//ZVMj/aYAbIdm5kGk8zC8t3hAsX0TCLVfRiZlge2+sJiWUawbs1dSyJ4ppQyAp7VWNtb/wuIx1fZHILTFZWRC0uJCBiwCPpdRrBvzStK0nWgG0Ixq8iUQANlOdxGsAUh7G6xBSPcgVAOQ9lG4BiHdZqiwJ6fbDhcgpHshUoCQ7pVYAUK6l6IFCOleixeP0cl+GKnvJZL9NNYARJofRxt1l0l+Hm/WZs+W/5teiMyWQKuKIwOoimy32M0Z0C0zVVWcOQOqItstdnMGdMtMVRVnzoCqyHaL3ZwB3TJTVcWZM6Aqst1i9zeYIGJQFMquqwAAAABJRU5ErkJggg==",ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAMlQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Zu5/OAAAAEN0Uk5TABefiz6Z/7lhCb/chCynT8pyGu2VkniAQJuMN6Qig+RHqApszjCR81W3GHqgY8UmiepLrg5x0zOX+Vm8G3/iQY4Zr/C50noAAAF9SURBVHic7dftR0RBFAbw83BLItWXtfshErEikYhE9c9nScSKxCrpRe+bskW7aXdOMnubl3Nm9lN2vszsNfO79uHOnAFlNowIQL91c4AJGOQ9GZjuMoPXLKDfpvCSB/SHwFMWQDSDtjxQF0CaQD2APFAvQMJAQ4Ao0DAgCDQGUCxQARAOVARQIFAp4A1UDngC1QDkClQJ/A1UDVAp0BRgKNA0YBDoQx5ANHtvA5W2Gpi/tYGqdiukuWuygfQ2Bv4TUP16Uy78qF3ZQO1R/erKpQ0kfEy9XgkohAv5VY7PuehE1y4ANzzdtaFEgUVwbL4tLQwsARdm4N9UQ8AycMbTA9u6H6ijZfrIweIBVnD+yVNiR5sTKOqnPBAcrg5gFSemlx3vZWANOOYpwgJjGFhH0/SKEscCNoAjfqwpsn6BTeDQDJRl3g+whQPT6wvNAbANNPhxQqlbdHZad+ZHYrFdTPJ/yCz38y4cGVee3f3MS9cems9Z1770NgZGAHwD3S6KQYresBsAAAAASUVORK5CYII=";const pt=I({name:"CanvasRotateDialog",components:{},props:{visible:{type:Boolean,default:!1}},emits:["close","confirm"],setup(e,a){k();let t=B({dialogVisible:!1,rotateAngle:90,imageSmoothingEnabled:!0,loading:!1}),l={handleClose(){t.dialogVisible=!1,a.emit("close")},handleOpen(){t.dialogVisible=!0},handleConfirm(){t.loading=!0,a.emit("confirm",{rotateAngle:t.rotateAngle},(()=>t.loading=!1))}};return R((()=>{})),o(o({},M(t)),l)}}),mt={class:"content"},Ct={class:"full-w flex-between"},yt={class:"dialog-footer"};var ft=ea(pt,[["render",function(e,a,t,l,n,r){const i=F("el-input-number"),o=F("el-button"),s=F("el-dialog");return E(),T(s,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=a=>e.dialogVisible=a),title:"旋转",width:300,draggable:"true",modal:!1,"lock-scroll":!1,"close-on-click-modal":!1,"before-close":e.handleClose,class:"z-dialog z-dialog-1",center:""},{footer:P((()=>[O("span",yt,[U(o,{onClick:e.handleClose},{default:P((()=>[H(J(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),U(o,{type:"primary",onClick:e.handleConfirm,loading:e.loading},{default:P((()=>[H(J(e.$t("message.confirm")),1)])),_:1},8,["onClick","loading"])])])),default:P((()=>[O("div",mt,[O("div",Ct,[a[2]||(a[2]=O("p",null,"旋转角度",-1)),U(i,{modelValue:e.rotateAngle,"onUpdate:modelValue":a[0]||(a[0]=a=>e.rotateAngle=a),min:-360,max:360},null,8,["modelValue"])])])])),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-64188922"]]);var vt=ea({name:"FrameMenu",props:{visible:{type:Boolean,default:!1},left:{type:Number,default:0},top:{type:Number,default:0},contextData:{type:Object,default:null}},components:{},emits:["export","copy","delete","pasteFrame","copyFrame"],setup(e,a){let t=B({timer:null,newTop:e.top,newLeft:e.left}),l={handleExport(){a.emit("export",e.contextData.index)},handleCopy(){a.emit("copy",e.contextData.index)},handleDelete(){a.emit("delete",e.contextData.index)},handlePasteFrame(){a.emit("pasteFrame",e.contextData.index)},handleCopyFrame(){a.emit("copyFrame",e.contextData.index)}};return R((()=>{let a=document.body.offsetHeight,l=document.body.offsetWidth,n=document.querySelector("#contextMenu");e.top+n.offsetHeight>a?t.newTop=a-n.offsetHeight:e.left+n.offsetWidth>l&&(t.newLeft=l-5-n.offsetWidth)})),o(o({},M(t)),l)}},[["render",function(e,a,t,l,n,r){const i=F("CopyDocument"),o=F("el-icon"),s=F("Delete"),c=F("DocumentCopy"),d=F("Document"),g=F("Picture");return t.visible?(E(),Q("ul",{key:0,id:"contextMenu",style:V({left:e.newLeft+"px",top:e.newTop+"px"}),class:"contextmenu"},[O("li",{class:"flex-between",onClick:a[0]||(a[0]=(...a)=>e.handleCopy&&e.handleCopy(...a))},[a[5]||(a[5]=O("span",null,"复 制",-1)),U(o,null,{default:P((()=>[U(i)])),_:1})]),t.contextData.index>0?(E(),Q("li",{key:0,class:"flex-between",onClick:a[1]||(a[1]=(...a)=>e.handleDelete&&e.handleDelete(...a))},[a[6]||(a[6]=O("span",null,"删 除",-1)),U(o,null,{default:P((()=>[U(s)])),_:1})])):Y("",!0),O("li",{class:"flex-between",onClick:a[2]||(a[2]=(...a)=>e.handleCopyFrame&&e.handleCopyFrame(...a))},[a[7]||(a[7]=O("span",null,"复制帧数据",-1)),U(o,null,{default:P((()=>[U(c)])),_:1})]),O("li",{class:"flex-between",onClick:a[3]||(a[3]=(...a)=>e.handlePasteFrame&&e.handlePasteFrame(...a))},[a[8]||(a[8]=O("span",null,"粘贴帧数据",-1)),U(o,null,{default:P((()=>[U(d)])),_:1})]),O("li",{class:"flex-between",onClick:a[4]||(a[4]=(...a)=>e.handleExport&&e.handleExport(...a))},[a[9]||(a[9]=O("span",null,"导出为图像",-1)),U(o,null,{default:P((()=>[U(g)])),_:1})])],4)):Y("",!0)}],["__scopeId","data-v-211cbe70"]]);const wt=I({name:"IntelligentStrokeDialog",components:{},props:{visible:{type:Boolean,default:!1}},emits:["close","confirm"],setup(e,a){let{proxy:t}=X();k();let l=B({dialogVisible:e.visible,strokeColor:"#000000",loading:!1}),n={handleClose(){l.dialogVisible=!1,a.emit("close")},handleConfirm(){if(""===l.strokeColor.trim())return t.$message.warning("颜色不能为空");a.emit("confirm",{strokeColor:l.strokeColor})}};return R((()=>{})),o(o({},M(l)),n)}}),Dt={class:"content"},St={class:"color flex-center"},Lt={class:"dialog-footer"};var xt=ea(wt,[["render",function(e,a,t,l,n,r){const i=F("el-color-picker"),o=F("el-button"),s=F("el-dialog");return E(),T(s,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),title:"智能描边",width:300,draggable:"true",modal:!1,"lock-scroll":!1,"close-on-click-modal":!1,"before-close":e.handleClose,class:"z-dialog z-dialog-1",center:""},{footer:P((()=>[O("span",Lt,[U(o,{onClick:e.handleClose},{default:P((()=>[H(J(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),U(o,{type:"primary",onClick:e.handleConfirm,loading:e.loading},{default:P((()=>[H(J(e.$t("message.confirm")),1)])),_:1},8,["onClick","loading"])])])),default:P((()=>[O("div",Dt,[O("div",St,[a[3]||(a[3]=O("p",null,"描边颜色",-1)),U(i,{modelValue:e.strokeColor,"onUpdate:modelValue":a[0]||(a[0]=a=>e.strokeColor=a),onActiveChange:a[1]||(a[1]=a=>e.strokeColor=a)},null,8,["modelValue"])])])])),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-383cd795"]]);const bt=I({name:"IntelligentSliceDialog",components:{},props:{visible:{type:Boolean,default:!1},canvasOptions:{type:Object,default:null}},emits:["close","confirm","change"],setup(e,a){k();let t=B({dialogVisible:!1,vCount:1,hCount:1,loading:!1}),l={handleClose(){t.dialogVisible=!1,a.emit("close"),l.handleCloseSlice()},handleCloseSlice(){t.vCount=1,t.hCount=1,l.handleChange()},handleConfirm(){t.loading=!0,a.emit("confirm",{vCount:t.vCount,hCount:t.hCount},(()=>t.loading=!1))},handleChange(){a.emit("change",{vCount:t.vCount,hCount:t.hCount})}};return R((()=>{})),o(o({},M(t)),l)}}),It={class:"content"},kt={class:"color flex-center"},Bt={class:"color flex-center"},Rt={class:"dialog-footer"};var Mt=ea(bt,[["render",function(e,a,t,l,n,r){const i=F("el-input-number"),o=F("el-button"),s=F("el-dialog");return E(),T(s,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=a=>e.dialogVisible=a),title:"智能切片",width:300,draggable:"true",modal:!1,"lock-scroll":!1,"close-on-click-modal":!1,"before-close":e.handleClose,class:"z-dialog z-dialog-1",center:""},{footer:P((()=>[O("span",Rt,[U(o,{onClick:e.handleClose},{default:P((()=>a[7]||(a[7]=[H("取消切片")]))),_:1,__:[7]},8,["onClick"]),U(o,{type:"primary",onClick:e.handleConfirm,loading:e.loading},{default:P((()=>a[8]||(a[8]=[H("导出切片")]))),_:1,__:[8]},8,["onClick","loading"])])])),default:P((()=>{var t,l;return[O("div",It,[O("div",kt,[a[5]||(a[5]=O("p",null,"水平切片",-1)),U(i,{modelValue:e.hCount,"onUpdate:modelValue":a[0]||(a[0]=a=>e.hCount=a),onChange:a[1]||(a[1]=a=>e.handleChange(a,"h")),max:(null==(t=e.canvasOptions)?void 0:t.canvasHeight)||1,min:1},null,8,["modelValue","max"])]),O("div",Bt,[a[6]||(a[6]=O("p",null,"垂直切片",-1)),U(i,{modelValue:e.vCount,"onUpdate:modelValue":a[2]||(a[2]=a=>e.vCount=a),onChange:a[3]||(a[3]=a=>e.handleChange(a,"v")),max:(null==(l=e.canvasOptions)?void 0:l.canvasWidth)||1,min:1},null,8,["modelValue","max"])])])]})),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-625476ba"]]);const Ft=I({name:"SpriteDialog",components:{SpriteMenu:ea({name:"SpriteMenu",props:{visible:{type:Boolean,default:!1},left:{type:Number,default:0},top:{type:Number,default:0}},components:{},emits:["delete"],setup(e,a){let t=B({timer:null,newTop:e.top,newLeft:e.left}),l={handleDelete(){a.emit("delete")}};return R((()=>{let a=document.body.offsetHeight,l=document.body.offsetWidth,n=document.querySelector("#contextMenu");e.top+n.offsetHeight>a?t.newTop=a-n.offsetHeight:e.left+n.offsetWidth>l&&(t.newLeft=l-5-n.offsetWidth)})),o(o({},M(t)),l)}},[["render",function(e,a,t,l,n,r){const i=F("Delete"),o=F("el-icon");return t.visible?(E(),Q("ul",{key:0,id:"contextMenu",style:V({left:e.newLeft+"px",top:e.newTop+"px"}),class:"contextmenu"},[O("li",{class:"flex-between",onClick:a[0]||(a[0]=(...a)=>e.handleDelete&&e.handleDelete(...a))},[a[1]||(a[1]=O("span",null,"删 除",-1)),U(o,null,{default:P((()=>[U(i)])),_:1})])],4)):Y("",!0)}],["__scopeId","data-v-98fc8b1e"]])},props:{visible:{type:Boolean,default:!1}},emits:["import"],setup(e,a){let{proxy:t}=X();const l=k();let n=B({dialogVisible:!1,loading:!1,currentSelectData:null,SpriteMenu:{visible:!1,top:0,left:0,contextData:null}}),r={closeMenu(){n.SpriteMenu.visible=!1},handleContextMenu(e,a){var t,l;n.SpriteMenu.visible=!0;let i=(null==(t=document.querySelector(".sprite-dialog"))?void 0:t.getBoundingClientRect().left)||0,o=(null==(l=document.querySelector(".sprite-dialog"))?void 0:l.getBoundingClientRect().top)||0;r.closeMenu(),setTimeout((()=>{n.SpriteMenu.visible=!0,n.SpriteMenu.left=e.clientX-i,n.SpriteMenu.top=e.clientY-o,n.SpriteMenu.contextData=a}),100)},handleDelete(){l.deleteSpriteById(n.SpriteMenu.contextData.id).then((e=>{t.$message.success("删除成功")})).catch((e=>{t.$message.error("删除失败")}))},handleOpen(){n.dialogVisible=!0},handleClose(){n.dialogVisible=!1},handleImport(){n.currentSelectData&&a.emit("import",n.currentSelectData.spriteImg)},handleSelect(e){n.currentSelectData=e.data},getData(){n.loading=!0,l.getSpriteList().then((e=>{l.spriteList=e||[],n.loading=!1})).catch((e=>{t.$message.error("获取精灵资源失败")}))}};return z((()=>{document.removeEventListener("click",r.closeMenu)})),R((()=>{r.getData(),document.addEventListener("click",r.closeMenu)})),s(o(o({},M(n)),r),{editSpaceStore:l})}}),Et={class:"content"},Tt={class:"dialog-footer"};var Pt=I({name:"draw",components:{MyColorDialog:g,ExportDialog:A,PreviewAnimDialog:h,ReplaceColorDialog:u,PindouDialog:p,LayerMenu:m,FrameMenu:vt,LinmoModeDialog:C,UploadImageLayerDialog:y,"sketch-picker":f,VueDragScale:v,MyColorMenu:w,CanvasRotateDialog:ft,SpriteDialog:ea(Ft,[["render",function(e,a,t,l,n,r){const i=F("el-image"),o=F("el-button"),s=F("SpriteMenu"),c=F("el-dialog"),d=q("loading");return E(),T(c,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[0]||(a[0]=a=>e.dialogVisible=a),title:"精灵资源",width:350,"lock-scroll":!1,"before-close":e.handleClose,"close-on-click-modal":!1,modal:!1,draggable:"true",class:"z-dialog z-dialog-1 sprite-dialog",center:""},{footer:P((()=>[O("span",Tt,[U(o,{onClick:e.handleClose},{default:P((()=>[H(J(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),U(o,{type:"primary",onClick:e.handleImport},{default:P((()=>a[1]||(a[1]=[H("导 入")]))),_:1,__:[1]},8,["onClick"])])])),default:P((()=>[Z((E(),Q("div",Et,[(E(!0),Q($,null,_(e.editSpaceStore.spriteList,(a=>(E(),T(i,{onContextmenu:ee((t=>e.handleContextMenu(t,a)),["prevent"]),style:{width:"70px",height:"70px"},key:a.id,src:a.data.spriteImg,onClick:t=>e.handleSelect(a),class:ae({active:!!e.currentSelectData&&e.currentSelectData.spriteID===a.data.spriteID}),fit:"contain"},null,8,["onContextmenu","src","onClick","class"])))),128))])),[[d,e.loading]]),e.SpriteMenu.visible?(E(),T(s,{key:0,visible:e.SpriteMenu.visible,left:e.SpriteMenu.left,top:e.SpriteMenu.top,onDelete:e.handleDelete},null,8,["visible","left","top","onDelete"])):Y("",!0)])),_:1},8,["modelValue","before-close"])}],["__scopeId","data-v-f6fb7d78"]]),IntelligentStrokeDialog:xt,IntelligentSliceDialog:Mt,IframeDialog:la},props:{},emits:[],setup(e,a){const{proxy:t}=X(),l=function(){B({canvasWidth:0,canvasHeight:0});const e={handleFilter(a,t,l,n){1===a?e.transformBlackAndWhite(t,l):2===a?e.transformReverse(t,l):3===a&&e.transformBGRA(t,l)},transformBlackAndWhite(e,a){const t=e.layerCtx.getImageData(0,0,e.layerCanvas.width,e.layerCanvas.height),l=t.data;for(let n=0;n<l.length;n+=4){if(0===l[n+3])continue;let e=(l[n]+l[n+1]+l[n+2])/3;l[n]=e,l[n+1]=e,l[n+2]=e}a(t)},transformReverse(e,a){const t=e.layerCtx.getImageData(0,0,e.layerCanvas.width,e.layerCanvas.height),l=t.data;for(let n=0;n<l.length;n+=4){if(0===l[n+3])continue;let e=l[n],a=l[n+1],t=l[n+2];l[n]=255-e,l[n+1]=255-a,l[n+2]=255-t}a(t)},transformBGRA(e,a){const t=e.layerCtx.getImageData(0,0,e.layerCanvas.width,e.layerCanvas.height),l=t.data;for(let n=0;n<l.length;n+=4){if(0===l[n+3])continue;let e=l[n];l[n+1];let a=l[n+2];l[n]=a,l[n+2]=e}a(t)},transformIndexColor(e,a,t,l,n){let r=a.length>0?a:e;n.postMessage({type:8,currentIndexColorList:JSON.parse(JSON.stringify(c[l])),variables:JSON.parse(JSON.stringify(r))}),n.onmessage=e=>{t(e.data.variables)}}};return o({},e)}(),n=function(){const e=B({excelPinDouOptions:{1:{numberFontSize:4,rulerFontSize:6,pointFontSize:12,colWidth:1.36,rowHeight:7.9},2:{numberFontSize:6,rulerFontSize:10,pointFontSize:12,colWidth:2.66,rowHeight:14.8}}}),a={convertToExcelPosition({x:e,y:a}){let t="",l=e+1;for(;l>0;){let e=l%26;0===e?(t="Z"+t,l=Math.floor(l/26)-1):(t=String.fromCharCode(64+e)+t,l=Math.floor(l/26))}return t+(a+1)},handleExcelToPixel(e,t,l,n){if(!e)return l("文件不存在");const r=new FileReader;r.onload=function(e){const l=new Uint8Array(e.target.result),r=ta(l,{type:"array",cellStyles:!0});let i=r.SheetNames[0];const o=r.Sheets[i],s=document.createElement("canvas"),c=s.getContext("2d");let d=c.createImageData(n.canvasWidth,n.canvasHeight),g=d.data;for(let t=0;t<n.canvasHeight;t++)for(let e=0;e<n.canvasWidth;e++){let l="",r=a.convertToExcelPosition({x:e,y:t});if(l=o[r]&&o[r].s.fgColor?"#"+o[r].s.fgColor.rgb+"ff":"#00000000","#00000000"===l)continue;let i=W(l),s=4*(e+t*n.canvasWidth);g[s]=i[0],g[s+1]=i[1],g[s+2]=i[2],g[s+3]=255*i[3]}c.putImageData(d,0,0),t({tempCanvas:s,tempCtx:c})},r.readAsArrayBuffer(e)},async handlePixelToExcel(e,a,t,l){const n=new d.Workbook;n.creator="by 像素格子",n.lastModifiedBy="by 像素格子";const r={},i=document.createElement("canvas");i.width=a.canvasWidth,i.height=a.canvasHeight;const o=i.getContext("2d"),s=(e,t,l)=>{const n=4*(t*a.canvasWidth+e);return j([l[n],l[n+1],l[n+2],l[n+3]])};for(let c=0;c<e.length;c++){r[`frame${c+1}`]=n.addWorksheet(`frame${c+1}`);let t=[],l=[],d=0;o.clearRect(0,0,a.canvasWidth,a.canvasHeight);for(let n=e[c].layer.length-1;n>=0;n--)if(e[c].layer[n].isRender){let r=e[c].layer[n].layerId;o.drawImage(a.layerData[r].layerCanvas,0,0,i.width,i.height);for(let t=0;t<e[c].layer[n].mindLayerList.length;t++){let l=a.layerData[r].mindLayerList[e[c].layer[n].mindLayerList[t]];l.isHide||o.drawImage(l.mindCanvas,l.left,l.top)}let g=o.getImageData(0,0,a.canvasWidth,a.canvasHeight).data;for(let e=0;e<a.canvasHeight;e++){0===d&&(l[e]=[],t[e]=[]);for(let n=0;n<a.canvasWidth;n++){let a=s(n,e,g);0===d?(l[e][n]=a,t[e][n]=""):l[e][n]&&"#00000000"!==a&&(l[e][n]=a)}}d++}for(let e=0;e<t.length;e++)r[`frame${c+1}`].addRow(t[e]);for(let e=0;e<t[0].length;e++)r[`frame${c+1}`]._columns[e].width=3;r[`frame${c+1}`].eachRow(((e,t)=>{e.height=18,e.eachCell(((e,n)=>{if(a.isShowGrid){let t="FF",l=a.gridColor.slice(1).toUpperCase();e.border={top:{style:"thin",color:{argb:`${t}${l}`}},left:{style:"thin",color:{argb:`${t}${l}`}},bottom:{style:"thin",color:{argb:`${t}${l}`}},right:{style:"thin",color:{argb:`${t}${l}`}}}}let r=l[t-1][n-1];if("#00000000"!==r){let a=r.slice(7).toUpperCase(),t=r.slice(1,7).toUpperCase();e.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${a}${t}`}}}else if(a.isShowGrid){let t=a.gridBackgroundColor,l=t.slice(7).toUpperCase(),n=t.slice(1,7).toUpperCase();e.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${l}${n}`}}}}))}))}n.xlsx.writeBuffer().then((e=>{let l=new Blob([e],{type:"application/octet-stream"});N.saveAs(l,a.filename+".xlsx"),t("导出成功")})).catch((e=>{l("导出失败")}))},handlePindouToExcel2(t,l){let{isShowGrid:n,isShowRulers:r,isShowCirclePoint:i,isShowRectPoint:o,rulersBackgroundColor:s,pointColor:c,rulersColor:g,gridColor:A,canvasWidth:h,canvasHeight:u,filename:p,excelSize:m,isShowTongji:C,isShowBrand:y,brandName:f,background:v,type:w,pindouWidth:D,pindouHeight:S,pindouScale:L,currentPindouIndex:x}=l;return new Promise(((h,u)=>{s=j(K(s)),v=j(K(v));const w=new d.Workbook;w.creator="by 像素格子",w.lastModifiedBy="by 像素格子";const L=(e,a,t)=>{const n=4*(a*l.pindouWidth+e);return j([t[n],t[n+1],t[n+2],t[n+3]])},b=(e,a)=>{const n=a*l.pindouWidth+e;return t[x].colorArr[n]},I=w.addWorksheet(`拼豆${x+1}`);let k=[],B=[],R=0,M=t[x].blockArr;for(let e=0;e<S;e++){0===R&&(B[e]=[],k[e]=[]);for(let a=0;a<D;a++){let t=L(a,e,M),l=b(a,e);0===R?(B[e][a]=t,k[e][a]="#"!==l?l:i?"•":o?"▪":""):(B[e][a]&&"#00000000"!==t&&(B[e][a]=t),k[e][a]&&"#"!==l&&(k[e][a]=l))}}if(R++,r){let e=[];for(let a=0;a<D+2;a++){let t="";t=0===a||a===D+1?"":a+"",e.push(t)}I.addRow(e)}for(let e=0;e<k.length;e++){let a=String(e+1);I.addRow([a,...k[e],a])}if(r){let e=[];for(let a=0;a<D+2;a++){let t="";t=0===a||a===D+1?"":a+"",e.push(t)}I.addRow(e)}for(let a=0;a<k[0].length+2;a++)I._columns[a].width=e.excelPinDouOptions[m].colWidth;if(I.eachRow(((a,t)=>{a.height=e.excelPinDouOptions[m].rowHeight,!r||1!==t&&t!==S+2?a.eachCell(((a,l)=>{if(a.alignment={vertical:"middle",horizontal:"center"},n){let e="FF"+A.slice(1,7).toUpperCase();a.border={top:{style:"thin",color:{argb:`${e}`}},left:{style:"thin",color:{argb:`${e}`}},bottom:{style:"thin",color:{argb:`${e}`}},right:{style:"thin",color:{argb:`${e}`}}}}if(1===l||l===D+2){let t=s;if("#00000000"!==t){let e=t.slice(7).toUpperCase(),l=t.slice(1,7).toUpperCase();a.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${e}${l}`}}}let l="FF"+g.slice(1,7).toUpperCase();a.font={name:"Microsoft YaHei UI",color:{argb:l},size:e.excelPinDouOptions[m].rulerFontSize}}else{let n=v.slice(7).toUpperCase(),r=v.slice(1,7).toUpperCase();a.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${n}${r}`}};let i=B[t-2][l-2],o=k[t-2][l-2];if("#00000000"!==i){let t=i.slice(7).toUpperCase(),l=i.slice(1,7).toUpperCase();if(a.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${t}${l}`}},o){let t=e.excelPinDouOptions[m].numberFontSize,l="#FFF"===G(i)?"FFFFFFFF":"FF000000";o.length>=4&&(t-=1),a.font={name:"Microsoft YaHei UI",color:{argb:l},size:t}}}else{let t="FF"+c.slice(1,7).toUpperCase();a.font={name:"Microsoft YaHei UI",color:{argb:t},size:e.excelPinDouOptions[m].pointFontSize}}}})):a.eachCell(((a,t)=>{if(n){let e="FF"+A.slice(1,7).toUpperCase();a.border={top:{style:"thin",color:{argb:`${e}`}},left:{style:"thin",color:{argb:`${e}`}},bottom:{style:"thin",color:{argb:`${e}`}},right:{style:"thin",color:{argb:`${e}`}}}}a.alignment={vertical:"middle",horizontal:"center"};let l=s;if("#00000000"!==l){let e=l.slice(7).toUpperCase(),t=l.slice(1,7).toUpperCase();a.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${e}${t}`}}}let r="FF"+g.slice(1,7).toUpperCase();a.font={name:"Microsoft YaHei UI",color:{argb:r},size:e.excelPinDouOptions[m].rulerFontSize}}))})),y){I.addRow([f]),I.lastRow.height=12;let e=a.convertToExcelPosition({x:I.columnCount-1,y:I.rowCount-1});I.mergeCells(`A${I.rowCount}:${e}`);const t=I.getCell(`A${S+3}`);t.font={name:"Arial",size:8,bold:!0,color:{argb:"FF101010"}},t.alignment={vertical:"middle",horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}}}if(C){let e=t[x].colorStatList,l=Math.floor((D+2)/2),n=Math.ceil(e.size/l),r=Array.from(e),i=[],o=[],s=[],c=0;for(let a=0;a<n;a++){i[a]=[],o[a]=[],s[a]=[];for(let e=0;e<2*l&&!(c>r.length-1);e+=2)i[a][e]=r[c][1][0],s[a][e]=r[c][1][1]+"",o[a][e]=r[c][0],i[a][e+1]="",s[a][e+1]="",o[a][e+1]="",c++;I.addRow([...o[a]]),I.addRow([...s[a]])}const d=I.rowCount;for(let t=0;t<d-(S+3);t++)for(let e=0;e<D+2;e+=2){let l=S+3+t+1,n=a.convertToExcelPosition({x:e,y:l-1}),r=a.convertToExcelPosition({x:e+1,y:l-1});if(e+1>D+2-1)break;I.mergeCells(`${n}:${r}`)}for(let a=0;a<d-(S+3);a++){let e=S+3+(a+1),t=I.getRow(e);t.height=13,t.eachCell(((e,t)=>{if(e.alignment={vertical:"middle",horizontal:"center"},a%2==0&&t%2!=0){if(t>i[a/2].length)return;let l=t-1,n=i[a/2][l],r=o[a/2][l],s=n.slice(1,7).toUpperCase();if(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:`FF${s}`}},r){let a=6,t="#FFF"===G(n)?"FFFFFFFF":"FF000000";r.length>=4&&(a-=1),e.font={name:"Microsoft YaHei UI",color:{argb:t},size:a}}}let l="ffffff";const n=e.fill;n&&n.fgColor&&(l=n.fgColor.argb.slice(2));let r="#FFF"===G(l)?"FFFFFFFF":"FF000000";e.font={name:"Microsoft YaHei UI",color:{argb:r},size:6}}))}}I.addRow(["图纸来源 像素格子"]),I.lastRow.height=15;let F=a.convertToExcelPosition({x:I.columnCount-1,y:I.rowCount});I.mergeCells(`A${I.rowCount}:${F}`);const E=I.getCell(`A${I.rowCount}`);E.font={name:"Arial",size:10,bold:!0,color:{argb:"FFFFFFFF"}},E.alignment={vertical:"middle",horizontal:"center"},E.fill={type:"pattern",pattern:"solid",fgColor:{argb:"0052D9"}},w.xlsx.writeBuffer().then((e=>{let a=new Blob([e],{type:"application/octet-stream"});N.saveAs(a,p+".xlsx"),h(!0)})).catch((e=>{u(e)}))}))},handlePindouToExcel3(t,l){let{isShowGrid:n,isShowRulers:r,isShowCirclePoint:i,isShowRectPoint:o,rulersBackgroundColor:s,pointColor:c,rulersColor:g,gridColor:A,canvasWidth:h,canvasHeight:u,filename:p,excelSize:m,isShowTongji:C,isShowBrand:y,brandName:f,background:v,type:w,pindouWidth:D,pindouHeight:S,pindouScale:L,currentPindouIndex:x}=l;return new Promise(((h,u)=>{s=j(K(s)),v=j(K(v));const w=new d.Workbook;w.creator="by 像素格子",w.lastModifiedBy="by 像素格子";const L={},x=(e,a,t)=>{const n=4*(a*l.pindouWidth+e);return j([t[n],t[n+1],t[n+2],t[n+3]])},b=(e,a,n)=>{const r=a*l.pindouWidth+e;return t[n].colorArr[r]};for(let l=0;l<t.length;l++){L[`拼豆分块${l+1}`]=w.addWorksheet(`拼豆分块${l+1}`);let d=[],h=[],u=0,p=t[l].blockArr;for(let e=0;e<S;e++){0===u&&(h[e]=[],d[e]=[]);for(let a=0;a<D;a++){let t=x(a,e,p),n=b(a,e,l);0===u?(h[e][a]=t,d[e][a]="#"!==n?n:i?"•":o?"▪":""):(h[e][a]&&"#00000000"!==t&&(h[e][a]=t),d[e][a]&&"#"!==n&&(d[e][a]=n))}}if(u++,r){let e=[];for(let a=0;a<D+2;a++){let t="";t=0===a||a===D+1?"":a+"",e.push(t)}L[`拼豆分块${l+1}`].addRow(e)}for(let e=0;e<d.length;e++){let a=String(e+1);L[`拼豆分块${l+1}`].addRow([a,...d[e],a])}if(r){let e=[];for(let a=0;a<D+2;a++){let t="";t=0===a||a===D+1?"":a+"",e.push(t)}L[`拼豆分块${l+1}`].addRow(e)}for(let a=0;a<d[0].length+2;a++)L[`拼豆分块${l+1}`]._columns[a].width=e.excelPinDouOptions[m].colWidth;if(L[`拼豆分块${l+1}`].eachRow(((a,t)=>{a.height=e.excelPinDouOptions[m].rowHeight,!r||1!==t&&t!==S+2?a.eachCell(((a,l)=>{if(a.alignment={vertical:"middle",horizontal:"center"},n){let e="FF"+A.slice(1,7).toUpperCase();a.border={top:{style:"thin",color:{argb:`${e}`}},left:{style:"thin",color:{argb:`${e}`}},bottom:{style:"thin",color:{argb:`${e}`}},right:{style:"thin",color:{argb:`${e}`}}}}if(1===l||l===D+2){let t=s;if("#00000000"!==t){let e=t.slice(7).toUpperCase(),l=t.slice(1,7).toUpperCase();a.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${e}${l}`}}}let l="FF"+g.slice(1,7).toUpperCase();a.font={name:"Microsoft YaHei UI",color:{argb:l},size:e.excelPinDouOptions[m].rulerFontSize}}else{let n=v.slice(7).toUpperCase(),r=v.slice(1,7).toUpperCase();a.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${n}${r}`}};let i=h[t-2][l-2],o=d[t-2][l-2];if("#00000000"!==i){let t=i.slice(7).toUpperCase(),l=i.slice(1,7).toUpperCase();if(a.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${t}${l}`}},o){let t=e.excelPinDouOptions[m].numberFontSize,l="#FFF"===G(i)?"FFFFFFFF":"FF000000";o.length>=4&&(t-=1),a.font={name:"Microsoft YaHei UI",color:{argb:l},size:t}}}else{let t="FF"+c.slice(1,7).toUpperCase();a.font={name:"Microsoft YaHei UI",color:{argb:t},size:e.excelPinDouOptions[m].pointFontSize}}}})):a.eachCell(((a,t)=>{if(n){let e="FF"+A.slice(1,7).toUpperCase();a.border={top:{style:"thin",color:{argb:`${e}`}},left:{style:"thin",color:{argb:`${e}`}},bottom:{style:"thin",color:{argb:`${e}`}},right:{style:"thin",color:{argb:`${e}`}}}}a.alignment={vertical:"middle",horizontal:"center"};let l=s;if("#00000000"!==l){let e=l.slice(7).toUpperCase(),t=l.slice(1,7).toUpperCase();a.fill={type:"pattern",pattern:"solid",fgColor:{argb:`${e}${t}`}}}let r="FF"+g.slice(1,7).toUpperCase();a.font={name:"Microsoft YaHei UI",color:{argb:r},size:e.excelPinDouOptions[m].rulerFontSize}}))})),y){L[`拼豆分块${l+1}`].addRow([f]),L[`拼豆分块${l+1}`].lastRow.height=12;let e=a.convertToExcelPosition({x:L[`拼豆分块${l+1}`].columnCount-1,y:L[`拼豆分块${l+1}`].rowCount-1});L[`拼豆分块${l+1}`].mergeCells(`A${L[`拼豆分块${l+1}`].rowCount}:${e}`);const t=L[`拼豆分块${l+1}`].getCell(`A${S+3}`);t.font={name:"Arial",size:8,bold:!0,color:{argb:"FF101010"}},t.alignment={vertical:"middle",horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}}}if(C){let e=t[l].colorStatList,n=Math.floor((D+2)/2),r=Math.ceil(e.size/n),i=Array.from(e),o=[],s=[],c=[],d=0;for(let a=0;a<r;a++){o[a]=[],s[a]=[],c[a]=[];for(let e=0;e<2*n&&!(d>i.length-1);e+=2)o[a][e]=i[d][1][0],c[a][e]=i[d][1][1]+"",s[a][e]=i[d][0],o[a][e+1]="",c[a][e+1]="",s[a][e+1]="",d++;L[`拼豆分块${l+1}`].addRow([...s[a]]),L[`拼豆分块${l+1}`].addRow([...c[a]])}const g=L[`拼豆分块${l+1}`].rowCount;for(let t=0;t<g-(S+3);t++)for(let e=0;e<D+2;e+=2){let n=S+3+t+1,r=a.convertToExcelPosition({x:e,y:n-1}),i=a.convertToExcelPosition({x:e+1,y:n-1});if(e+1>D+2-1)break;L[`拼豆分块${l+1}`].mergeCells(`${r}:${i}`)}for(let a=0;a<g-(S+3);a++){let e=S+3+(a+1),t=L[`拼豆分块${l+1}`].getRow(e);t.height=13,t.eachCell(((e,t)=>{if(e.alignment={vertical:"middle",horizontal:"center"},a%2==0&&t%2!=0){if(t>o[a/2].length)return;let l=t-1,n=o[a/2][l],r=s[a/2][l],i=n.slice(1,7).toUpperCase();if(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:`FF${i}`}},r){let a=6,t="#FFF"===G(n)?"FFFFFFFF":"FF000000";r.length>=4&&(a-=1),e.font={name:"Microsoft YaHei UI",color:{argb:t},size:a}}}let l="ffffff";const n=e.fill;n&&n.fgColor&&(l=n.fgColor.argb.slice(2));let r="#FFF"===G(l)?"FFFFFFFF":"FF000000";e.font={name:"Microsoft YaHei UI",color:{argb:r},size:6}}))}}L[`拼豆分块${l+1}`].addRow(["图纸来源 像素格子"]),L[`拼豆分块${l+1}`].lastRow.height=15;let I=a.convertToExcelPosition({x:L[`拼豆分块${l+1}`].columnCount-1,y:L[`拼豆分块${l+1}`].rowCount});L[`拼豆分块${l+1}`].mergeCells(`A${L[`拼豆分块${l+1}`].rowCount}:${I}`);const k=L[`拼豆分块${l+1}`].getCell(`A${L[`拼豆分块${l+1}`].rowCount}`);k.font={name:"Arial",size:10,bold:!0,color:{argb:"FFFFFFFF"}},k.alignment={vertical:"middle",horizontal:"center"},k.fill={type:"pattern",pattern:"solid",fgColor:{argb:"0052D9"}}}w.xlsx.writeBuffer().then((e=>{let a=new Blob([e],{type:"application/octet-stream"});N.saveAs(a,p+".xlsx"),h(!0)})).catch((e=>{u(e)}))}))},async handlePindouToExcel(e,t){let{type:l}=t;if(0===l)return a.handlePindouToExcel2(e,t);if(1===l)return a.handlePindouToExcel3(e,t);if(2===l){const l=document.createElement("canvas"),n=l.getContext("2d");l.width=t.canvasWidth,l.height=t.canvasHeight;let r=new Map,i=[];for(let a=0;a<e.length;a++){const l=a%Math.ceil(t.canvasWidth/t.pindouWidth),o=Math.floor(a/Math.ceil(t.canvasWidth/t.pindouWidth)),s=document.createElement("canvas"),c=s.getContext("2d");s.width=t.pindouWidth,s.height=t.pindouHeight;let d=new ImageData(e[a].blockArr,t.pindouWidth,t.pindouHeight);null==c||c.putImageData(d,0,0),n.drawImage(s,t.pindouWidth*l,t.pindouHeight*o);for(let n=0;n<t.pindouHeight;n++)for(let r=0;r<t.pindouWidth;r++){const s=l*t.pindouWidth+r,c=o*t.pindouHeight+n;if(s<t.canvasWidth&&c<t.canvasHeight){const l=n*t.pindouWidth+r;i[c*t.canvasWidth+s]=e[a].colorArr[l]}}for(const[t,n]of e[a].colorStatList)if(r.has(t)){let e=n[1],a=r.get(t)[1],l=Number(e+a);r.set(t,[n[0],l])}else r.set(t,n);const g=Array.from(r.entries());g.sort(((e,a)=>a[1][1]-e[1][1])),r=new Map(g)}let c=s(o({},t),{currentPindouIndex:0,pindouWidth:t.canvasWidth,pindouHeight:t.canvasHeight}),d=[{blockArr:n.getImageData(0,0,t.canvasWidth,t.canvasHeight).data,colorStatList:r,colorArr:i}];return a.handlePindouToExcel2(d,c)}}};return o({},a)}(),r=D(),i=S(),g=k(),A=(L||x)();let h=B(s(o(o({},i.data),M(r.data)),{isPreview:!1,projectData:te(),emptyColor:"#00000000",brushColorVisible:!1,shapeFillColorVisible:!1,baseCanvas:null,bgCanvas:null,canvas:null,realCanvas:null,gridCanvas:null,scaleCanvas:null,scaleBoxDom:null,ctx0:null,ctx1:null,ctx2:null,ctx3:null,ctx4:null,ctx5:null,isDrawing:!1,isErasering:!1,isDrawShape:!1,isMoving:!1,isSelecting:!1,isSelectDraging:!1,isCopy:!1,isScale:!1,shapeFillColor:"#000000ff",brushColor:"#000000ff",brushSize:1,eraserSize:1,gridGapSize:1,canvasWidth:32,canvasHeight:32,scale:1,isCheckedRatio:!0,isShowReferenceLine:!1,isShowRuler:!1,widthHeightRatio:1,drawAreaList:[],currentTool:0,drawRecord:[],drawShapeList:[],gridInfo:"",currentDrawShape:"rect",currentDrawTransform:"hReverse",historyRecord:[],historyMaxLength:20,currentHistoryIndex:0,historyTimer:null,lastX:0,lastY:0,currentFrameIndex:0,currentLayerIndex:0,currentFrameId:"0",currentLayerId:"0",currentFrameLayerVisible:!0,currentEditLayer:{index:-1,name:"",mindIndex:-1,mindName:""},FrameTimer:null,maxFrame:30,maxLayer:30,exportVisible:!1,exportLoaidng:!1,importLayerVisible:!1,loading:!0,isSpace:!1,isShift:!1,isAlt:!1,isDragging:!1,dragData:{x:0,y:0},canvasBeginPos:{x:0,y:0,centerX:0,centerY:0},moveData:{x:0,y:0,moveLayerId:"",imageData:null,col:0,row:0,diffCol:0,diffRow:0,centerX:0,centerY:0,transformX:0,transformY:0,list:[],mapList:{},bitmap:"",isMoving:!1,newCenterX:0,newCenterY:0},selectData:{selectLayerId:"0",selectCanvasObj:null,isMoving:!1,isCopySelect:!1,x:-1,y:-1,endX:-1,endY:-1,isCancelSelect:!0,originList:[],selectList:[],selectOriginList:[],copyList:[],selectMapList:{},copySelectMapList:null},selectType:"select",previewLoading:!1,selectActiveColor:"#3100FC",isExpandColorSelector:!0,colorStatList:{},worker:null,isExportProject:!1,AnimationFrameId_1:null,zIndex:{max:13,min:8},isSaveProject:!0,pinDouMode:!1,pinDouDrawMode:!1,pinDouData:null,tolerance:0,curvature:4,curveType:{isPress:!1,pressKey:"0"},curveEndPos:[],isHorizontal:!1,isVertical:!1,isCenter:!1,drawList:[],removeDrawList:[],LayerMenu:{visible:!1,top:0,left:0,contextData:null},FrameMenu:{visible:!1,top:0,left:0,contextData:null},selectLayerList:[],pindouHighlight:null,isHidePindouMode:!1,pindouBrand:g.settingsOption.defaultPindou,isScaling:!1,scaleWhitePointPos:[],scaleAreaData:null,scaleRatio:0,emptyLayerData:[],exportStyleOptions:{isShowGrid:!1,gridBackgroundColor:"#ffffffff",gridColor:"#808080ff",gridSize:50},layerAlpha:100,isHideLinmoMode:!1,linmoMode:!1,linmoPhoto:null,linmoPhotoStyle:{width:"200px",height:"200px",transform:"translate3d(0px, 0px, 10px) rotate(0deg) scale(1, 1)",opacity:1,zIndex:0,display:"none",transformOrigin:"center center"},linmoPhotoDom:null,dragLinmoPhoto:{enable:!1,startX:0,startY:0,translateX:0,translateY:0},scaleTimer:null,canvasStyle:{transform:"scale(1)",transformOrigin:"center center"},isShowGridLine:!1,pindouScaleValue:0,drawAreaGridColor:{light:["rgba(204, 204, 204, 1)","rgba(153, 153, 153, 1)"],dark:["rgba(204, 204, 204, 1)","rgba(153, 153, 153, 1)"]},canvasRealTop:0,canvasRealLeft:0,isLockCanvas:!1,isHighPreview:!1,linmoFitCanvasTimer:null,gridLineTimer:null,mouseDrawData:{startX:0,startY:0,lastX:0,lastY:0,baseRect:null},drawShapeData:{list:[],startX:0,startY:0,endX:0,endY:0,maxX:0,maxY:0,minX:-1,minY:-1},historyLayerIndexRecord:[0],historyLayerNameIndex:[0],historyFrameIndexRecord:[0],drawAreaGridCanvas:null,layerGridImage:null,pindouHighlightOptions:null,menuType:0,layerScale:1,layerOriginRectData:{scale:1,width:0,height:0},maxScale:100,layerCrossList:{},currentSelectMindId:"0",isEnableCanvasGrid:!1,layerScaleStep:.5,isEnableCanvasSmooth:!1,isEnableEraserTrack:!0,scaleStyle:{width:"0px",height:"0px",left:"0px",top:"0px"},resizeStyle:{width:"0px",height:"0px",left:"0px",top:"0px"},resizeData:{startX:0,startY:0,direction:""},scaleImg:"",isControlMindObj:!1,mobileStartDistance:null,pindouBlockList:[],currentPindouIndex:0,pindouBlockHeight:64,pindouBlockWidth:64,currentPindouBlockSize:64,isShowPindouGridLine:!1,isShowPindouReferenceLine:!1,pindouReferenceLineGap:5,pindouReferenceLineColor:"#0052d9",isShowPindouRuler:!1,isShowPindouShadow:!1,isUpdateAllBlock:!1,isAutoChangeBrush:!1,isShowColorPalette:!0,isDoubleFingers:!0,isEnableQuickEraser:!1,exportSingleImage:"",exportSingleImageIndex:0,menuDrawer:!1,layerDrawer:!1,frameDrawer:!1,pindouBlockDrawer:!1,pindouTypeList:[{value:"preview",text:"拼豆预览"},{value:"draw",text:"拼豆绘图"}],axisXStyle:{left:"0px"},axisYStyle:{top:"0px"},axisCStyle:{left:"0px"},XLineOffset:0,YLineOffset:0,CenterLineOffset:0,isMovingLine:!1,intelligentStrokeVisible:!1,intelligentSliceVisible:!1,isDoubleFingersMoving:!1,clickCount:0,lastTouchTime:0,exportFormat:"image/webp",mobileFingerMovingData:{startX:0,startY:0,endX:0,endY:0},brushSliderVisible:!1,eraserSliderVisible:!1,intelligentSliceOptions:null,intelligentSliceObj:null,isEnablePindouBrushMode:!1,isMovingPindouBrush:!1,isEnableToolBoxToBottom:!1}));const u={requireIcon:de((()=>e=>g.themeValue?new URL({"../../assets/light/ai.png":Ua,"../../assets/light/brush.png":Ha,"../../assets/light/bucket.png":Ja,"../../assets/light/circle.png":Qa,"../../assets/light/clear.png":Ya,"../../assets/light/color.png":Va,"../../assets/light/copy.png":Xa,"../../assets/light/cReverse.png":Wa,"../../assets/light/crop.png":ja,"../../assets/light/curve.png":Na,"../../assets/light/eraser.png":Ka,"../../assets/light/fillCircle.png":Ga,"../../assets/light/fillRect.png":za,"../../assets/light/filter.png":qa,"../../assets/light/hidden.png":Za,"../../assets/light/hReverse.png":$a,"../../assets/light/line.png":_a,"../../assets/light/magicStick.png":et,"../../assets/light/more.png":at,"../../assets/light/move.png":tt,"../../assets/light/nsz.png":lt,"../../assets/light/pindou.png":nt,"../../assets/light/quickSelect.png":rt,"../../assets/light/rangeSelect.png":it,"../../assets/light/rect.png":ot,"../../assets/light/rotate.png":st,"../../assets/light/scale.png":ct,"../../assets/light/select.png":dt,"../../assets/light/sprite.png":gt,"../../assets/light/straw.png":At,"../../assets/light/visible.png":ht,"../../assets/light/vReverse.png":ut}[`../../assets/light/${e}.png`],self.location).href:new URL({"../../assets/dark/ai.png":ra,"../../assets/dark/brush.png":ia,"../../assets/dark/bucket.png":oa,"../../assets/dark/circle.png":sa,"../../assets/dark/clear.png":ca,"../../assets/dark/color.png":da,"../../assets/dark/copy.png":ga,"../../assets/dark/cReverse.png":Aa,"../../assets/dark/crop.png":ha,"../../assets/dark/curve.png":ua,"../../assets/dark/eraser.png":pa,"../../assets/dark/fillCircle.png":ma,"../../assets/dark/fillRect.png":Ca,"../../assets/dark/filter.png":ya,"../../assets/dark/hidden.png":fa,"../../assets/dark/hReverse.png":va,"../../assets/dark/line.png":wa,"../../assets/dark/magicStick.png":Da,"../../assets/dark/more.png":Sa,"../../assets/dark/move.png":La,"../../assets/dark/nsz.png":xa,"../../assets/dark/pindou.png":ba,"../../assets/dark/quickSelect.png":Ia,"../../assets/dark/rangeSelect.png":ka,"../../assets/dark/rect.png":Ba,"../../assets/dark/rotate.png":Ra,"../../assets/dark/scale.png":Ma,"../../assets/dark/select.png":Fa,"../../assets/dark/sprite.png":Ea,"../../assets/dark/straw.png":Ta,"../../assets/dark/visible.png":Pa,"../../assets/dark/vReverse.png":Oa}[`../../assets/dark/${e}.png`],self.location).href)),requireShapeImg:de((()=>g.themeValue?new URL({"../../assets/light/ai.png":Ua,"../../assets/light/brush.png":Ha,"../../assets/light/bucket.png":Ja,"../../assets/light/circle.png":Qa,"../../assets/light/clear.png":Ya,"../../assets/light/color.png":Va,"../../assets/light/copy.png":Xa,"../../assets/light/cReverse.png":Wa,"../../assets/light/crop.png":ja,"../../assets/light/curve.png":Na,"../../assets/light/eraser.png":Ka,"../../assets/light/fillCircle.png":Ga,"../../assets/light/fillRect.png":za,"../../assets/light/filter.png":qa,"../../assets/light/hidden.png":Za,"../../assets/light/hReverse.png":$a,"../../assets/light/line.png":_a,"../../assets/light/magicStick.png":et,"../../assets/light/more.png":at,"../../assets/light/move.png":tt,"../../assets/light/nsz.png":lt,"../../assets/light/pindou.png":nt,"../../assets/light/quickSelect.png":rt,"../../assets/light/rangeSelect.png":it,"../../assets/light/rect.png":ot,"../../assets/light/rotate.png":st,"../../assets/light/scale.png":ct,"../../assets/light/select.png":dt,"../../assets/light/sprite.png":gt,"../../assets/light/straw.png":At,"../../assets/light/visible.png":ht,"../../assets/light/vReverse.png":ut}[`../../assets/light/${h.currentDrawShape}.png`],self.location).href:new URL({"../../assets/dark/ai.png":ra,"../../assets/dark/brush.png":ia,"../../assets/dark/bucket.png":oa,"../../assets/dark/circle.png":sa,"../../assets/dark/clear.png":ca,"../../assets/dark/color.png":da,"../../assets/dark/copy.png":ga,"../../assets/dark/cReverse.png":Aa,"../../assets/dark/crop.png":ha,"../../assets/dark/curve.png":ua,"../../assets/dark/eraser.png":pa,"../../assets/dark/fillCircle.png":ma,"../../assets/dark/fillRect.png":Ca,"../../assets/dark/filter.png":ya,"../../assets/dark/hidden.png":fa,"../../assets/dark/hReverse.png":va,"../../assets/dark/line.png":wa,"../../assets/dark/magicStick.png":Da,"../../assets/dark/more.png":Sa,"../../assets/dark/move.png":La,"../../assets/dark/nsz.png":xa,"../../assets/dark/pindou.png":ba,"../../assets/dark/quickSelect.png":Ia,"../../assets/dark/rangeSelect.png":ka,"../../assets/dark/rect.png":Ba,"../../assets/dark/rotate.png":Ra,"../../assets/dark/scale.png":Ma,"../../assets/dark/select.png":Fa,"../../assets/dark/sprite.png":Ea,"../../assets/dark/straw.png":Ta,"../../assets/dark/visible.png":Pa,"../../assets/dark/vReverse.png":Oa}[`../../assets/dark/${h.currentDrawShape}.png`],self.location).href)),requireTransformImg:de((()=>g.themeValue?new URL({"../../assets/light/ai.png":Ua,"../../assets/light/brush.png":Ha,"../../assets/light/bucket.png":Ja,"../../assets/light/circle.png":Qa,"../../assets/light/clear.png":Ya,"../../assets/light/color.png":Va,"../../assets/light/copy.png":Xa,"../../assets/light/cReverse.png":Wa,"../../assets/light/crop.png":ja,"../../assets/light/curve.png":Na,"../../assets/light/eraser.png":Ka,"../../assets/light/fillCircle.png":Ga,"../../assets/light/fillRect.png":za,"../../assets/light/filter.png":qa,"../../assets/light/hidden.png":Za,"../../assets/light/hReverse.png":$a,"../../assets/light/line.png":_a,"../../assets/light/magicStick.png":et,"../../assets/light/more.png":at,"../../assets/light/move.png":tt,"../../assets/light/nsz.png":lt,"../../assets/light/pindou.png":nt,"../../assets/light/quickSelect.png":rt,"../../assets/light/rangeSelect.png":it,"../../assets/light/rect.png":ot,"../../assets/light/rotate.png":st,"../../assets/light/scale.png":ct,"../../assets/light/select.png":dt,"../../assets/light/sprite.png":gt,"../../assets/light/straw.png":At,"../../assets/light/visible.png":ht,"../../assets/light/vReverse.png":ut}[`../../assets/light/${h.currentDrawTransform}.png`],self.location).href:new URL({"../../assets/dark/ai.png":ra,"../../assets/dark/brush.png":ia,"../../assets/dark/bucket.png":oa,"../../assets/dark/circle.png":sa,"../../assets/dark/clear.png":ca,"../../assets/dark/color.png":da,"../../assets/dark/copy.png":ga,"../../assets/dark/cReverse.png":Aa,"../../assets/dark/crop.png":ha,"../../assets/dark/curve.png":ua,"../../assets/dark/eraser.png":pa,"../../assets/dark/fillCircle.png":ma,"../../assets/dark/fillRect.png":Ca,"../../assets/dark/filter.png":ya,"../../assets/dark/hidden.png":fa,"../../assets/dark/hReverse.png":va,"../../assets/dark/line.png":wa,"../../assets/dark/magicStick.png":Da,"../../assets/dark/more.png":Sa,"../../assets/dark/move.png":La,"../../assets/dark/nsz.png":xa,"../../assets/dark/pindou.png":ba,"../../assets/dark/quickSelect.png":Ia,"../../assets/dark/rangeSelect.png":ka,"../../assets/dark/rect.png":Ba,"../../assets/dark/rotate.png":Ra,"../../assets/dark/scale.png":Ma,"../../assets/dark/select.png":Fa,"../../assets/dark/sprite.png":Ea,"../../assets/dark/straw.png":Ta,"../../assets/dark/visible.png":Pa,"../../assets/dark/vReverse.png":Oa}[`../../assets/dark/${h.currentDrawTransform}.png`],self.location).href)),requireSelectImg:de((()=>g.themeValue?new URL({"../../assets/light/ai.png":Ua,"../../assets/light/brush.png":Ha,"../../assets/light/bucket.png":Ja,"../../assets/light/circle.png":Qa,"../../assets/light/clear.png":Ya,"../../assets/light/color.png":Va,"../../assets/light/copy.png":Xa,"../../assets/light/cReverse.png":Wa,"../../assets/light/crop.png":ja,"../../assets/light/curve.png":Na,"../../assets/light/eraser.png":Ka,"../../assets/light/fillCircle.png":Ga,"../../assets/light/fillRect.png":za,"../../assets/light/filter.png":qa,"../../assets/light/hidden.png":Za,"../../assets/light/hReverse.png":$a,"../../assets/light/line.png":_a,"../../assets/light/magicStick.png":et,"../../assets/light/more.png":at,"../../assets/light/move.png":tt,"../../assets/light/nsz.png":lt,"../../assets/light/pindou.png":nt,"../../assets/light/quickSelect.png":rt,"../../assets/light/rangeSelect.png":it,"../../assets/light/rect.png":ot,"../../assets/light/rotate.png":st,"../../assets/light/scale.png":ct,"../../assets/light/select.png":dt,"../../assets/light/sprite.png":gt,"../../assets/light/straw.png":At,"../../assets/light/visible.png":ht,"../../assets/light/vReverse.png":ut}[`../../assets/light/${h.selectType}.png`],self.location).href:new URL({"../../assets/dark/ai.png":ra,"../../assets/dark/brush.png":ia,"../../assets/dark/bucket.png":oa,"../../assets/dark/circle.png":sa,"../../assets/dark/clear.png":ca,"../../assets/dark/color.png":da,"../../assets/dark/copy.png":ga,"../../assets/dark/cReverse.png":Aa,"../../assets/dark/crop.png":ha,"../../assets/dark/curve.png":ua,"../../assets/dark/eraser.png":pa,"../../assets/dark/fillCircle.png":ma,"../../assets/dark/fillRect.png":Ca,"../../assets/dark/filter.png":ya,"../../assets/dark/hidden.png":fa,"../../assets/dark/hReverse.png":va,"../../assets/dark/line.png":wa,"../../assets/dark/magicStick.png":Da,"../../assets/dark/more.png":Sa,"../../assets/dark/move.png":La,"../../assets/dark/nsz.png":xa,"../../assets/dark/pindou.png":ba,"../../assets/dark/quickSelect.png":Ia,"../../assets/dark/rangeSelect.png":ka,"../../assets/dark/rect.png":Ba,"../../assets/dark/rotate.png":Ra,"../../assets/dark/scale.png":Ma,"../../assets/dark/select.png":Fa,"../../assets/dark/sprite.png":Ea,"../../assets/dark/straw.png":Ta,"../../assets/dark/visible.png":Pa,"../../assets/dark/vReverse.png":Oa}[`../../assets/dark/${h.selectType}.png`],self.location).href)),requireVisibleImg:de((()=>e=>e?g.themeValue?new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAwNJREFUeF7tmU2IjVEYx3//nYViJRbKCgtfxQIpasosDLFgMTGUMmQlWVGULdn5mJKPSWpmQUhRsvAxKVOSUjYsJsXKwsJC/jq69M51Z+577r3vNLdznnq7i3uej/d3nuec85xXJC5K/P3JAHIGJE4gl0DiCZAXwVwCuQQSJ5BLIPEEyLtALoFcAjNAwPYSYAuwGVgOzC88IYJvhecd8BgYkzRRdXiVlYDtVcAOYBuwvsUXGQMeAvckvW3RxrRqHQdg+yCwB9ja4YBDVoxIutpJux0DYLsXOAaE3yrlEXBBUvhtW9oGYHsecB4IMz+TEjLhpKQv7ThtC4DtlcA1YG07QbSh+wkYlBTKoyVpGYDtQ8CVSK/fw4IGvAfeAOPAL2A1EBbN8OwG5kTaPSHpXKTOn+EtAbB9Bjgd6fAlcFRSePEpxXYPcBFYGmm/X9LtSJ14ALaPA7G0L0s6EhOc7ZAp22N0wu4jaTRGJyoDbO8E7sQ4AO5LCueBaLF9CTgcqbhL0t2yOqUB2F4APAFWlDUOfJC0rH687X212d0A/ASeAc8lDTUY+wLYGOEznCR7JH0toxMDICx4YeErKz+APkkB2j+xPVJb6BrZGZe0rm78mhqguWUdA0OSBsuMLwXA9n7gehmDhTHDkgbqXuZ1iS1zVFI4SRah3QL6I/0fkHSjmU5ZACFFNzUzVvf/pK0pctsckDT8157tU8DZSP//ZVMj/aYAbIdm5kGk8zC8t3hAsX0TCLVfRiZlge2+sJiWUawbs1dSyJ4ppQyAp7VWNtb/wuIx1fZHILTFZWRC0uJCBiwCPpdRrBvzStK0nWgG0Ixq8iUQANlOdxGsAUh7G6xBSPcgVAOQ9lG4BiHdZqiwJ6fbDhcgpHshUoCQ7pVYAUK6l6IFCOleixeP0cl+GKnvJZL9NNYARJofRxt1l0l+Hm/WZs+W/5teiMyWQKuKIwOoimy32M0Z0C0zVVWcOQOqItstdnMGdMtMVRVnzoCqyHaL3ZwB3TJTVcWZM6Aqst1i9zeYIGJQFMquqwAAAABJRU5ErkJggg==",self.location).href:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAtFJREFUeF7t2T/oVEcQwPGPnYWglWghpIoWiQpaJBKIIGgRE7TQQvwHAf+QSsQqgoKtYuc/kCSKCFooKoKCWPgPQUFEEGy0CEJSWVikCCGMvIPzeXq7d7+nnLsDjytuZ3bed2dmd/ZNU7hMK/z9VQA1AgonUFOg8ACoRbCmQE2BwgnUFCg8AOouUFOgpsDHIfAFluN7LMCsvic8eNX3PMF13MOfXbvXZQosxE/4Ad+M+CIB4Sou4fGINj6o1gWAn7EeK6fY4YiKczg5lXanEsAq7EL8dinXcBjxO7ZMBYCZOIRY+Y8pEQm/4q9xJh0XwNf4DUvGcWIM3RfY3hTNkcyMA2AbjmfO+ropaE/xCA/xHxYhimY86zA90+4eHMzUeTN8VAD7sS9zwrv4pXnxD6muwBF8mWl/A85m6owEYPcItI9hZ6ZzsfX9mKkTu8/5HJ3cCFiDCzkT4HJzHshUezP8KHZkKq7FxVSdHACzcQNfpRrHM8wfMH5Ts7rf4l/cwm2cGDD2DpZlzBknyUijv1N0cgBEwYvClyr/YHUDrV8nDjNR6AZJFMWlrT8WN4BmpE7cgIzdYaikAtiC34dae3vAaWxu6TxI2DIjhyOX++UMosjlyFb8MUwhFUCE6HfDjLX+b29NOdtmgAuAPdmLA5nzD4qmd0ykAIhm5krm5DE8jsRxfu/JKUTup0g7CiKVopjmykZE9LxXUgDcbFrZ3MnntI6pzxFtcYpEGzyvb+BcvExRbI25P6wTrQASqBafAsGo6CIYAIrfBgNC0QehAFD8UTggFN0M9TaMotvhHoSiL0R6EHLO9j2dz+ZKrPdCRV+K9iAUfS3ef5Iu9sNIu50o9tNYG0SxH0cHNZhFfh5P6LQ//ZCUC5FP72WHHlQAHcKdCNM1AiZimTp0skZAh3AnwnSNgIlYpg6drBHQIdyJMF0jYCKWqUMnawR0CHciTP8Phw+oQQpn1acAAAAASUVORK5CYII=",self.location).href:g.themeValue?new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABO1JREFUeF7tmkmoHVUQhr8fQVwI6sJhkYBujIITKqIiKATNwii6iIugURSNGgRHCLhIslNU4sIx4BhESBaKEcUJRaNRNE44oC4MGHACBxAREUrqcTr0venhVPd9l0e/W9DcxTl1qv7/VNepOn3FIhctcvzMCJhFwCJnYPYKLPIAmCXBQb8CZrZR0samKB8sAQ4e2ABsaiJhkASUwBeb75GwqSoSBkdABXjH/TVwmaQvxkkYFAE14L9L4D8ddATUgP8+gf+oLhEOIgJqwP+QwL8/6FOgBvyPCfzOtkJvKhFgZkcD5wHnAscBh5aefwHfrb2lxx1/W5KP1UoN+F8T+LfawPv4vBFgZicBFwMXAmfmOFMx5+NExC3jYzXgf0/gX8+1N3ECzOwadwK4INeJhnnbJflaI1ID/q8E/uWI3YkRYGYrAN8p/52ERMD/k8DviBruTYCZHQLcB/jOT0oi4P9L4J/rYrwXAWZ2IvAEcFoX4zU6EfC+hFd427va70yAmV0HPBo07O/pC6k09cpsN3AAcFZ6lgTe+bLp9ZLuDvoyN70TATVJqM3+e8A6SZUlaZ1ywFZj11e3fpgAM7sNuLcN7dj4I5JuCOoQAF8svULSqxE7IQLM7BIgmmx2SPJ6oFI8iUr6c3ywA/hiiTMkfZhLQjYBZnYE8AZwQu7iwLeSllWA8/xxNrCn6rKiB3g39RlwviSvCFslQoAnPHc8V/xsXinJSdsnZuadmZ8ale9sT/CFncclZR3LWQSY2ZXAk7nI07ytktaMgd8GrOoAfj1wV9C+J9yH2nRyCXgHOKdtsbHxOyTtS5ZmdgXwdAfwRSns5EXEm6tlkv5uUmolwMy8mXkxYjnNHcnIZvYasLPqbq4h7OeKHDPzV6b2UqPBt5skPdCXgDdTKxvl4ChJPxdKZrahC3jXN7PDgN+iDgCfSDq1LwHvpowdtb9UkofhHABJ3qqOSMPO75W0tETekcBPUQeADyQ1tuI5r8Bq4JkOxhtr9JZsP9IPmJm31q908OFySY2+5xBwEPAVcEzQgc2Sbq3SyTjq1kjaWoqA24F7gvZ3Szq9TaeVgBTCNwIPti02Nh7t6gr1/fTMzE8PP0UicpWkp9oUsghIJDwGXN22YBrvCv5LSSOVppktT6eQR2KubJG0NmdyhIDDAT/KTm5ZOAreE+Uuf81qyuJvgGNzwKQ5/vVnuaRfcnSyCUhRsBJounaKgm9LlH53cFEOkNKcSyU9n6sTIiCRsA6oKi4mDf5h4PpcIGle+HYoTEAi4WZgc8m5iYE3s1NSwvVuMSKrJT0bUfC5nQhIJHhT4/V5FLx/9PDHCyy/EnPxUteBH5++JRwcBDLSd0R0OxNQkFB1IZlxzkd8bJq7B1gbvQUqL9iLgCrPpgjej+U7y/1GF1YnSsCUwHtJ7FVml9J4P44mRsAUwPtl5zZJvvMTk4kQ0AD+/tRKe4LrIl4gveTfEiR93mWBNp3eBLRdZhQOmJl/HvdnSenxlvdA4I/S45Wc7/auop1uA9FnvBcBueD7ODjfup0JGAL4zoXQUMB3ImBI4MMEDA18iIAhgs8mYKjgswgYMvgsAlLX5zeyfjNbSPjiYb7P867rZ9cBZrYFuLbvf3K6OjpfetkEpEhY1ecPSfMFos+6IQL6GFqoujMCFurOTMuvWQRMi+mFaud/XhkSXwnoZssAAAAASUVORK5CYII=",self.location).href:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABJ9JREFUeF7tmkuoVlUUx3+XQBwE6UBtkJCTSjALDdEIEqIcmFEDHYgvlCwVwV4QNMhmhYoOLDVQywihBoqKkg+UfJSYmVKJOTBIMA18gISIA/nLPnA4d5+z99rnfF927rfgcLnsvdba///eZz32+foY4NI3wPHTI6B3AgY4A71XYIAfgF4QbPsrsBzQUyptJkDAPwQ+qiKhrQRk4LOd1/8iop+0kYAieIE+C8wAfi0y0DYCfODPO/C/tP0E+MBfcOB/KouCbTkBPvB/OfA/tj0L+MBfcuCPhAq9bp2AR4HJwPPAE8CQ3HMb0G5dzD1a+PeAxqrEB/4fB/5QCLzGO0nAWOAVYCowMWYxnjk/OyLe8oz5wF9z4PfH+usEAQvcIl6KXUTFvG+dreIUH/ibbu4ei98mCZgCaKf0twmxgL/lwO+0Om6CgIeAVYB2vimxgL/jwG9LcV6XgCeBzcD4FOclOhbwMqEKTzpJUoeAhcAGo1e9pztcaarK7CTwADDJPY8Y3vm86/eBT4xruTc9lQBfEAr5PwYsAbwlaYVyrK/Krq/MfgoB7wArQ2gL4+uBRUYdTY8Fn5lWAN5r8WMl4FXAGmwUmVUPlImC6A3PoBV8ZmICcCKWBAsBw4EDwJhY48AfwOOe+YofzwJ/llxWpIKXq9PAi4AqwqBYCFDA08JjRbn5ZUdaXkedmbJG2TtbB3zmZ1NsWo4lYC7wRSxyN+8rYE5B5xtgegJ4RfmPjf4VcD8L6cQScBh4LmSsMP5eIVjOBrYkgFeel4g8i6i50uv3b5VSDAFqZnZZPLu5xYi8D1CX57ubKzv2WZGjV6b0UqNibUuBtXUJOOhaWSsHDwOXc0rZDW3RTgi85g8FrloXAJwCxtUl4KiL2Fb/I11/nwFQqxoLXsdX+pmMAP62LgA4HmrFY16BmcDXCc5DNXpVtC/2A2qtv0tYw6zQ2mMIGAz8DowyLmA18HaJTijVKXsoi2TyLrDC6F99xjMhnRgCZGMx8GnIWGHc2tVl6j49ZQ9lEYvMA74MKcQSIDsbgfkhg248FfxvnkrzBZeFdBJj5XPgjZjJFgKGAUplTwUMW8Er4P3gXjPfh8xzwGMxYNwcff0RaVdidCwEyJ5K26prJyv4UKDU3cG0GCC5Oa8B22N1rATIrkpMX3HRNPh1wJuxQNy8EKH9zKUQICPLAEX5qsClsZgip7iop13AVbdoEaXrrRYFzU0lQLpqalSfW3de5bAeFVhKVRKVugI+2t0dPGgEUuw7otXrEJCR4LuQDOX56AUGJuo+QdHedAuUt1mXAN/6ugVeafmDQr9hJrZpAroBXiWx4k9KadxYEPwvdl7HXDFHO9+YNHUCynZ+jWulFeBSRAXSbvct4UyKgZBOEwTEpjp9Htejjx/Zo5Z3EHA996iS024LvKrEjkpdAmLBdxREHeN1CPjfg69TCLUCfCoBrQGfQkCrwFsJaB14CwGtBB9LQGvBxxKgebqR1c1sJuaLhzq5upO6ljpAF42v1/1NTifBpNi2ECD7ugRJ/kFSygI7rWMloNPr6br9HgFdp/w+c9g7AffZhnR9OXcBC2PsQVriZsoAAAAASUVORK5CYII=",self.location).href)),checkTheme:de((()=>g.themeValue)),checkzIndex:de((()=>{let e={zIndex:0};return g.isFullWork?e.zIndex=h.zIndex.max:e.zIndex=h.zIndex.min,e}))};let p=s(o(o({},i.methods),r),{handleSelectPindouMode(e){p.handlePindouMode(e.value)},handleChangeBrushColor(e){let a=e;a.length<=6&&"#"!==a.slice(0,1)&&(a=`#${a}ff`.toLowerCase()),h.brushColor=a},async handleSaveProject(){var e;if(h.isScaling&&p.handleCancelScale(),!h.isSaveProject)if(h.loading=!0,h.isSaveProject=!0,h.projectData.updateAt=ge(),h.projectData.height=h.canvasHeight,h.projectData.width=h.canvasWidth,h.projectData.tip="最近编辑",h.projectData.data=await p.compressDrawRecordData(),""===h.drawRecord[0].currentFrameImg?h.projectData.frameImg="":h.projectData.frameImg="@",h.projectData.isLocalFile&&"1"===h.projectData.isLocalFile){let l=null==(e=g.localProjectList.find((e=>e.id===h.projectData.projectId)))?void 0:e.entry;try{const e=await l.createWritable();let a=JSON.parse(JSON.stringify(h.projectData));delete a.isLocalFile,await e.write(JSON.stringify(a)),await e.close(),t.$message.success("保存成功"),h.loading=!1}catch(a){t.$message.error("保存失败"),h.loading=!1}}else g.saveProject(h.projectData,!0).then((e=>{e&&(t.$message.success(t.$t("message.saveSucceeded")),h.loading=!1)})).catch((e=>{t.$message.error(t.$t("message.saveFailed")),h.loading=!1}))},handleBack:()=>h.isPreview?(h.isPreview=!1,g.saveProjectId("0"),t.$router.back()):h.isSaveProject?(g.saveProjectId("0"),h.pinDouMode=!1,t.$router.replace("/project")):void Ae.confirm("项目未保存，是否离开该页面？","提 示",{confirmButtonText:"确 认",cancelButtonText:"取 消",type:"warning"}).then((()=>{g.saveProjectId("0"),h.pinDouMode=!1,t.$router.replace("/project")})).catch((()=>{})),handleToolBox(){const e=document.querySelector(".draw-body");h.isEnableToolBoxToBottom?e.style.setProperty("--difHeight","95px"):e.style.setProperty("--difHeight","45px"),setTimeout((()=>{p.handleResizeWindowEvent(""),p.handleResetCanvas()}),200)},handleScreenFull(){g.isFullWork=!g.isFullWork;const e=document.querySelector("#project-header"),a=document.querySelector("#draw-panel");g.isFullWork?(e.style.setProperty("--topValue","0px"),a.style.setProperty("--topValue","60px")):(e.style.setProperty("--topValue","60px"),a.style.setProperty("--topValue","120px")),setTimeout((()=>{p.handleResizeWindowEvent(""),g.isFullWork||p.handleResetCanvas()}),200)},handleChangeTool(e){if(h.pinDouMode)return h.isUpdateAllBlock?t.$message.warning("请先关闭批量更新分块"):[0,1,2].includes(e)?h.currentTool=e:t.$message.warning("请先退出拼豆预览模式");if(8===h.currentTool&&8!==e){if(9===e)return;p.handleCancelSelect()}h.isScaling&&p.handleCancelScale(),8===e&&(h.selectData.selectCanvasObj||(h.selectData.selectCanvasObj={},h.selectData.selectCanvasObj.canvas=document.createElement("canvas"),h.selectData.selectCanvasObj.canvas.width=h.canvasWidth,h.selectData.selectCanvasObj.canvas.height=h.canvasHeight,h.selectData.selectCanvasObj.ctx=h.selectData.selectCanvasObj.canvas.getContext("2d"),h.selectData.selectCanvasObj.selectCanvas=document.createElement("canvas"),h.selectData.selectCanvasObj.selectCanvas.width=h.canvasWidth,h.selectData.selectCanvasObj.selectCanvas.height=h.canvasHeight,h.selectData.selectCanvasObj.selectCtx=h.selectData.selectCanvasObj.selectCanvas.getContext("2d")),h.selectData.selectLayerId=p.getCurrentLayerId()),10!==e?(h.currentTool=e,p.closeMenu()):t.$refs.SpriteDialog.handleOpen()},handleLinmoMode:()=>h.pinDouMode?t.$message.warning("请先退出拼豆预览模式"):h.isHideLinmoMode?(h.isHideLinmoMode=!1,void t.$refs.LinmoModeDialog.handleShow()):(h.linmoMode=!0,void t.$refs.LinmoModeDialog.handleOpen()),handleIntelligentSliceVisible(){t.$refs.IntelligentSliceDialog.dialogVisible=!0,h.intelligentSliceVisible=!0,h.intelligentSliceOptions={canvasWidth:h.canvasWidth,canvasHeight:h.canvasHeight},t.$refs.IntelligentSliceDialog.handleChange()},handlePindouMode(e){if(8===h.currentTool&&p.handleCancelSelect(),h.isScaling&&p.handleCancelScale(),!h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender)return t.$message.warning("请将图层设置显示状态");if("preview"===e&&h.pinDouMode)h.currentTool=5;else if("preview"!==e||h.pinDouMode){if("draw"===e&&!h.pinDouDrawMode){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(h.isHidePindouMode)return void p.handleShowPindou();h.pinDouDrawMode=!0,t.$refs.PindouDialog.handleOpen(e,0,h.pindouBrand);let a=h.ctx1.getImageData(0,0,h.canvasWidth,h.canvasHeight).data;h.worker.postMessage({type:105,currentFrameData:a,isPindouDrawMode:h.pinDouDrawMode,currentPindouBrandColorList:JSON.parse(JSON.stringify(g.pindouMaps[h.pindouBrand].data||g.pindouMaps[h.pindouBrand]))}),h.worker.onmessage=e=>{105===e.data.type&&(h.colorStatList=e.data.colorObj)}}}else{if(h.pinDouDrawMode)return t.$message.warning("请先退出拼豆绘图模式");if(h.linmoMode)return t.$message.warning("请先退出临摹模式");if(!h.drawRecord[h.currentFrameIndex].currentFrameImg||!h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].currentLayerImg)return t.$message.warning("当前图层为空");if(p.checkCurrentLayerMindLock(!0))return t.$message.warning("请将智能对象栅格化后编辑");h.isShowGridLine=!1,h.isShowReferenceLine=!1,h.isShowRuler=!1,h.currentPindouIndex=0,h.currentTool=5,p.handlePindouEvent()}},handleShowPindou(){h.isHidePindouMode=!1,t.$refs.PindouDialog.handleShow()},handlePindouEvent(e=h.pindouBrand){if(h.pinDouDrawMode){h.pindouBrand=e;let a=h.ctx1.getImageData(0,0,h.canvasWidth,h.canvasHeight).data;return h.worker.postMessage({type:105,currentFrameData:a,isPindouDrawMode:h.pinDouDrawMode,currentPindouBrandColorList:JSON.parse(JSON.stringify(g.pindouMaps[h.pindouBrand].data||g.pindouMaps[h.pindouBrand]))}),void(h.worker.onmessage=e=>{105===e.data.type&&(h.colorStatList=e.data.colorObj)})}h.loading=!0,h.canvasWidth+h.canvasHeight<=2*h.currentPindouBlockSize?(h.pindouBlockWidth=h.canvasWidth,h.pindouBlockHeight=h.canvasHeight):(h.pindouBlockWidth=Math.min(h.currentPindouBlockSize,h.canvasWidth),h.pindouBlockHeight=Math.min(h.currentPindouBlockSize,h.canvasHeight));const a=document.createElement("canvas");a.width=h.canvasWidth,a.height=h.canvasHeight;const l=a.getContext("2d"),n=new Image;n.src=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].currentLayerImg,n.onload=()=>{null==l||l.drawImage(n,0,0);const a=null==l?void 0:l.getImageData(0,0,h.canvasWidth,h.canvasHeight);h.worker.postMessage({type:106,options:{canvasWidth:h.canvasWidth,canvasHeight:h.canvasHeight,pindouBlockHeight:h.pindouBlockHeight,pindouBlockWidth:h.pindouBlockWidth,currentPindouBlockSize:h.currentPindouBlockSize,currentFrameImgData:a},currentPindouBrandColorList:JSON.parse(JSON.stringify(g.pindouMaps[e].data||g.pindouMaps[e]))}),h.worker.onmessage=a=>{if(106!==a.data.type)return;h.pindouBlockList=a.data.pindouData;const l=document.createElement("canvas"),n=l.getContext("2d");for(let e=0;e<h.pindouBlockList.length;e++)l.width=h.pindouBlockWidth,l.height=h.pindouBlockHeight,null==n||n.drawImage(h.pindouBlockList[e].blockBitmap,0,0),h.pindouBlockList[e].blockBitmap=l.toDataURL(h.exportFormat,1);p.handleCloseAllDialog(),h.pinDouMode=!0,he((()=>{p.computeScale(!0),p.drawPixelArea(!0),p.handleSetCanvasScale(),p.handleDrawPindou(h.ctx1),p.handleDrawPindouGridLine(),p.handleDrawPindouRuler(),p.handleChangePindouBlock(0),h.pindouBrand=e,h.isHidePindouMode||t.$refs.PindouDialog.dialogVisible||(t.$refs.PindouDialog.handleOpen(a.data.pindouData,h.currentPindouIndex,e),t.$refs.PindouDialog.handleUpdateCanvasOptions({width:h.pindouBlockWidth,height:h.pindouBlockHeight}),p.handleCancelKeyboardEvent())}))}}},handleTransformColorToPindou(e){if(h.isUpdateAllBlock){let e=h.currentLayerIndex;if(!h.drawRecord[h.currentFrameIndex].layer[e].isRender)return;let a=h.drawRecord[h.currentFrameIndex].layer[e].layerId,t=h.layerCrossList[a].layerData;const l=Math.ceil(h.canvasWidth/h.pindouBlockWidth),n=Math.ceil(h.canvasHeight/h.pindouBlockHeight);let r=0;for(let o=0;o<n;o++)for(let e=0;e<l;e++){let a=h.pindouBlockList[r];for(let l=0;l<h.pindouBlockHeight;l++)for(let n=0;n<h.pindouBlockWidth;n++){const r=e*h.pindouBlockWidth+n,i=o*h.pindouBlockHeight+l;if(r<h.canvasWidth&&i<h.canvasHeight){const e=4*(l*h.pindouBlockWidth+n),o=4*(i*h.canvasWidth+r);t[o]=a.blockArr[e],t[o+1]=a.blockArr[e+1],t[o+2]=a.blockArr[e+2],t[o+3]=a.blockArr[e+3]}}r++}let i=new ImageData(t,h.canvasWidth,h.canvasHeight);h.layerCrossList[a].layerCtx.putImageData(i,0,0)}else{let e=h.pindouBlockList[h.currentPindouIndex],a=h.currentLayerIndex;if(!h.drawRecord[h.currentFrameIndex].layer[a].isRender)return;let t=h.drawRecord[h.currentFrameIndex].layer[a].layerId,l=h.layerCrossList[t].layerData,n=Math.ceil(h.canvasWidth/h.pindouBlockWidth);Math.ceil(h.canvasHeight/h.pindouBlockHeight);let r=h.currentPindouIndex%n,i=Math.floor(h.currentPindouIndex/n);for(let s=0;s<h.pindouBlockHeight;s++)for(let a=0;a<h.pindouBlockWidth;a++){const t=r*h.pindouBlockWidth+a,n=i*h.pindouBlockHeight+s;if(t<h.canvasWidth&&n<h.canvasHeight){const r=4*(s*h.pindouBlockWidth+a),i=4*(n*h.canvasWidth+t);l[i]=e.blockArr[r],l[i+1]=e.blockArr[r+1],l[i+2]=e.blockArr[r+2],l[i+3]=e.blockArr[r+3]}}let o=new ImageData(l,h.canvasWidth,h.canvasHeight);h.layerCrossList[t].layerCtx.putImageData(o,0,0)}e(),p.handleLayerImg(),t.$message.success("保存成功")},handleChangeCanvasSize(e,a,l=!0){e<t.$config.canvasMinSize||e>t.$config.canvasMaxSize?(h[a]=e<t.$config.canvasMinSize?t.$config.canvasMinSize:e>t.$config.canvasMaxSize?t.$config.canvasMaxSize:h[a],t.$message.warning(`画布大小必须${t.$config.canvasMinSize}-${t.$config.canvasMaxSize}像素区间`)):h[a]=Number(e),l&&h.isCheckedRatio&&("canvasWidth"===a?h.canvasHeight=parseInt(h[a]/h.widthHeightRatio):h.canvasWidth=parseInt(h[a]/h.widthHeightRatio)),(h.canvasHeight>100||h.canvasWidth>100)&&(h.isEnableCanvasGrid=!1),p.computeScale(),h.canvasBeginPos.centerX=h.canvasBeginPos.x+h.scale*h.canvasWidth/2,h.canvasBeginPos.centerY=h.canvasBeginPos.y+h.scale*h.canvasHeight/2,p.drawPixelArea(!0),p.initCanvasRecord("scale"),p.handleLayerAndFrameHighRender()},handleLayerAndFrameHighRender(){const e=document.querySelector(".frame-list"),a=document.querySelector(".layer-list");e&&(h.canvasHeight<66||h.canvasWidth<66?e.classList.add("image-pixelated"):e.classList.remove("image-pixelated")),a&&(h.canvasHeight<38||h.canvasWidth<38?a.classList.add("image-pixelated"):a.classList.remove("image-pixelated"))},handleChangeRatio(e){e&&(h.widthHeightRatio=h.canvasWidth/h.canvasHeight)},async initCanvasRecord(e){if("init"===e){let e=ue.v4();h.currentLayerId=e,await p.handleCreateLayerCrossData("add",{layerId:e}),h.drawRecord.push({frameId:ue.v1(),currentFrameImg:null,layer:[{layerId:e,layerName:"图层1",alpha:100,isLock:!1,currentLayerImg:h.layerCrossList[e].thumbImg,isExpandMindList:!0,mindLayerList:[],isRender:!0}]}),p.handleAddHistory(),he((()=>{p.handleLayerAndFrameHighRender()}))}else if("scale"===e){h.loading=!0,p.handleSetCanvasScale();for(let e=0;e<h.drawRecord.length;e++)for(let a=0;a<h.drawRecord[e].layer.length;a++)await p.handleCreateLayerCrossData("update",h.drawRecord[e].layer[a]);h.selectData.selectCanvasObj&&h.selectData.selectCanvasObj.ctx&&(h.selectData.selectCanvasObj.canvas.width=h.canvasWidth,h.selectData.selectCanvasObj.canvas.height=h.canvasHeight,h.selectData.selectCanvasObj.selectCanvas.width=h.canvasWidth,h.selectData.selectCanvasObj.selectCanvas.height=h.canvasHeight),p.reDraw(),h.loading=!1}},handleChangeCanvasGrid(){if(h.canvasHeight>100||h.canvasWidth>100)return h.isEnableCanvasGrid=!1,t.$message.warning("画布大小须小于100，才能开启画布格子");p.drawPixelArea(!0)},drawPixelArea(e=!1){if(!e&&h.drawAreaGridCanvas&&h.ctx2.drawImage(h.drawAreaGridCanvas,0,0,h.bgCanvas.width,h.bgCanvas.height),e){let e=g.themeValue?h.drawAreaGridColor.dark:h.drawAreaGridColor.light;if(h.ctx2.clearRect(0,0,h.bgCanvas.width,h.bgCanvas.height),h.ctx2.globalAlpha=.25,h.pinDouMode){let a=h.pindouBlockWidth,t=h.pindouBlockHeight;for(let l=0;l<t;l++)for(let t=0;t<a;t++){h.ctx2.fillStyle=(l+t)%2==0?e[1]:e[0];let a=t*h.pindouScaleValue,n=l*h.pindouScaleValue;h.ctx2.fillRect(a,n,h.pindouScaleValue,h.pindouScaleValue)}return}let a=h.isEnableCanvasGrid?h.canvasWidth:6,t=h.isEnableCanvasGrid?h.canvasHeight:6;h.drawAreaList=[];let l=Math.ceil(Math.max(h.bgCanvas.width,h.bgCanvas.height)/6);h.isEnableCanvasGrid&&(l=Math.ceil(Math.max(h.bgCanvas.width,h.bgCanvas.height)/Math.max(h.canvasWidth,h.canvasHeight)));for(let n=0;n<t;n++)for(let t=0;t<a;t++){h.ctx2.fillStyle=(n+t)%2==0?e[1]:e[0];let a=t*l,r=n*l;h.ctx2.fillRect(a,r,l,l),h.drawAreaList.push([a,r])}h.drawAreaGridCanvas=h.bgCanvas}p.handleDrawReferenceLine(),p.handleDrawGridLine(),p.handleIntelligentSlice(h.intelligentSliceObj)},handleDrawPindouRuler(e=h.isShowPindouRuler){h.isShowPindouRuler=e,p.handleDrawReferenceLine(),p.handleDrawPindouRulerLine()},handleDrawPindouRulerLine(){if(h.isShowPindouRuler){let e=pe(h.canvas),a=16,t=15;if(e<.3)return;h.pinDouMode&&(a=25,t=30);let l=e*t,n=e*h.pindouScaleValue,r=Math.floor(e*a)-6;h.canvasRealLeft=h.baseCanvas.getBoundingClientRect().left,h.canvasRealTop=h.baseCanvas.getBoundingClientRect().top,h.ctx0.setLineDash([]);let i=h.canvas.getBoundingClientRect().left-h.canvasRealLeft,o=h.canvas.getBoundingClientRect().top-h.canvasRealTop,s=h.canvas.getBoundingClientRect().width,c=h.canvas.getBoundingClientRect().height;h.ctx0.globalAlpha=1,h.ctx0.lineWidth=1,h.ctx0.strokeStyle="rgb(80, 80, 80)",h.ctx0.font=`${r}px Arial`,h.ctx0.textBaseline="middle";let d=o,A=i,u=o+c,p=i+s,m=5,C=5,y=5,f=5,v=l,w=l,D=l,S=l;o<=0&&(d=0,m=-5,v=-l),!h.isShowColorPalette&&o+c>=h.baseCanvas.getBoundingClientRect().height?(u=h.baseCanvas.getBoundingClientRect().height,C=-5,w=-l):h.isShowColorPalette&&o+c>=h.baseCanvas.getBoundingClientRect().height-35&&(u=h.baseCanvas.getBoundingClientRect().height-35,C=-5,w=-l),i<=0&&(A=0,y=-5,D=-l),i+s>=h.baseCanvas.getBoundingClientRect().width&&(p=h.baseCanvas.getBoundingClientRect().width,f=-5,S=-l);let L=i<0?i:0,x=o<0?o:0;h.ctx0.beginPath(),h.ctx0.moveTo(A,d-m),h.ctx0.lineTo(A+(s+L),d-m),h.ctx0.moveTo(A,d-m-v),h.ctx0.lineTo(A+(s+L),d-m-v),h.ctx0.moveTo(A,u+C),h.ctx0.lineTo(A+(s+L),u+C),h.ctx0.moveTo(A,u+C+w),h.ctx0.lineTo(A+(s+L),u+C+w),h.ctx0.moveTo(A-y,d),h.ctx0.lineTo(A-y,d+c+x),h.ctx0.moveTo(A-y-D,d),h.ctx0.lineTo(A-y-D,d+c+x),h.ctx0.moveTo(p+f,d),h.ctx0.lineTo(p+f,d+c+x),h.ctx0.moveTo(p+f+S,d),h.ctx0.lineTo(p+f+S,d+c+x),h.ctx0.fillStyle=g.themeValue?"black":"white",h.ctx0.fillRect(A,d-m-v,s+L,v),h.ctx0.fillRect(A,u+C,s+L,w),h.ctx0.fillRect(A-y-D,d,D,c+x),h.ctx0.fillRect(p+f,d,S,c+x),h.ctx0.fillStyle=g.themeValue?"white":"black";for(let g=0;g<=h.pindouBlockWidth&&(h.ctx0.moveTo(A+g*h.pindouScaleValue*e+L,d-m),h.ctx0.lineTo(A+g*h.pindouScaleValue*e+L,d-m-v),h.ctx0.moveTo(A+g*h.pindouScaleValue*e+L,u+C),h.ctx0.lineTo(A+g*h.pindouScaleValue*e+L,u+C+w),g!==h.pindouBlockWidth);g++){let e=A+L+n*g+n/2-~~h.ctx0.measureText(g+1).width/2,a=d-v/2-m,t=A+L+n*g+n/2-~~h.ctx0.measureText(h.pindouBlockWidth-g).width/2,l=u+w/2+C;h.ctx0.fillText((g+1).toString(),e,a),h.ctx0.fillText((h.pindouBlockWidth-g).toString(),t,l)}for(let g=0;g<=h.pindouBlockHeight&&(h.ctx0.moveTo(A-y,d+g*h.pindouScaleValue*e+x),h.ctx0.lineTo(A-y-D,d+g*h.pindouScaleValue*e+x),h.ctx0.moveTo(p+f,d+g*h.pindouScaleValue*e+x),h.ctx0.lineTo(p+f+S,d+g*h.pindouScaleValue*e+x),g!==h.pindouBlockHeight);g++){let e=A-D/2-y-~~h.ctx0.measureText(g+1).width/2,a=d+x+g*n+n/2,t=p+S/2+f-~~h.ctx0.measureText(h.pindouBlockHeight-g).width/2,l=d+x+g*n+n/2;h.ctx0.fillText((g+1).toString(),e,a),h.ctx0.fillText((h.pindouBlockHeight-g).toString(),t,l)}h.ctx0.stroke()}},handleDrawPindouGridLine(e=h.isShowPindouGridLine){if(h.isShowPindouGridLine=e,h.ctx4.clearRect(0,0,h.gridCanvas.width,h.gridCanvas.height),h.gridCanvas.style.left=h.canvas.style.left,h.gridCanvas.style.top=h.canvas.style.top,h.gridCanvas.style.transform=h.canvasStyle.transform,h.isShowPindouGridLine){h.ctx4.strokeStyle=g.themeValue?"white":"black",h.ctx4.lineWidth=1,h.ctx4.beginPath();for(let e=0;e<=h.pindouBlockHeight;e++)h.ctx4.moveTo(0,e*h.pindouScaleValue),h.ctx4.lineTo(h.pindouBlockWidth*h.pindouScaleValue,e*h.pindouScaleValue);for(let e=0;e<=h.pindouBlockWidth;e++)h.ctx4.moveTo(e*h.pindouScaleValue,0),h.ctx4.lineTo(e*h.pindouScaleValue,h.pindouBlockHeight*h.pindouScaleValue);h.ctx4.stroke()}if(h.isShowPindouReferenceLine){let e=h.pindouReferenceLineGap;h.ctx4.strokeStyle=h.pindouReferenceLineColor,h.ctx4.lineWidth=4,h.ctx4.beginPath();let a=Math.floor(h.pindouBlockHeight/e),t=Math.floor(h.pindouBlockWidth/e);for(let l=0;l<=a;l++)0!==l&&(h.ctx4.moveTo(0,l*h.pindouScaleValue*e),h.ctx4.lineTo(h.pindouBlockWidth*h.pindouScaleValue,l*h.pindouScaleValue*e));for(let l=0;l<=t;l++)0!==l&&(h.ctx4.moveTo(l*h.pindouScaleValue*e,0),h.ctx4.lineTo(l*h.pindouScaleValue*e,h.pindouBlockHeight*h.pindouScaleValue));h.ctx4.stroke()}},handleDrawPindouReferenceLine(e=h.isShowPindouReferenceLine,a=h.pindouReferenceLineGap,t=h.pindouReferenceLineColor){h.isShowPindouReferenceLine=e,h.pindouReferenceLineGap=a,h.pindouReferenceLineColor=t,p.handleDrawPindouGridLine()},handleDrawGridLine(e=300){if(h.pinDouMode)return void p.handleDrawPindouGridLine(h.isShowPindouGridLine);h.gridLineTimer&&clearTimeout(h.gridLineTimer);let a=h.layerScale,t=me(h.canvasWidth)?(h.canvasWidth+.1)*a:h.canvasWidth*a,l=me(h.canvasHeight)?(h.canvasHeight+.1)*a:h.canvasHeight*a;h.ctx4.clearRect(0,0,t,l),h.gridCanvas.style.left="-9999px",h.gridCanvas.style.top="-9999px",h.isShowGridLine&&(a<15||(h.gridLineTimer=setTimeout((()=>{h.gridCanvas.width=t,h.gridCanvas.height=l,h.canvasRealLeft=h.baseCanvas.getBoundingClientRect().left,h.canvasRealTop=h.baseCanvas.getBoundingClientRect().top,h.gridCanvas.style.left=h.canvas.getBoundingClientRect().left-h.canvasRealLeft+"px",h.gridCanvas.style.top=h.canvas.getBoundingClientRect().top-h.canvasRealTop+"px",h.ctx4.strokeStyle=g.themeValue?"white":"black",h.ctx4.lineWidth=1;let e=me(h.canvasHeight)?a+.1:a,n=me(h.canvasWidth)?a+.1:a;h.ctx4.beginPath();let r=Math.floor(h.canvasHeight/h.gridGapSize),i=Math.floor(h.canvasWidth/h.gridGapSize);for(let a=0;a<=r;a++)h.ctx4.moveTo(0,a*e*h.gridGapSize+.5),h.ctx4.lineTo(h.gridCanvas.width,a*e*h.gridGapSize+.5);for(let a=0;a<=i;a++)h.ctx4.moveTo(a*n*h.gridGapSize+.5,0),h.ctx4.lineTo(a*n*h.gridGapSize+.5,h.gridCanvas.height);h.ctx4.stroke()}),e)))},handleDrawReferenceLine(e="vh"){if(h.ctx0.clearRect(0,0,h.baseCanvas.width,h.baseCanvas.height),h.isShowReferenceLine){let a=h.canvas.offsetLeft,t=h.canvas.offsetTop;h.ctx0.globalAlpha=1,h.ctx0.lineWidth=2,h.ctx0.lineCap="butt",h.ctx0.lineJoin="miter",h.ctx0.strokeStyle=g.themeValue?"white":"black",h.ctx0.setLineDash([5,3]),"vh"!==e&&"v"!==e||(h.ctx0.beginPath(),h.ctx0.moveTo(a+h.canvasWidth*h.scale/2,0),h.ctx0.lineTo(a+h.canvasWidth*h.scale/2,h.baseCanvas.height),h.ctx0.stroke()),"vh"!==e&&"h"!==e||(h.ctx0.beginPath(),h.ctx0.moveTo(0,t+h.canvasHeight*h.scale/2),h.ctx0.lineTo(h.baseCanvas.width,t+h.canvasHeight*h.scale/2),h.ctx0.stroke())}p.handleDrawRulerLine(),p.handleDrawPindouRulerLine()},handleDrawRulerLine(){if(h.isShowRuler){let e=h.baseCanvas.width,a=h.baseCanvas.height,t=16,l=10,n=16;const r=10,i=10;h.ctx0.strokeStyle=g.themeValue?"white":"black",h.ctx0.lineWidth=1,h.ctx0.setLineDash([0,0]);const o=e,s=0,c=a;for(let d=0;d<o;d+=r){const e=d%(r*i)==0?n:l;h.ctx0.beginPath(),h.ctx0.moveTo(d,0),h.ctx0.lineTo(d,e),h.ctx0.stroke(),d%(r*i)==0&&0!==d&&(h.ctx0.font=`${t} PixelFont`,h.ctx0.fillStyle=g.themeValue?"white":"black",h.ctx0.textAlign="center",h.ctx0.fillText(d,d,e+10))}for(let d=s;d<c;d+=r){const e=d%(r*i)==0?n:l;h.ctx0.beginPath(),h.ctx0.moveTo(0,d),h.ctx0.lineTo(e,d),h.ctx0.stroke(),d%(r*i)==0&&0!==d&&(h.ctx0.font=`${t} PixelFont`,h.ctx0.fillStyle=g.themeValue?"white":"black",h.ctx0.textAlign="center",h.ctx0.fillText(d,e+10,d+4))}}},drawLoop(){p.drawPixelArea(),h.AnimationFrameId_1=requestAnimationFrame(p.drawLoop)},drawShape(e){h.currentDrawShape=e},getCurrentLayerData:(e=h.currentFrameIndex,a=h.currentLayerIndex)=>h.drawRecord[e].layer[a].layerData,getCurrentLayerDataByLayerId(e=h.currentFrameIndex,a=h.currentLayerId){let t=h.drawRecord[e].layer.findIndex((e=>e.layerId===a));return h.drawRecord[e].layer[t]},getCurrentLayerId:(e=h.currentFrameIndex,a=h.currentLayerIndex)=>h.drawRecord[e].layer[a].layerId,getCurrentFrameId:(e=h.currentFrameIndex)=>h.drawRecord[e].frameId,getCurrentLayerIsLock:(e=h.currentFrameIndex,a=h.currentLayerIndex)=>h.drawRecord[e].layer[a].isLock,getCurrentLayerIndexById:(e=h.currentLayerId)=>h.drawRecord[h.currentFrameIndex].layer.findIndex((a=>a.layerId===e)),drawScaleFrame(){if(!h.isScaling)return;let e=0,a=0,l=[];l=8===h.currentTool?Ce(JSON.parse(JSON.stringify(h.selectData.selectList))):JSON.parse(JSON.stringify(p.getCurrentLayerData()));let n=1/0,r=1/0,i=-1/0,o=-1/0;for(let t=0;t<l.length;t++){if(l[t][2]===h.emptyColor)continue;const e=l[t][0],a=l[t][1];e<n&&(n=e),e>i&&(i=e),a<r&&(r=a),a>o&&(o=a)}if(n===1/0&&(n=0),r===1/0&&(r=0),i===-1/0&&(i=0),o===-1/0&&(o=0),n+r+i+o===0)return h.isScaling=!1,t.$message.warning("图层为空");let s=pe(h.canvas),c=i*h.scale*s+h.scale*s,d=n*h.scale*s,g=o*h.scale*s+h.scale*s,A=r*h.scale*s;e=c-d,a=g-A,h.scaleAreaData={},h.scaleAreaData={minX:n,maxX:i,minY:r,maxY:o,realmaxX:c,realminX:d,realmaxY:g,realminY:A,originArr:[],colorMaxtrix:[],coordMaxtrix:[],isRight:!1,isLeft:!1,isTop:!1,isBottom:!1},p.handleDrawScaleFrame(d-5,A-5,c+5,g+5);for(let t=0;t<l.length;t++)l[t][0]<=h.scaleAreaData.maxX&&l[t][0]>=h.scaleAreaData.minX&&l[t][1]<=h.scaleAreaData.maxY&&l[t][1]>=h.scaleAreaData.minY&&h.scaleAreaData.originArr.push(l[t]);let u=h.scaleAreaData.maxX-h.scaleAreaData.minX+1,m=h.scaleAreaData.maxY-h.scaleAreaData.minY+1;for(let t=0;t<m;t++){let e=[],a=[];for(let l=0;l<u;l++){let n=l+h.scaleAreaData.minX,r=t+h.scaleAreaData.minY,i=p.getCurrentLayerColorByCoords(n,r)||h.emptyColor;e.push([n,r]),a.push([i])}h.scaleAreaData.colorMaxtrix.push(a),h.scaleAreaData.coordMaxtrix.push(e)}},handleDrawScaleFrame(e,a,t,l,n=!0){n&&p.handleDrawReferenceLine(),h.canvasRealLeft=h.baseCanvas.getBoundingClientRect().left,h.canvasRealTop=h.baseCanvas.getBoundingClientRect().top;let r=h.canvas.getBoundingClientRect().left,i=h.canvas.getBoundingClientRect().top;e+=r-h.canvasRealLeft,t+=r-h.canvasRealLeft,a+=i-h.canvasRealTop,l+=i-h.canvasRealTop,h.ctx0.strokeStyle="blue",h.ctx0.fillStyle="white",h.ctx0.globalAlpha=.9,h.ctx0.lineWidth=2,h.ctx0.setLineDash([]),h.ctx0.beginPath(),h.ctx0.moveTo(e,a),h.ctx0.lineTo(t,a),h.ctx0.stroke(),h.ctx0.beginPath(),h.ctx0.moveTo(e,a),h.ctx0.lineTo(e,l),h.ctx0.stroke(),h.ctx0.beginPath(),h.ctx0.moveTo(e,l),h.ctx0.lineTo(t,l),h.ctx0.stroke(),h.ctx0.beginPath(),h.ctx0.moveTo(t,l),h.ctx0.lineTo(t,a),h.ctx0.stroke(),h.scaleWhitePointPos=[[t,l]],h.ctx0.beginPath(),h.ctx0.rect(t-4,l-4,8,8),h.ctx0.fill(),h.ctx0.stroke()},handleFinishScale(){if(h.isScaling=!1,8===h.currentTool){h.selectData.selectCanvasObj.ctx.clearRect(0,0,h.canvasWidth,h.canvasHeight),h.selectData.selectCanvasObj.ctx.drawImage(h.scaleCanvas,Math.round(parseFloat(h.scaleStyle.left)),Math.round(parseFloat(h.scaleStyle.top)));let e=h.selectData.selectCanvasObj.ctx.getImageData(0,0,h.canvasWidth,h.canvasHeight),a=e.data,t=W(h.selectActiveColor);for(let l=0;l<a.length;l+=4)0!==a[l+3]&&(a[l]=t[0],a[l+1]=t[1],a[l+2]=t[2],a[l+3]=255*t[3]);h.selectData.selectCanvasObj.selectCtx.putImageData(e,0,0),p.reDraw(!1),h.ctx1.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.ctx1.drawImage(h.selectData.selectCanvasObj.selectCanvas,0,0),h.selectData.isCopySelect=!1,h.selectData.selectCanvasObj.croppedLayerData=null}else h.layerCrossList[p.getCurrentLayerId()].layerCtx.clearRect(0,0,h.canvasWidth,h.canvasHeight),h.layerCrossList[p.getCurrentLayerId()].layerCtx.drawImage(h.scaleCanvas,Math.round(parseFloat(h.scaleStyle.left)),Math.round(parseFloat(h.scaleStyle.top))),p.reDraw();h.scaleStyle.left="0px",h.scaleStyle.top="0px",h.scaleImg="",h.scaleCanvas.width=h.canvasWidth,h.scaleCanvas.height=h.canvasHeight,p.handleResizeStyle(),8!==h.currentTool&&p.handleChangeTool(0)},handleCancelScale(){h.isScaling=!1,h.scaleStyle.left="0px",h.scaleStyle.top="0px",h.scaleImg="",h.scaleCanvas.width=h.canvasWidth,h.scaleCanvas.height=h.canvasHeight,p.handleResizeStyle(),8===h.currentTool?(p.reDraw(!1),h.ctx1.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.ctx1.drawImage(h.selectData.selectCanvasObj.selectCanvas,0,0),h.selectData.isCopySelect=!1,h.selectData.selectCanvasObj.croppedLayerData=null):p.reDraw(!1),8!==h.currentTool&&p.handleChangeTool(0)},drawTransform(e){if(!h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender)return;if(h.isScaling&&"scale"!==e&&p.handleCancelScale(),h.isScaling&&"scale"===e)return;if(h.currentDrawTransform=e,"scale"===e){p.handleChangeTool(9),h.isScaling=!0;let e=h.canvasWidth,a=h.canvasHeight;if(8===h.currentTool){if(h.selectData.selectCanvasObj.croppedLayerData)for(let e=0;e<h.selectData.selectCanvasObj.croppedLayerData.length;e++)h.layerCrossList[h.currentLayerId].layerCtx.putImageData(h.selectData.selectCanvasObj.croppedLayerData[e].croppedImageData,h.selectData.selectCanvasObj.croppedLayerData[e].minX,h.selectData.selectCanvasObj.croppedLayerData[e].minY);h.scaleImg=h.selectData.selectCanvasObj.canvas.toDataURL(h.exportFormat,1)}else h.scaleImg=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].currentLayerImg;return h.resizeStyle.width=e*h.layerScale+"px",h.resizeStyle.height=a*h.layerScale+"px",h.scaleStyle.width=e+"px",h.scaleStyle.height=a+"px",h.scaleCanvas.width=e,h.scaleCanvas.height=a,h.ctx5.imageSmoothingEnabled=!1,h.ctx5.imageSmoothingQuality="none",8!==h.currentTool?p.reDraw(!1,!1,!1):p.reDraw(!1),p.handleResizeStyle(),void(h.scaleBoxDom.children[0].children[0].onload=()=>{h.ctx5.drawImage(h.scaleBoxDom.children[0].children[0],0,0)})}if(8===h.currentTool){if(h.selectData.selectCanvasObj.croppedLayerData)for(let e=0;e<h.selectData.selectCanvasObj.croppedLayerData.length;e++)h.layerCrossList[h.currentLayerId].layerCtx.putImageData(h.selectData.selectCanvasObj.croppedLayerData[e].croppedImageData,h.selectData.selectCanvasObj.croppedLayerData[e].minX,h.selectData.selectCanvasObj.croppedLayerData[e].minY);if("hReverse"===e){const e=ye({layerCanvas:h.selectData.selectCanvasObj.canvas,layerCtx:h.selectData.selectCanvasObj.ctx}),a=ye({layerCanvas:h.selectData.selectCanvasObj.selectCanvas,layerCtx:h.selectData.selectCanvasObj.selectCtx});h.selectData.selectCanvasObj.ctx.putImageData(e,0,0),h.selectData.selectCanvasObj.selectCtx.putImageData(a,0,0)}else if("vReverse"===e){const e=fe({layerCanvas:h.selectData.selectCanvasObj.canvas,layerCtx:h.selectData.selectCanvasObj.ctx}),a=fe({layerCanvas:h.selectData.selectCanvasObj.selectCanvas,layerCtx:h.selectData.selectCanvasObj.selectCtx});h.selectData.selectCanvasObj.ctx.putImageData(e,0,0),h.selectData.selectCanvasObj.selectCtx.putImageData(a,0,0)}else if("cReverse"===e){const e=ve({layerCanvas:h.selectData.selectCanvasObj.canvas,layerCtx:h.selectData.selectCanvasObj.ctx}),a=ve({layerCanvas:h.selectData.selectCanvasObj.selectCanvas,layerCtx:h.selectData.selectCanvasObj.selectCtx});h.selectData.selectCanvasObj.ctx.putImageData(e,0,0),h.selectData.selectCanvasObj.selectCtx.putImageData(a,0,0)}return p.reDraw(!1),h.ctx1.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.ctx1.drawImage(h.selectData.selectCanvasObj.selectCanvas,0,0),h.selectData.isCopySelect=!1,void(h.selectData.selectCanvasObj.croppedLayerData=null)}let a=p.getCurrentLayerId();if(h.isControlMindObj){if("hReverse"===e){const e=ye({layerCanvas:h.scaleCanvas,layerCtx:h.ctx5});h.ctx5.putImageData(e,0,0)}else if("vReverse"===e){const e=fe({layerCanvas:h.scaleCanvas,layerCtx:h.ctx5});h.ctx5.putImageData(e,0,0)}else if("cReverse"===e){const e=ve({layerCanvas:h.scaleCanvas,layerCtx:h.ctx5});h.ctx5.putImageData(e,0,0)}}else{if("hReverse"===e){const e=ye(h.layerCrossList[a]);h.layerCrossList[a].layerCtx.putImageData(e,0,0)}else if("vReverse"===e){const e=fe(h.layerCrossList[a]);h.layerCrossList[a].layerCtx.putImageData(e,0,0)}else if("cReverse"===e){const e=ve(h.layerCrossList[a]);h.layerCrossList[a].layerCtx.putImageData(e,0,0)}else{if("rotate"===e)return t.$refs.CanvasRotateDialog.handleOpen(),void p.handleCancelKeyboardEvent();"crop"===e&&p.handleChangeTool(11)}p.reDraw()}},handleConfirmCanvasRotate({rotateAngle:e,imageSmoothingEnabled:a},t){let l=h.layerCrossList[p.getCurrentLayerId()];const n=l.layerCanvas.width,r=l.layerCanvas.height,i=n/2,o=r/2;l.layerCtx.save(),l.layerCtx.translate(i,o),l.layerCtx.rotate(e*Math.PI/180),l.layerCtx.translate(-i,-o),l.layerCtx.clearRect(0,0,n,r);const s=new Image;s.src=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].currentLayerImg,s.onload=()=>{l.layerCtx.drawImage(s,0,0),l.layerCtx.restore(),p.reDraw(),t()}},handleLayerMapDataToLayerData(e=!1){let a=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerNewData;e&&(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData=JSON.parse(JSON.stringify(h.emptyLayerData)));let t=Object.keys(a);for(let l=0;l<t.length;l++){let e=a[t[l]];for(const[a,n]of e){if(n[0]>=h.canvasWidth||n[1]>=h.canvasHeight||n[0]<0||n[1]<0)return;let e=n[0]+n[1]*h.canvasWidth;h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData[e][2]=t[l]}}},handleAllLayerMapDataToLayerData(){let e=h.drawRecord[h.currentFrameIndex].layer;for(let a=0;a<e.length;a++){let e=h.drawRecord[h.currentFrameIndex].layer[a].layerNewData,t=Object.keys(e);for(let l=0;l<t.length;l++){let n=e[t[l]];for(const[e,r]of n){if(r[0]>=h.canvasWidth||r[1]>=h.canvasHeight||r[0]<0||r[1]<0)return;let e=r[0]+r[1]*h.canvasWidth;h.drawRecord[h.currentFrameIndex].layer[a].layerData[e][2]=t[l]}}}},handleCurrentLayerDataToLayerMapData(e){let a=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData,t={};for(let l=0;l<a.length;l++){if("#00000000"===a[l][2])continue;let e=a[l][0]+"/"+a[l][1];t[a[l][2]]||(t[a[l][2]]=new Map),t[a[l][2]].set(e,[a[l][0],a[l][1]])}h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerNewData=t,e()},handleLayerDataToLayerMapData(e){let a=we(h.drawRecord[h.currentFrameIndex].layer);h.worker.postMessage({type:14,variables:a}),h.worker.onmessage=a=>{h.drawRecord[h.currentFrameIndex].layer=a.data,e()}},drawTransformSymmetric(){let e=[];for(let a=0;a<h.drawList.length;a++)if(h.isHorizontal){let t=h.canvasWidth-1-h.drawList[a][0],l=h.drawList[a][1];e.push([t,l,h.drawList[a][2]])}else if(h.isVertical){let t=h.drawList[a][0],l=h.canvasHeight-1-h.drawList[a][1];e.push([t,l,h.drawList[a][2]])}else if(h.isCenter){let t=h.drawList[a][0]*h.scale+h.canvasBeginPos.x,l=h.drawList[a][1]*h.scale+h.canvasBeginPos.y,n=2*h.canvasBeginPos.centerX-(t+h.scale/2),r=2*h.canvasBeginPos.centerY-(l+h.scale/2),i=Math.floor((n-h.canvasBeginPos.x)/h.scale),o=Math.floor((r-h.canvasBeginPos.y)/h.scale);e.push([i,o,h.drawList[a][2]])}for(let a=0;a<e.length;a++)p.addDrawList(e[a][0],e[a][1],e[a][2])},removeDrawTransformSymmetric(){let e=[];for(let a=0;a<h.removeDrawList.length;a++)if(h.isHorizontal){let t=h.canvasWidth-1-h.removeDrawList[a][0],l=h.removeDrawList[a][1];e.push([t,l,h.removeDrawList[a][2]])}else if(h.isVertical){let t=h.removeDrawList[a][0],l=h.canvasHeight-1-h.removeDrawList[a][1];e.push([t,l,h.removeDrawList[a][2]])}else if(h.isCenter){let t=h.removeDrawList[a][0]*h.scale+h.canvasBeginPos.x,l=h.removeDrawList[a][1]*h.scale+h.canvasBeginPos.y,n=2*h.canvasBeginPos.centerX-(t+h.scale/2),r=2*h.canvasBeginPos.centerY-(l+h.scale/2),i=Math.floor((n-h.canvasBeginPos.x)/h.scale),o=Math.floor((r-h.canvasBeginPos.y)/h.scale);e.push([i,o,h.removeDrawList[a][2]])}for(let a=0;a<e.length;a++){p.addRemoveDrawList(e[a][0],e[a][1],e[a][2]);let t=e[a][0]*h.scale,l=e[a][1]*h.scale;p.checkLayerEraseOrder(t,l,h.eraserSize*h.scale)}},handleChangeBrushSymmetric(e,a){"isHorizontal"===a&&h[a]?(h.isVertical=!1,h.isCenter=!1):"isCenter"===a&&h[a]?(h.isVertical=!1,h.isHorizontal=!1):"isVertical"===a&&h[a]&&(h.isHorizontal=!1,h.isCenter=!1)},handleWheelEvent(e){if(h.pinDouMode){const a=e.deltaY>0?-h.layerScaleStep:h.layerScaleStep;let t=pe(h.canvas);t+=a;let l=Math.max(.1,t);return l>h.maxScale&&(l=h.maxScale),h.layerScale=Number(l.toFixed(2)),h.canvasStyle.transform=`scale(${h.layerScale})`,p.handleDrawGridLine(),p.handleIntelligentSlice(h.intelligentSliceObj),h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),void(h.linmoFitCanvasTimer=setTimeout((()=>{p.handleDrawReferenceLine(),p.handlePindouBlockHighlight(h.pindouHighlightOptions)}),250))}const a=e.deltaY>0?-h.layerScaleStep:h.layerScaleStep;let t=pe(h.canvas);t+=a;let l=Math.max(.1,t);l>h.maxScale&&(l=h.maxScale),h.layerScale=Number(l.toFixed(2)),h.canvasStyle.transform=`scale(${h.layerScale})`,p.handleDrawGridLine(),p.handleIntelligentSlice(h.intelligentSliceObj),h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),h.linmoFitCanvasTimer=setTimeout((()=>{p.handleLinmoFitCanvas(),p.handleDrawReferenceLine(),p.handleScaleFrame1(),p.handleInitAxisOffset()}),250)},handleSetCanvasScale(){h.canvasStyle.transform=`scale(${h.layerScale})`,p.handleDrawGridLine(),p.handleIntelligentSlice(h.intelligentSliceObj),h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),h.linmoFitCanvasTimer=setTimeout((()=>{p.handleLinmoFitCanvas(),p.handleDrawReferenceLine(),p.handleScaleFrame1(),p.handleInitAxisOffset()}),250)},handleResizeCanvas(e){if(h.pinDouMode){let a=pe(h.canvas);a+=e;let t=Math.max(.1,a);return t>h.maxScale&&(t=h.maxScale),h.layerScale=Number(t.toFixed(2)),h.canvasStyle.transformOrigin="center center",h.canvasStyle.transform=`scale(${h.layerScale})`,p.handleDrawGridLine(),p.handleIntelligentSlice(h.intelligentSliceObj),h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),void(h.linmoFitCanvasTimer=setTimeout((()=>{p.handleDrawReferenceLine(),p.handlePindouBlockHighlight(h.pindouHighlightOptions)}),250))}let a=pe(h.canvas);a+=e;let t=Math.max(.1,a);t>h.maxScale&&(t=h.maxScale),h.layerScale=Number(t.toFixed(2)),h.canvasStyle.transformOrigin="center center",h.canvasStyle.transform=`scale(${h.layerScale})`,p.handleDrawGridLine(),p.handleIntelligentSlice(h.intelligentSliceObj),h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),h.linmoFitCanvasTimer=setTimeout((()=>{p.handleLinmoFitCanvas(),p.handleDrawReferenceLine(),p.handleScaleFrame1(),p.handleInitAxisOffset()}),250)},handleResizeDraw(){p.drawPixelArea(),h.isScaling?p.handleScaleFrame():h.pinDouMode?p.handleDrawPindou(h.ctx1):p.reDraw(!1)},startDrawing(){var e,a,t,l,n,r,i,o;h.canvas.addEventListener("touchstart",p.mobileStart),h.canvas.addEventListener("touchmove",p.mobileDraw),h.canvas.addEventListener("touchend",p.mobileStop),h.canvas.addEventListener("wheel",p.handleWheelEvent);let s=document.getElementsByClassName("resize-handle");Array.from(s).forEach((e=>{e.addEventListener("mousedown",p.startResize),e.addEventListener("mouseup",p.stopResize),e.addEventListener("touchstart",p.mobileStartResize),e.addEventListener("touchend",p.mobileStopResize)})),null==(e=document.getElementById("ResizeBox"))||e.addEventListener("mousedown",p.handleScaleCanvasDown),null==(a=document.getElementById("ResizeBox"))||a.addEventListener("mouseup",p.handleScaleCanvasUp),null==(t=document.getElementById("ResizeBox"))||t.addEventListener("touchstart",p.handleMobileScaleCanvasDown),null==(l=document.getElementById("ResizeBox"))||l.addEventListener("touchend",p.handleMobileScaleCanvasUp),h.baseCanvas.parentNode.addEventListener("touchstart",p.handleMobileScaleStart),h.baseCanvas.parentNode.addEventListener("touchmove",p.handleMobileScaleMove),h.baseCanvas.parentNode.addEventListener("touchend",p.handleMobileScaleEnd),null==(n=document.querySelector(".X-line"))||n.addEventListener("mousedown",p.handleXYLineMouseDown),null==(r=document.querySelector(".Y-line"))||r.addEventListener("mousedown",p.handleXYLineMouseDown),null==(i=document.querySelector(".X-line"))||i.addEventListener("touchstart",p.handleXYLineMobileDown),null==(o=document.querySelector(".Y-line"))||o.addEventListener("touchstart",p.handleXYLineMobileDown)},handleLinmoFitCanvas(e=h.isLockCanvas){h.isLockCanvas=e,(h.linmoMode||h.linmoPhoto)&&h.isLockCanvas&&(t.$refs.LinmoModeDialog.posX=h.canvas.getBoundingClientRect().left-h.baseCanvas.getBoundingClientRect().left-10,t.$refs.LinmoModeDialog.posY=h.canvas.getBoundingClientRect().top-h.baseCanvas.getBoundingClientRect().top-10,t.$refs.LinmoModeDialog.width=h.canvas.getBoundingClientRect().width+20,t.$refs.LinmoModeDialog.height=h.canvas.getBoundingClientRect().height+20,t.$refs.LinmoModeDialog.updatelinmoPhotoStyle())},handleUpdateLinmoStyle(e){h.linmoPhotoStyle=e.style,t.$refs.LinmoModeDialog.posX=e.data.translateX,t.$refs.LinmoModeDialog.posY=e.data.translateY,t.$refs.LinmoModeDialog.width=e.data.width,t.$refs.LinmoModeDialog.height=e.data.height,t.$refs.LinmoModeDialog.rotate=e.data.rotate},handleMoveCanvasMouseDown(e){},handleMoveCanvasMouseMove(e){},handleMoveCanvasMouseUp(){},linmoPhotoStart(e){h.dragLinmoPhoto.enable=!0,h.dragLinmoPhoto.startX=e.offsetX,h.dragLinmoPhoto.startY=e.offsetY,h.dragLinmoPhoto.translateX=parseInt(getComputedStyle(h.linmoPhotoDom).transform.split(" ")[12]),h.dragLinmoPhoto.translateY=parseInt(getComputedStyle(h.linmoPhotoDom).transform.split(" ")[13]),document.addEventListener("mousemove",p.linmoPhotoMove),document.addEventListener("touchmove",p.linmoPhotoMobileMove),document.addEventListener("mouseup",p.linmoPhotoStop)},lnmoPhotoMobileStart(e){let a={offsetX:e.touches[0].clientX,offsetY:e.touches[0].clientY};p.linmoPhotoStart(a)},linmoPhotoMove(e){if(h.dragLinmoPhoto.enable){const a=e.offsetX-h.dragLinmoPhoto.startX,l=e.offsetY-h.dragLinmoPhoto.startY;h.dragLinmoPhoto.translateX+=a,h.dragLinmoPhoto.translateY+=l,t.$refs.LinmoModeDialog.posX=h.dragLinmoPhoto.translateX,t.$refs.LinmoModeDialog.posY=h.dragLinmoPhoto.translateY;let n=h.linmoPhotoStyle.transform.split(") ")[1]+")",r=h.linmoPhotoStyle.transform.split(") ")[2];h.linmoPhotoStyle.transform=`translate3d(${h.dragLinmoPhoto.translateX}px, ${h.dragLinmoPhoto.translateY}px, 10px) ${n} ${r}`}},linmoPhotoMobileMove(e){let a={offsetX:e.touches[0].clientX,offsetY:e.touches[0].clientY};p.linmoPhotoMove(a)},linmoPhotoStop(){h.dragLinmoPhoto.enable=!1,document.removeEventListener("mousemove",p.linmoPhotoMove),document.removeEventListener("touchmove",p.linmoPhotoMobileMove),document.removeEventListener("mouseup",p.linmoPhotoStop)},handleBrushColorAlpha(){let e=De(h.brushColor),a=e[0],t=e[1],l=e[2],n=h.layerAlpha/100;return Ie([a,t,l,n])},handleMobileScaleStart(e){if(2===e.touches.length&&(h.isSpace||h.isDoubleFingers)){const a=e.touches[0].clientX-e.touches[1].clientX,t=e.touches[0].clientY-e.touches[1].clientY;h.mobileStartDistance=Math.sqrt(a*a+t*t);let l=(e.touches[0].clientX+e.touches[1].clientX)/2,n=(e.touches[0].clientY+e.touches[1].clientY)/2;h.mobileFingerMovingData.startX=l,h.mobileFingerMovingData.startY=n}},mobileStart(e){let a={offsetX:Math.round(Math.round(e.touches[0].clientX-h.canvas.getBoundingClientRect().left)/h.layerScale),offsetY:Math.round(Math.round(e.touches[0].clientY-h.canvas.getBoundingClientRect().top)/h.layerScale)};e.offsetX=a.offsetX,e.offsetY=a.offsetY,e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY,p.start(e)},mobileStop(e){let a={offsetX:Math.round(Math.round(e.changedTouches[0].clientX-h.canvas.getBoundingClientRect().left)/h.layerScale),offsetY:Math.round(Math.round(e.changedTouches[0].clientY-h.canvas.getBoundingClientRect().top)/h.layerScale)};e.offsetX=a.offsetX,e.offsetY=a.offsetY,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY,p.stop(e)},checkCurrentLayerMindLock(e=!1){if(h.pinDouMode)return!1;let a=p.getCurrentLayerId();if(e){let e=!1;for(let t=0;t<h.drawRecord[h.currentFrameIndex].layer.length;t++){if(!h.drawRecord[h.currentFrameIndex].layer[t].mindLayerList.length)return e;if(h.drawRecord[h.currentFrameIndex].layer[t].mindLayerList.map((e=>!h.layerCrossList[a].mindLayerList[e].isHide)).length){e=!0;break}}return e}return h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList.map((e=>!h.layerCrossList[a].mindLayerList[e].isHide)).length>0},start(e){var a;if(e){let l=h.canvas.getBoundingClientRect(),n=Math.floor((e.clientY-l.top)/h.layerScale),r=Math.floor((e.clientX-l.left)/h.layerScale);if(h.pinDouMode&&(n=Math.floor(e.offsetY/h.pindouScaleValue),r=Math.floor(e.offsetX/h.pindouScaleValue)),h.isSpace)return h.isDragging=!0,h.dragData.x=e.clientX-h.canvas.offsetLeft,void(h.dragData.y=e.clientY-h.canvas.offsetTop);let i=p.checkCurrentLayerMindLock();if(7!==h.currentTool&&i)return t.$message.warning("请将智能对象栅格化后编辑");if(h.pinDouMode){if(g.checkVipFunction("pindouDraw"))return;return void([0,1].includes(h.currentTool)&&(h.isMovingPindouBrush=!0))}if(0===h.currentTool)if(e.button&&0!==e.button){if(2===e.button){if(h.isEnableEraserTrack){h.ctx0.lineWidth=h.eraserSize*h.layerScale,h.ctx0.lineCap="round",h.ctx0.lineJoin="round",h.ctx0.strokeStyle="#fff";let a=h.baseCanvas.getBoundingClientRect();h.mouseDrawData.lastX=e.clientX-a.left,h.mouseDrawData.lastY=e.clientY-a.top,h.mouseDrawData.baseRect={left:a.left,top:a.top}}h.mouseDrawData.startX=r-r%(h.scale*h.eraserSize),h.mouseDrawData.startY=n-n%(h.scale*h.eraserSize),h.isErasering=!0}}else{let e=p.handleBrushColorAlpha();h.ctx1.fillStyle=e,h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillStyle=e,h.mouseDrawData.startX=r-r%(h.scale*h.brushSize),h.mouseDrawData.startY=n-n%(h.scale*h.brushSize),h.isDrawing=!0}else if(1===h.currentTool)if(h.isEnableEraserTrack&&(h.ctx0.lineWidth=h.eraserSize*h.layerScale,h.ctx0.lineCap="round",h.ctx0.lineJoin="round",h.ctx0.strokeStyle="#fff"),e.button&&0!==e.button){if(2===e.button){const e=p.getPixelColorByCoords(h.layerCrossList[p.getCurrentLayerId()].layerData,r,n);if("0000"===e.join(""))return;p.fillChunkSelectV2(r,n,e,!0)}}else if(h.isEnableQuickEraser)h.isErasering=!0;else{if(h.mouseDrawData.startX=r-r%(h.scale*h.eraserSize),h.mouseDrawData.startY=n-n%(h.scale*h.eraserSize),h.isEnableEraserTrack){let a=h.baseCanvas.getBoundingClientRect();h.mouseDrawData.lastX=e.clientX-a.left,h.mouseDrawData.lastY=e.clientY-a.top,h.mouseDrawData.baseRect={left:a.left,top:a.top}}h.isErasering=!0}else if(2===h.currentTool);else if(3===h.currentTool){let e=p.handleBrushColorAlpha();h.ctx1.fillStyle=e,h.ctx1.strokeStyle=e,h.ctx1.lineWidth=h.brushSize,h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillStyle=e,h.layerCrossList[p.getCurrentLayerId()].layerCtx.strokeStyle=e,h.layerCrossList[p.getCurrentLayerId()].layerCtx.lineWidth=h.brushSize,h.isDrawShape=!0,h.drawShapeData.startX=r,h.drawShapeData.startY=n}else if(4===h.currentTool);else if(7===h.currentTool){if(i){let e=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex];for(let a=e.mindLayerList.length-1;a>=0;a--){let t=h.layerCrossList[e.layerId].mindLayerList[e.mindLayerList[a]];if(r>=t.left&&r<=t.width+t.left-1&&n>=t.top&&n<=t.height+t.top-1)return void p.handleSelectMindObj(t.mindId,h.currentLayerIndex)}return}for(let a=0;a<h.drawRecord[h.currentFrameIndex].layer.length;a++){let e=h.drawRecord[h.currentFrameIndex].layer[a].layerId,t=Array.from(h.layerCrossList[e].layerCtx.getImageData(r,n,1,1).data);if("0000"!==t.join("")){if("0000"!==t.join("")){h.moveData.moveLayerId=e;break}}else h.moveData.moveLayerId=""}if(""===h.moveData.moveLayerId)return;if(p.getCurrentLayerId()!==h.moveData.moveLayerId){let e=p.getCurrentLayerIndexById(h.moveData.moveLayerId);p.handleChangeLayer(e)}h.isMoving=!0,h.isShowReferenceLine=!0,h.moveData.x=r,h.moveData.y=n,h.moveData.imageData=h.layerCrossList[h.moveData.moveLayerId].layerCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight);let e=null==(a=h.moveData.imageData)?void 0:a.data,t=1/0,l=1/0,o=-1/0,s=-1/0;for(let a=0;a<h.canvasHeight;a++)for(let n=0;n<h.canvasWidth;n++){e[4*(a*h.canvasWidth+n)+3]>0&&(n<t&&(t=n),n>o&&(o=n),a<l&&(l=a),a>s&&(s=a))}h.moveData.centerX=(o-t)/2+t,h.moveData.centerY=(s-l)/2+l,h.canvasBeginPos.centerX=(h.canvasWidth-1)/2,h.canvasBeginPos.centerY=(h.canvasHeight-1)/2}else if(8===h.currentTool&&"select"===h.selectType){h.isScaling&&p.handleCancelScale();let a=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex];if(!a.isRender)return;if(e.button&&0!==e.button){if(2===e.button){let e=h.selectData.selectCanvasObj.ctx.getImageData(0,0,h.canvasWidth,h.canvasHeight);const t=j(p.getPixelColorByCoords(e.data,r,n));if(t===h.emptyColor)return;h.selectData.selectCanvasObj.selectCtx.clearRect(r,n,1,1),h.selectData.selectCanvasObj.ctx.clearRect(r,n,1,1),h.layerCrossList[a.layerId].layerCtx.fillStyle=t,h.layerCrossList[a.layerId].layerCtx.fillRect(r,n,1,1),h.ctx1.fillStyle=t,h.ctx1.fillRect(r,n,1,1)}}else{let e=j(p.getPixelColorByCoords(h.layerCrossList[a.layerId].layerData,r,n));h.selectData.selectLayerId!==a.layerId&&e!==h.emptyColor&&(p.handleCancelSelect(),h.selectData.selectLayerId=a.layerId),h.isSelecting=!0,h.selectData.x=r,h.selectData.y=n,h.selectData.selectCanvasObj.selectCtx.fillStyle=h.selectActiveColor,h.ctx1.fillStyle=h.selectActiveColor;let t=h.selectData.selectCanvasObj.ctx.getImageData(0,0,h.canvasWidth,h.canvasHeight);if(j(p.getPixelColorByCoords(t.data,r,n))!==h.emptyColor){if(h.selectData.selectCanvasObj.croppedLayerData)for(let e=0;e<h.selectData.selectCanvasObj.croppedLayerData.length;e++)h.layerCrossList[h.currentLayerId].layerCtx.putImageData(h.selectData.selectCanvasObj.croppedLayerData[e].croppedImageData,h.selectData.selectCanvasObj.croppedLayerData[e].minX,h.selectData.selectCanvasObj.croppedLayerData[e].minY);h.selectData.isCopySelect&&h.layerCrossList[h.currentLayerId].layerCtx.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.canvas.style.cursor="move",h.selectData.selectCanvasObj.imageData=t,h.selectData.selectCanvasObj.selectImageData=h.selectData.selectCanvasObj.selectCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight),h.selectData.isMoving=!0}}}else if(8===h.currentTool&&"quickSelect"===h.selectType){let a=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex];if(!a.isRender)return;if(e.button&&0!==e.button)2===e.button&&p.handleCancelSelect();else{let e=j(p.getPixelColorByCoords(h.layerCrossList[a.layerId].layerData,r,n));h.selectData.selectLayerId!==a.layerId&&e!==h.emptyColor&&(p.handleCancelSelect(),h.selectData.selectLayerId=a.layerId),h.isSelecting=!0,h.selectData.x=r,h.selectData.y=n;let t=h.selectData.selectCanvasObj.ctx.getImageData(0,0,h.canvasWidth,h.canvasHeight);if(j(p.getPixelColorByCoords(t.data,r,n))!==h.emptyColor){if(h.selectData.selectCanvasObj.croppedLayerData)for(let e=0;e<h.selectData.selectCanvasObj.croppedLayerData.length;e++)h.layerCrossList[h.currentLayerId].layerCtx.putImageData(h.selectData.selectCanvasObj.croppedLayerData[e].croppedImageData,h.selectData.selectCanvasObj.croppedLayerData[e].minX,h.selectData.selectCanvasObj.croppedLayerData[e].minY);h.selectData.isCopySelect&&h.layerCrossList[h.currentLayerId].layerCtx.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.canvas.style.cursor="move",h.selectData.selectCanvasObj.imageData=t,h.selectData.selectCanvasObj.selectImageData=h.selectData.selectCanvasObj.selectCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight),h.selectData.isMoving=!0}}}else if(8===h.currentTool&&"rangeSelect"===h.selectType){if(!h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender)return;let a=h.selectData.selectCanvasObj.ctx.getImageData(0,0,h.canvasWidth,h.canvasHeight);if(j(p.getPixelColorByCoords(a.data,r,n))!==h.emptyColor){if(h.isSelecting=!0,h.selectData.x=r,h.selectData.y=n,h.selectData.selectCanvasObj.croppedLayerData)for(let e=0;e<h.selectData.selectCanvasObj.croppedLayerData.length;e++)h.layerCrossList[h.currentLayerId].layerCtx.putImageData(h.selectData.selectCanvasObj.croppedLayerData[e].croppedImageData,h.selectData.selectCanvasObj.croppedLayerData[e].minX,h.selectData.selectCanvasObj.croppedLayerData[e].minY);return h.selectData.isCopySelect&&h.layerCrossList[h.currentLayerId].layerCtx.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.canvas.style.cursor="move",h.selectData.selectCanvasObj.imageData=a,h.selectData.selectCanvasObj.selectImageData=h.selectData.selectCanvasObj.selectCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight),void(h.selectData.isMoving=!0)}h.isSelectDraging=!0,h.canvasRealLeft=h.baseCanvas.getBoundingClientRect().left,h.canvasRealTop=h.baseCanvas.getBoundingClientRect().top,h.lastX=e.clientX-h.canvasRealLeft,h.lastY=e.clientY-h.canvasRealTop,h.selectData.x=r,h.selectData.y=n,h.ctx0.lineWidth=2}else if(9===h.currentTool&&h.isScaling){if(!h.scaleAreaData)return;h.lastX=r,h.lastY=n,h.isScale=!0}else if(11===h.currentTool){if(!h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender)return;h.isSelectDraging=!0,h.canvasRealLeft=h.baseCanvas.getBoundingClientRect().left,h.canvasRealTop=h.baseCanvas.getBoundingClientRect().top,h.lastX=e.clientX-h.canvasRealLeft,h.lastY=e.clientY-h.canvasRealTop,h.selectData.x=r,h.selectData.y=n,h.ctx0.lineWidth=2}}},handleStrawTool(e,a){if(h.isDoubleFingersMoving||h.isSpace)return;if(2!==h.currentTool)return;const l=Array.from(h.ctx1.getImageData(e,a,1,1).data);if("0000"!==l.join("")&&(h.brushColor=j(l),h.isAutoChangeBrush&&(p.handleChangeTool(0),h.canvas.classList="",p.addCursorClass()),t.$refs.ReplaceColorDialog.dialogVisible&&t.$refs.ReplaceColorDialog.handleUpdate(h.brushColor),h.pinDouDrawMode)){let l={color:h.brushColor,col:e,row:a};t.$refs.PindouDialog.selectedObj=l}},handleBucketTool(e,a){if(h.isDoubleFingersMoving||h.isSpace)return;if(4!==h.currentTool)return;let t=De(h.brushColor);const l=Array.from(h.layerCrossList[p.getCurrentLayerId()].layerCtx.getImageData(e,a,1,1).data);if(p.fillChunkV2(e,a,l,t),h.isHorizontal){let n=Math.floor(h.XLineOffset/h.layerScale*2)-e,r=a;p.fillChunkV2(n,r,l,t)}else if(h.isVertical){let n=e,r=Math.floor(h.YLineOffset/h.layerScale*2)-a;p.fillChunkV2(n,r,l,t)}else if(h.isCenter){let n=2*h.canvasBeginPos.centerX-(e+h.scale/2),r=2*h.canvasBeginPos.centerY-(a+h.scale/2),i=Math.floor(n/h.scale),o=Math.floor(r/h.scale);p.fillChunkV2(i,o,l,t)}},handlePindouTool(e,a){if(!h.isDoubleFingersMoving&&!h.isSpace&&h.pinDouMode){let l=e+a*h.pindouBlockWidth,n=h.pindouBlockList[h.currentPindouIndex].colorArr;if("#"===n[l]&&0!==h.currentTool)return;let r="#"===n[l]?"#00000000":h.pindouBlockList[h.currentPindouIndex].colorStatList.get(n[l])[0],i={name:n[l],color:r,col:e,row:a};if(0===h.currentTool){if(h.isUpdateAllBlock)return t.$message.warning("请先关闭批量更新分块");let e=t.$refs.PindouDialog.replaceObj;if(!e)return t.$messgae.warning("请先选择替换的新色号");h.isMovingPindouBrush=!0;let a={replaceObj:{color:"#"+e.color,name:e.name},originObj:i,type:1};p.handleReplacePindouColor(a,(()=>{}))}else if(1===h.currentTool){if(h.isUpdateAllBlock)return t.$message.warning("请先关闭批量更新分块");h.isMovingPindouBrush=!0;let e={replaceObj:{color:"#00000000",name:"#"},originObj:i,type:1};p.handleReplacePindouColor(e,(()=>{}))}else 2===h.currentTool?t.$refs.PindouDialog.replaceObj={name:i.name,color:i.color.slice(1)}:5===h.currentTool&&(t.$refs.PindouDialog.selectedObj=i);if([2,5].includes(h.currentTool)){let e=G(i.color);Se({message:`当前选择色号：${i.name}`,color:e,background:i.color,zIndex:8888})}}},handleReplaceColor(e){for(let a=0;a<h.selectData.selectList.length;a++){h.selectData.selectList[a][2]=e;let t=h.selectData.selectList[a][0]+h.selectData.selectList[a][1]*h.canvasWidth;h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData[t][2]=e}p.reDraw()},handleReplacePindouColor(e,a){if(h.pinDouDrawMode)return p.handleConfirmReplaceColor(e,a);let l=W(e.replaceObj.color),n=j(l),r=h.pindouBlockList[h.currentPindouIndex];if(1===e.type){if(void 0===e.originObj.col||void 0===e.originObj.row)return a(),t.$message.warning("缺少位置坐标无法替换当前像素颜色，请在画布中选择颜色具体位置");let i=[];if("#"!==e.originObj.name&&(i=r.colorStatList.get(e.originObj.name),!i))return t.$message.warning("当前选择颜色不存在"),void a();let o=e.originObj.col+e.originObj.row*h.pindouBlockWidth;if(r.colorArr[o]===e.replaceObj.name)return;if(r.colorArr[o]&&(r.colorArr[o]=e.replaceObj.name,r.blockArr[4*o]=l[0],r.blockArr[4*o+1]=l[1],r.blockArr[4*o+2]=l[2],r.blockArr[4*o+3]=255*l[3]),r.colorStatList.has(e.replaceObj.name)){let a=r.colorStatList.get(e.replaceObj.name)[1]+1;r.colorStatList.set(e.replaceObj.name,[n,a]),i.length&&(r.colorStatList.set(e.originObj.name,[i[0],i[1]-1]),i[1]-1<=0&&r.colorStatList.delete(e.originObj.name))}else i.length&&(r.colorStatList.set(e.originObj.name,[i[0],i[1]-1]),i[1]-1<=0&&r.colorStatList.delete(e.originObj.name)),"#"!==e.replaceObj.name&&r.colorStatList.set(e.replaceObj.name,[n,1]);r.ctx.fillStyle=n;let s=~~(h.pindouScaleValue/2);r.ctx.font=`400 ${s}px Arial`;let c=~~r.ctx.measureText(e.replaceObj.name).width;s=Le(c,s),r.ctx.font=`400 ${s}px Arial`,c=~~r.ctx.measureText(e.replaceObj.name).width;let d=e.originObj.col*h.pindouScaleValue,g=e.originObj.row*h.pindouScaleValue;if("#00000000"===n?r.ctx.clearRect(d,g,h.pindouScaleValue,h.pindouScaleValue):r.ctx.fillRect(d,g,h.pindouScaleValue,h.pindouScaleValue),"#"!==e.replaceObj.name){const a=d+(h.pindouScaleValue-c)/2,t=g+(h.pindouScaleValue-s)/2+s;r.ctx.fillStyle=G(n),r.ctx.fillText(e.replaceObj.name,~~a,~~t)}}else if(2===e.type)if(h.isUpdateAllBlock){for(let a=0;a<h.pindouBlockList.length;a++){r=h.pindouBlockList[a];let i=r.colorStatList.get(e.originObj.name);if(!i)continue;let o=0;for(let t=0;t<r.colorArr.length;t++){t%h.pindouBlockWidth==0&&(o=0);let i=Math.ceil((t+1)/h.pindouBlockWidth);if("#"!==r.colorArr[t]){if(r.colorArr[t]===e.originObj.name&&(r.colorArr[t]=e.replaceObj.name,r.blockArr[4*t]=l[0],r.blockArr[4*t+1]=l[1],r.blockArr[4*t+2]=l[2],r.blockArr[4*t+3]=255*l[3],h.currentPindouIndex===a)){let a=~~(h.pindouScaleValue/2);r.ctx.font=`400 ${a}px Arial`;let t=~~r.ctx.measureText(e.replaceObj.name).width;a=Le(t,a),r.ctx.font=`400 ${a}px Arial`,t=~~r.ctx.measureText(e.replaceObj.name).width;let l=o*h.pindouScaleValue,s=(i-1)*h.pindouScaleValue;r.ctx.fillStyle=n,r.ctx.fillRect(l,s,h.pindouScaleValue,h.pindouScaleValue);const c=l+(h.pindouScaleValue-t)/2,d=s+(h.pindouScaleValue-a)/2+a;r.ctx.fillStyle=G(n),r.ctx.fillText(e.replaceObj.name,~~c,~~d)}o++}else o++}if(r.colorStatList.has(e.replaceObj.name)){let a=r.colorStatList.get(e.replaceObj.name),t=i[1]+a[1];r.colorStatList.delete(e.originObj.name),r.colorStatList.set(e.replaceObj.name,[n,t])}else r.colorStatList.delete(e.originObj.name),r.colorStatList.set(e.replaceObj.name,[n,i[1]]);const s=Array.from(r.colorStatList);s.sort(((e,a)=>a[1][1]-e[1][1])),r.colorStatList=new Map(s),h.currentPindouIndex===a&&(t.$refs.PindouDialog.handleColorStatList(r.colorStatList),t.$refs.PindouDialog.handleUpdateCurrentPindouBlockColorList(r.colorStatList),p.handleDrawPindou(h.ctx1),r.blockBitmap=r.canvas.toDataURL(h.exportFormat,1));const c=new ImageData(r.blockArr,h.pindouBlockWidth,h.pindouBlockHeight),d=document.createElement("canvas");d.width=h.pindouBlockWidth,d.height=h.pindouBlockHeight;const g=d.getContext("2d");null==g||g.putImageData(c,0,0),r.blockBitmap=d.toDataURL(h.exportFormat,1)}a()}else{let i=r.colorStatList.get(e.originObj.name);if(!i)return t.$message.warning("当前选择颜色不存在"),void a();let o=~~(h.pindouScaleValue/2);r.ctx.font=`400 ${o}px Arial`;let s=~~r.ctx.measureText(e.replaceObj.name).width;o=Le(s,o),r.ctx.font=`400 ${o}px Arial`,s=~~r.ctx.measureText(e.replaceObj.name).width;let c=0;for(let a=0;a<r.colorArr.length;a++){a%h.pindouBlockWidth==0&&(c=0);let t=Math.ceil((a+1)/h.pindouBlockWidth);if("#"!==r.colorArr[a]){if(r.colorArr[a]===e.originObj.name){r.colorArr[a]=e.replaceObj.name,r.blockArr[4*a]=l[0],r.blockArr[4*a+1]=l[1],r.blockArr[4*a+2]=l[2],r.blockArr[4*a+3]=255*l[3];let i=c*h.pindouScaleValue,d=(t-1)*h.pindouScaleValue;r.ctx.fillStyle=n,r.ctx.fillRect(i,d,h.pindouScaleValue,h.pindouScaleValue);const g=i+(h.pindouScaleValue-s)/2,A=d+(h.pindouScaleValue-o)/2+o;r.ctx.fillStyle=G(n),r.ctx.fillText(e.replaceObj.name,~~g,~~A)}c++}else c++}if(r.colorStatList.has(e.replaceObj.name)){let a=r.colorStatList.get(e.replaceObj.name),t=i[1]+a[1];r.colorStatList.delete(e.originObj.name),r.colorStatList.set(e.replaceObj.name,[n,t])}else r.colorStatList.delete(e.originObj.name),r.colorStatList.set(e.replaceObj.name,[n,i[1]])}if(!h.isUpdateAllBlock){const e=Array.from(r.colorStatList);e.sort(((e,a)=>a[1][1]-e[1][1])),r.colorStatList=new Map(e),t.$refs.PindouDialog.handleColorStatList(r.colorStatList),t.$refs.PindouDialog.handleUpdateCurrentPindouBlockColorList(r.colorStatList),a(),1===h.currentTool?(h.ctx1.clearRect(0,0,h.canvas.width,h.canvas.height),h.ctx1.drawImage(r.canvas,0,0)):h.ctx1.drawImage(r.canvas,0,0),h.AnimationFrameId_1&&clearTimeout(h.AnimationFrameId_1),h.AnimationFrameId_1=setTimeout((()=>{const e=new ImageData(r.blockArr,h.pindouBlockWidth,h.pindouBlockHeight),a=document.createElement("canvas");a.width=h.pindouBlockWidth,a.height=h.pindouBlockHeight;const t=a.getContext("2d");null==t||t.putImageData(e,0,0),r.blockBitmap=a.toDataURL(h.exportFormat,1)}),1e3)}},getPixelColorByCoords(e,a,t,l=h.canvasWidth){const n=4*(t*l+a);return[e[n],e[n+1],e[n+2],e[n+3]]},isEmptyColorByCroods:(e,a,t)=>0===e[4*(t*h.canvasWidth+a)+3],getCurrentLayerColorByCoords:(e,a)=>h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData[e+"/"+a]||h.emptyColor,fillChunkV2(e,a,t,l){if(t.join("")===l.join(""))return;let n=h.layerCrossList[p.getCurrentLayerId()].layerCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight),r=n.data;const i=n.width,o=n.height,s=[];s.push({x:e,y:a});const c=new Set,d=h.tolerance,g=(e,a)=>{const t=4*(a*i+e);return[r[t],r[t+1],r[t+2],r[t+3]]},A=(e,a)=>{const[t,l,n,r]=e,[i,o,s,c]=a;return Math.abs(t-i)+Math.abs(l-o)+Math.abs(n-s)+Math.abs(r-c)<=d};for(;s.length>0;){const{x:e,y:a}=s.shift(),n=4*(a*i+e);if(c.has(n)||e<0||e>=i||a<0||a>=o)continue;A(g(e,a),t)&&(r[n]=l[0],r[n+1]=l[1],r[n+2]=l[2],r[n+3]=Math.round(h.layerAlpha/100*255),s.push({x:e+1,y:a}),s.push({x:e-1,y:a}),s.push({x:e,y:a+1}),s.push({x:e,y:a-1}),c.add(n))}h.layerCrossList[p.getCurrentLayerId()].layerCtx.putImageData(n,0,0),p.reDraw()},fillChunkSelectV2(e,a,t,l=!1){let n,r,i,o,s=h.layerCrossList[p.getCurrentLayerId()].layerCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight),c=s.data;l||(n=h.selectData.selectCanvasObj.ctx.getImageData(0,0,h.canvasWidth,h.canvasHeight),r=h.selectData.selectCanvasObj.selectCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight),i=n.data,o=r.data);const d=s.width,g=s.height,A=[];A.push({x:e,y:a});const u=new Set,m=h.tolerance,C=W(h.selectActiveColor),y=(e,a)=>{const t=4*(a*d+e);return[c[t],c[t+1],c[t+2],c[t+3]]},f=(e,a)=>{const[t,l,n,r]=e,[i,o,s,c]=a;if("0000"===e.join(""))return!1;return Math.abs(t-i)+Math.abs(l-o)+Math.abs(n-s)+Math.abs(r-c)<=m};for(;A.length>0;){const{x:e,y:a}=A.shift(),n=4*(a*d+e);if(u.has(n)||e<0||e>=d||a<0||a>=g)continue;if(f(y(e,a),t)){if(!l){const e=c[n],a=c[n+1],t=c[n+2],l=c[n+3];i[n]=e,i[n+1]=a,i[n+2]=t,i[n+3]=l,o[n]=C[0],o[n+1]=C[1],o[n+2]=C[2],o[n+3]=255*C[3]}c[n]=0,c[n+1]=0,c[n+2]=0,c[n+3]=0,A.push({x:e+1,y:a}),A.push({x:e-1,y:a}),A.push({x:e,y:a+1}),A.push({x:e,y:a-1}),u.add(n)}}if(h.layerCrossList[p.getCurrentLayerId()].layerCtx.putImageData(s,0,0),l)return p.reDraw();h.selectData.selectCanvasObj.ctx.putImageData(n,0,0),h.selectData.selectCanvasObj.selectCtx.putImageData(r,0,0),p.reDraw(!1),h.ctx1.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.ctx1.drawImage(h.selectData.selectCanvasObj.selectCanvas,0,0)},fillChunk(e,a,t,l){if(t===l)return;h.loading=!0;let n=xe(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex]),r=s(o({},n),{layerNewData:be(n.layerNewData)});h.worker.postMessage({type:103,variables:r,options:{x:e,y:a,targetColor:t,replacementColor:l},canvasWidth:h.canvasWidth,canvasHeight:h.canvasHeight,tolerance:h.tolerance}),h.worker.onmessage=e=>{h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData=e.data.layerData,h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerNewData=e.data.layerNewData,p.handleLayerImg((()=>{h.loading=!1,p.reDraw()}))}},fillChunkSelect(e,a,t,l=!1){if(t===h.emptyColor)return;if(h.selectData.selectMapList[t]&&h.selectData.selectMapList[t].has(`${e}/${a}`))return;h.loading=!0;let n=xe(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData),r=xe(h.selectData);h.worker.postMessage({type:10,variables:n,selectData:r,options:{x:e,y:a,targetColor:t},canvasWidth:h.canvasWidth,canvasHeight:h.canvasHeight,tolerance:h.tolerance}),h.worker.onmessage=e=>{h.selectData.selectList=e.data.variables.selectList,h.selectData.selectMapList=e.data.variables.selectMapList,h.loading=!1,l?p.handleRemoveSelect():p.reDrawSelectData()}},handleChangeMouseStyle(e){if(!e)return;if(!h.scaleWhitePointPos.length)return;h.canvasRealLeft=h.baseCanvas.getBoundingClientRect().left,h.canvasRealTop=h.baseCanvas.getBoundingClientRect().top;let a=e.clientX-h.canvasRealLeft,t=e.clientY-h.canvasRealTop;Math.abs(a-h.scaleWhitePointPos[0][0])<=15&&Math.abs(t-h.scaleWhitePointPos[0][1])<=15&&(h.canvas.style.cursor="se-resize",h.scaleAreaData.cursor="se-resize")},drawSquareLine(e,a,t,l){const n=h.scale*h.brushSize,r=Math.abs(t-e),i=Math.abs(l-a),o=e<t?n:-n,s=a<l?n:-n;let c=r-i;for(;;){for(let t=0;t<h.brushSize;t++){let l=a+h.scale*t;for(let a=0;a<h.brushSize;a++){let t=e+h.scale*a,n=t,r=l;p.checkLayerDrawOrder(t,l,h.scale);let i=-1,o=-1;if(h.isHorizontal)i=Math.floor(h.XLineOffset/h.layerScale*2)-n,o=r;else if(h.isVertical)i=n,o=Math.floor(h.YLineOffset/h.layerScale*2)-r;else if(h.isCenter){let e=2*h.canvasBeginPos.centerX-(n+h.scale/2),a=2*h.canvasBeginPos.centerY-(r+h.scale/2);i=Math.floor(e/h.scale),o=Math.floor(a/h.scale)}if(i>=0&&i<h.canvasWidth&&o>=0&&o<h.canvasHeight){let e=i*h.scale,a=o*h.scale;p.checkLayerDrawOrder(e,a,h.scale)}}}if(e===t&&a===l)break;const n=2*c;n>-i&&(c-=i,e+=o),n<r&&(c+=r,a+=s)}},checkLayerDrawOrder(e,a,t){if(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender){let l=4*(e+a*h.canvasWidth);if(h.currentLayerIndex>0){if(p.getCurrentLayerIsLock()){0===h.layerCrossList[h.currentLayerId].layerData[l+3]&&(h.ctx1.clearRect(e,a,t,t),h.ctx1.fillRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.clearRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.fillRect(e,a,t,t))}else h.ctx1.clearRect(e,a,t,t),h.ctx1.fillRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.clearRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.fillRect(e,a,t,t);p.reDrawV3("top")}else if(p.getCurrentLayerIsLock()){0===h.layerCrossList[h.currentLayerId].layerData[l+3]&&(h.ctx1.clearRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.clearRect(e,a,t,t),h.ctx1.fillRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.fillRect(e,a,t,t))}else h.ctx1.clearRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.clearRect(e,a,t,t),h.ctx1.fillRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.fillRect(e,a,t,t)}},eraseSquareLine(e,a,t,l){const n=h.scale*h.eraserSize,r=Math.abs(t-e),i=Math.abs(l-a),o=e<t?n:-n,s=a<l?n:-n;let c=r-i;for(;;){for(let t=0;t<h.eraserSize;t++){let l=a+h.scale*t;for(let t=0;t<h.eraserSize;t++){let n=e+h.scale*t,r=Math.floor(n/h.scale),i=Math.floor(l/h.scale);p.checkLayerEraseOrder(n,l,h.scale);let o=-1,s=-1;if(h.isHorizontal)o=h.canvasWidth-1-r,s=i;else if(h.isVertical)o=r,s=h.canvasHeight-1-i;else if(h.isCenter){let t=2*h.canvasBeginPos.centerX-(e+h.scale/2),l=2*h.canvasBeginPos.centerY-(a+h.scale/2);o=Math.floor(t/h.scale),s=Math.floor(l/h.scale)}if(o>=0&&o<h.canvasWidth&&s>=0&&s<h.canvasHeight){let e=o*h.scale,a=s*h.scale;p.checkLayerEraseOrder(e,a,h.scale)}}}if(e===t&&a===l)break;const n=2*c;n>-i&&(c-=i,e+=o),n<r&&(c+=r,a+=s)}},checkLayerEraseOrder(e,a,t){if(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender){let l=4*(e+a*h.canvasWidth);if(0!==h.layerCrossList[h.currentLayerId].layerData[l+3]){if(h.removeDrawList.push([e,a]),h.ctx1.clearRect(e,a,t,t),h.layerCrossList[h.currentLayerId].layerCtx.clearRect(e,a,t,t),h.currentLayerIndex>0)for(let n=0;n<h.currentLayerIndex;n++){let r=h.drawRecord[h.currentFrameIndex].layer[n];if(r.isRender){let n=r.layerId,i=h.layerCrossList[n].layerData;if(0===i[l+3])continue;h.ctx1.fillStyle=Ie([i[l],i[l+1],i[l+2],i[l+3]]),h.ctx1.fillRect(e,a,t,t)}}if(h.currentLayerIndex<h.drawRecord[h.currentFrameIndex].layer.length-1)for(let n=h.drawRecord[h.currentFrameIndex].layer.length-1;n>h.currentLayerIndex;n--){let r=h.drawRecord[h.currentFrameIndex].layer[n];if(r.isRender){let n=r.layerId,i=h.layerCrossList[n].layerData;if(0===i[l+3])continue;h.ctx1.fillStyle=Ie([i[l],i[l+1],i[l+2],i[l+3]]),h.ctx1.fillRect(e,a,t,t)}}}}},async handleEyeDropper(){if(!(null==window?void 0:window.EyeDropper))return t.$message.warning("当前浏览器暂不支持该功能");const e=new EyeDropper;try{const a=await e.open();h.brushColor=a.sRGBHex}catch(a){}},draw(e){if(e){let a=h.canvas.getBoundingClientRect(),l=Math.floor((e.clientY-a.top)/h.layerScale),n=Math.floor((e.clientX-a.left)/h.layerScale);if(h.pinDouMode?(l=Math.floor((e.clientY-a.top)/(h.pindouScaleValue*h.layerScale)),n=Math.floor((e.clientX-a.left)/(h.pindouScaleValue*h.layerScale)),h.gridInfo=`${l<0?1:l+1}行, ${n<0?1:n+1}列`):h.gridInfo=`${n<0?0:n}, ${l<0?0:l}`,h.isSpace||h.isDoubleFingersMoving){if(h.canvas.style.cursor="grabbing",h.isDragging){const a=e.clientX-h.dragData.x,t=e.clientY-h.dragData.y;h.canvas.style.left=`${a}px`,h.canvas.style.top=`${t}px`,h.scaleBoxDom.style.left=`${a}px`,h.scaleBoxDom.style.top=`${t}px`,h.bgCanvas.style.left=`${a}px`,h.bgCanvas.style.top=`${t}px`,p.handleDrawReferenceLine(),p.handleCheckAxisOffset(),h.pinDouMode||(p.handleDrawGridLine(),p.handleIntelligentSlice(h.intelligentSliceObj)),p.handleScaleFrame1(),p.handlePindouBlockHighlight(h.pindouHighlightOptions),h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),h.linmoFitCanvasTimer=setTimeout((()=>{p.handleLinmoFitCanvas()}),250)}return}if(h.selectData.isMoving&&h.isSelecting?h.canvas.style.cursor="move":(h.canvas.style.cursor="",p.addCursorClass(e)),h.isDrawing){const e=n-n%(h.scale*h.brushSize),a=l-l%(h.scale*h.brushSize),t=h.mouseDrawData.startX,r=h.mouseDrawData.startY;p.drawSquareLine(t,r,e,a),h.mouseDrawData.startX=e,h.mouseDrawData.startY=a}else if(h.isErasering){const a=n-n%(h.scale*h.eraserSize),t=l-l%(h.scale*h.eraserSize),r=h.mouseDrawData.startX,i=h.mouseDrawData.startY;if(h.isEnableEraserTrack){let a=h.mouseDrawData.baseRect;const t=e.clientX-a.left,l=e.clientY-a.top;h.ctx0.beginPath(),h.ctx0.moveTo(h.mouseDrawData.lastX,h.mouseDrawData.lastY),h.ctx0.lineTo(e.clientX-a.left,e.clientY-a.top),h.ctx0.stroke(),h.mouseDrawData.lastX=t,h.mouseDrawData.lastY=l}p.eraseSquareLine(r,i,a,t),h.mouseDrawData.startX=a,h.mouseDrawData.startY=t}else if(h.isDrawShape){if("rect"===h.currentDrawShape){if(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender){h.drawShapeData.endX=n,h.drawShapeData.endY=l;const e=h.drawShapeData.endX-h.drawShapeData.startX,a=h.drawShapeData.endY-h.drawShapeData.startY;p.reDraw(!1),me(h.brushSize)?h.ctx1.strokeRect(h.drawShapeData.startX-.5,h.drawShapeData.startY-.5,e,a):h.ctx1.strokeRect(h.drawShapeData.startX,h.drawShapeData.startY,e,a)}}else if("fillRect"===h.currentDrawShape){if(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender){h.drawShapeData.endX=n,h.drawShapeData.endY=l;const e=h.drawShapeData.endX-h.drawShapeData.startX,a=h.drawShapeData.endY-h.drawShapeData.startY;p.reDraw(!1),h.ctx1.fillRect(h.drawShapeData.startX,h.drawShapeData.startY,e,a)}}else if("circle"===h.currentDrawShape){if(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender){h.drawShapeData.endX=n,h.drawShapeData.endY=l,p.reDraw(!1);let e=p.drawCircle(h.drawShapeData.startX,h.drawShapeData.startY,h.drawShapeData.endX,h.drawShapeData.endY,h.brushSize);for(let a=0;a<e.length;a++)e[a][0]>h.canvasWidth||e[a][1]>h.canvasHeight||e[a][0]<0||e[a][1]<0||h.ctx1.fillRect(e[a][0],e[a][1],h.scale,h.scale)}}else if("line"===h.currentDrawShape){if(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender){h.drawShapeData.endX=n,h.drawShapeData.endY=l,p.reDraw(!1);let e=p.drawLineV2(h.drawShapeData.startX,h.drawShapeData.startY,h.drawShapeData.endX,h.drawShapeData.endY,h.brushSize);for(let a=0;a<e.length;a++)e[a][0]>h.canvasWidth||e[a][1]>h.canvasHeight||e[a][0]<0||e[a][1]<0||h.ctx1.fillRect(e[a][0],e[a][1],h.scale,h.scale)}}else if("curve"===h.currentDrawShape&&h.curveType.isPress&&(p.addShapeList(n,l),h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isRender)){let e=h.drawShapeList[0][0],a=h.drawShapeList[0][1],t=n,r=l;if(e===t&&a===r)return;if(e===t||a===r){let l=0,n=0,i=0;if(e===t&&["3","4"].includes(h.curveType.pressKey)?(n=Math.round(Math.min(a,r)+Math.abs(r-a)/2),"3"===h.curveType.pressKey?l=Math.round(e-h.curvature)<=0?0:Math.round(e-h.curvature):"4"===h.curveType.pressKey&&(l=Math.round(e+h.curvature)>=h.canvasWidth?h.canvasWidth:Math.round(e+h.curvature)),i=Math.abs(r-a)):a===r&&["1","2"].includes(h.curveType.pressKey)&&(l=Math.round(Math.abs(t-e)/2+Math.min(e,t)),"1"===h.curveType.pressKey?n=Math.round(a-h.curvature)<=0?0:Math.round(a-h.curvature):"2"===h.curveType.pressKey&&(n=Math.round(a+h.curvature)>=h.canvasHeight?h.canvasHeight:Math.round(a+h.curvature)),i=Math.abs(t-e)),0===l&&0===n)return;let o=p.drawCurve({x:e,y:a},{x:l,y:n},{x:t,y:r},20+i);h.curveEndPos=[t,r],p.reDraw(!1);for(let e=0;e<o.length;e++){if(o[e][0]>h.canvasWidth||o[e][1]>h.canvasHeight)return;let a=o[e][0]*h.scale+h.canvasBeginPos.x,t=o[e][1]*h.scale+h.canvasBeginPos.y;h.ctx1.fillStyle=h.brushColor,h.ctx1.fillRect(a,t,h.scale,h.scale)}}}}else if(h.isMoving){let e=n-h.moveData.x,a=l-h.moveData.y;h.layerCrossList[h.moveData.moveLayerId].layerCtx.clearRect(0,0,h.canvasWidth,h.canvasHeight),h.layerCrossList[h.moveData.moveLayerId].layerCtx.putImageData(h.moveData.imageData,e,a),p.reDraw(!0,!1),h.moveData.newCenterX=h.moveData.centerX+e,h.moveData.newCenterY=h.moveData.centerY+a;let t=Math.abs(h.moveData.newCenterX-h.canvasBeginPos.centerX),r=Math.abs(h.moveData.newCenterY-h.canvasBeginPos.centerY);t<=2&&r>2?(h.isShowReferenceLine=!0,p.handleDrawReferenceLine("v")):r<=2&&t>2?(h.isShowReferenceLine=!0,p.handleDrawReferenceLine("h")):t<=2&&r<=2?(h.isShowReferenceLine=!0,p.handleDrawReferenceLine("vh")):(h.isShowReferenceLine=!1,p.handleDrawReferenceLine())}else if(h.isSelecting){if(h.selectData.isMoving){let e=n-h.selectData.x,a=l-h.selectData.y;if(0===e&&0===a)return;return h.selectData.isCopySelect,p.reDraw(!1),h.selectData.selectCanvasObj.ctx.clearRect(0,0,h.canvasWidth,h.canvasHeight),h.selectData.selectCanvasObj.selectCtx.clearRect(0,0,h.canvasWidth,h.canvasHeight),h.selectData.selectCanvasObj.ctx.putImageData(h.selectData.selectCanvasObj.imageData,e,a),h.selectData.selectCanvasObj.selectCtx.putImageData(h.selectData.selectCanvasObj.selectImageData,e,a),h.ctx1.drawImage(h.selectData.selectCanvasObj.canvas,0,0),void h.ctx1.drawImage(h.selectData.selectCanvasObj.selectCanvas,0,0)}if("rangeSelect"===h.selectType||"quickSelect"===h.selectType)return;let e=j(p.getPixelColorByCoords(h.layerCrossList[h.currentLayerId].layerData,n,l));e!==h.emptyColor&&(h.selectData.selectCanvasObj.selectCtx.fillRect(n,l,1,1),h.layerCrossList[h.currentLayerId].layerCtx.clearRect(n,l,1,1),h.selectData.selectCanvasObj.ctx.fillStyle=e,h.selectData.selectCanvasObj.ctx.fillRect(n,l,1,1),h.ctx1.fillRect(n,l,1,1))}else if(h.isSelectDraging&&"rangeSelect"===h.selectType){const a=e.clientX-h.canvasRealLeft-h.lastX,t=e.clientY-h.canvasRealTop-h.lastY;p.handleDrawReferenceLine(),h.ctx0.strokeStyle="green",h.ctx0.setLineDash([]),h.ctx0.beginPath(),h.ctx0.globalCompositeOperation="destination-out",h.ctx0.fillRect(h.lastX,h.lastY,a,t),h.ctx0.globalCompositeOperation="source-over",h.ctx0.moveTo(h.lastX,h.lastY),h.ctx0.lineTo(h.lastX+a,h.lastY),h.ctx0.lineTo(h.lastX+a,h.lastY+t),h.ctx0.lineTo(h.lastX,h.lastY+t),h.ctx0.lineTo(h.lastX,h.lastY),h.ctx0.stroke(),h.ctx0.closePath(),h.selectData.endX=n,h.selectData.endY=l}else if(h.isSelectDraging&&11===h.currentTool){const a=e.clientX-h.canvasRealLeft-h.lastX,t=e.clientY-h.canvasRealTop-h.lastY;p.handleDrawReferenceLine(),h.ctx0.strokeStyle="green",h.ctx0.setLineDash([]),h.ctx0.beginPath(),h.ctx0.globalCompositeOperation="destination-out",h.ctx0.fillRect(h.lastX,h.lastY,a,t),h.ctx0.globalCompositeOperation="source-over",h.ctx0.moveTo(h.lastX,h.lastY),h.ctx0.lineTo(h.lastX+a,h.lastY),h.ctx0.lineTo(h.lastX+a,h.lastY+t),h.ctx0.lineTo(h.lastX,h.lastY+t),h.ctx0.lineTo(h.lastX,h.lastY),h.ctx0.stroke(),h.ctx0.closePath(),h.selectData.endX=n,h.selectData.endY=l}else if(h.pinDouMode&&h.isMovingPindouBrush&&[0,1].includes(h.currentTool)){let e=n+l*h.pindouBlockWidth,a=h.pindouBlockList[h.currentPindouIndex].colorArr;if("#"===a[e]&&0!==h.currentTool)return;let r="#"===a[e]?"#00000000":h.pindouBlockList[h.currentPindouIndex].colorStatList.get(a[e])[0],i={name:a[e],color:r,col:n,row:l};if(0===h.currentTool){let e=t.$refs.PindouDialog.replaceObj;if(!e)return t.$messgae.warning("请先选择替换的新色号");let a={replaceObj:{color:"#"+e.color,name:e.name},originObj:i,type:1};p.handleReplacePindouColor(a,(()=>{}))}else if(1===h.currentTool){let e={replaceObj:{color:"#00000000",name:"#"},originObj:i,type:1};p.handleReplacePindouColor(e,(()=>{}))}}}else h.canvas.classList=""},handleMobileScaleMove(e){if(e.preventDefault(),2===e.touches.length&&(h.isSpace||h.isDoubleFingers)){h.isDoubleFingersMoving=!0;const a=e.touches[0].clientX-e.touches[1].clientX,t=e.touches[0].clientY-e.touches[1].clientY,l=Math.sqrt(a*a+t*t);if(null!==h.mobileStartDistance){let e=l/h.mobileStartDistance,a=h.layerScale;if(e>1.05)if(h.pinDouMode){a=pe(h.canvas)+.02}else a=h.layerScale+h.layerScaleStep;else if(e<.95)if(h.pinDouMode){a=pe(h.canvas)-.02}else a=h.layerScale-h.layerScaleStep;if(e>1.05||e<.95){let e=Math.max(.1,a);e>h.maxScale&&(e=h.maxScale),h.layerScale=Number(e.toFixed(2)),p.handleSetCanvasScale(),h.mobileStartDistance=l,h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),h.linmoFitCanvasTimer=setTimeout((()=>{p.handleLinmoFitCanvas(),p.handleDrawReferenceLine(),p.handleScaleFrame1(),p.handleInitAxisOffset()}),250)}}if(h.mobileFingerMovingData.startX>0){h.mobileFingerMovingData.endX=(e.touches[0].clientX+e.touches[1].clientX)/2,h.mobileFingerMovingData.endY=(e.touches[0].clientY+e.touches[1].clientY)/2;const a=h.canvas.offsetLeft+(h.mobileFingerMovingData.endX-h.mobileFingerMovingData.startX),t=h.canvas.offsetTop+(h.mobileFingerMovingData.endY-h.mobileFingerMovingData.startY);h.canvas.style.left=`${a}px`,h.canvas.style.top=`${t}px`,h.scaleBoxDom.style.left=`${a}px`,h.scaleBoxDom.style.top=`${t}px`,h.bgCanvas.style.left=`${a}px`,h.bgCanvas.style.top=`${t}px`,h.mobileFingerMovingData.startX=h.mobileFingerMovingData.endX,h.mobileFingerMovingData.startY=h.mobileFingerMovingData.endY,p.handleDrawReferenceLine(),p.handleCheckAxisOffset(),h.pinDouMode||(p.handleDrawGridLine(),p.handleIntelligentSlice(h.intelligentSliceObj)),p.handleScaleFrame1(),p.handlePindouBlockHighlight(h.pindouHighlightOptions),h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),h.linmoFitCanvasTimer=setTimeout((()=>{p.handleLinmoFitCanvas()}),250)}}},handleMobileScaleEnd(){h.mobileStartDistance&&(h.mobileStartDistance=null,h.mobileFingerMovingData.startX=0,setTimeout((()=>{h.isDoubleFingersMoving=!1}),400))},mobileDraw(e){if(h.mobileStartDistance)return;e.preventDefault();let a={offsetX:Math.round(Math.round(e.touches[0].clientX-h.canvas.getBoundingClientRect().left)/h.layerScale),offsetY:Math.round(Math.round(e.touches[0].clientY-h.canvas.getBoundingClientRect().top)/h.layerScale)};e.offsetX=a.offsetX,e.offsetY=a.offsetY,e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY,p.draw(e)},handleCancelSelect(){8===h.currentTool&&(Be(h.selectData.selectCanvasObj.canvas,h.selectData.selectCanvasObj.ctx)||(h.selectData.selectLayerId!==h.currentLayerId?h.layerCrossList[h.currentLayerId].layerCtx.drawImage(h.selectData.selectCanvasObj.canvas,0,0):h.layerCrossList[h.selectData.selectLayerId].layerCtx.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.selectData.selectCanvasObj.croppedLayerData=null,h.selectData.selectMapList={},h.selectData.isCopySelect=!1,h.selectData.selectCanvasObj.ctx.clearRect(0,0,h.canvasWidth,h.canvasHeight),h.selectData.selectCanvasObj.selectCtx.clearRect(0,0,h.canvasWidth,h.canvasHeight),p.reDraw()))},handleRemoveSelect(){if(8===h.currentTool){if(Be(h.selectData.selectCanvasObj.canvas,h.selectData.selectCanvasObj.ctx))return t.$message.warning("选择区域为空");if(h.selectData.selectCanvasObj.croppedLayerData)for(let e=0;e<h.selectData.selectCanvasObj.croppedLayerData.length;e++)h.layerCrossList[h.currentLayerId].layerCtx.putImageData(h.selectData.selectCanvasObj.croppedLayerData[e].croppedImageData,h.selectData.selectCanvasObj.croppedLayerData[e].minX,h.selectData.selectCanvasObj.croppedLayerData[e].minY);h.selectData.selectMapList={},h.selectData.isCopySelect=!1,h.selectData.selectCanvasObj.croppedLayerData=null,h.selectData.selectCanvasObj.ctx.clearRect(0,0,h.canvasWidth,h.canvasHeight),h.selectData.selectCanvasObj.selectCtx.clearRect(0,0,h.canvasWidth,h.canvasHeight),p.reDraw(),t.$message.success("已删除选区")}},getRectIntersectV2(e){let a=h.drawRecord[h.currentFrameIndex].layer,t={};for(let l=a.length-1;l>=0;l--)if(a[l].isRender){let n=Object.keys(e);for(let r=0;r<n.length;r++){let i=e[n[r]];for(const[e,n]of i){let e=n,r=e[0]+e[1]*h.canvasWidth;if(!(r<0||r>a[l].layerData.length-1)&&(!(a[l].layerData[r][0]>=h.canvasWidth||a[l].layerData[r][1]>=h.canvasHeight||a[l].layerData[r][0]<0||a[l].layerData[r][1]<0)&&a[l].layerData[r]&&a[l].layerData[r][2]!==h.emptyColor)){t[a[l].layerData[r][2]]||(t[a[l].layerData[r][2]]=new Map);let e=a[l].layerData[r][0]+"/"+a[l].layerData[r][1];t[a[l].layerData[r][2]].set(e,[a[l].layerData[r][0],a[l].layerData[r][1]])}}}}return t},getRectIntersect(e){let a=h.drawRecord[h.currentFrameIndex].layer,t=[];for(let l=a.length-1;l>=0;l--)if(a[l].isRender)for(let n=0;n<e.length;n++){let r=e[n][0]+e[n][1]*h.canvasWidth;r<0||r>a[l].layerData.length-1||(a[l].layerData[r][0]>=h.canvasWidth||a[l].layerData[r][1]>=h.canvasHeight||a[l].layerData[r][0]<0||a[l].layerData[r][1]<0||a[l].layerData[r]&&a[l].layerData[r][2]!==h.emptyColor&&t.push(a[l].layerData[r]))}return t},startDrag(e,a){if(h.isDragging){const t=e-h.dragData.x,l=a-h.dragData.y;let n=h.drawAreaList[0][0]+t,r=h.drawAreaList[0][1]+l,i=n+h.scale*h.canvasWidth/2,o=r+h.scale*h.canvasHeight/2;p.drawPixelArea(),h.isScaling?p.handleScaleFrame({x:n,y:r,centerX:i,centerY:o}):h.pinDouMode?p.handleDrawPindou(h.ctx1,{x:n,y:r,centerX:i,centerY:o}):p.reDraw(!1,!1)}},handleScaleFrame1(){(h.isScaling||h.isControlMindObj)&&(h.isControlMindObj,h.resizeStyle.width=parseFloat(h.scaleStyle.width)*h.layerScale+"px",h.resizeStyle.height=parseFloat(h.scaleStyle.height)*h.layerScale+"px",p.handleResizeStyle())},handleScaleFrame(e=h.canvasBeginPos){},addDrawList(e,a,t){h.drawList.push([e,a,t])},addRemoveDrawList(e,a,t){h.removeDrawList.push([e,a,t])},addShapeList(e,a){h.drawShapeList.push([e,a])},drawCircle(e,a,t,l,n){let r,i,o,s,c=Ge(e,a,t,l),d=[],g=Math.round((c.x0+c.x1)/2),A=Math.round((c.y0+c.y1)/2),h=(c.x0+c.x1)%2,u=(c.y0+c.y1)%2,p=c.x1-g,m=c.y1-A;if(1===n){for(r=c.x0;r<=g;r++)o=Math.acos((r-g)/p),i=Math.round(m*Math.sin(o)+A),d.push([r-h,i]),d.push([r-h,2*A-i-u]),d.push([2*g-r,i]),d.push([2*g-r,2*A-i-u]);for(i=c.y0;i<=A;i++)o=Math.asin((i-A)/m),r=Math.round(p*Math.cos(o)+g),d.push([r,i-u]),d.push([2*g-r-h,i-u]),d.push([r,2*A-i]),d.push([2*g-r-h,2*A-i]);return ke(d)}let C=p-n,y=m-n;for(C<0&&(C=0),y<0&&(y=0),r=0;r<=p;r++)for(i=0;i<=m;i++)o=Math.atan(i/r),s=Math.sqrt(r*r+i*i),(p<=n||m<=n||s>C*y/Math.sqrt(y*y*Math.pow(Math.cos(o),2)+C*C*Math.pow(Math.sin(o),2))+.5)&&s<p*m/Math.sqrt(m*m*Math.pow(Math.cos(o),2)+p*p*Math.pow(Math.sin(o),2))+.5&&(d.push([g+r,A+i]),d.push([g-r-h,A+i]),d.push([g+r,A-i-u]),d.push([g-r-h,A-i-u]));return ke(d)},drawCurve(e,a,t,l){const n=[];for(let i=0;i<=l;i++){let r=i/l,o=Math.round(Math.pow(1-r,2)*e.x+2*r*(1-r)*a.x+Math.pow(r,2)*t.x),s=Math.round(Math.pow(1-r,2)*e.y+2*r*(1-r)*a.y+Math.pow(r,2)*t.y);n.push([o,s])}let r=ke(n);return r=r.filter((e=>e[0]>=0&&e[1]>=0)),r},drawLineV2(e,a,t,l,n){const r=Math.abs(t-e),i=e<t?n:-n,o=-Math.abs(l-a),s=a<l?n:-n;let c,d=r+o,g=!1,A=[];for(;!g;){for(let t=0;t<n;t++)for(let l=0;l<n;l++){const n=e+t,r=a+l;n>=0&&n<h.canvasWidth&&r>=0&&r<h.canvasHeight&&A.push([n,r])}e===t&&a===l||i>0&&e>t||i<0&&e<t||s>0&&a>l||s<0&&a<l?g=!0:(c=2*d,0===r?s>0&&a+s>l||s<0&&a+s<l?a=l:a+=s:0===o?i>0&&e+i>t||i<0&&e+i<t?e=t:e+=i:(c>o&&(d+=o,e+=i),c<r&&(d+=r,a+=s)))}return ke(A)},drawLine(e,a,t,l){const n=Math.abs(t-e),r=e<t?1:-1,i=-Math.abs(l-a),o=a<l?1:-1;let s,c=n+i,d=!1,g=[];for(;!d;)e>=0&&e<=h.canvasWidth&&a>=0&&a<=h.canvasHeight&&g.push([e,a]),e===t&&a===l?d=!0:(s=2*c,s>i&&(c+=i,e+=r),s<n&&(c+=n,a+=o));return ke(g)},drawRect(e,a,t,l){let n=Math.abs(e-t),r=Math.abs(a-l),i=[];if(r<=1)for(let o=0;o<r+1;o++)for(let l=0;l<n+1;l++){let n,r;e>t?(n=e-l,r=a-o,i.push([n,r])):(n=e+l,r=a+o,i.push([n,r]))}else{for(let r=0;r<=n;r++){let n,o,s,c;e>t?(n=e-r,o=a,i.push([n,o]),s=t+r,c=l,i.push([s,c])):(n=e+r,o=a,i.push([n,o]),s=t-r,c=l,i.push([s,c]))}for(let n=0;n<=r;n++){let r,o,s,c;a>l?(r=e,o=a-n,i.push([r,o]),s=t,c=l+n,i.push([s,c])):(r=e,o=a+n,i.push([r,o]),s=t,c=l-n,i.push([s,c]))}}return ke(i)},drawFillRect(e,a,t,l){let n=Math.abs(e-t),r=Math.abs(a-l),i=[];if(r<=1)for(let o=0;o<r+1;o++)for(let l=0;l<n+1;l++){let n,r;e>t?(n=e-l,r=a-o,i.push([n,r,h.brushColor])):(n=e+l,r=a+o,i.push([n,r,h.brushColor]))}else{for(let l=0;l<r+1;l++)for(let r=0;r<n+1;r++){let n,o;e>t?(n=e-r,o=a-l,i.push([n,o,h.shapeFillColor])):(n=e+r,o=a+l,i.push([n,o,h.shapeFillColor]))}for(let r=0;r<=n;r++){let n,o,s,c;e>t?(n=e-r,o=a,i.push([n,o,h.brushColor]),s=t+r,c=l,i.push([s,c,h.brushColor])):(n=e+r,o=a,i.push([n,o,h.brushColor]),s=t-r,c=l,i.push([s,c,h.brushColor]))}for(let n=0;n<=r;n++){let r,o,s,c;a>l?(r=e,o=a-n,i.push([r,o,h.brushColor]),s=t,c=l+n,i.push([s,c,h.brushColor])):(r=e,o=a+n,i.push([r,o,h.brushColor]),s=t,c=l-n,i.push([s,c,h.brushColor]))}}return ke(i)},handleLayerImg(e=(()=>{})){let a=p.getCurrentLayerId();h.layerCrossList[a].thumbImg=h.layerCrossList[a].layerCanvas.toDataURL(h.exportFormat,1),h.layerCrossList[a].layerData=h.layerCrossList[a].layerCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight).data,h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].currentLayerImg=h.layerCrossList[a].thumbImg},handleLayerImgById(e){h.layerCrossList[e].thumbImg=h.layerCrossList[e].layerCanvas.toDataURL(h.exportFormat,1),h.layerCrossList[e].layerData=h.layerCrossList[e].layerCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight).data;let a=p.getCurrentLayerIndexById(e);h.drawRecord[h.currentFrameIndex].layer[a].currentLayerImg=h.layerCrossList[e].thumbImg},handleGridImg(){h.realCanvas.width=40,h.realCanvas.height=40,h.ctx3.globalAlpha=.25,h.ctx3.clearRect(0,0,h.realCanvas.width,h.realCanvas.height);for(let e=0;e<h.realCanvas.height;e++)for(let a=0;a<h.realCanvas.width;a++)h.ctx3.fillStyle=(e+a)%2==0?"rgba(0, 0, 0, 0.5)":"rgba(100, 100, 100, 0.5)",h.ctx3.fillRect(6*a,6*e,6,6);h.layerGridImage=h.realCanvas.toDataURL("image/png"),h.ctx3.globalAlpha=1},handleFrameImg(e,a=!0){performance.now();let t=h.canvas.toDataURL(h.exportFormat,1);h.drawRecord[h.currentFrameIndex].currentFrameImg=t;performance.now();p.handleLayerImg(),h.FrameTimer&&clearTimeout(h.FrameTimer),h.FrameTimer=setTimeout((()=>{let e=h.ctx1.getImageData(0,0,h.canvasWidth,h.canvasHeight).data;h.worker.postMessage({type:105,currentFrameData:e,isPindouDrawMode:h.pinDouDrawMode,currentPindouBrandColorList:JSON.parse(JSON.stringify(g.pindouMaps[h.pindouBrand].data||g.pindouMaps[h.pindouBrand]))}),h.worker.onmessage=e=>{105===e.data.type&&(h.colorStatList=e.data.colorObj)}}),2e3),a&&p.handleAddHistory()},async handleExportPindouToExcel(e,a){n.handlePindouToExcel(h.pindouBlockList,o({currentPindouIndex:h.currentPindouIndex,canvasWidth:h.canvasWidth,canvasHeight:h.canvasHeight,pindouWidth:h.pindouBlockWidth,pindouHeight:h.pindouBlockHeight,pindouScale:h.pindouScaleValue,filename:`拼豆表格 - ${h.projectData.projectName}`},a)).then((a=>{e(),t.$message.success("导出成功")})).catch((a=>{e(),t.$message.error("导出失败")}))},handleExportCurrentBlockPindou:(e,{isShowGrid:a,isShowRulers:t,isShowCirclePoint:l,isShowRectPoint:n,rulersBackgroundColor:r,pointColor:i,rulersColor:o,gridColor:s,isShowTongji:c,isShowBrand:d,brandName:g,background:A,isShowProjectName:u,isShowTime:m,isShowTongjiCount:C,isShowWaterMark:y,waterMarkText:f,waterMarkSize:v,waterMarkColor:w,isShowReferenceLine:D,isShowTongjiBorder:S,isHighlight:L,currentSelectColor:x},b=!1,I=h.currentPindouIndex)=>new Promise(((e,k)=>{const B=document.createElement("canvas"),R=B.getContext("2d"),M=document.createElement("canvas");let F=h.pindouScaleValue,E=t?30:0,T=Re(h.pindouBlockWidth),P=F*h.pindouBlockWidth/T,O=Math.max(Math.floor(P-20),50),U=Math.max(40,O-20),H=Math.max(40,O-120);M.width=h.pindouBlockWidth*F+2*E,M.height=h.pindouBlockHeight*F+2*E,B.width=M.width+80,B.height=M.height+40+H+U;const J=M.getContext("2d"),Q=h.pindouBlockList[I].canvas;if(J.fillStyle=A,J.fillRect(E,E,h.pindouBlockWidth*F,h.pindouBlockHeight*F),t){J.fillStyle=r,J.fillRect(0,0,M.width,F),J.fillRect(0,M.height-F,M.width,F),J.fillRect(0,F,F,M.height-2*F),J.fillRect(M.width-F,F,F,M.height-2*F),J.font="bold 14px Arial",J.textAlign="center",J.fillStyle=o;for(let e=0;e<h.pindouBlockHeight;e++){let a=E/2,t=F*e+F/2*3+5,l=M.width-E/2,n=t;J.fillText((e+1).toString(),a,t),J.fillText((h.pindouBlockHeight-e).toString(),l,n)}for(let e=0;e<h.pindouBlockWidth;e++){let a=F*e+F/2*3,t=E/2+5,l=a,n=M.height-E/2;J.fillText((e+1).toString(),a,t),J.fillText((h.pindouBlockWidth-e).toString(),l,n+4)}}for(let a=0;a<h.pindouBlockList[I].colorArr.length;a++){let e=a%h.pindouBlockWidth,t=Math.floor(a/h.pindouBlockWidth);if("#"===h.pindouBlockList[I].colorArr[a]){let a=e*h.pindouScaleValue,r=t*h.pindouScaleValue;J.fillStyle=i,l?(J.beginPath(),J.arc(a+E+F/2,r+E+F/2,3,0,2*Math.PI),J.fill()):n&&J.fillRect(a+E+F/2-3,r+E+F/2-3,6,6)}}let Y=0;if(h.pindouBlockList[I].colorStatList.forEach(((e,a)=>{Y+=e[1]})),h.pindouBlockList[I].colorStatList.size<=16&&h.pindouBlockWidth>32&&(T=8,P=F*h.pindouBlockWidth/T,O=Math.max(Math.floor(P-20),50),U=Math.max(40,O-20),H=Math.max(40,O-120),B.height=M.height+40+H+U),J.drawImage(Q,E,E),a){J.strokeStyle=s,J.beginPath(),J.moveTo(0,0),J.lineTo((h.pindouBlockWidth+2)*F,0),J.moveTo(0,h.pindouBlockHeight*F+2*E),J.lineTo((h.pindouBlockWidth+2)*F,h.pindouBlockHeight*F+2*E),J.moveTo(0,0),J.lineTo(0,(h.pindouBlockHeight+2)*F),J.moveTo((h.pindouBlockWidth+2)*F,0),J.lineTo((h.pindouBlockWidth+2)*F,(h.pindouBlockHeight+2)*F),J.stroke();for(let e=0;e<=h.pindouBlockHeight;e++)J.lineWidth=1,D&&e%5==0&&0!==e&&e!==h.pindouBlockHeight&&(J.lineWidth=4),J.beginPath(),J.moveTo(0,e*F+E),J.lineTo((h.pindouBlockWidth+2)*F,e*F+E),J.stroke();for(let e=0;e<=h.pindouBlockWidth;e++)J.lineWidth=1,D&&e%5==0&&0!==e&&e!==h.pindouBlockWidth&&(J.lineWidth=4),J.beginPath(),J.moveTo(e*F+E,0),J.lineTo(e*F+E,(h.pindouBlockHeight+2)*F),J.stroke()}R.drawImage(M,40,40+H);const V=document.createElement("canvas"),X=V.getContext("2d");if(d){V.width=M.width,V.height=O+20,B.height=B.height+V.height,X.fillStyle="white",X.fillRect(0,0,V.width,V.height);let e=Math.floor(O/3)+2;X.font=`bold ${e}px PixelFont`,X.fillStyle="black",X.textAlign="center",X.fillText(g,V.width/2,V.height/2+20),C&&(X.font=`bold ${e-2}px PixelFont`,X.textAlign="end",X.fillStyle="#808080",X.fillText(`豆子总数：${Y}`,V.width-35,V.height/2+20)),R.drawImage(M,40,40+H),R.drawImage(V,40,M.height+40+H)}else if(!d&&C){V.width=M.width,V.height=O+20,B.height=B.height+V.height,X.fillStyle="white",X.fillRect(0,0,V.width,V.height);let e=Math.floor(O/3)+2;X.font=`bold ${e-2}px PixelFont`,X.textAlign="end",X.fillStyle="#808080",X.fillText(`豆子总数：${Y}`,V.width-35,V.height/2+20),R.drawImage(M,40,40+H),R.drawImage(V,40,M.height+40+H)}else V.width=M.width,V.height=60,B.height=B.height+V.height,X.fillStyle="white",X.fillRect(0,0,V.width,V.height),R.drawImage(M,40,40+H),R.drawImage(V,40,M.height+40+H);const W=document.createElement("canvas"),j=W.getContext("2d");if(c){let e=h.pindouBlockList[I].colorStatList;if(L){let a=e.get(`${x}`);e=new Map,e.set(x,a)}W.width=M.width;let a=T,t=Math.ceil(e.size/a);W.height=t*O*2,j.fillStyle="white",j.fillRect(0,0,W.width,W.height);let l=0,n=Array.from(e);for(let r=0;r<n.length;r++){r%a==0&&(l=0);let e=Math.ceil((r+1)/a);j.fillStyle=n[r][1][0];let t=P*l+E+P/2-(O-10)/2,i=2*O*(e-1)+10,o=t+O/2,s=i+O/2;p.drawRoundedRect(j,t,i,O,O,20,n[r][1][0],S);let c=Math.floor(O/4)+4;j.font=`bold ${c}px PixelFont`,j.fillStyle=G(n[r][1][0]),j.textAlign="center",j.fillText(n[r][0],o,s+c/2-2),j.fillStyle="black",j.textAlign="center";let d=t+O/2,g=i+O/2+5+O;j.fillText(n[r][1][1],d,g-8),l++}B.height=B.height+W.height,R.drawImage(M,40,40+H),R.drawImage(V,40,M.height+40+H),W.height>0&&R.drawImage(W,40,M.height+V.height+40+H)}R.fillStyle="white",R.fillRect(0,B.height-U,B.width,U),R.fillRect(0,0,B.width,40+H),R.fillRect(0,40+H,40,B.height-80),R.fillRect(B.width-40,40+H,40,B.height-80);let N=Math.floor(O/4)+2;R.font=`normal ${N}px PixelFont`,R.textAlign="center";const K=R.createLinearGradient(0,0,B.width,0);if(K.addColorStop(0,"#FFD700"),K.addColorStop(.25,"#FFEC8B"),K.addColorStop(.5,"#FFA500"),K.addColorStop(.75,"#FFEC8B"),K.addColorStop(1,"#FFD700"),R.fillStyle=K,R.fillText("图纸来源 像素格子",B.width/2,B.height-U/2),h.pindouBlockWidth<30&&(N=O/3+2),u&&(R.font=`bold ${N}px PixelFont`,R.textAlign="start",R.fillStyle="#000000",R.fillText(`${h.projectData.projectName}`,45,(H+40)/2+N/2)),m&&(R.font=`bold ${N-2}px PixelFont`,R.textAlign="end",R.fillStyle="#808080",R.fillText(`${ge()}`,B.width-45,(H+40)/2+N/2)),!m&&!u){const e=document.createElement("canvas"),a=e.getContext("2d");e.width=B.width,e.height=B.height-H,a.drawImage(B,0,H,B.width,e.height,0,0,e.width,e.height),B.height=B.height-H,R.clearRect(0,0,B.width,B.height),R.drawImage(e,0,0,B.width,B.height)}if(y){R.font=`normal ${v}px PixelFont`,R.fillStyle=w;const e=Math.PI/180*-30,a=Math.sqrt(B.width*B.width+B.height*B.height);R.translate(B.width/2,B.height/2),R.rotate(e);const t=400,l=400,n=Math.ceil(a/l),r=Math.ceil(a/t);for(let i=-n;i<n;i++)for(let e=-r;e<r;e++){const n=e*t,r=i*l;n>=-a/2&&n<=a/2&&r>=-a/2&&r<=a/2&&R.fillText(f,n,r)}}b?e(B.toDataURL(h.exportFormat,1)):(Me(B,"拼豆图 - "+h.projectData.projectName+" - 分块"+I),e(!0))})),handleExportFullPindou(e){let{isShowGrid:a,isShowRulers:t,isShowCirclePoint:l,isShowRectPoint:n,rulersBackgroundColor:r,pointColor:i,rulersColor:o,gridColor:s,isShowTongji:c,isShowBrand:d,brandName:g,background:A,isShowProjectName:u,isShowTime:m,isShowTongjiCount:C,isShowWaterMark:y,waterMarkText:f,waterMarkSize:v,waterMarkColor:w,isShowReferenceLine:D,isShowTongjiBorder:S,isHighlight:L,currentSelectColor:x}=e;return new Promise(((e,b)=>{!async function(){const b=document.createElement("canvas"),I=b.getContext("2d"),k=document.createElement("canvas");let B=30,R=t?30:0,M=Re(h.canvasWidth),F=B*h.canvasWidth/M,E=Math.max(Math.floor(F-20),50),T=Math.max(40,E-20),P=Math.max(40,E-120);k.width=h.canvasWidth*B+2*R,k.height=h.canvasHeight*B+2*R,b.width=k.width+80,b.height=k.height+40+P+T;const O=k.getContext("2d");if(O.fillStyle=A,O.fillRect(R,R,h.canvasWidth*B,h.canvasHeight*B),t){O.fillStyle=r,O.fillRect(0,0,k.width,B),O.fillRect(0,k.height-B,k.width,B),O.fillRect(0,B,B,k.height-60),O.fillRect(k.width-B,B,B,k.height-60),O.font="bold 14px Arial",O.textAlign="center",O.fillStyle=o;for(let e=0;e<h.canvasHeight;e++){let a=R/2,t=B*e+45+5,l=k.width-R/2,n=t;O.fillText((e+1).toString(),a,t),O.fillText((h.canvasHeight-e).toString(),l,n)}for(let e=0;e<h.canvasWidth;e++){let a=B*e+45,t=R/2+5,l=a,n=k.height-R/2;O.fillText((e+1).toString(),a,t),O.fillText((h.canvasWidth-e).toString(),l,n+4)}}let U=new Map,H=0;for(let e=0;e<h.pindouBlockList.length;e++){h.pindouBlockList[e].canvas||await p.handleDrawPindouByIndex(e);const a=e%Math.ceil(h.canvasWidth/h.pindouBlockWidth),t=Math.floor(e/Math.ceil(h.canvasWidth/h.pindouBlockWidth));for(let o=0;o<h.pindouBlockList[e].colorArr.length;o++){let r=o%h.pindouBlockWidth,s=Math.floor(o/h.pindouBlockWidth);if("#"===h.pindouBlockList[e].colorArr[o]){let e=r*B+h.pindouBlockWidth*a*B,o=s*B+h.pindouBlockHeight*t*B;if(e+R>=k.width-R||o+R>=k.height-R)continue;O.fillStyle=i,l?(O.beginPath(),O.arc(e+R+15,o+R+15,3,0,2*Math.PI),O.fill()):n&&O.fillRect(e+R+15-3,o+R+15-3,6,6)}}O.drawImage(h.pindouBlockList[e].canvas,R+h.pindouBlockWidth*a*B,R+h.pindouBlockHeight*t*B);for(const[l,n]of h.pindouBlockList[e].colorStatList)if(U.has(l)){let e=n[1];H+=e;let a=U.get(l)[1],t=Number(e+a);U.set(l,[n[0],t])}else U.set(l,n),H+=n[1];const r=Array.from(U.entries());r.sort(((e,a)=>a[1][1]-e[1][1])),U=new Map(r)}if(U.size<=16&&h.canvasWidth>32&&(M=8,F=B*h.canvasWidth/M,E=Math.max(Math.floor(F-20),50),T=Math.max(40,E-20),P=Math.max(40,E-120),b.height=k.height+40+P+T),a){O.strokeStyle=s,O.beginPath(),O.moveTo(0,0),O.lineTo((h.canvasWidth+2)*B,0),O.moveTo(0,h.canvasHeight*B+2*R),O.lineTo((h.canvasWidth+2)*B,h.canvasHeight*B+2*R),O.moveTo(0,0),O.lineTo(0,(h.canvasHeight+2)*B),O.moveTo((h.canvasWidth+2)*B,0),O.lineTo((h.canvasWidth+2)*B,(h.canvasHeight+2)*B),O.stroke();for(let e=0;e<=h.canvasHeight;e++)O.lineWidth=1,D&&e%5==0&&0!==e&&e!==h.canvasHeight&&(O.lineWidth=4),O.beginPath(),O.moveTo(0,e*B+R),O.lineTo((h.canvasWidth+2)*B,e*B+R),O.stroke();for(let e=0;e<=h.canvasWidth;e++)O.lineWidth=1,D&&e%5==0&&0!==e&&e!==h.canvasWidth&&(O.lineWidth=4),O.beginPath(),O.moveTo(e*B+R,0),O.lineTo(e*B+R,(h.canvasHeight+2)*B),O.stroke()}I.drawImage(k,40,40+P);const J=document.createElement("canvas"),Q=J.getContext("2d");if(d){J.width=k.width,J.height=E+20,b.height=b.height+J.height,Q.fillStyle="white",Q.fillRect(0,0,J.width,J.height);let e=Math.floor(E/3)+2;Q.font=`bold ${e}px PixelFont`,Q.fillStyle="black",Q.textAlign="center",Q.fillText(g,J.width/2,J.height/2+20),C&&(Q.font=`bold ${e-2}px PixelFont`,Q.textAlign="end",Q.fillStyle="#808080",Q.fillText(`豆子总数：${H}`,J.width-35,J.height/2+20)),I.drawImage(k,40,40+P),I.drawImage(J,40,k.height+40+P)}else if(!d&&C){J.width=k.width,J.height=E+20,b.height=b.height+J.height,Q.fillStyle="white",Q.fillRect(0,0,J.width,J.height);let e=Math.floor(E/3)+2;Q.font=`bold ${e-2}px PixelFont`,Q.textAlign="end",Q.fillStyle="#808080",Q.fillText(`豆子总数：${H}`,J.width-35,J.height/2+20),I.drawImage(k,40,40+P),I.drawImage(J,40,k.height+40+P)}else J.width=k.width,J.height=60,b.height=b.height+J.height,Q.fillStyle="white",Q.fillRect(0,0,J.width,J.height),I.drawImage(k,40,40+P),I.drawImage(J,40,k.height+40+P);const Y=document.createElement("canvas"),V=Y.getContext("2d");if(c){let e=U;if(L){let a=e.get(`${x}`);e=new Map,e.set(x,a)}Y.width=k.width;let a=M,t=Math.ceil(e.size/a);Y.height=t*E*2,V.fillStyle="white",V.fillRect(0,0,Y.width,Y.height);let l=0,n=Array.from(e);for(let r=0;r<n.length;r++){r%a==0&&(l=0);let e=Math.ceil((r+1)/a);V.fillStyle=n[r][1][0];let t=F*l+R+F/2-(E-10)/2,i=2*E*(e-1)+10,o=t+E/2,s=i+E/2;p.drawRoundedRect(V,t,i,E,E,20,n[r][1][0],S);let c=Math.floor(E/4)+4;V.font=`bold ${c}px PixelFont`,V.fillStyle=G(n[r][1][0]),V.textAlign="center",V.fillText(n[r][0],o,s+c/2-2),V.fillStyle="black",V.textAlign="center";let d=t+E/2,g=i+E/2+5+E;V.fillText(n[r][1][1],d,g-8),l++}b.height=b.height+Y.height,I.drawImage(k,40,40+P),I.drawImage(J,40,k.height+40+P),I.drawImage(Y,40,k.height+J.height+40+P)}I.fillStyle="white",I.fillRect(0,b.height-T,b.width,T),I.fillRect(0,0,b.width,40+P),I.fillRect(0,40+P,40,b.height-80),I.fillRect(b.width-40,40+P,40,b.height-80);let X=Math.floor(E/4)+2;I.font=`normal ${X}px PixelFont`,I.textAlign="center";const W=I.createLinearGradient(0,0,b.width,0);if(W.addColorStop(0,"#FFD700"),W.addColorStop(.25,"#FFEC8B"),W.addColorStop(.5,"#FFA500"),W.addColorStop(.75,"#FFEC8B"),W.addColorStop(1,"#FFD700"),I.fillStyle=W,I.fillText("图纸来源 像素格子",b.width/2,b.height-T/2),h.pindouBlockWidth<30&&(X=E/3+2),u&&(I.font=`bold ${X}px PixelFont`,I.textAlign="start",I.fillStyle="#000000",I.fillText(`${h.projectData.projectName}`,45,(P+40)/2+X/2)),m&&(I.font=`bold ${X-2}px PixelFont`,I.textAlign="end",I.fillStyle="#808080",I.fillText(`${ge()}`,b.width-45,(P+40)/2+X/2)),!m&&!u){const e=document.createElement("canvas"),a=e.getContext("2d");e.width=b.width,e.height=b.height-P,a.drawImage(b,0,P,b.width,e.height,0,0,e.width,e.height),b.height=b.height-P,I.clearRect(0,0,b.width,b.height),I.drawImage(e,0,0,b.width,b.height)}if(y){I.font=`normal ${v}px PixelFont`,I.fillStyle=w;const e=Math.PI/180*-30,a=Math.sqrt(b.width*b.width+b.height*b.height);I.translate(b.width/2,b.height/2),I.rotate(e);const t=400,l=400,n=Math.ceil(a/l),r=Math.ceil(a/t);for(let i=-n;i<n;i++)for(let e=-r;e<r;e++){const n=e*t,r=i*l;n>=-a/2&&n<=a/2&&r>=-a/2&&r<=a/2&&I.fillText(f,n,r)}}Me(b,"拼豆图 - "+h.projectData.projectName),e(!0)}()}))},async handleExportPindou(e,a){if(0===a.type)return await p.handleExportCurrentBlockPindou(e,a),void e();if(1===a.type){const l=[];for(let n=0;n<h.pindouBlockList.length;n++)try{h.pindouBlockList[n].canvas||await p.handleDrawPindouByIndex(n);let t=await p.handleExportCurrentBlockPindou(e,a,!0,n);l.push(t)}catch(t){e()}return 1===l.length?Fe(l[0],`拼豆图 - ${h.projectData.projectName}`):Ee(`拼豆图 - ${h.projectData.projectName}`,l),void e()}await p.handleExportFullPindou(a),e()},drawRoundedRect(e,a,t,l,n,r,i,o=!1){e.beginPath(),e.moveTo(a+r,t),e.lineTo(a+l-r,t),e.quadraticCurveTo(a+l,t,a+l,t+r),e.lineTo(a+l,t+n-r),e.quadraticCurveTo(a+l,t+n,a+l-r,t+n),e.lineTo(a+r,t+n),e.quadraticCurveTo(a,t+n,a,t+n-r),e.lineTo(a,t+r),e.quadraticCurveTo(a,t,a+r,t),e.closePath(),e.fill(),o&&(e.lineWidth=2,e.strokeStyle="#101010",e.stroke())},addDrawRecord(e,a=!0){if(e[0]+e[1]*h.canvasWidth>=h.canvasWidth*h.canvasHeight)return;let t=e[0]+"/"+e[1],l=e[2],n=De(l),r=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData,i=r[t],o=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerNewData;if("0000"!==n.join("")){let a=n,l=a[0],s=a[1],c=a[2],d=h.layerAlpha/100,g=j([l,s,c,d]);r[t]=g,o[i]&&o[i].has(t)&&o[i].delete(t),o[g]?o[g].has(t)||o[g].set(t,[e[0],e[1]]):(o[g]=new Map,o[g].set(t,[e[0],e[1]]))}a&&(h.FrameTimer&&clearTimeout(h.FrameTimer),h.FrameTimer=setTimeout((()=>{p.handleLayerImg(),p.handleFrameImg(h.ctx1)}),200))},removeDrawRecord(e,a=!0){let t=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerNewData,l=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerData;e[0],e[1],h.canvasWidth;let n=e[0]+"/"+e[1],r=l[n];r&&(delete l[n],t[r]&&t[r].has(n)&&t[r].delete(n),a&&p.reDraw())},handlePindouHighlight(e){if(!e.isHighlight)return h.pindouHighlight=null,void p.handleDrawPindou(h.ctx1);h.pindouHighlight=e,p.handleDrawPindou(h.ctx1,e)},handlePindouBlockHighlight(e){if(!h.pinDouMode)return;if(p.handleDrawGridLine(),!e)return;let{startCol:a,endCol:t,startRow:l,endRow:n}=e,r=a*h.pindouScaleValue,i=t*h.pindouScaleValue,o=l*h.pindouScaleValue,s=i-r,c=n*h.pindouScaleValue-o;h.pindouHighlightOptions={startCol:a,endCol:t,startRow:l,endRow:n},h.ctx4.save(),h.ctx4.beginPath(),h.ctx4.rect(0,0,h.canvas.width,h.canvas.height),h.ctx4.rect(r,o,s,c),h.ctx4.clip("evenodd"),h.ctx4.fillStyle="rgba(0, 0, 0, 0.7)",h.ctx4.fillRect(0,0,h.canvas.width,h.canvas.height),h.ctx4.restore()},handleChangePindouBlock(e){h.currentPindouIndex=e,p.handleDrawPindou(h.ctx1),t.$refs.PindouDialog.handleUpdateCurrentPindouBlockColorList(h.pindouBlockList[h.currentPindouIndex].colorStatList)},async handleDrawPindouByIndex(e){let a=h.pindouBlockList[e];if(!h.pindouBlockList[e].canvas){let t=await p.handleNearestNeighborResize(h.pindouBlockWidth,h.pindouBlockHeight,h.pindouScaleValue,a.blockArr,!1,"",!0);const l=document.createElement("canvas");l.width=h.canvas.width,l.height=h.canvas.height;const n=l.getContext("2d");h.isShowPindouShadow?(n.shadowColor="rgba(0, 0, 0, 0.4)",n.shadowBlur=10,n.shadowOffsetX=5,n.shadowOffsetY=5):(n.shadowColor="rgba(0, 0, 0, 0)",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0),null==n||n.drawImage(t,0,0);let r=0;n.shadowColor="rgba(0, 0, 0, 0)",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(let e=0;e<a.colorArr.length;e++){e%h.pindouBlockWidth==0&&(r=0);let t=Math.ceil((e+1)/h.pindouBlockWidth),l=4*e,i=a.colorArr[e];if("#"===i){r++;continue}let o=j([a.blockArr[l],a.blockArr[l+1],a.blockArr[l+2],a.blockArr[l+3]]),s=~~(h.pindouScaleValue/2);n.font=`400 ${s}px Arial`;let c=~~n.measureText(i).width;s=Le(c,s),n.font=`400 ${s}px Arial`,c=~~n.measureText(i).width,n.fillStyle=G(o);let d=r*h.pindouScaleValue,g=(t-1)*h.pindouScaleValue;const A=d+(h.pindouScaleValue-c)/2,u=g+(h.pindouScaleValue-s)/2+s;n.fillText(i,~~A,~~u),r++}h.pindouBlockList[e].canvas=l,h.pindouBlockList[e].ctx=n}},handleDrawPindouShadow(e=h.isShowPindouShadow){h.isShowPindouShadow=e,p.handleDrawPindou(h.ctx1,h.pindouHighlight,"shadow")},async handleDrawPindou(e=h.ctx1,a=h.pindouHighlight,l=""){if(a&&1===a.type&&(!a.selectedObj.col||!a.selectedObj.row))return t.$message.warning("缺少位置坐标无法高亮当前像素颜色，请在画布中选择颜色具体位置");e.clearRect(0,0,h.canvas.width,h.canvas.height);let n=h.pindouBlockList[h.currentPindouIndex],r=await p.handleNearestNeighborResize(h.pindouBlockWidth,h.pindouBlockHeight,h.pindouScaleValue,n.blockArr,!1,"",!0);const i=document.createElement("canvas");i.width=h.canvas.width,i.height=h.canvas.height;const o=i.getContext("2d");h.isShowPindouShadow?(o.shadowColor="rgba(0, 0, 0, 0.4)",o.shadowBlur=10,o.shadowOffsetX=5,o.shadowOffsetY=5):(o.shadowColor="rgba(0, 0, 0, 0)",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0),null==o||o.drawImage(r,0,0);let s=0;o.shadowColor="rgba(0, 0, 0, 0)",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;for(let t=0;t<n.colorArr.length;t++){t%h.pindouBlockWidth==0&&(s=0);let e=Math.ceil((t+1)/h.pindouBlockWidth),l=4*t,r=n.colorArr[t];if("#"===r){s++;continue}let i=j([n.blockArr[l],n.blockArr[l+1],n.blockArr[l+2],n.blockArr[l+3]]);if(a){if(a&&1===a.type){if(a.selectedObj.col+a.selectedObj.row*h.pindouBlockWidth===t){let a=~~(h.pindouScaleValue/2);o.font=`400 ${a}px Arial`;let t=~~o.measureText(r).width;a=Le(t,a),o.font=`400 ${a}px Arial`,t=~~o.measureText(r).width,o.fillStyle=G(i);let l=s*h.pindouScaleValue,n=(e-1)*h.pindouScaleValue;const c=l+(h.pindouScaleValue-t)/2,d=n+(h.pindouScaleValue-a)/2+a;o.fillText(r,~~c,~~d),o.beginPath(),o.moveTo(~~l,~~n),o.lineTo(~~l+h.pindouScaleValue,~~n),o.lineTo(~~l+h.pindouScaleValue,~~n+h.pindouScaleValue),o.lineTo(~~l,~~n+h.pindouScaleValue),o.lineTo(~~l,~~n),o.closePath(),o.setLineDash([5,3]),o.strokeStyle=G(i),o.lineWidth=2,o.stroke();break}s++}else if(a&&2===a.type)if(a.selectedObj.name===r){let a=~~(h.pindouScaleValue/2);o.font=`400 ${a}px Arial`;let t=~~o.measureText(r).width;a=Le(t,a),o.font=`400 ${a}px Arial`,t=~~o.measureText(r).width,o.fillStyle=G(i);let l=s*h.pindouScaleValue,n=(e-1)*h.pindouScaleValue;const c=l+(h.pindouScaleValue-t)/2,d=n+(h.pindouScaleValue-a)/2+a;o.fillText(r,~~c,~~d),s++,o.beginPath(),o.moveTo(~~l,~~n),o.lineTo(~~l+h.pindouScaleValue,~~n),o.lineTo(~~l+h.pindouScaleValue,~~n+h.pindouScaleValue),o.lineTo(~~l,~~n+h.pindouScaleValue),o.lineTo(~~l,~~n),o.closePath(),o.setLineDash([5,3]),o.strokeStyle=G(i),o.lineWidth=2,o.stroke()}else{let a=~~(h.pindouScaleValue/2);o.font=`400 ${a}px Arial`;let t=~~o.measureText(r).width;a=Le(t,a),o.font=`400 ${a}px Arial`,t=~~o.measureText(r).width,o.fillStyle=G(i);let l=s*h.pindouScaleValue,n=(e-1)*h.pindouScaleValue;const c=l+(h.pindouScaleValue-t)/2,d=n+(h.pindouScaleValue-a)/2+a;o.fillText(r,~~c,~~d),o.fillStyle="rgba(197, 197, 197, 0.8)",o.fillRect(~~l,~~n,h.pindouScaleValue,h.pindouScaleValue),s++}}else{let a=~~(h.pindouScaleValue/2);o.font=`400 ${a}px Arial`;let t=~~o.measureText(r).width;a=Le(t,a),o.font=`400 ${a}px Arial`,t=~~o.measureText(r).width,o.fillStyle=G(i);let l=s*h.pindouScaleValue,n=(e-1)*h.pindouScaleValue;const c=l+(h.pindouScaleValue-t)/2,d=n+(h.pindouScaleValue-a)/2+a;o.fillText(r,~~c,~~d),s++}}h.pindouBlockList[h.currentPindouIndex].canvas=i,h.pindouBlockList[h.currentPindouIndex].ctx=o,e.drawImage(i,0,0),h.loading=!1},reDrawPartV2(e){let a=Object.keys(e);for(let t=0;t<a.length;t++){h.ctx1.fillStyle=a[t];let l=e[a[t]];for(const[e,a]of l){let e=a,t=e[0]*h.scale,l=e[1]*h.scale;h.ctx1.fillRect(t,l,h.scale,h.scale)}}p.reDrawSelectData()},reDrawPart(e){for(let a=0;a<e.length;a++){if(e[a][0]>=h.canvasWidth||e[a][1]>=h.canvasHeight||e[a][0]<0||e[a][1]<0)continue;let t=e[a][0]*h.scale,l=e[a][1]*h.scale;h.ctx1.fillStyle=e[a][2],h.ctx1.fillRect(t,l,h.scale,h.scale)}p.reDrawSelectData()},reDrawV2(e,a=!0,t=!0,l=h.currentLayerIndex,n=!1){let r=h.drawRecord[h.currentFrameIndex].layer;if(n||h.ctx1.translate(0,0),a&&h.ctx1.clearRect(0,0,h.canvas.width,h.canvas.height),"top"===e){for(let i=0;i<l;i++)if(r[i].isRender)for(let e=0;e<r[i].layerData.length;e++)if(!(r[i].layerData[e][0]>=h.canvasWidth||r[i].layerData[e][1]>=h.canvasHeight||r[i].layerData[e][0]<0||r[i].layerData[e][1]<0)&&r[i].layerData[e][2]!==h.emptyColor){let a=r[i].layerData[e][0]*h.scale,t=r[i].layerData[e][1]*h.scale;h.ctx1.fillStyle=r[i].layerData[e][2],h.ctx1.fillRect(a,t,h.scale,h.scale)}}else if("middle"===e){if(r[l].isRender&&t)for(let i=0;i<r[l].layerData.length;i++)if(!(r[l].layerData[i][0]>=h.canvasWidth||r[l].layerData[i][1]>=h.canvasHeight||r[l].layerData[i][0]<0||r[l].layerData[i][1]<0)&&r[l].layerData[i][2]!==h.emptyColor){let e=r[l].layerData[i][0]*h.scale,a=r[l].layerData[i][1]*h.scale;h.ctx1.fillStyle=r[l].layerData[i][2],h.ctx1.fillRect(e,a,h.scale,h.scale)}}else if("bottom"===e)for(let i=r.length-1;i>l;i--)if(r[i].isRender)for(let e=0;e<r[i].layerData.length;e++)if(!(r[i].layerData[e][0]>=h.canvasWidth||r[i].layerData[e][1]>=h.canvasHeight||r[i].layerData[e][0]<0||r[i].layerData[e][1]<0)&&r[i].layerData[e][2]!==h.emptyColor){let a=r[i].layerData[e][0]*h.scale,t=r[i].layerData[e][1]*h.scale;h.ctx1.fillStyle=r[i].layerData[e][2],h.ctx1.fillRect(a,t,h.scale,h.scale)}},async reDrawV3(e,a=h.currentLayerIndex){let t=h.drawRecord[h.currentFrameIndex].layer;if("bottom"===e){for(let l=t.length-1;l>a;l--)if(t[l].isRender){let e=t[l].layerId;h.ctx1.drawImage(h.layerCrossList[e].layerCanvas,0,0);for(let a=0;a<t[l].mindLayerList.length;a++){let n=h.layerCrossList[e].mindLayerList[t[l].mindLayerList[a]];n.isHide||h.ctx1.drawImage(n.mindCanvas,n.left,n.top)}}}else if("middle"===e){if(t[a].isRender){let e=t[a].layerId;h.ctx1.drawImage(h.layerCrossList[e].layerCanvas,0,0);for(let a=0;a<t[e].mindLayerList.length;a++){let l=h.layerCrossList[e].mindLayerList[t[e].mindLayerList[a]];l.isHide||h.ctx1.drawImage(l.mindCanvas,l.left,l.top)}}}else if("top"===e)for(let l=a-1;l>=0;l--)if(t[l].isRender){let e=t[l].layerId;h.ctx1.drawImage(h.layerCrossList[e].layerCanvas,0,0);for(let a=0;a<t[l].mindLayerList.length;a++){let n=h.layerCrossList[e].mindLayerList[t[l].mindLayerList[a]];n.isHide||h.ctx1.drawImage(n.mindCanvas,n.left,n.top)}}},async reDraw(e=!0,a=!0,t=!0,l=!0){h.ctx1.clearRect(0,0,h.canvas.width,h.canvas.height),h.drawRecord.length-1<h.currentFrameIndex&&(h.currentFrameIndex=h.drawRecord.length-1);let n=h.drawRecord[h.currentFrameIndex].layer,r=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerId;const i=performance.now();for(let o=n.length-1;o>=0;o--)if((t||n[o].layerId!==r)&&n[o].isRender){let e=n[o].layerId;h.ctx1.drawImage(h.layerCrossList[e].layerCanvas,0,0);for(let a=0;a<n[o].mindLayerList.length;a++){let t=h.layerCrossList[e].mindLayerList[n[o].mindLayerList[a]];(l||n[o].layerId!==r||t.mindId!==h.currentSelectMindId)&&(t.isHide||h.ctx1.drawImage(t.mindCanvas,t.left,t.top))}}performance.now();e&&(h.FrameTimer&&clearTimeout(h.FrameTimer),h.FrameTimer=setTimeout((()=>{p.handleFrameImg(h.ctx2,a)}),200))},stop(e){if(!e)return;let a=h.canvas.getBoundingClientRect(),t=Math.floor((((null==e?void 0:e.touches)&&(null==e?void 0:e.touches.length)?e.touches[0].clientY:e.clientY)-a.top)/h.layerScale),l=Math.floor((((null==e?void 0:e.touches)&&(null==e?void 0:e.touches.length)?e.touches[0].clientX:e.clientX)-a.left)/h.layerScale);if(h.pinDouMode&&(t=Math.floor(e.offsetY/h.pindouScaleValue),l=Math.floor(e.offsetX/h.pindouScaleValue)),h.isDrawing&&(h.isDoubleFingersMoving||p.draw(e),h.isDrawing=!1,p.handleFrameImg(h.ctx1),h.drawList=[]),h.isErasering){if(!h.isDoubleFingersMoving)if(h.isEnableQuickEraser){const e=p.getPixelColorByCoords(h.layerCrossList[p.getCurrentLayerId()].layerData,l,t);if("0000"===e.join(""))return;p.fillChunkSelectV2(l,t,e,!0)}else p.draw(e);h.isErasering=!1,h.isEnableEraserTrack&&p.handleDrawReferenceLine(),h.removeDrawList.length&&p.handleFrameImg(h.ctx1),h.removeDrawList=[]}if(p.handleStrawTool(l,t),p.handleBucketTool(l,t),p.handlePindouTool(l,t),h.isScale=!1,h.isDragging&&(h.isDragging=!1),h.isMoving&&(h.isMoving=!1,p.handleAddHistory(),h.isShowReferenceLine=!1),h.isMovingPindouBrush&&(h.isMovingPindouBrush=!1),h.isSelecting){if(!h.isDoubleFingersMoving)if("select"===h.selectType)p.draw(e);else if("quickSelect"===h.selectType){let e=j(p.getPixelColorByCoords(h.layerCrossList[p.getCurrentLayerId()].layerData,l,t));if(e!==h.emptyColor){let a=W(e);a[3]=255*a[3],p.fillChunkSelectV2(l,t,a)}}if(!h.selectData.isMoving)return void(h.isSelecting=!1);h.isSelecting=!1,h.selectData.isMoving=!1,h.selectData.x===l&&h.selectData.y===t||(h.selectData.isCopySelect=!1,h.selectData.selectCanvasObj.croppedLayerData=null)}if(h.isSelectDraging&&11!==h.currentTool){h.isSelectDraging=!1;let e=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex];if(e.isRender){let a=Math.min(h.selectData.x,h.selectData.endX),t=Math.max(h.selectData.x,h.selectData.endX),l=Math.min(h.selectData.y,h.selectData.endY);const n=t-a,r=Math.max(h.selectData.y,h.selectData.endY)-l;if(n<=0||r<=0)return;const i=h.layerCrossList[e.layerId].layerCtx.getImageData(a,l,n,r),o=i.data;h.selectData.selectCanvasObj.ctx.putImageData(i,a,l);let s=h.selectData.selectCanvasObj.selectCtx.getImageData(a,l,n,r),c=s.data,d=W(h.selectActiveColor);for(let e=0;e<o.length;e+=4)0!==o[e+3]&&(c[e]=d[0],c[e+1]=d[1],c[e+2]=d[2],c[e+3]=255*d[3],o[e]=0,o[e+1]=0,o[e+2]=0,o[e+3]=0);h.selectData.selectCanvasObj.croppedLayerData&&h.selectData.selectCanvasObj.croppedLayerData.length?h.selectData.selectCanvasObj.croppedLayerData.push({croppedImageData:i,minX:a,minY:l}):h.selectData.selectCanvasObj.croppedLayerData=[{croppedImageData:i,minX:a,minY:l}],h.selectData.selectCanvasObj.selectCtx.putImageData(s,a,l),p.reDraw(!1),h.ctx1.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.ctx1.drawImage(h.selectData.selectCanvasObj.selectCanvas,0,0)}p.handleDrawReferenceLine()}else if(h.isSelectDraging&&11===h.currentTool){h.isSelectDraging=!1;let e=Math.min(h.selectData.x,h.selectData.endX),a=Math.max(h.selectData.x,h.selectData.endX),t=Math.min(h.selectData.y,h.selectData.endY),l=Math.max(h.selectData.y,h.selectData.endY);const n=Math.floor(a-e)+1,r=Math.floor(l-t)+1;if(n<=0||r<=0)return;h.loading=!0;for(let i=0;i<h.drawRecord.length;i++)for(let a=0;a<h.drawRecord[i].layer.length;a++){let l=h.drawRecord[i].layer[a];const o=h.layerCrossList[l.layerId].layerCtx.getImageData(e,t,n,r);h.layerCrossList[l.layerId].layerCanvas.width=n,h.layerCrossList[l.layerId].layerCanvas.height=r,h.layerCrossList[l.layerId].layerCtx.putImageData(o,0,0)}h.canvasWidth=n,h.canvasHeight=r,(h.canvasHeight>100||h.canvasWidth>100)&&(h.isEnableCanvasGrid=!1),p.computeScale(),h.canvasBeginPos.centerX=h.canvasBeginPos.x+h.scale*h.canvasWidth/2,h.canvasBeginPos.centerY=h.canvasBeginPos.y+h.scale*h.canvasHeight/2,p.drawPixelArea(!0),p.handleSetCanvasScale(),p.reDraw(),p.handleLayerAndFrameHighRender(),h.loading=!1}h.isDoubleFingersMoving||3!==h.currentTool||p.saveShapeData()},leave(){p.stop(),h.canvas.className=""},reDrawSelectData(e=h.canvasBeginPos){if(h.isScaling)return;if(8!==h.currentTool)return;h.ctx1.lineWidth=1,h.ctx1.strokeStyle=h.selectActiveColor;let a=Object.keys(h.selectData.selectMapList);for(let t=0;t<a.length;t++){h.ctx1.fillStyle=a[t];let e=h.selectData.selectMapList[a[t]];for(const[a,t]of e){let e=t;if(e[0]>=h.canvasWidth||e[1]>=h.canvasHeight||e[0]<0||e[1]<0)continue;let a=e[0]*h.scale,l=e[1]*h.scale;h.ctx1.fillRect(a,l,h.scale,h.scale),h.ctx1.strokeRect(a+1,l+1,h.scale-2,h.scale-2)}}},saveShapeData(){if(h.isDrawShape){if("circle"===h.currentDrawShape){let e=h.layerCrossList[p.getCurrentLayerId()].layerData,a=p.drawCircle(h.drawShapeData.startX,h.drawShapeData.startY,h.drawShapeData.endX,h.drawShapeData.endY,h.brushSize);for(let t=0;t<a.length;t++){if(a[t][0]>h.canvasWidth||a[t][1]>h.canvasHeight||a[t][0]<0||a[t][1]<0)return;if(p.getCurrentLayerIsLock()){0===e[4*(a[t][0]+a[t][1]*h.canvasWidth)+3]&&h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillRect(a[t][0],a[t][1],h.scale,h.scale)}else h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillRect(a[t][0],a[t][1],h.scale,h.scale)}}else if("line"===h.currentDrawShape){let e=h.layerCrossList[p.getCurrentLayerId()].layerData,a=p.drawLineV2(h.drawShapeData.startX,h.drawShapeData.startY,h.drawShapeData.endX,h.drawShapeData.endY,h.brushSize);for(let t=0;t<a.length;t++){if(a[t][0]>h.canvasWidth||a[t][1]>h.canvasHeight||a[t][0]<0||a[t][1]<0)return;if(p.getCurrentLayerIsLock()){0===e[4*(a[t][0]+a[t][1]*h.canvasWidth)+3]&&h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillRect(a[t][0],a[t][1],h.scale,h.scale)}else h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillRect(a[t][0],a[t][1],h.scale,h.scale)}}else if("rect"===h.currentDrawShape||"fillRect"===h.currentDrawShape){"rect"===h.currentDrawShape?me(h.brushSize)?h.layerCrossList[p.getCurrentLayerId()].layerCtx.strokeRect(h.drawShapeData.startX-.5,h.drawShapeData.startY-.5,h.drawShapeData.endX-h.drawShapeData.startX,h.drawShapeData.endY-h.drawShapeData.startY):h.layerCrossList[p.getCurrentLayerId()].layerCtx.strokeRect(h.drawShapeData.startX,h.drawShapeData.startY,h.drawShapeData.endX-h.drawShapeData.startX,h.drawShapeData.endY-h.drawShapeData.startY):"fillRect"===h.currentDrawShape&&h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillRect(h.drawShapeData.startX,h.drawShapeData.startY,h.drawShapeData.endX-h.drawShapeData.startX,h.drawShapeData.endY-h.drawShapeData.startY);let e=h.layerCrossList[p.getCurrentLayerId()].layerData;if(p.getCurrentLayerIsLock()){let a=[];"rect"===h.currentDrawShape?a=Te(h.drawShapeData.startX,h.drawShapeData.startY,h.drawShapeData.endX,h.drawShapeData.endY,h.ctx1.lineWidth,h.canvasWidth,h.canvasHeight):"fillRect"===h.currentDrawShape&&(a=Pe(h.drawShapeData.startX,h.drawShapeData.startY,h.drawShapeData.endX,h.drawShapeData.endY,h.canvasWidth,h.canvasHeight));for(let t=0;t<a.length;t++){let l=4*(a[t][0]+a[t][1]*h.canvasWidth);0!==e[l+3]&&(h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillStyle=`rgba(${e[l]}, ${e[l+1]}, ${e[l+2]}, ${e[l+3]})`,h.layerCrossList[p.getCurrentLayerId()].layerCtx.clearRect(a[t][0],a[t][1],1,1),h.layerCrossList[p.getCurrentLayerId()].layerCtx.fillRect(a[t][0],a[t][1],1,1))}}}p.reDraw(),h.drawShapeList=[],h.curveEndPos=[],h.curveType.pressKey="0",h.isDrawShape=!1,h.drawShapeData={list:[],startX:0,startY:0,endX:0,endY:0,maxX:0,maxY:0,minX:-1,minY:-1}}},addCursorClass(e=null){0===h.currentTool?h.canvas.classList.add("brush-cursor"):1===h.currentTool?h.canvas.classList.add("eraser-cursor"):2===h.currentTool?h.canvas.classList.add("straw-cursor"):3===h.currentTool?-1!==h.currentDrawShape.toLowerCase().indexOf("rect")?h.canvas.classList.add("rect-cursor"):"line"===h.currentDrawShape||"curve"===h.currentDrawShape?h.canvas.classList.add("brush-cursor"):-1!==h.currentDrawShape.toLowerCase().indexOf("circle")&&h.canvas.classList.add("circle-cursor"):4===h.currentTool?h.canvas.classList.add("bucket-cursor"):5===h.currentTool&&h.pinDouMode?h.isEnablePindouBrushMode?h.canvas.classList.add("brush-cursor"):h.canvas.classList.add("pindou-cursor"):7===h.currentTool?h.canvas.classList.add("move-cursor"):8===h.currentTool?h.canvas.classList.add("select-cursor"):11===h.currentTool&&h.canvas.classList.add("crop_cursor")},exportPng(){const e=document.createElement("a");e.download="image.png",e.href=h.canvas.toDataURL("image/png"),e.click()},computeScale(e=!0){const a=document.querySelector(".pixelBox");h.baseCanvas.width=null==a?void 0:a.clientWidth,h.baseCanvas.height=null==a?void 0:a.clientHeight;let l=null==a?void 0:a.clientHeight,n=null==a?void 0:a.clientWidth;h.pinDouMode?(h.layerScale=1,h.pindouScaleValue=30,h.canvas.width=Number(h.pindouBlockWidth)*h.pindouScaleValue,h.canvas.height=Number(h.pindouBlockHeight)*h.pindouScaleValue,h.bgCanvas.width=Number(h.pindouBlockWidth)*h.pindouScaleValue,h.bgCanvas.height=Number(h.pindouBlockHeight)*h.pindouScaleValue,h.gridCanvas.width=Number(h.pindouBlockWidth)*h.pindouScaleValue,h.gridCanvas.height=Number(h.pindouBlockHeight)*h.pindouScaleValue):(h.layerScale=Math.min(h.maxScale,Number((Math.floor(Math.min(l,n))/Math.max(h.canvasWidth,h.canvasHeight)).toFixed(1))),h.layerOriginRectData.scale=h.layerScale,h.layerOriginRectData.width=h.layerScale*h.canvasWidth,h.layerOriginRectData.height=h.layerScale*h.canvasHeight,h.pindouScaleValue=1,h.scale=1,h.canvas.width=Number(h.canvasWidth)*h.pindouScaleValue,h.canvas.height=Number(h.canvasHeight)*h.pindouScaleValue,h.bgCanvas.width=Number(h.canvasWidth)*h.pindouScaleValue,h.bgCanvas.height=Number(h.canvasHeight)*h.pindouScaleValue,h.gridCanvas.width=Number(h.canvasWidth)*h.pindouScaleValue,h.gridCanvas.height=Number(h.canvasHeight)*h.pindouScaleValue,h.scaleBoxDom.style.width=h.canvas.width+"px",h.scaleBoxDom.style.height=h.canvas.height+"px",h.realCanvas.width=h.canvas.width,h.realCanvas.height=h.canvas.height,"undefined"!=typeof OffscreenCanvas?h.worker.postMessage({type:0,canvasWidth:h.canvas.width,canvasHeight:h.canvas.height}):t.$message.warning("当前浏览器版本过低，将影响部分功能的使用")),e&&p.setCanvasCenter()},handleCreateLayerCrossData(e="add",a){if("add"===e)return new Promise(((e,t)=>{const l=document.createElement("canvas");l.width=h.canvasWidth,l.height=h.canvasHeight;const n=l.getContext("2d");h.isEnableCanvasSmooth||(n.imageSmoothingEnabled=!1,n.imageSmoothingQuality="none");let r=l.toDataURL(h.exportFormat,1),i=n.getImageData(0,0,l.width,l.height).data;h.layerCrossList[a.layerId]={layerCanvas:l,layerCtx:n,thumbImg:r,layerData:i,mindLayerList:{}},e(!0)}));if("update"===e){if(h.layerCrossList[a.layerId]){h.layerCrossList[a.layerId].layerCanvas.width=h.canvasWidth,h.layerCrossList[a.layerId].layerCanvas.height=h.canvasHeight;let e=h.layerCrossList[a.layerId].layerCanvas.width,t=h.layerCrossList[a.layerId].layerCanvas.height;return new Promise(((l,n)=>{""===a.currentLayerImg?(h.layerCrossList[a.layerId].thumbImg=h.layerCrossList[a.layerId].layerCanvas.toDataURL(h.exportFormat,1),h.layerCrossList[a.layerId].layerData=h.layerCrossList[a.layerId].layerCtx.getImageData(0,0,e,t).data,l(!0)):createImageBitmap(Oe(a.currentLayerImg)).then((n=>{h.layerCrossList[a.layerId].layerCtx.drawImage(n,0,0),h.layerCrossList[a.layerId].thumbImg=h.layerCrossList[a.layerId].layerCanvas.toDataURL(h.exportFormat,1),h.layerCrossList[a.layerId].layerData=h.layerCrossList[a.layerId].layerCtx.getImageData(0,0,e,t).data,l(!0)}))}))}{const e=document.createElement("canvas");e.width=h.canvasWidth,e.height=h.canvasHeight;const t=e.getContext("2d");return h.isEnableCanvasSmooth||(t.imageSmoothingEnabled=!1,t.imageSmoothingQuality="none"),new Promise(((l,n)=>{if(""===a.currentLayerImg){let n=e.toDataURL(h.exportFormat,1),r=t.getImageData(0,0,e.width,e.height).data,i=a.mindLayerList.filter((e=>0!==e)),o={};if(i.length)for(let e=0;e<i.length;e++)o[i[e].mindId]=i[e];h.layerCrossList[a.layerId]={layerCanvas:e,layerCtx:t,thumbImg:n,layerData:r,mindLayerList:o},l(!0)}else createImageBitmap(Oe(a.currentLayerImg)).then((n=>{t.drawImage(n,0,0);let r=e.toDataURL(h.exportFormat,1),i=t.getImageData(0,0,e.width,e.height).data,o=a.mindLayerList.filter((e=>0!==e)),s={};if(o.length)for(let e=0;e<o.length;e++)s[o[e].mindId]=o[e];h.layerCrossList[a.layerId]={layerCanvas:e,layerCtx:t,thumbImg:r,layerData:i,mindLayerList:s},l(!0)}))}))}}},async handleAddLayer(){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(h.isScaling&&p.handleCancelScale(),h.drawRecord[h.currentFrameIndex].layer.length>h.maxLayer)return t.$message.warning("图层数量达到上限");let e=h.historyLayerNameIndex[h.historyLayerNameIndex.length-1]+1,a={layerId:ue.v4(),layerName:`图层${e+1}`,alpha:100,isLock:!1,currentLayerImg:"",isExpandMindList:!0,mindLayerList:[],isRender:!0};await p.handleCreateLayerCrossData("add",a),a.currentLayerImg=h.layerCrossList[a.layerId].thumbImg,h.historyLayerNameIndex.push(e),h.drawRecord[h.currentFrameIndex].layer.unshift(a),p.handleChangeLayer(0),p.handleAddHistory()},handleLayerMerge(){if(h.isScaling&&p.handleCancelScale(),8===h.currentTool&&p.handleCancelSelect(),h.selectLayerList.length>1){h.selectLayerList.sort(((e,a)=>a-e));let e=h.drawRecord[h.currentFrameIndex].layer[h.selectLayerList[0]];for(let t=1;t<h.selectLayerList.length;t++){let a=h.drawRecord[h.currentFrameIndex].layer[h.selectLayerList[t]].layerId;h.layerCrossList[e.layerId].layerCtx.drawImage(h.layerCrossList[a].layerCanvas,0,0),e.mindLayerList.push(...h.drawRecord[h.currentFrameIndex].layer[h.selectLayerList[t]].mindLayerList),h.layerCrossList[e.layerId].mindLayerList=o(o({},h.layerCrossList[e.layerId].mindLayerList),h.layerCrossList[a].mindLayerList),h.drawRecord[h.currentFrameIndex].layer.splice(h.selectLayerList[t],1)}let a=h.drawRecord[h.currentFrameIndex].layer.findIndex((a=>a.layerId===e.layerId));p.handleChangeLayer(a),p.reDraw()}},handleChangeLayer(e){if(h.isScaling&&e!==h.currentLayerIndex&&p.handleCancelScale(),h.pinDouMode)return h.currentLayerIndex=e,h.currentLayerId=p.getCurrentLayerId(),h.historyLayerIndexRecord.push(h.currentLayerId),h.layerAlpha=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].alpha||100,h.selectLayerList=[h.currentLayerIndex],void p.handlePindouEvent();h.isShift?h.selectLayerList.includes(e)||h.selectLayerList.push(e):(p.handleCancelSelectMindObj(),h.currentLayerIndex=e,h.currentLayerId=p.getCurrentLayerId(),h.historyLayerIndexRecord.push(h.currentLayerId),h.layerAlpha=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].alpha||100,h.selectLayerList=[h.currentLayerIndex])},handleChangeLayerVisible(e){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(h.isScaling&&p.handleCancelScale(),e<0){for(let e=0;e<h.drawRecord[h.currentFrameIndex].layer.length;e++)h.drawRecord[h.currentFrameIndex].layer[e].isRender=!h.currentFrameLayerVisible;return h.currentFrameLayerVisible=!h.currentFrameLayerVisible,void p.reDraw(!0,!1)}let a=h.drawRecord[h.currentFrameIndex].layer[e].isRender;h.drawRecord[h.currentFrameIndex].layer[e].isRender=!a,8===h.currentTool&&p.handleCancelSelect(),p.reDraw(!0,!1)},async handleClearLayer(e){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(h.isScaling&&p.handleCancelScale(),8===h.currentTool&&p.handleCancelSelect(),p.handleCancelSelectMindObj(),"all"===e)for(let a=0;a<h.drawRecord[h.currentFrameIndex].layer.length;a++)h.drawRecord[h.currentFrameIndex].layer[a].currentLayerImg="",h.drawRecord[h.currentFrameIndex].layer[a].mindLayerList=[],await p.handleCreateLayerCrossData("update",h.drawRecord[h.currentFrameIndex].layer[a]);else"single"===e&&(h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].currentLayerImg="",h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList=[],await p.handleCreateLayerCrossData("update",h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex]));p.reDraw()},handleLockLayer(e,a){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.drawRecord[h.currentFrameIndex].layer[e].isLock=a},handleDeleteLayer(e){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.isScaling&&p.handleCancelScale(),8===h.currentTool&&p.handleCancelSelect(),h.drawRecord[h.currentFrameIndex].layer.splice(e,1);let a=h.drawRecord[h.currentFrameIndex].layer.findIndex((e=>h.historyLayerIndexRecord[h.historyLayerIndexRecord.length-1]===e.layerId));a<0&&(a=0),h.currentLayerIndex=a,h.layerAlpha=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].alpha||100,h.currentLayerId=p.getCurrentLayerId(),h.selectLayerList=[h.currentLayerIndex],p.reDraw()},async handleCopyLayer(e){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.isScaling&&p.handleCancelScale();let a=JSON.parse(JSON.stringify(h.drawRecord[h.currentFrameIndex].layer[e]));a.layerName=`${a.layerName} Copy`;for(let t=0;t<a.mindLayerList.length;t++){let e=o({},h.layerCrossList[a.layerId].mindLayerList[a.mindLayerList[t]]);e.mindId=ue.v1(),a.mindLayerList[t]=e}a.layerId=ue.v4(),await p.handleCreateLayerCrossData("update",a),a.mindLayerList=a.mindLayerList.map((e=>e.mindId)),h.drawRecord[h.currentFrameIndex].layer.splice(e,0,a),p.handleChangeLayer(e),p.handleAddHistory()},handleDoubleClickLayer(e,a){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.currentEditLayer.index=e,h.currentEditLayer.name=a},handleEditLayerName(){if(""===h.currentEditLayer.name.trim())return t.$message.warning("请填写图层名称");h.drawRecord[h.currentFrameIndex].layer[h.currentEditLayer.index].layerName=h.currentEditLayer.name,h.currentEditLayer.index=-1,h.currentEditLayer.name="",p.handleAddHistory()},handleDoubleClickLayerMind(e,a){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.currentEditLayer.mindIndex=e,h.currentEditLayer.mindName=a},handleEditLayerMindName:()=>h.pinDouMode?t.$message.warning("请先退出拼豆预览模式"):""===h.currentEditLayer.mindName.trim()?t.$message.warning("请填写图层名称"):(h.layerCrossList[p.getCurrentLayerId()].mindLayerList[h.currentEditLayer.mindIndex].mindName=h.currentEditLayer.mindName,h.currentEditLayer.mindIndex=-1,void(h.currentEditLayer.mindName="")),handleMindToPixel(e,a,t,l){if(1===e){let e=h.layerCrossList[l].mindLayerList[a];h.layerCrossList[l].layerCtx.drawImage(e.mindCanvas,e.left,e.top),p.handleDeleteLayerMind(t,l),p.handleLayerImgById(l)}else for(let n=0;n<h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList.length;n++){let e=h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList[n],a=h.layerCrossList[h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerId].mindLayerList[e];h.layerCrossList[h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerId].layerCtx.drawImage(a.mindCanvas,a.left,a.top),p.handleDeleteLayerMind(n,h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].layerId),n--}},handleDeleteLayerMind(e,a){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.isControlMindObj=!1;let l=p.getCurrentLayerIndexById(a);h.drawRecord[h.currentFrameIndex].layer[l].mindLayerList.splice(e,1),p.reDraw()},handleSaveMindForSprite(e,a){let l=h.layerCrossList[a].mindLayerList[e].mindObj,n=ue.v4();g.saveSprite({spriteID:n,spriteImg:l}).then((e=>{e&&t.$message.success(t.$t("message.saveSucceeded"))})).catch((e=>{t.$message.error(t.$t("message.saveFailed"))}))},handleCopyMindObj(e,a,t,l){let n=h.layerCrossList[t].mindLayerList[e];const r=document.createElement("canvas");r.width=n.mindCanvas.width,r.height=n.mindCanvas.height;const i=r.getContext("2d");null==i||i.drawImage(n.mindCanvas,0,0);let o={mindId:ue.v1(),mindObj:n.mindObj,mindCanvas:r,mindCtx:i,isLock:n.isLock,isHide:n.isHide,width:n.width,height:n.height,left:n.left,top:n.top,mindName:`智能对象${Object.keys(h.layerCrossList[t].mindLayerList).length+1}`};h.layerCrossList[t].mindLayerList[o.mindId]=o,h.drawRecord[h.currentLayerIndex].layer[l].mindLayerList.push(o.mindId),p.reDraw()},handleCancelSelectMindObj(){if(!h.isControlMindObj)return;let e=h.layerCrossList[p.getCurrentLayerId()].mindLayerList[h.currentSelectMindId];e&&(e.mindCanvas.width=Math.round(parseFloat(h.scaleStyle.width)),e.mindCanvas.height=Math.round(parseFloat(h.scaleStyle.height)),e.mindCtx.drawImage(h.scaleCanvas,0,0),e.mindObj=e.mindCanvas.toDataURL(h.exportFormat,1),e.width=e.mindCanvas.width,e.height=e.mindCanvas.height,e.left=Math.round(parseFloat(h.scaleStyle.left)),e.top=Math.round(parseFloat(h.scaleStyle.top)),h.scaleStyle.left="0px",h.scaleStyle.top="0px",h.scaleImg="",h.scaleCanvas.width=h.canvasWidth,h.scaleCanvas.height=h.canvasHeight,p.handleResizeStyle(),p.reDraw(!0,!1),h.isControlMindObj=!1,h.currentSelectMindId="0")},handleSelectMindObj(e,a,l){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.currentLayerIndex!==a?(p.handleCancelSelectMindObj(),p.handleChangeLayer(a),h.currentSelectMindId=e):h.currentSelectMindId===e?(p.handleCancelSelectMindObj(),h.currentSelectMindId="0"):(p.handleCancelSelectMindObj(),h.currentSelectMindId=e),setTimeout((()=>{if("0"!==h.currentSelectMindId){let a=h.layerCrossList[p.getCurrentLayerId()].mindLayerList[e];h.ctx5.clearRect(0,0,h.scaleCanvas.width,h.scaleCanvas.height);let t=a.width,l=a.height;h.scaleImg=a.mindObj,h.resizeStyle.width=t*h.layerScale+"px",h.resizeStyle.height=l*h.layerScale+"px",h.scaleStyle.width=t+"px",h.scaleStyle.height=l+"px",h.scaleStyle.left=a.left+"px",h.scaleStyle.top=a.top+"px",h.scaleCanvas.width=t,h.scaleCanvas.height=l,h.ctx5.imageSmoothingEnabled=!1,h.ctx5.imageSmoothingQuality="none",p.reDraw(!1,!1,!0,!1),p.handleResizeStyle(),h.ctx5.drawImage(a.mindCanvas,0,0),h.isControlMindObj=!0}}),500)},handleChangeLayerMindVisible(e,a){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.layerCrossList[a].mindLayerList[e].isHide=!h.layerCrossList[a].mindLayerList[e].isHide,p.reDraw(!0,!1)},async handleExportLayer(e=h.currentFrameIndex,a=h.currentLayerIndex,t=!0,l=1,n=h.exportStyleOptions,r="pic"){let{isShowGrid:i}=n,o=h.drawRecord[e].layer[a].currentLayerImg,s=h.drawRecord[e].layer[a].layerId;if(i){const t=document.createElement("canvas");t.width=h.canvasWidth,t.height=h.canvasHeight;const l=t.getContext("2d");l.drawImage(h.layerCrossList[s].layerCanvas,0,0,t.width,t.height);for(let n=0;n<h.drawRecord[e].layer[a].mindLayerList.length;n++){let t=h.layerCrossList[s].mindLayerList[h.drawRecord[e].layer[a].mindLayerList[n]];t.isHide||l.drawImage(t.mindCanvas,t.left,t.top)}return o=t.toDataURL(h.exportFormat,1),await p.handleExportGridFrame(o,n)}return new Promise(((n,i)=>{h.ctx3.globalAlpha=1,h.realCanvas.width=h.canvasWidth*l,h.realCanvas.height=h.canvasHeight*l,h.ctx3.clearRect(0,0,h.realCanvas.width,h.realCanvas.height);const o=document.createElement("canvas");o.width=h.canvasWidth,o.height=h.canvasHeight;const c=o.getContext("2d");c.drawImage(h.layerCrossList[s].layerCanvas,0,0,o.width,o.height);for(let t=0;t<h.drawRecord[e].layer[a].mindLayerList.length;t++){let l=h.layerCrossList[s].mindLayerList[h.drawRecord[e].layer[a].mindLayerList[t]];l.isHide||c.drawImage(l.mindCanvas,l.left,l.top)}if("gif"===r){const e=c.getImageData(0,0,o.width,o.height),a=e.data;for(let t=0;t<a.length;t+=4){const e=a[t],l=a[t+1],n=a[t+2];0!==a[t+3]&&(0===e&&0===l&&0===n&&(a[t]=16,a[t+1]=16,a[t+2]=16))}c.putImageData(e,0,0)}if(l>1){const e=c.getImageData(0,0,o.width,o.height).data;t?p.handleNearestNeighborResize(h.canvasWidth,h.canvasHeight,l,e,!0,`layer${a+1}`):p.handleNearestNeighborResize(h.canvasWidth,h.canvasHeight,l,e,!1,"",!0).then((e=>{h.ctx3.drawImage(e,0,0)}))}else h.ctx3.drawImage(o,0,0),t&&Me(h.realCanvas,`layer${a+1}`);n(!0)}))},handleImportDragImage(e){if(!t.$config.supportUploadImageType.includes(e.type))return t.$message.warning("导入文件格式不正确");"application"===e.type.split("/")[0]?p.handleImportImageLayer(e,"1"):p.handleImportImageLayer(e,"0")},handleImportSprite(e){const a=new Image;a.src=e,a.onload=function(){p.handleTransfromPngToPixel(a,null,h.currentLayerIndex)}},handleImportImageLayer(e,a,l=1,r={blockH:0,blockW:0,colorThreshold:8,isEnableReduceColor:!0,colorReduceThreshold:5,isEnableVisionMode:!1}){if(8===h.currentTool&&p.handleCancelSelect(),h.isScaling&&p.handleCancelScale(),"0"===a){h.loading=!0;const a=new Image,t=e;a.src=t,a.onload=function(){let e=Math.floor(a.width/l),n=Math.floor(a.height/l);0!==r.blockH&&0!==r.blockW&&(n=Math.floor(a.height/r.blockH),e=Math.floor(a.width/r.blockW)),e>h.canvasWidth||n>h.canvasHeight?p.handleTransfromPngToPixel(a,t,h.currentLayerIndex,!0):a.width<=h.canvasWidth&&a.height<=h.canvasHeight?p.handleTransfromPngToPixel(a,t,h.currentLayerIndex):p.handleTransformPngToPixel2(a,t,h.currentLayerIndex,l,r)}}else h.loading=!0,n.handleExcelToPixel(e,(({tempCanvas:e,tempCtx:a})=>{let t=e.toDataURL(h.exportFormat,1),l=p.getCurrentLayerId(),n=ue.v1();h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList.push(n),h.layerCrossList[l].mindLayerList[n]={mindId:n,mindObj:t,mindCanvas:e,mindCtx:a,isLock:!0,isHide:!1,width:e.width,height:e.height,left:0,top:0,mindName:`智能对象${Object.keys(h.layerCrossList[l].mindLayerList).length+1}`},p.reDraw(),h.loading=!1}),(e=>{h.loading=!1,t.$message.error(e)}),{canvasWidth:h.canvasWidth,canvasHeight:h.canvasHeight})},handleImportLayer(e=h.currentLayerIndex){8===h.currentTool&&p.handleCancelSelect(),h.isScaling&&p.handleCancelScale();const a=document.createElement("input");a.type="file",a.accept="image/png,image/jpg",a.addEventListener("change",(function(){const t=a.files[0];if(t){h.loading=!0;const a=new Image,l=URL.createObjectURL(t);a.src=l,a.onload=function(){a.width>h.canvasWidth||a.height>h.canvasHeight?p.handleTransfromPngToPixel(a,l,e,!0):p.handleTransfromPngToPixel(a,l,e)}}})),document.body.appendChild(a),a.click(),document.body.removeChild(a)},handleTransfromPngToPixel(e,a,l,n=!1){const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const i=r.getContext("2d");if(i.imageSmoothingEnabled=!1,i.imageSmoothingQuality="none",n)return r.width=h.canvasWidth,r.height=h.canvasHeight,void A.resize(e,r,{unsharpAmount:100,unsharpRadius:.5,unsharpThreshold:6}).then((e=>{let t=r.toDataURL(h.exportFormat,1),l=p.getCurrentLayerId(),n=ue.v1();h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList.push(n),h.layerCrossList[l].mindLayerList[n]={mindId:n,mindObj:t,mindCanvas:r,mindCtx:i,isLock:!0,isHide:!1,width:h.canvasWidth,height:h.canvasHeight,left:0,top:0,mindName:`智能对象${Object.keys(h.layerCrossList[l].mindLayerList).length+1}`},p.reDraw(),URL.revokeObjectURL(a),h.loading=!1})).catch((e=>{t.$message.error("图片导入异常"),h.loading=!1}));i.drawImage(e,0,0);let o=r.toDataURL(h.exportFormat,1),s=p.getCurrentLayerId(),c=ue.v1();h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList.push(c),h.layerCrossList[s].mindLayerList[c]={mindId:c,mindObj:o,mindCanvas:r,mindCtx:i,isLock:!0,isHide:!1,width:e.width,height:e.height,left:0,top:0,mindName:`智能对象${Object.keys(h.layerCrossList[s].mindLayerList).length+1}`},p.reDraw(),a&&URL.revokeObjectURL(a),h.loading=!1},handleTransformPngToPixel2(e,a,t,l=1,n={blockH:0,blockW:0,colorThreshold:8,isEnableReduceColor:!0,colorReduceThreshold:5,isEnableVisionMode:!1}){let r=Math.floor(e.width/l),i=Math.floor(e.height/l);0!==n.blockH&&0!==n.blockW&&(r=Math.floor(e.width/n.blockW),i=Math.floor(e.height/n.blockH));const o=document.createElement("canvas");o.width=e.width,o.height=e.height;const s=o.getContext("2d");s.drawImage(e,0,0);const c=s.getImageData(0,0,o.width,o.height).data;h.worker.postMessage({type:108,variables:c,pxSize:l,options:{width:r,height:i,canvasWidth:h.canvasWidth,canvasHeight:h.canvasHeight,imageWidth:e.width,imageHeight:e.height,colorThreshold:n.colorThreshold,isEnableReduceColor:n.isEnableReduceColor,colorReduceThreshold:n.colorReduceThreshold,isEnableVisionMode:n.isEnableVisionMode}}),h.worker.onmessage=e=>{o.width=Math.min(r,h.canvasWidth),o.height=Math.min(i,h.canvasHeight),s.drawImage(e.data.imageBitmap,0,0),a&&URL.revokeObjectURL(a);let t=p.getCurrentLayerId(),l=o.toDataURL(h.exportFormat,1),n=ue.v1();h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList.push(n),h.layerCrossList[t].mindLayerList[n]={mindId:n,mindObj:l,mindCanvas:o,mindCtx:s,isLock:!0,isHide:!1,width:Math.min(r,h.canvasWidth),height:Math.min(i,h.canvasHeight),left:0,top:0,mindName:`智能对象${Object.keys(h.layerCrossList[t].mindLayerList).length+1}`},h.loading=!1,p.reDraw()}},handleChangeLayerAlpha(){h.loading=!0;let e=xe(h.layerCrossList[p.getCurrentLayerId()].layerData);h.worker.postMessage({type:107,variables:e,targetAlpha:h.layerAlpha}),h.worker.onmessage=e=>{if(107!==e.data.type)return;const a=new ImageData(e.data.currentLayerData,h.canvasWidth,h.canvasHeight);h.layerCrossList[p.getCurrentLayerId()].layerCtx.putImageData(a,0,0),h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].alpha=h.layerAlpha,h.loading=!1,p.reDraw()}},handleCopyLayerData(){let e=h.drawRecord[h.LayerMenu.contextData.currentFrameIndex].layer[h.LayerMenu.contextData.index];g.layerCopyData=JSON.parse(JSON.stringify(e)),t.$message.success("复制成功")},async handlePasteLayerData(){if(!g.layerCopyData)return t.$message.warning("数据不存在");let e=JSON.parse(JSON.stringify(g.layerCopyData));h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].currentLayerImg=e.currentLayerImg,await p.handleCreateLayerCrossData("update",h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex]),t.$message.success("粘贴成功"),p.reDraw()},async handleAddFrame(e=!0){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(h.drawRecord.length>=h.maxFrame)return t.$message.warning("帧数量达到上限");8===h.currentTool&&p.handleCancelSelect(),h.isScaling&&p.handleCancelScale();let a=ue.v4();await p.handleCreateLayerCrossData("add",{layerId:a});let l={frameId:ue.v1(),currentFrameImg:null,layer:[{layerId:a,layerName:"图层1",alpha:100,isLock:!1,currentLayerImg:h.layerCrossList[a].thumbImg,isExpandMindList:!0,mindLayerList:[],isRender:!0}]};h.drawRecord.push(l),e&&p.handleChangeFrame(h.drawRecord.length-1)},handleChangeFrame:e=>h.selectData.selectList.length&&e!==h.currentFrameIndex?t.$message.warning("请先取消选中区域"):(h.isScaling&&e!==h.currentFrameIndex&&p.handleCancelScale(),p.handleCancelSelectMindObj(),h.currentFrameIndex=e,h.currentFrameId=p.getCurrentFrameId(),h.historyFrameIndexRecord.push(h.currentFrameId),h.pinDouMode?(h.currentLayerIndex=0,void p.handlePindouEvent()):(p.handleChangeLayer(0),void p.reDraw(!0,!1))),async handleCopyFrame(e,a="copy"){if("copyData"===a)g.frameCopyData=JSON.parse(JSON.stringify(h.drawRecord[e])),t.$message.success("复制成功");else if("pasteData"===a){if(!g.frameCopyData)return t.$message.warning("数据不存在");let a=JSON.parse(JSON.stringify(g.frameCopyData));if(a.frameId===h.drawRecord[e].frameId){h.drawRecord[e]=JSON.parse(JSON.stringify(a));for(let a=0;a<h.drawRecord[e].layer.length;a++)await p.handleCreateLayerCrossData("update",h.drawRecord[e].layer[a])}else{h.drawRecord[e].currentFrameImg=a.currentFrameImg,h.drawRecord[e].layer=a.layer;for(let a=0;a<h.drawRecord[e].layer.length;a++){for(let t=0;t<h.drawRecord[e].layer[a].mindLayerList.length;t++){let l=o({},h.layerCrossList[h.drawRecord[e].layer[a].layerId].mindLayerList[h.drawRecord[e].layer[a].mindLayerList[t]]);l.mindId=ue.v1(),h.drawRecord[e].layer[a].mindLayerList[t]=l}h.drawRecord[e].layer[a].layerId=ue.v4(),await p.handleCreateLayerCrossData("update",h.drawRecord[e].layer[a]),h.drawRecord[e].layer[a].mindLayerList=h.drawRecord[e].layer[a].mindLayerList.map((e=>e.mindId))}}t.$message.success("粘贴成功"),e===h.currentFrameIndex&&p.reDraw(!0,!0)}else if("copy"===a){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(8===h.currentTool&&p.handleCancelSelect(),h.isScaling&&p.handleCancelScale(),h.drawRecord.length>=h.maxFrame)return t.$message.warning("帧数量达到上限");let a=JSON.parse(JSON.stringify(h.drawRecord[e]));a.frameId=ue.v1();for(let e=0;e<a.layer.length;e++){for(let t=0;t<a.layer[e].mindLayerList.length;t++){let l=o({},h.layerCrossList[a.layer[e].layerId].mindLayerList[a.layer[e].mindLayerList[t]]);l.mindId=ue.v1(),a.layer[e].mindLayerList[t]=l}a.layer[e].layerId=ue.v4(),await p.handleCreateLayerCrossData("update",a.layer[e]),a.layer[e].mindLayerList=a.layer[e].mindLayerList.map((e=>e.mindId))}h.drawRecord.splice(e,0,a),p.handleChangeFrame(e+1),p.handleAddHistory()}},handleDeleteFrame(e){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");8===h.currentTool&&e===h.currentFrameIndex&&p.handleCancelSelect(),h.isScaling&&e===h.currentFrameIndex&&p.handleCancelScale(),h.drawRecord.splice(e,1);let a=h.drawRecord.findIndex((e=>h.historyFrameIndexRecord[h.historyFrameIndexRecord.length-1]===e.frameId));a<0&&(a=0),p.handleChangeFrame(a),p.handleAddHistory()},handleExportGridFrame(e,a=h.exportStyleOptions){let{gridBackgroundColor:t,gridColor:l}=a,n=a.gridSize;return new Promise(((a,r)=>{h.realCanvas.width=h.canvasWidth*n,h.realCanvas.height=h.canvasHeight*n,h.ctx3.clearRect(0,0,h.realCanvas.width,h.realCanvas.height),t!==h.emptyColor&&(h.ctx3.fillStyle=t,h.ctx3.fillRect(0,0,h.realCanvas.width,h.realCanvas.height));const i=document.createElement("canvas");i.width=h.canvasWidth,i.height=h.canvasHeight;const o=i.getContext("2d"),s=new Image;s.src=e,s.onload=async()=>{o.drawImage(s,0,0,i.width,i.height);const e=o.getImageData(0,0,i.width,i.height).data;let t=await p.handleNearestNeighborResize(h.canvasWidth,h.canvasHeight,n,e,!1,"",!0);h.ctx3.drawImage(t,0,0),(()=>{h.ctx3.strokeStyle=l,h.ctx3.globalAlpha=1,h.ctx3.lineWidth=1,h.ctx3.beginPath();for(let e=0;e<=h.canvasHeight;e++)h.ctx3.moveTo(0,e*n),h.ctx3.lineTo(h.canvasWidth*n,e*n);for(let e=0;e<=h.canvasWidth;e++)h.ctx3.moveTo(e*n,0),h.ctx3.lineTo(e*n,h.canvasHeight*n);h.ctx3.stroke()})(),a(!0)}}))},async handleExportFrame(e,a=!0,t=1,l=h.exportStyleOptions,n="pic"){let{isShowGrid:r}=l;return h.ctx3.globalAlpha=1,r?await p.handleExportGridFrame(h.drawRecord[e].currentFrameImg,l):new Promise(((l,r)=>{h.drawRecord[e].currentFrameImg||l(!0),1===t&&(h.realCanvas.width=h.canvasWidth,h.realCanvas.height=h.canvasHeight),h.ctx3.clearRect(0,0,h.realCanvas.width,h.realCanvas.height);const i=document.createElement("canvas");i.width=h.canvasWidth,i.height=h.canvasHeight;const o=i.getContext("2d"),s=new Image;s.src=h.drawRecord[e].currentFrameImg,s.onload=async()=>{if(o.drawImage(s,0,0,i.width,i.height),"gif"===n){const e=o.getImageData(0,0,i.width,i.height),a=e.data;for(let t=0;t<a.length;t+=4){const e=a[t],l=a[t+1],n=a[t+2];0!==a[t+3]&&(0===e&&0===l&&0===n&&(a[t]=16,a[t+1]=16,a[t+2]=16))}o.putImageData(e,0,0)}if(t>1){const l=o.getImageData(0,0,i.width,i.height).data;if(a)p.handleNearestNeighborResize(h.canvasWidth,h.canvasHeight,t,l,!0,`frame${e+1}`);else{let e=await p.handleNearestNeighborResize(h.canvasWidth,h.canvasHeight,t,l,!1,"",!0);h.ctx3.drawImage(e,0,0)}}else h.ctx3.drawImage(i,0,0),a&&Me(h.realCanvas,`frame${e+1}`);l(!0)}}))},handleNearestNeighborResize:(e,a,t,l,n=!1,r,i=!1,o=!1)=>new Promise(((o,s)=>{const c=document.createElement("canvas"),d=c.getContext("2d"),g=e*t,A=a*t;c.width=g,c.height=A;const h=d.createImageData(g,A),u=h.data,p=e/g,m=a/A;for(let a=0;a<A;a++)for(let t=0;t<g;t++){const n=Math.floor(t*p),r=4*(Math.floor(a*m)*e+n),i=4*(a*g+t);u[i]=l[r],u[i+1]=l[r+1],u[i+2]=l[r+2],u[i+3]=l[r+3]}d.putImageData(h,0,0),n&&Me(c,r),i&&o(c)})),handleExportFrameForBlock(e,a=!0,t=1,l=h.exportStyleOptions,n=.26){h.ctx3.globalAlpha=1;const r=(t=Math.floor(28*n))/5;return h.realCanvas.width=h.canvasWidth*t,h.realCanvas.height=h.canvasHeight*t,h.ctx3.clearRect(0,0,h.realCanvas.width,h.realCanvas.height),h.ctx3.shadowColor="rgba(0, 0, 0, 0.5)",h.ctx3.shadowBlur=2,h.ctx3.shadowOffsetX=1,h.ctx3.shadowOffsetY=1,new Promise(((a,l)=>{const n=document.createElement("canvas");n.width=h.canvasWidth,n.height=h.canvasHeight;const i=n.getContext("2d"),o=new Image;o.src=h.drawRecord[e].currentFrameImg,o.onload=async()=>{if(i.drawImage(o,0,0,n.width,n.height),t>1){const e=i.getImageData(0,0,n.width,n.height).data;let a=await p.handleNearestNeighborResize(h.canvasWidth,h.canvasHeight,t,e,!1,"",!0),l=a.getContext("2d").getImageData(0,0,a.width,a.height).data,o={};for(let n=0;n<h.canvasHeight;n++)for(let e=0;e<h.canvasWidth;e++){let a=j(p.getPixelColorByCoords(l,e*t,n*t,h.canvasWidth*t));a!==h.emptyColor&&(o[a]||(o[a]=new Map),o[a].set(`${e}/${n}`,[e,n]))}let s=Object.keys(o);for(let n=0;n<s.length;n++){let e=o[s[n]],a=s[n];h.ctx3.fillStyle=a;for(const[l,n]of e){let e=n[0],a=n[1];h.ctx3.fillRect(e*t,a*t,t,t),h.ctx3.shadowColor="rgba(0, 0, 0, 0.8)",h.ctx3.shadowBlur=2,h.ctx3.shadowOffsetX=1,h.ctx3.shadowOffsetY=1,h.ctx3.beginPath(),h.ctx3.arc(e*t+t/2,a*t+t/2,r,0,2*Math.PI,!1),h.ctx3.closePath(),h.ctx3.fill()}}}a(!0)}}))},handleExportFrameForPindou(e,a=!0,t=1,l=h.exportStyleOptions,n=.26){h.ctx3.globalAlpha=1;const r=t=Math.floor(28*n),i=t/5;return h.realCanvas.width=h.canvasWidth*t,h.realCanvas.height=h.canvasHeight*t,h.ctx3.clearRect(0,0,h.realCanvas.width,h.realCanvas.height),h.ctx3.shadowColor="rgba(0, 0, 0, 0.5)",h.ctx3.shadowBlur=2,h.ctx3.shadowOffsetX=1,h.ctx3.shadowOffsetY=1,new Promise(((a,l)=>{const n=document.createElement("canvas");n.width=h.canvasWidth,n.height=h.canvasHeight;const o=n.getContext("2d"),s=new Image;s.src=h.drawRecord[e].currentFrameImg,s.onload=async()=>{if(o.drawImage(s,0,0,n.width,n.height),t>1){const e=o.getImageData(0,0,n.width,n.height).data;let a=await p.handleNearestNeighborResize(h.canvasWidth,h.canvasHeight,t,e,!1,"",!0),l=a.getContext("2d").getImageData(0,0,a.width,a.height).data,s={};for(let n=0;n<h.canvasHeight;n++)for(let e=0;e<h.canvasWidth;e++){let a=j(p.getPixelColorByCoords(l,e*t,n*t,h.canvasWidth*t));a!==h.emptyColor&&(s[a]||(s[a]=new Map),s[a].set(`${e}/${n}`,[e,n]))}let c=Object.keys(s);for(let n=0;n<c.length;n++){let e=s[c[n]],a=c[n];for(const[l,n]of e){let e=n[0],l=n[1];h.ctx3.fillStyle=a,h.ctx3.beginPath(),h.ctx3.arc(e*t+r/2,l*t+r/2,r/2,0,2*Math.PI,!1),h.ctx3.closePath(),h.ctx3.fill(),h.ctx3.shadowColor="rgba(80, 80, 80, 0.5)",h.ctx3.shadowBlur=2,h.ctx3.shadowOffsetX=1,h.ctx3.shadowOffsetY=1,h.ctx3.fillStyle="rgba(0, 0, 0, 1)",h.ctx3.beginPath(),h.ctx3.arc(e*t+r/2,l*t+r/2,i,0,2*Math.PI,!1),h.ctx3.closePath(),h.ctx3.fill()}}}a(!0)}}))},async compressDrawRecordData(){let e=JSON.parse(JSON.stringify(h.drawRecord));for(let a=0;a<e.length;a++){let t=await Ue(e[a].currentFrameImg);e[a].currentFrameImg=t;for(let l=0;l<e[a].layer.length;l++){if(h.layerCrossList[e[a].layer[l].layerId])for(let n=0;n<e[a].layer[l].mindLayerList.length;n++){let t=o({},h.layerCrossList[e[a].layer[l].layerId].mindLayerList[e[a].layer[l].mindLayerList[n]]);e[a].layer[l].mindLayerList[n]=t||0,delete e[a].layer[l].mindLayerList[n].mindCanvas,delete e[a].layer[l].mindLayerList[n].mindCtx,e[a].layer[l].mindLayerList[n].mindObj=await Ue(e[a].layer[l].mindLayerList[n].mindObj)}let t=await Ue(e[a].layer[l].currentLayerImg);e[a].layer[l].currentLayerImg=t}}return e},async handleExportProject(e){h.exportLoaidng=!0;let a=s(o({},h.projectData),{width:h.canvasWidth,height:h.canvasHeight,data:null});a.data=await p.compressDrawRecordData(),a.frameImg="@";let l=JSON.parse(JSON.stringify(a));delete l.isBackup,delete l.backupUpdatedAt,delete l.authorUid;let n=await na(l);if(!n){const l=JSON.stringify(a);return n=new Blob([l],{type:""}),N.saveAs(n,`${e}.json`),t.$message.success("导出成功"),void(h.exportLoaidng=!1)}N.saveAs(n,`${e}.px`),t.$message.success("导出成功"),h.exportLoaidng=!1},handleImportProject(){const e=document.createElement("input");e.type="file",e.accept="application/json",e.addEventListener("change",(function(){const a=e.files[0];if(a){h.loading=!0;const e=new FileReader;e.onload=function(e){const a=JSON.parse(e.target.result);h.worker.postMessage({type:4,variables:a.data}),h.projectData.projectId=a.projectId,h.projectData.projectName=a.projectName,h.projectData.updateAt=a.updateAt,h.projectData.createAt=a.createAt,h.projectData.desc=a.desc,h.projectData.frameImg=a.frameImg,h.canvasWidth=a.width,h.canvasHeight=a.height,h.historyRecord=[],p.computeScale(),h.canvasBeginPos.x=h.bgCanvas.width/2-h.canvasWidth*h.scale/2,h.canvasBeginPos.y=h.bgCanvas.height/2-h.canvasHeight*h.scale/2,p.drawPixelArea(),h.worker.onmessage=e=>{h.drawRecord=e.data,p.reDraw(),h.loading=!1}},e.readAsText(a)}})),document.body.appendChild(e),e.click(),document.body.removeChild(e)},async handleExport(e,a,l=1,r=!1,i=h.exportStyleOptions,s=2,c=.26,d){if((![5,6].includes(e)||!g.checkVipFunction("gifExport"))&&(![7].includes(e)||!g.checkVipFunction("excelExport"))&&(h.previewLoading||!g.checkVipFunction("beitu",l)))if(r||(h.exportLoaidng=!0),h.isExportProject)p.handleExportProject(a);else{if(0===e&&("frame"===h.exportSingleImage?(h.realCanvas.width=h.canvasWidth*l,h.realCanvas.height=h.canvasHeight*l,await p.handleExportFrame(h.exportSingleImageIndex,!1,l,i),Fe(h.realCanvas.toDataURL("image/png"),a)):"layer"===h.exportSingleImage&&(await p.handleExportLayer(h.currentFrameIndex,h.currentLayerIndex,!1,l,i),Fe(h.realCanvas.toDataURL("image/png"),a))),1===e){const e=document.createElement("canvas");e.width=h.canvasWidth*l*h.drawRecord.length,e.height=h.canvasHeight*l;const t=e.getContext("2d");h.realCanvas.width=h.canvasWidth*l,h.realCanvas.height=h.canvasHeight*l;for(let a=0;a<h.drawRecord.length;a++)await p.handleExportFrame(a,!1,l),t.drawImage(h.realCanvas,a*h.canvasWidth*l,0);if(r)return e.toDataURL("image/png");Me(e,a)}else if(2===e){let e=0,t=[],n=[];for(let a=0;a<h.drawRecord.length;a++){t[a]=[];let n=h.drawRecord[a].layer.length;e<n&&(e=n);let r=0;for(let e=n-1;e>=0;e--)await p.handleExportLayer(a,e,!1,l),t[a][r]=h.ctx3.getImageData(0,0,h.canvasWidth*l,h.canvasHeight*l),r++}for(let a=0;a<e;a++){const e=document.createElement("canvas");e.width=h.canvasWidth*l*h.drawRecord.length,e.height=h.canvasHeight*l;const r=e.getContext("2d");for(let n=0;n<t.length;n++)if(t[n][a]){let e=document.createElement("canvas");e.width=h.canvasWidth*l,e.height=h.canvasHeight*l,e.getContext("2d").putImageData(t[n][a],0,0),r.drawImage(e,n*h.canvasWidth*l,0)}else;n.push(e.toDataURL("image/png"))}Ee(`${a}`,n)}else if(3===e){let e=[];h.realCanvas.width=h.canvasWidth*l,h.realCanvas.height=h.canvasHeight*l;for(let a=0;a<h.drawRecord.length;a++)await p.handleExportFrame(a,!1,l,i),e.push(h.realCanvas.toDataURL("image/png"));1===e.length?Fe(e[0],a):Ee(`${a}`,e)}else if(4===e){let e=[];for(let a=0;a<h.drawRecord.length;a++){for(let t=h.drawRecord[a].layer.length-1;t>=0;t--)h.drawRecord[a].layer[t].isRender&&(await p.handleExportLayer(a,t,!1,l,i),e.push(h.realCanvas.toDataURL("image/png")))}1===e.length?Fe(e[0],a):Ee(`${a}`,e)}else if(5===e){let e=[],t=new GIF({width:h.canvasWidth*l,height:h.canvasHeight*l,workerScript:"/js/gif-js/distt/gif.worker.js",workers:2,quality:10,transparent:0});h.realCanvas.width=h.canvasWidth*l,h.realCanvas.height=h.canvasHeight*l;for(let a=0;a<h.drawRecord.length;a++)await p.handleExportFrame(a,!1,l,h.exportStyleOptions,"gif"),e.push(h.realCanvas.toDataURL("image/png"));let n=[];for(let a=0;a<e.length;a++){const t=document.createElement("img");t.src=e[a],t.width=h.canvasWidth*l,t.height=h.canvasHeight*l;let r=new Promise(((e,a)=>{t.onload=function(){e(t)}}));n.push(r)}let r=0;await Promise.all(n).then((async()=>{for(let e=0;e<n.length;e++){let a=await n[e];t.addFrame(a,{delay:100*s}),r++}r>=n.length&&t.render()})),t.on("finished",(function(e){He(a,URL.createObjectURL(e)),t.abort()}))}else if(6===e){let e=0,t=[],n=[];const r=e=>new Promise(((a,t)=>{Je(e).then((e=>{a(e)}))}));for(let a=0;a<h.drawRecord.length;a++){t[a]=[];let n=h.drawRecord[a].layer.length;e<n&&(e=n);let r=0;for(let e=n-1;e>=0;e--)await p.handleExportLayer(a,e,!1,l,h.exportStyleOptions,"gif"),t[a][r]=h.ctx3.getImageData(0,0,h.canvasWidth*l,h.canvasHeight*l),r++}for(let a=0;a<e;a++){let e=new GIF({width:h.canvasWidth*l,height:h.canvasHeight*l,workerScript:"/js/gif-js/distt/gif.worker.js",workers:2,quality:10,transparent:0});for(let n=0;n<t.length;n++)if(t[n][a]){let r=document.createElement("canvas");r.width=h.canvasWidth*l,r.height=h.canvasHeight*l,r.getContext("2d").putImageData(t[n][a],0,0),e.addFrame(r,{delay:100*s})}else;const i=await new Promise((a=>{e.on("finished",(function(t){a(t),e.abort()})),e.render()}));let o=await r(i);n.push(o)}await Promise.all(n).then((()=>{Ee(`${a}`,n,"gif")}))}else if(7===e)n.handlePixelToExcel(JSON.parse(JSON.stringify(h.drawRecord)),o({layerData:h.layerCrossList,canvasWidth:h.canvasWidth,canvasHeight:h.canvasHeight,filename:a},i),(e=>{t.$message.success(e)}),(e=>{t.$message.error(e)}));else if(8===e){let e=[];for(let a=0;a<h.drawRecord.length;a++)await p.handleExportFrameForPindou(a,!1,1,i,c),e.push(h.realCanvas.toDataURL("image/png"));1===e.length?Fe(e[0],`拼豆图-${a}`):Ee(`拼豆图-${a}`,e)}else if(9===e){let e=[];for(let a=0;a<h.drawRecord.length;a++)await p.handleExportFrameForBlock(a,!1,1,i,c),e.push(h.realCanvas.toDataURL("image/png"));1===e.length?Fe(e[0],`积木图-${a}`):Ee(`积木图-${a}`,e)}else if(10===e){if(!Qe())return t.$message.warning("当前浏览器不支持该功能");try{let e=null,t=null,l=10*h.canvasWidth,n=10*h.canvasHeight;const r=async()=>{var l;await(null==t?void 0:t.flush()),e.finalize();let n=null==(l=e.target)?void 0:l.buffer,r=URL.createObjectURL(new Blob([n]));He(`${a}.mp4`,r),t=null,e=null};e=new Mp4Muxer.Muxer({target:new Mp4Muxer.ArrayBufferTarget,video:{codec:"avc",width:l,height:n,frameRate:d.videoSpeed},firstTimestampBehavior:"offset",fastStart:"in-memory"}),t=new VideoEncoder({output:(a,t)=>e.addVideoChunk(a,t),error:e=>{}}),t.configure({codec:"avc1.42001f",width:l,height:n,bitrate:1e6});let i=0;h.realCanvas.width=10*h.canvasWidth,h.realCanvas.height=10*h.canvasHeight;for(let a=0;a<h.drawRecord.length;a++){await p.handleExportFrame(a,!1,10,h.exportStyleOptions);let e=new VideoFrame(h.realCanvas,{timestamp:1e3*i/d.videoSpeed*1e3});i++,t.encode(e,{keyFrame:i%d.videoSpeed==0}),e.close(),i>=h.drawRecord.length&&r()}}catch(A){t.$message.error("当前画布过大，无法导出视频"),h.exportLoaidng=!1}}h.exportLoaidng=!1}},handleDeepCloneByWorker(e,a){h.loading=!0,h.worker.postMessage({type:104,variables:e}),h.worker.onmessage=e=>{104===e.data.type&&(a(e.data.variables),h.loading=!1)}},handleAddHistory(){for(h.historyRecord.length>=h.historyMaxLength&&h.historyRecord.shift();h.currentHistoryIndex<h.historyRecord.length-1;)h.historyRecord.pop();h.historyRecord.push({hid:ue.v1(),record:JSON.parse(JSON.stringify(h.drawRecord))}),h.isSaveProject=!1,h.currentHistoryIndex=h.historyRecord.length-1,h.currentHistoryIndex<0&&(h.currentHistoryIndex=0)},async handleRevoke(){if(h.historyRecord.length&&!h.isControlMindObj){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(8!==h.currentTool)if(h.isScaling)p.handleCancelScale();else{if(h.currentHistoryIndex=h.currentHistoryIndex-1,h.currentHistoryIndex<0)return t.$message.warning("暂无更多记录"),void(h.currentHistoryIndex=0);h.drawRecord=JSON.parse(JSON.stringify(h.historyRecord[h.currentHistoryIndex].record));for(let e=0;e<h.drawRecord.length;e++)for(let a=0;a<h.drawRecord[e].layer.length;a++)await p.handleCreateLayerCrossData("update",h.drawRecord[e].layer[a]);p.reDraw(!0,!1)}else p.handleCancelSelect()}},async handleRecover(){if(h.historyRecord.length&&!h.isControlMindObj){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(8!==h.currentTool)if(h.isScaling)p.handleCancelScale();else{if(h.currentHistoryIndex=h.currentHistoryIndex+1,h.currentHistoryIndex>h.historyRecord.length-1)return t.$message.warning("暂无更多记录"),void(h.currentHistoryIndex=h.historyRecord.length-1);h.drawRecord=JSON.parse(JSON.stringify(h.historyRecord[h.currentHistoryIndex].record));for(let e=0;e<h.drawRecord.length;e++)for(let a=0;a<h.drawRecord[e].layer.length;a++)await p.handleCreateLayerCrossData("update",h.drawRecord[e].layer[a]);p.reDraw(!0,!1)}else p.handleCancelSelect()}},handleOpenMyColorDialog(){t.$refs.MyColorDialog.handleOpen(),p.handleCancelKeyboardEvent()},handleOpenReplaceColorDialog(){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");h.isScaling&&p.handleCancelScale(),t.$refs.ReplaceColorDialog.handleOpen(),p.handleCancelKeyboardEvent()},async handleOpenPreviewDialog(){if(h.pinDouMode)return t.$message.warning("请先退出拼豆预览模式");if(h.canvasHeight>512||h.canvasWidth>512)return t.$message.warning("当前画布尺寸过大，无法预览动画");h.previewLoading=!0;let e=Math.floor(512/Math.max(h.canvasHeight,h.canvasWidth));const a=await p.handleExport(1,"",e,!0);t.$refs.PreviewAnimDialog.handleOpen({imgUrl:a,width:h.canvasWidth*e,height:h.canvasHeight*e,frame:h.drawRecord.length}),h.previewLoading=!1},handleOpenMoveCanvas(){h.isSpace=!h.isSpace,p.handleCancelSelectMindObj()},handlekeyDownEvent(e){var a;if(t.$route.path.includes("/draw")){if(" "===e.key)return e.preventDefault(),void(h.isSpace=!0);if(e.shiftKey&&(h.isShift=!0),e.altKey&&(h.isAlt=!0),e.altKey&&"c"===e.key&&h.selectData.selectList.length)p.handleCopySelectData();else if(e.altKey&&"q"===e.key)e.preventDefault(),p.drawTransform("scale");else if(e.altKey&&"d"===e.key)e.preventDefault(),p.handleRemoveSelect();else if(e.altKey&&"n"===e.key)p.handleCancelSelect();else if((e.metaKey||e.ctrlKey)&&"z"===e.key)p.handleRevoke();else if((e.metaKey||e.ctrlKey)&&"x"===e.key)p.handleRecover();else if(e.altKey&&"j"===e.key)p.drawTransform("crop");else if((e.metaKey||e.ctrlKey)&&"s"===e.key)e.preventDefault(),p.handleSaveProject();else if((e.metaKey||e.ctrlKey)&&"p"===e.key)e.preventDefault(),p.handleExportDialog(!0);else if((e.metaKey||e.ctrlKey)&&"i"===e.key)e.preventDefault(),p.handleExportDialog(!1);else if(e.altKey&&"p"===e.key)p.handleOpenPreviewDialog();else if(e.altKey&&"f"===e.key)e.preventDefault(),p.handleScreenFull();else if(e.altKey&&"v"===e.key)p.handleResetCanvas();else if(e.altKey&&"a"===e.key)r.handleAdd(r.data.currentColorGroup);else if(e.altKey&&"g"===e.key)t.$refs.MyColorDialog.handleOpen();else if((e.metaKey||e.ctrlKey)&&"m"===e.key)e.preventDefault(),p.handleImportImage();else if((e.metaKey||e.ctrlKey)&&"g"===e.key)e.preventDefault(),p.handleImportImageForGif();else if((e.metaKey||e.ctrlKey)&&"c"===e.key)e.preventDefault(),r.handleCopyColor(h.brushColor);else if((e.metaKey||e.ctrlKey)&&e.altKey&&"t"===e.key)e.preventDefault(),p.handleAddLayer();else if((e.metaKey||e.ctrlKey)&&e.altKey&&"h"===e.key)e.preventDefault(),p.handleLayerMerge();else if((e.metaKey||e.ctrlKey)&&"ArrowUp"===e.key)e.preventDefault(),p.drawTransform("hReverse");else if((e.metaKey||e.ctrlKey)&&"ArrowDown"===e.key)e.preventDefault(),p.drawTransform("vReverse");else if((e.metaKey||e.ctrlKey)&&"ArrowLeft"===e.key)e.preventDefault(),p.drawTransform("rotate");else if((e.metaKey||e.ctrlKey)&&"ArrowRight"===e.key)e.preventDefault(),p.drawTransform("cReverse");else if((e.metaKey||e.ctrlKey)&&"="===e.key)e.preventDefault(),p.handleResizeCanvas(h.layerScaleStep);else if((e.metaKey||e.ctrlKey)&&"-"===e.key)e.preventDefault(),p.handleResizeCanvas(-h.layerScaleStep);else if((e.metaKey||e.ctrlKey)&&e.key);else if("q"===e.key)p.handleChangeTool(0);else if("w"===e.key)p.handleChangeTool(1);else if("e"===e.key)p.handleChangeTool(2);else if("r"===e.key)p.handleChangeTool(4);else if("t"===e.key)p.handleChangeTool(7);else if("y"===e.key)p.handleChangeTool(8),h.selectType="select";else if("p"===e.key)p.handleChangeTool(8),h.selectType="quickSelect";else if("j"===e.key)p.handleChangeTool(8),h.selectType="rangeSelect";else if("u"===e.key)p.handleOpenReplaceColorDialog();else if(e.altKey&&"s"===e.key)r.handleSaveColor(!0,h.brushColor);else if("i"===e.key)p.handleClearLayer("single");else if("o"===e.key)p.handlePindouMode("preview");else if("k"===e.key)p.handlePindouMode("draw");else if("l"===e.key)p.handleLinmoMode();else if("Delete"===e.key)p.handleClearLayer("all");else if("a"===e.key)p.handleChangeTool(3),p.drawShape("rect");else if("s"===e.key)p.handleChangeTool(3),p.drawShape("circle");else if("d"===e.key)p.handleChangeTool(3),p.handleChangeTool(3),p.drawShape("line");else if("f"===e.key)p.handleChangeTool(3),p.drawShape("fillRect");else if("g"===e.key)p.handleEyeDropper();else if("z"===e.key)h.linmoMode&&h.linmoPhoto&&(t.$refs.LinmoModeDialog.isLockCanvas=!t.$refs.LinmoModeDialog.isLockCanvas,p.handleLinmoFitCanvas(t.$refs.LinmoModeDialog.isLockCanvas));else if("x"===e.key)h.linmoMode&&h.linmoPhoto&&(t.$refs.LinmoModeDialog.zIndex=!t.$refs.LinmoModeDialog.zIndex,t.$refs.LinmoModeDialog.updatelinmoPhotoStyle());else if("v"===e.key)h.linmoMode&&h.linmoPhoto&&(t.$refs.LinmoModeDialog.display=!t.$refs.LinmoModeDialog.display,t.$refs.LinmoModeDialog.updatelinmoPhotoStyle());else if("c"===e.key)h.linmoMode&&(t.$refs.LinmoModeDialog.isPickingColor||(t.$refs.LinmoModeDialog.opacityHistoryRecord=t.$refs.LinmoModeDialog.opacity,t.$refs.LinmoModeDialog.zIndexHistoryRecord=t.$refs.LinmoModeDialog.zIndex,t.$refs.LinmoModeDialog.opacity=100,t.$refs.LinmoModeDialog.zIndex||(t.$refs.LinmoModeDialog.zIndex=!0),t.$refs.LinmoModeDialog.updatelinmoPhotoStyle(),t.$refs.LinmoModeDialog.isPickingColor=!0,setTimeout((()=>{var e;null==(e=document.querySelector(".EyeDropper-color-picker"))||e.click()}),500)));else if(e.altKey&&"ArrowUp"===e.key){if(h.isShift)return;h.currentLayerIndex--,h.currentLayerIndex<0&&(h.currentLayerIndex=0),h.selectLayerList=[h.currentLayerIndex]}else if(e.altKey&&"ArrowDown"===e.key){if(h.isShift)return;h.currentLayerIndex++,h.currentLayerIndex>h.drawRecord[h.currentFrameIndex].layer.length-1&&(h.currentLayerIndex=h.drawRecord[h.currentFrameIndex].layer.length-1),h.selectLayerList=[h.currentLayerIndex]}else if(e.altKey&&"ArrowLeft"===e.key){if(e.preventDefault(),h.currentFrameIndex--,h.currentFrameIndex<0)return void(h.currentFrameIndex=0);p.handleChangeFrame(h.currentFrameIndex)}else if(e.altKey&&"ArrowRight"===e.key){if(e.preventDefault(),h.currentFrameIndex++,h.currentFrameIndex>h.drawRecord.length-1)return void(h.currentFrameIndex=h.drawRecord.length-1);p.handleChangeFrame(h.currentFrameIndex)}else["1","2","3","4","5","6","7","8","9"].includes(e.key)?h.brushColor=(null==(a=g.settingsOption.colorKeyOptions.find((a=>a.key==e.key)))?void 0:a.color)||"#000000ff":"ArrowLeft"===e.key?(e.preventDefault(),h.menuType=0):"ArrowRight"===e.key&&(e.preventDefault(),h.menuType=1);h.canvas.className="",p.addCursorClass()}},handleKeyUpEvent(e){t.$route.path.includes("/draw")&&(" "===e.key&&(h.isSpace=!1,h.canvas.style.cursor=""),"Shift"===e.key&&(h.isShift=!1),"Alt"===e.key&&(h.isAlt=!1),"Escape"!==e.key&&"Esc"!==e.key||(t.$refs.LinmoModeDialog.isPickingColor=!1,t.$refs.LinmoModeDialog.zIndex&&(t.$refs.LinmoModeDialog.zIndex=t.$refs.LinmoModeDialog.zIndexHistoryRecord,t.$refs.LinmoModeDialog.opacity=t.$refs.LinmoModeDialog.opacityHistoryRecord,t.$refs.LinmoModeDialog.updatelinmoPhotoStyle())))},addKeyBoardEvent(){},handleResizeWindowEvent(e){p.handleCancelSelectMindObj(),p.handleCancelSelect(),p.computeScale(),h.canvasStyle.transform=`scale(${h.layerScale})`,h.canvasBeginPos.centerX=h.scale*h.canvasWidth/2,h.canvasBeginPos.centerY=h.scale*h.canvasHeight/2,p.drawPixelArea(!0),h.pinDouMode?p.handleDrawPindou(h.ctx1):h.isScaling||h.isControlMindObj?p.reDraw(!1,!1,!1):p.reDraw(!1,!1),h.linmoFitCanvasTimer&&clearTimeout(h.linmoFitCanvasTimer),h.linmoFitCanvasTimer=setTimeout((()=>{p.handleLinmoFitCanvas(),p.handleDrawReferenceLine(),p.handleScaleFrame1(),p.handleInitAxisOffset()}),250)},handleResizeWindow(){window.addEventListener("resize",p.handleResizeWindowEvent)},onDragLayerEnd(e,a){let l=t.$refs[a].$el,n=Array.from(l.children),r=[],i=h.drawRecord[h.currentFrameIndex].layer;for(let t=0;t<n.length;t++){let e=n[t].dataset.key,a=i.find((a=>a.layerId===e));r.push(a)}h.drawRecord[h.currentFrameIndex].layer=r,p.reDraw()},onDragFrameEnd(e,a){let l=t.$refs[a],n=Array.from(l.children),r=[],i=h.drawRecord;for(let t=0;t<n.length-1;t++){let e=n[t].dataset.key,a=i.find((a=>a.frameId===e));r.push(a)}h.drawRecord=r,p.handleChangeFrame(h.currentFrameIndex)},handleCopySelectData(){if(8===h.currentTool){if(Be(h.selectData.selectCanvasObj.canvas,h.selectData.selectCanvasObj.ctx))return t.$message.warning("选择区域为空");h.selectData.isCopySelect=!0,t.$message.success("已复制选区，可拖拽移动复制选区")}},handleFilter(e,a=0){h.isScaling&&p.handleCancelScale(),h.loading=!0;const t=e=>{e&&(h.loading=!1,h.layerCrossList[p.getCurrentLayerId()].layerCtx.putImageData(e,0,0),p.reDraw())};8===h.currentTool?l.handleFilter(e,{layerCanvas:h.selectData.selectCanvasObj.canvas,layerCtx:h.selectData.selectCanvasObj.ctx},(e=>{h.loading=!1,h.selectData.selectCanvasObj.ctx.putImageData(e,0,0),p.reDraw(!1),h.ctx1.drawImage(h.selectData.selectCanvasObj.canvas,0,0),h.ctx1.drawImage(h.selectData.selectCanvasObj.selectCanvas,0,0)}),a):h.isControlMindObj?l.handleFilter(e,{layerCanvas:h.scaleCanvas,layerCtx:h.ctx5},(e=>{h.loading=!1,h.ctx5.putImageData(e,0,0)}),a):l.handleFilter(e,h.layerCrossList[p.getCurrentLayerId()],t,a)},handleExpand(){h.isExpandColorSelector=!h.isExpandColorSelector;let e=document.querySelector(".colorSelector"),a=document.querySelector(".back-icon");h.isExpandColorSelector?(e.style.transform="translateX(0)",a.children[0].style.transform="rotate(0deg)"):(e.style.transform="translateX(100%)",a.children[0].style.transform="rotate(180deg)")},handleTransformColorAsHex(e){let a=e;return Ye(a)&&9===a.length?e:Ye(a)&&7===a.length?a+"ff":Ye(a)?j(W(a)):j(K(a))},handleConfirmReplaceColor(e,a){let t=De(e.replaceColor),l=De(e.newColor);if(1===e.type){const e=h.layerCrossList[p.getCurrentLayerId()].layerData;for(let n=0;n<e.length;n+=4){let[a,r,i,o]=[e[n],e[n+1],e[n+2],e[n+3]];0!==o&&(t[0]===a&&t[1]===r&&t[2]===i&&255*t[3]===o&&(e[n]=l[0],e[n+1]=l[1],e[n+2]=l[2],e[n+3]=255*l[3]))}const a=new ImageData(e,h.canvasWidth,h.canvasHeight);h.layerCrossList[p.getCurrentLayerId()].layerCtx.putImageData(a,0,0)}else if(2===e.type)for(let n=0;n<h.drawRecord[h.currentFrameIndex].layer.length;n++){let e=h.drawRecord[h.currentFrameIndex].layer[n].layerId;const a=h.layerCrossList[e].layerData;for(let n=0;n<a.length;n+=4){let[e,r,i,o]=[a[n],a[n+1],a[n+2],a[n+3]];0!==o&&(t[0]===e&&t[1]===r&&t[2]===i&&255*t[3]===o&&(a[n]=l[0],a[n+1]=l[1],a[n+2]=l[2],a[n+3]=255*l[3]))}const r=new ImageData(a,h.canvasWidth,h.canvasHeight);h.layerCrossList[p.getCurrentLayerId()].layerCtx.putImageData(r,0,0)}a(),p.reDraw()},handleResetCanvas(){h.pindouScaleValue=1,p.handleResizeWindowEvent("")},handleInitData(){h.isPreview?h.currentTool=-1:h.currentTool=0,h.historyRecord=[],h.currentFrameIndex=0,h.currentLayerIndex=0,h.currentFrameId="0",h.currentLayerId="0",h.shapeFillColor="#000000ff",h.brushColor="#000000ff",h.isCheckedRatio=!0,h.isShowReferenceLine=!1,h.isShowRuler=!1,h.isShowGridLine=!1,h.isVertical=!1,h.isHorizontal=!1,h.isCenter=!1,h.brushSize=1,h.eraserSize=1,h.widthHeightRatio=1,h.tolerance=0,h.selectType="select",h.currentDrawShape="rect",h.currentDrawTransform="hReverse",h.projectData=te(),h.pinDouMode=!1,h.pinDouDrawMode=!1,h.selectLayerList=[h.currentLayerIndex],h.pindouHighlight=null,h.pindouBrand=g.settingsOption.defaultPindou,h.isHidePindouMode=!1,h.isScaling=!1,h.scaleWhitePointPos=[],h.scaleAreaData=null,h.scaleRatio=0,h.colorStatList=[],h.layerAlpha=100,h.isHideLinmoMode=!1,h.linmoMode=!1,h.linmoPhoto=null,h.currentHistoryIndex=0,h.canvasStyle={transform:"scale(1)",transformOrigin:"center center"},h.linmoPhotoStyle={width:"200px",height:"200px",transform:"translate3d(0px, 0px, 10px) rotate(0deg) scale(1, 1)",opacity:1,zIndex:0,display:"none",transformOrigin:"center center"},h.pindouScaleValue=1,h.isSpace=!1,h.searchColorValue="",h.searchColorList=[],h.drawAreaGridCanvas=null,h.layerGridImage=null,h.isPreview?h.menuType=1:h.menuType=0,h.layerScale=1,h.layerCrossList={},h.currentSelectMindId="0",h.isEnableCanvasGrid=!1,h.layerScaleStep=.5,h.isEnableCanvasSmooth=!1,h.scaleStyle={width:"0px",height:"0px",left:"0px",top:"0px"},h.resizeStyle={width:"0px",height:"0px",left:"0px",top:"0px"},h.resizeData={startX:0,startY:0,direction:""},h.scaleImg="",h.isControlMindObj=!1,h.mobileStartDistance=null,h.pindouBlockList=[],h.currentPindouIndex=0,h.pindouBlockHeight=64,h.pindouBlockWidth=64,h.currentPindouBlockSize=64,h.isShowPindouGridLine=!1,h.isShowPindouReferenceLine=!1,h.isShowPindouRuler=!1,h.isUpdateAllBlock=!1,h.previewLoading=!1,h.selectData.selectCanvasObj=null},handleInitEmptyLayer(){h.emptyLayerData=[];for(let e=0;e<h.canvasHeight;e++)for(let a=0;a<h.canvasWidth;a++)h.emptyLayerData.push([a,e,h.emptyColor])},handleInitAxisOffset(){let e=h.canvas.getBoundingClientRect().left-h.baseCanvas.getBoundingClientRect().left,a=h.canvas.getBoundingClientRect().top-h.baseCanvas.getBoundingClientRect().top;h.XLineOffset=Math.floor(h.canvasWidth*h.layerScale/2)-2,h.axisXStyle.left=`${Math.floor(e+h.XLineOffset)}px`,h.YLineOffset=Math.floor(h.canvasHeight*h.layerScale/2)-2,h.axisYStyle.top=`${Math.floor(a+h.YLineOffset)}px`,h.CenterLineOffset=Math.floor(h.canvasWidth*h.layerScale/2)-2,h.axisCStyle.left=`${Math.floor(e+h.CenterLineOffset)}px`},handleCheckAxisOffset(){let e=h.canvas.getBoundingClientRect().left-h.baseCanvas.getBoundingClientRect().left,a=h.canvas.getBoundingClientRect().top-h.baseCanvas.getBoundingClientRect().top;h.isHorizontal&&(h.XLineOffset>=h.canvas.getBoundingClientRect().width?h.XLineOffset=Math.floor(h.canvas.getBoundingClientRect().width):h.XLineOffset<0&&(h.XLineOffset=0),h.axisXStyle.left=`${Math.floor(e+h.XLineOffset)}px`),h.isVertical&&(h.YLineOffset>=h.canvas.getBoundingClientRect().height?h.YLineOffset=Math.floor(h.canvas.getBoundingClientRect().height):h.YLineOffset<0&&(h.YLineOffset=0),h.axisYStyle.top=`${Math.floor(a+h.YLineOffset)}px`),h.isCenter&&(h.CenterLineOffset>=h.canvas.getBoundingClientRect().width?h.CenterLineOffset=Math.floor(h.canvas.getBoundingClientRect().width):h.CenterLineOffset<0&&(h.CenterLineOffset=0),h.axisCStyle.left=`${Math.floor(e+h.CenterLineOffset)}px`)},handleResizeStyle(){let e=h.canvas.getBoundingClientRect().left-h.baseCanvas.getBoundingClientRect().left,a=h.canvas.getBoundingClientRect().top-h.baseCanvas.getBoundingClientRect().top,t=parseFloat(h.scaleStyle.left)*h.layerScale,l=parseFloat(h.scaleStyle.top)*h.layerScale;h.resizeStyle.left=`${e+t}px`,h.resizeStyle.top=`${a+l}px`},setCanvasCenter(){let e=h.baseCanvas.width/2-h.canvas.width/2,a=h.baseCanvas.height/2-h.canvas.height/2;h.canvas.style.left=`${e}px`,h.canvas.style.top=`${a}px`,h.scaleBoxDom.style.left=`${e}px`,h.scaleBoxDom.style.top=`${a}px`,h.bgCanvas.style.left=`${e}px`,h.bgCanvas.style.top=`${a}px`,p.handleResizeStyle()},async handleReadProjectData(){let e=t.$route.params.projectId.slice(0,1),a=t.$route.params.projectId.split(e),l=a[a.length-1],n=null;if(h.isPreview=!1,"B"===e)h.isPreview=!1,g.localProjectList.length&&(n=JSON.parse(JSON.stringify(g.localProjectList.find((e=>e.id===l)).data)));else if("A"===e)h.isPreview=!1,n=JSON.parse(JSON.stringify(g.getProjectById(l)));else if("C"===e){if(l===h.projectData.projectId)return;return void p.handlePreviewPorject(l)}p.handleProjectData(n,e)},async handleProjectData(e,a){if(e){let n=g.currentProjectId.split(a);if(n[n.length-1]!==e.projectId)if(p.handleInitData(),h.drawRecord=[],h.loading=!0,h.projectData=e,h.projectData.projectId=e.projectId,h.projectData.projectName=e.projectName,h.projectData.updateAt=e.updateAt,h.projectData.createAt=e.createAt,h.projectData.desc=e.desc,h.canvasWidth=Number(e.width),h.canvasHeight=Number(e.height),h.projectData.frameImg=e.frameImg,h.projectData.tip=e.tip,h.projectData.isTop=e.isTop,h.projectData.isLargeCanvas=e.isLargeCanvas,h.projectData.isLocalFile=e.isLocalFile,h.projectData.data=e.data,r.getMyColorList(),h.baseCanvas=document.getElementById("BaseCanvas"),h.canvas=document.getElementById("Canvas"),h.bgCanvas=document.getElementById("PixelCanvas"),h.realCanvas=document.createElement("canvas"),h.gridCanvas=document.getElementById("GridCanvas"),h.scaleCanvas=document.getElementById("scale-canvas"),h.scaleBoxDom=document.querySelector(".ScaleBox"),p.computeScale(),h.ctx0=h.baseCanvas.getContext("2d"),h.ctx1=h.canvas.getContext("2d"),h.ctx2=h.bgCanvas.getContext("2d"),h.ctx3=h.realCanvas.getContext("2d"),h.ctx4=h.gridCanvas.getContext("2d"),h.ctx5=h.scaleCanvas.getContext("2d"),h.ctx1.lineCap="square",h.ctx1.save(),h.canvasBeginPos.centerX=h.canvasBeginPos.x+h.scale*h.canvasWidth/2,h.canvasBeginPos.centerY=h.canvasBeginPos.y+h.scale*h.canvasHeight/2,h.canvasHeight<100&&h.canvasWidth<100&&(h.isEnableCanvasGrid=!0),p.drawPixelArea(!0),p.startDrawing(),!h.isPreview&&p.addKeyBoardEvent(),p.handleSetCanvasScale(),he((()=>p.handleInitAxisOffset())),h.projectData.data)try{for(let a=0;a<h.projectData.data.length;a++){let t=await Ve(h.projectData.data[a].currentFrameImg);h.projectData.data[a].currentFrameImg=t;for(let l=0;l<h.projectData.data[a].layer.length;l++){let t=await Ve(h.projectData.data[a].layer[l].currentLayerImg);h.projectData.data[a].layer[l].currentLayerImg=t,h.projectData.data[a].layer[l].mindLayerList||(h.projectData.data[a].layer[l].mindLayerList=[]);for(let e=0;e<h.projectData.data[a].layer[l].mindLayerList.length;e++){h.projectData.data[a].layer[l].mindLayerList[e].mindObj=await Ve(h.projectData.data[a].layer[l].mindLayerList[e].mindObj),h.projectData.data[a].layer[l].mindLayerList[e].mindCanvas=document.createElement("canvas"),h.projectData.data[a].layer[l].mindLayerList[e].mindCanvas.width=h.projectData.data[a].layer[l].mindLayerList[e].width,h.projectData.data[a].layer[l].mindLayerList[e].mindCanvas.height=h.projectData.data[a].layer[l].mindLayerList[e].height,h.projectData.data[a].layer[l].mindLayerList[e].mindCtx=h.projectData.data[a].layer[l].mindLayerList[e].mindCanvas.getContext("2d");const t=await createImageBitmap(Oe(h.projectData.data[a].layer[l].mindLayerList[e].mindObj));h.projectData.data[a].layer[l].mindLayerList[e].mindCtx.drawImage(t,0,0)}await p.handleCreateLayerCrossData("update",e.data[a].layer[l]),h.projectData.data[a].layer[l].mindLayerList=h.projectData.data[a].layer[l].mindLayerList.map((e=>e.mindId))}}h.drawRecord=h.projectData.data,g.saveProjectId(h.projectData.projectId,a),p.handleChangeLayer(h.currentLayerIndex),p.reDraw(),h.loading=!1,he((()=>{p.handleLayerAndFrameHighRender()}))}catch(l){t.$message.error("项目异常，无法打开"),g.saveProjectId("0"),t.$router.replace("/project")}else g.saveProjectId(h.projectData.projectId,a),h.drawRecord=[],p.initCanvasRecord("init"),h.loading=!1}else t.$message.error("项目不存在"),g.saveProjectId("0"),t.$router.replace("/project")},handlePreviewPorject(e){h.isPreview=!0,h.loading=!0,h.canvas&&h.ctx1.clearRect(0,0,h.canvasWidth,h.canvasHeight),h.drawRecord=[],h.projectData.projectName="",Xe(`${e}.json`,(async a=>{let l=await Ke(a);l?(l.projectId="C"+e,p.handleProjectData(l,"C")):(t.$message.error("项目不存在"),g.saveProjectId("0"),t.$router.replace("/module"))}),(e=>{t.$message.error(e),g.saveProjectId("0"),t.$router.replace("/module")}))},handleCancelKeyboardEvent(){window.removeEventListener("keydown",p.handlekeyDownEvent),window.removeEventListener("keyup",p.handleKeyUpEvent)},handleExportDialog(e,a="",t=-1){h.exportVisible=!0,h.isExportProject=e,h.exportSingleImage=a,h.exportSingleImageIndex=t,p.handleCancelKeyboardEvent()},handleImportImage(){h.importLayerVisible=!0,p.handleCancelKeyboardEvent()},handleImportImageForGif(){8===h.currentTool&&p.handleCancelSelect(),h.isScaling&&p.handleCancelScale();const e=document.createElement("input");e.type="file",e.accept="image/gif",e.addEventListener("change",(async function(){const a=e.files[0];if(a){if(await We(a)){const e=new FileReader;e.onload=function(e){const a=new Uint8Array(e.target.result);je("local",a).then((e=>{(null==e?void 0:e.list.length)&&Ae.confirm("导入的图像将覆盖每个帧的第一个图层，是否覆盖？","提 示",{confirmButtonText:"确 认",cancelButtonText:"取 消",type:"warning"}).then((()=>{p.handleImportGifImage(e.list)})).catch((()=>{}))})).catch((e=>{t.$message.error(e)}))},e.readAsArrayBuffer(a)}else t.$message.warning("导入文件格式不正确")}})),document.body.appendChild(e),e.click(),document.body.removeChild(e)},async handleImportGifImage(e){var a,l,n;const r=document.createElement("canvas"),i=r.getContext("2d");for(let o=0;o<e.length;o++)if(null==(a=h.drawRecord[o])?void 0:a.layer)if(h.layerCrossList[h.drawRecord[o].layer[0].layerId].layerCtx.drawImage(e[o].image,0,0),o===h.currentFrameIndex)p.reDraw(!0,!1);else{r.width=h.canvasWidth,r.height=h.canvasHeight;let e=null==(l=h.drawRecord[o])?void 0:l.layer;for(let a=e.length-1;a>=0;a--)if(e[a].isRender){let t=e[a].layerId;i.drawImage(h.layerCrossList[t].layerCanvas,0,0);for(let l=0;l<e[a].mindLayerList.length;l++){let n=h.layerCrossList[t].mindLayerList[e[a].mindLayerList[l]];n.isHide||i.drawImage(n.mindCanvas,n.left,n.top)}}h.drawRecord[o].currentFrameImg=r.toDataURL(h.exportFormat,1)}else{if(h.drawRecord.length+1>=h.maxFrame){t.$message.warning("帧数量达到上限");break}await p.handleAddFrame(!1),h.layerCrossList[h.drawRecord[o].layer[0].layerId].layerCtx.drawImage(e[o].image,0,0),r.width=h.canvasWidth,r.height=h.canvasHeight;let a=null==(n=h.drawRecord[o])?void 0:n.layer;for(let e=a.length-1;e>=0;e--)if(a[e].isRender){let t=a[e].layerId;i.drawImage(h.layerCrossList[t].layerCanvas,0,0);for(let l=0;l<a[e].mindLayerList.length;l++){let n=h.layerCrossList[t].mindLayerList[a[e].mindLayerList[l]];n.isHide||i.drawImage(n.mindCanvas,n.left,n.top)}}h.drawRecord[o].currentFrameImg=r.toDataURL(h.exportFormat,1)}p.handleAddHistory()},handleCloseDialog(e){h[e]=!1},closeMenu(){h.LayerMenu.visible=!1,h.FrameMenu.visible=!1,h.MyColorMenu.visible=!1,h.brushSliderVisible=!1,h.eraserSliderVisible=!1},handleMenu(e,a,t){h.pinDouMode||(p.closeMenu(),e.preventDefault(),setTimeout((()=>{h[a].visible=!0,h[a].left=e.touches[0].pageX,h[a].top=e.touches[0].pageY,h[a].contextData=JSON.parse(JSON.stringify(t)),"LayerMenu"===a&&p.handleChangeLayer(t.index)}),100))},preventDefaults(e){e.preventDefault(),e.stopPropagation()},handleDragZoneEvent(){const e=document.getElementById("dropZone");["dragenter","dragover","dragleave","drop"].forEach((a=>{e.addEventListener(a,p.preventDefaults,!1),document.body.addEventListener(a,p.preventDefaults,!1)})),e.addEventListener("drop",p.handleDrop,!1)},handleDrop(e){if(h.isPreview)return;const a=e.dataTransfer.files[0];p.handleImportDragImage(a)},handleMobileScaleCanvasDown(e){e.preventDefault(),e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY,h.isMoving=!0,h.moveData.x=e.clientX,h.moveData.y=e.clientY,document.addEventListener("touchmove",p.handleMobileScaleCanvasMove),document.addEventListener("touchend",p.handleMobileScaleCanvasUp)},handleMobileScaleCanvasUp(e){h.isMoving=!1,document.removeEventListener("touchmove",p.handleMobileScaleCanvasMove),document.removeEventListener("touchend",p.handleMobileScaleCanvasUp)},handleMobileScaleCanvasMove(e){h.isDoubleFingersMoving||(e.preventDefault(),e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY,p.handleScaleCanvasMove(e))},handleScaleCanvasDown(e){h.isMoving=!0,h.moveData.x=e.clientX,h.moveData.y=e.clientY,document.addEventListener("mousemove",p.handleScaleCanvasMove),document.addEventListener("mouseup",p.handleScaleCanvasUp)},handleScaleCanvasUp(){h.isMoving=!1,document.removeEventListener("mousemove",p.handleScaleCanvasMove),document.removeEventListener("mouseup",p.handleScaleCanvasUp)},handleScaleCanvasMove(e){if(!h.isMoving)return;const a=(e.clientX-h.moveData.x)/h.layerScale,t=(e.clientY-h.moveData.y)/h.layerScale;let l=parseFloat(h.scaleStyle.left),n=parseFloat(h.scaleStyle.top);l+=a,n+=t,h.scaleStyle.left=l+"px",h.scaleStyle.top=n+"px",p.handleResizeStyle(),h.moveData.x=e.clientX,h.moveData.y=e.clientY},mobileStartResize(e){e.stopPropagation(),h.isScale=!0;const a=e.target;h.resizeData.direction=a.className.split(" ")[1],h.resizeData.startX=e.touches[0].clientX,h.resizeData.startY=e.touches[0].clientY,document.addEventListener("touchmove",p.mobileResize),document.addEventListener("touchend",p.mobileStopResize)},mobileStopResize(){h.isScale=!1,document.removeEventListener("touchmove",p.mobileResize),document.removeEventListener("touchend",p.mobileStopResize)},mobileResize(e){e.preventDefault(),e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY,p.resize(e)},stopResize(){h.isScale=!1,document.removeEventListener("mousemove",p.resize),document.removeEventListener("mouseup",p.stopResize)},startResize(e){e.stopPropagation(),h.isScale=!0;const a=e.target;h.resizeData.direction=a.className.split(" ")[1],h.resizeData.startX=e.clientX,h.resizeData.startY=e.clientY,document.addEventListener("mousemove",p.resize),document.addEventListener("mouseup",p.stopResize)},resize(e){if(!h.isScale)return;let a=(e.clientX-h.resizeData.startX)/h.layerScale,t=(e.clientY-h.resizeData.startY)/h.layerScale;h.isAlt&&(a>t?t=a:a<t&&(a=t));let l=parseFloat(h.scaleStyle.width),n=parseFloat(h.scaleStyle.height),r=parseFloat(h.scaleStyle.left),i=parseFloat(h.scaleStyle.top),o=parseFloat(h.resizeStyle.width),s=parseFloat(h.resizeStyle.height),c=parseFloat(h.resizeStyle.left),d=parseFloat(h.resizeStyle.top);if(h.resizeData.direction.includes("left")&&(l-=a,r+=a,o-=a*h.layerScale,c+=a*h.layerScale),h.resizeData.direction.includes("right")&&(l+=a,o+=a*h.layerScale),h.resizeData.direction.includes("top")&&(n-=t,i+=t,s-=t*h.layerScale,d+=t*h.layerScale),h.resizeData.direction.includes("bottom")&&(n+=t,s+=t*h.layerScale),h.resizeData.startX=e.clientX,h.resizeData.startY=e.clientY,l<=1||n<=1)return;h.scaleStyle.width=l+"px",h.scaleStyle.height=n+"px",h.scaleStyle.left=r+"px",h.scaleStyle.top=i+"px",h.resizeStyle.width=o+"px",h.resizeStyle.height=s+"px",h.resizeStyle.left=c+"px",h.resizeStyle.top=d+"px";const g=parseInt(h.scaleStyle.width),A=parseInt(h.scaleStyle.height);h.scaleCanvas.width=g,h.scaleCanvas.height=A,h.ctx5.imageSmoothingEnabled=!1,h.ctx5.imageSmoothingQuality="none",h.ctx5.drawImage(h.scaleBoxDom.children[0].children[0],0,0,g,A)},handleChangeMenuType(e){if(h.brushColorVisible)return h.brushColorVisible=!1,void setTimeout((()=>{h.menuType=e}),300);h.menuType=e},handleSaveSpriteForSelect(){if(Be(h.selectData.selectCanvasObj.canvas,h.selectData.selectCanvasObj.ctx))return t.$message.warning("选择区域为空");let e=Ne(h.selectData.selectCanvasObj.canvas).toDataURL(h.exportFormat,1),a=ue.v4();g.saveSprite({spriteID:a,spriteImg:e}).then((e=>{e&&t.$message.success(t.$t("message.saveSucceeded"))})).catch((e=>{t.$message.error(t.$t("message.saveFailed"))}))},async handleSaveMindForSelect(){if(Be(h.selectData.selectCanvasObj.canvas,h.selectData.selectCanvasObj.ctx))return t.$message.warning("选择区域为空");let e=p.getCurrentLayerId();const a=Ne(h.selectData.selectCanvasObj.canvas);let l=a.toDataURL(h.exportFormat,1);h.loading=!0;let n=ue.v1();h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList.push(n),h.layerCrossList[e].mindLayerList[n]={mindId:n,mindObj:l,mindCanvas:a,mindCtx:a.getContext("2d"),isLock:!0,isHide:!1,width:a.width,height:a.height,left:0,top:0,mindName:`智能对象${Object.keys(h.layerCrossList[e].mindLayerList).length+1}`},h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isExpandMindList=!0,p.handleRemoveSelect(),p.handleChangeTool(0),p.reDraw(),h.loading=!1},async handleSaveMind(){let e=h.layerCrossList[p.getCurrentLayerId()];if(Be(e.layerCanvas,e.layerCtx))return t.$message.warning("画布为空");let a=JSON.parse(JSON.stringify(h.drawRecord[h.LayerMenu.contextData.currentFrameIndex].layer[h.LayerMenu.contextData.index].currentLayerImg)),l=p.getCurrentLayerId(),n=document.createElement("canvas"),r=n.getContext("2d");n.width=h.canvasWidth,n.height=h.canvasHeight;let i=e.layerCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight);null==r||r.putImageData(i,0,0),h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].currentLayerImg="",await p.handleCreateLayerCrossData("update",h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex]),h.loading=!0;let o=ue.v1();h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].mindLayerList.push(o),h.layerCrossList[l].mindLayerList[o]={mindId:o,mindObj:a,mindCanvas:n,mindCtx:r,isLock:!0,isHide:!1,width:h.canvasWidth,height:h.canvasHeight,left:0,top:0,mindName:`智能对象${Object.keys(h.layerCrossList[l].mindLayerList).length+1}`},h.drawRecord[h.currentFrameIndex].layer[h.currentLayerIndex].isExpandMindList=!0,p.reDraw(),h.loading=!1},handleSaveSprite(){let e=h.drawRecord[h.LayerMenu.contextData.currentFrameIndex].layer[h.LayerMenu.contextData.index].currentLayerImg,a=ue.v4();g.saveSprite({spriteID:a,spriteImg:e}).then((e=>{e&&t.$message.success(t.$t("message.saveSucceeded"))})).catch((e=>{t.$message.error(t.$t("message.saveFailed"))}))},handleIntelligentStroke(e){let a=W(e.strokeColor),l=h.layerCrossList[p.getCurrentLayerId()];if(Be(l.layerCanvas,l.layerCtx))return t.$message.warning("画布为空");h.loading=!0;let n=l.layerCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight);const r=n.data;for(let t=0;t<h.canvasWidth;t++)for(let e=0;e<h.canvasHeight;e++){let n=4*(t+e*h.canvasWidth);if(0!==l.layerData[n+3]){if(t>0){let e=n-4;0===r[e+3]&&(r[e]=a[0],r[e+1]=a[1],r[e+2]=a[2],r[e+3]=255)}if(t<h.canvasWidth-1){let e=n+4;0===r[e+3]&&(r[e]=a[0],r[e+1]=a[1],r[e+2]=a[2],r[e+3]=255)}if(e>0){let e=n-4*h.canvasWidth;0===r[e+3]&&(r[e]=a[0],r[e+1]=a[1],r[e+2]=a[2],r[e+3]=255)}if(e<h.canvasHeight-1){let e=n+4*h.canvasWidth;0===r[e+3]&&(r[e]=a[0],r[e+1]=a[1],r[e+2]=a[2],r[e+3]=255)}}}h.layerCrossList[p.getCurrentLayerId()].layerCtx.putImageData(n,0,0),p.reDraw(),h.loading=!1},handleIntelligentSlice(e){if(!e)return;h.gridLineTimer&&clearTimeout(h.gridLineTimer);let a=h.layerScale,t=me(h.canvasWidth)?(h.canvasWidth+.1)*a:h.canvasWidth*a,l=me(h.canvasHeight)?(h.canvasHeight+.1)*a:h.canvasHeight*a;h.ctx4.clearRect(0,0,t,l),h.gridCanvas.style.left="-9999px",h.gridCanvas.style.top="-9999px",h.intelligentSliceVisible&&(a<10||(h.intelligentSliceObj=e,h.gridLineTimer=setTimeout((()=>{h.gridCanvas.width=t,h.gridCanvas.height=l,h.canvasRealLeft=h.baseCanvas.getBoundingClientRect().left,h.canvasRealTop=h.baseCanvas.getBoundingClientRect().top,h.gridCanvas.style.left=h.canvas.getBoundingClientRect().left-h.canvasRealLeft+"px",h.gridCanvas.style.top=h.canvas.getBoundingClientRect().top-h.canvasRealTop+"px",h.ctx4.strokeStyle=g.themeValue?"white":"black",h.ctx4.lineWidth=1;let n=me(h.canvasHeight)?a+.1:a,r=me(h.canvasWidth)?a+.1:a;h.ctx4.beginPath();let i=Math.floor(h.canvasHeight/e.hCount),o=Math.floor(h.canvasWidth/e.vCount);for(let a=0;a<=i;a++)h.ctx4.moveTo(0,a*n*e.hCount+.5),h.ctx4.lineTo(h.gridCanvas.width,a*n*e.hCount+.5);for(let a=0;a<=o;a++)h.ctx4.moveTo(a*r*e.vCount+.5,0),h.ctx4.lineTo(a*r*e.vCount+.5,h.gridCanvas.height);h.ctx4.stroke()}),200)))},handleExportIntelligentSlice(e,a){let t=[];const l=Math.ceil(h.canvasWidth/e.hCount),n=Math.ceil(h.canvasHeight/e.vCount);for(let r=0;r<n;r++)for(let a=0;a<l;a++){const l=Math.min(e.hCount,h.canvasWidth-a*e.hCount),n=Math.min(e.vCount,h.canvasHeight-r*e.vCount),i=document.createElement("canvas"),o=i.getContext("2d");i.width=l,i.height=n,o.drawImage(h.canvas,a*e.hCount,r*e.vCount,l,n,0,0,l,n),t.push(i.toDataURL("image/png"))}Ee(`${h.projectData.projectName}_切片`,t),a()},handleCloseIntelligentSlice(){h.intelligentSliceVisible=!1,p.handleIntelligentSlice(h.intelligentSliceObj)},handleXYLineMobileDown(e){e.preventDefault();let a=e.target.className.split(" ")[0];h.isMovingLine=!0;let t=e.touches[0].clientX,l=e.touches[0].clientY;const n=e=>{if(h.isMovingLine){e.preventDefault(),e.stopPropagation();const n=e.touches[0].clientX-t,r=e.touches[0].clientY-l;a.includes("Y")?h.YLineOffset+=r:h.XLineOffset+=n,p.handleCheckAxisOffset(),t=e.touches[0].clientX,l=e.touches[0].clientY}},r=()=>{h.isMovingLine=!1,document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r)};document.addEventListener("touchmove",n),document.addEventListener("touchend",r)},handleXYLineMouseDown(e){e.stopPropagation();let a=e.target.className.split(" ")[0];h.isMovingLine=!0;let t=e.clientX,l=e.clientY;const n=e=>{if(h.isMovingLine){const n=e.clientX-t,r=e.clientY-l;a.includes("Y")?h.YLineOffset+=r:h.XLineOffset+=n,p.handleCheckAxisOffset(),t=e.clientX,l=e.clientY}},r=()=>{h.isMovingLine=!1,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)},handleIntelligentCrop(){if(Be(h.canvas,h.ctx1))return t.$message.warning("选择区域为空");h.loading=!0;let e=h.layerCrossList[p.getCurrentLayerId()].layerCtx.getImageData(0,0,h.canvasWidth,h.canvasHeight),a=null==e?void 0:e.data,l=1/0,n=1/0,r=-1/0,i=-1/0;for(let t=0;t<h.canvasHeight;t++)for(let e=0;e<h.canvasWidth;e++){a[4*(t*h.canvasWidth+e)+3]>0&&(e<l&&(l=e),e>r&&(r=e),t<n&&(n=t),t>i&&(i=t))}const o=Math.floor(r-l)+1,s=Math.floor(i-n)+1;if(o<=0||s<=0)return h.loading=!1;for(let t=0;t<h.drawRecord.length;t++)for(let e=0;e<h.drawRecord[t].layer.length;e++){let a=h.drawRecord[t].layer[e];const r=h.layerCrossList[a.layerId].layerCtx.getImageData(l,n,o,s);h.layerCrossList[a.layerId].layerCanvas.width=o,h.layerCrossList[a.layerId].layerCanvas.height=s,h.layerCrossList[a.layerId].layerCtx.putImageData(r,0,0)}h.canvasWidth=o,h.canvasHeight=s,(h.canvasHeight>100||h.canvasWidth>100)&&(h.isEnableCanvasGrid=!1),p.computeScale(),h.canvasBeginPos.centerX=h.canvasBeginPos.x+h.scale*h.canvasWidth/2,h.canvasBeginPos.centerY=h.canvasBeginPos.y+h.scale*h.canvasHeight/2,p.drawPixelArea(!0),p.handleSetCanvasScale(),p.reDraw(),p.handleLayerAndFrameHighRender(),h.loading=!1},handleLayerScaleRatio(){p.handleSetCanvasScale()},handleCloseAllDialog(){t.$refs.ReplaceColorDialog.handleClose(),t.$refs.MyColorDialog.handleClose(),t.$refs.PreviewAnimDialog.handleClose(),t.$refs.SpriteDialog.handleClose(),t.$refs.IntelligentSliceDialog.handleClose(),h.intelligentStrokeVisible=!1,t.$refs.CanvasRotateDialog.handleClose()},handleOpenImageColorPicker(){t.$refs.IframeDialog.handleOpen("图片取色","/html/colorPicker.html")}});return le((()=>r.data.addMyColorVisible),((e,a)=>{e&&p.handleCancelKeyboardEvent()})),le((()=>h.isShowReferenceLine),((e,a)=>{p.handleDrawReferenceLine()})),le((()=>h.isShowRuler),((e,a)=>{p.handleDrawReferenceLine()})),le((()=>h.isShowGridLine),((e,a)=>{p.handleDrawGridLine(),h.pinDouMode&&p.handlePindouBlockHighlight(h.pindouHighlightOptions)})),le((()=>h.pinDouMode),((e,a)=>{!1===e?(h.gridCanvas.style.left="-9999px",h.gridCanvas.style.top="-9999px",h.gridCanvas.style.transform="none",ze.closeAll(),h.currentTool=0,h.pindouHighlight=null,h.currentPindouIndex=0,h.isShowPindouGridLine=!1,h.isShowPindouReferenceLine=!1,h.isShowPindouRuler=!1,he((()=>{p.handleResetCanvas(),p.handleFrameImg(h.ctx1)}))):h.brushColorVisible=!1})),le((()=>g.themeValue),((e,a)=>{h.canvas&&h.bgCanvas&&p.drawPixelArea(!0)})),le((()=>g.isQueryProjectData),((e,a)=>{"1"===e?p.handleReadProjectData():"2"===e&&t.$router.replace("/project")})),le((()=>h.isEnableCanvasSmooth),((e,a)=>{if(e){h.ctx1.imageSmoothingEnabled=!0,h.ctx1.imageSmoothingQuality="medium";for(const e in h.layerCrossList)h.layerCrossList[e]&&(h.layerCrossList[e].layerCtx.imageSmoothingEnabled=!0,h.layerCrossList[e].layerCtx.imageSmoothingQuality="medium")}else{h.ctx1.imageSmoothingEnabled=!1,h.ctx1.imageSmoothingQuality="none";for(const e in h.layerCrossList)h.layerCrossList[e]&&(h.layerCrossList[e].layerCtx.imageSmoothingEnabled=!1,h.layerCrossList[e].layerCtx.imageSmoothingQuality="none")}p.reDraw(!0,!1)})),le((()=>h.brushColor),((e,a)=>{let t=qe(e),l=G(t);Se({message:`颜色：${t}`,color:l,background:t,zIndex:8888})})),ne((()=>{(h.layerDrawer||h.frameDrawer)&&he((()=>{p.handleLayerAndFrameHighRender()}))})),R((()=>{h.worker=new aa,document.addEventListener("click",p.closeMenu),p.handleDragZoneEvent(),re()||(h.exportFormat="image/png"),window.addEventListener("message",(function(e){e.data.includes("hsl")||(h.brushColor=e.data)}))})),ie((()=>{"1"===g.isQueryProjectData&&p.handleReadProjectData(),h.canvas&&(p.startDrawing(),document.addEventListener("click",p.closeMenu),h.isHidePindouMode||!h.pinDouMode&&!h.pinDouDrawMode||(p.handleShowPindou(),h.pinDouMode&&p.handleCancelKeyboardEvent()),!h.isHideLinmoMode&&h.linmoMode&&(h.isHideLinmoMode=!1,t.$refs.LinmoModeDialog.handleShow()))})),oe((()=>{var e,a,l,n,r,i,o,s;if(h.canvas){p.handleCancelSelect(),h.canvas.style.cursor="",h.canvas.classList="",h.canvas.removeEventListener("touchstart",p.mobileStart),h.canvas.removeEventListener("touchmove",p.mobileDraw),h.canvas.removeEventListener("touchend",p.mobileStop),h.canvas.removeEventListener("wheel",p.handleWheelEvent),null==(e=document.getElementById("ResizeBox"))||e.removeEventListener("mousedown",p.handleScaleCanvasDown),null==(a=document.getElementById("ResizeBox"))||a.removeEventListener("mouseup",p.handleScaleCanvasUp),null==(l=document.getElementById("ResizeBox"))||l.removeEventListener("touchstart",p.handleMobileScaleCanvasDown),null==(n=document.getElementById("ResizeBox"))||n.removeEventListener("touchend",p.handleMobileScaleCanvasUp);let c=document.getElementsByClassName("resize-handle");Array.from(c).forEach((e=>{e.removeEventListener("mousedown",p.startResize),e.removeEventListener("mouseup",p.stopResize),e.removeEventListener("touchstart",p.mobileStartResize),e.removeEventListener("touchend",p.mobileStopResize)})),h.baseCanvas.parentNode.removeEventListener("touchstart",p.handleMobileScaleStart),h.baseCanvas.parentNode.removeEventListener("touchmove",p.handleMobileScaleMove),h.baseCanvas.parentNode.removeEventListener("touchend",p.handleMobileScaleEnd),null==(r=document.querySelector(".X-line"))||r.removeEventListener("mousedown",p.handleXYLineMouseDown),null==(i=document.querySelector(".Y-line"))||i.removeEventListener("mousedown",p.handleXYLineMouseDown),null==(o=document.querySelector(".X-line"))||o.removeEventListener("touchstart",p.handleXYLineMobileDown),null==(s=document.querySelector(".Y-line"))||s.removeEventListener("touchstart",p.handleXYLineMobileDown),window.removeEventListener("keydown",p.handlekeyDownEvent),window.removeEventListener("keyup",p.handleKeyUpEvent),document.removeEventListener("click",p.closeMenu),t.$refs.ReplaceColorDialog.handleClose(),t.$refs.MyColorDialog.handleClose(),t.$refs.PreviewAnimDialog.handleClose(),t.$refs.SpriteDialog.handleClose(),t.$refs.PindouDialog.dialogVisible=!1,t.$refs.LinmoModeDialog.dialogVisible=!1,t.$refs.IntelligentSliceDialog.handleClose(),h.intelligentStrokeVisible=!1,t.$refs.CanvasRotateDialog.handleClose(),ze.closeAll()}})),z((()=>{h.worker&&h.worker.terminate(),g.saveProjectId("0");const e=document.getElementById("dropZone");["dragenter","dragover","dragleave","drop"].forEach((a=>{e.removeEventListener(a,p.preventDefaults,!1),document.body.removeEventListener(a,p.preventDefaults,!1)})),e.removeEventListener("drop",p.handleDrop,!1)})),s(o(o(o(o(s(o(o(o({},M(h)),p),u),{editSpaceStore:g,copyText:se,isEmptyObj:ce}),b()),function(){const{proxy:e}=X();k();const a={draging:null,target:null,timer:null,folderTarget:null,flag:!0},t={onMobileDragStart(e,t,l=!1){t||l||(e.preventDefault(),a.draging=e.target.parentNode.parentNode)},onMobileDragOver(l,n){if(l.preventDefault(),a.target=document.elementFromPoint(l.touches[0].clientX,l.touches[0].clientY),"LII"===a.target.dataset.node&&a.target!==a.draging){if(a.target.parentNode.getBoundingClientRect().top,a.draging.parentNode.getBoundingClientRect().top,a.target.parentNode&&a.target.parentNode.animated)return;let l=e.$refs[n].$el||e.$refs[n];t._index(a.draging,n)<t._index(a.target.parentNode,n)?l.insertBefore(a.draging,a.target.parentNode.nextSibling):l.insertBefore(a.draging,a.target.parentNode)}},_anim(e,a){let t=e-a.getBoundingClientRect().top;a.style.transition="none",a.style.transform=`translateY(${t}px)`,clearTimeout(a.animated),a.animated=setTimeout((()=>{a.style.transition="",a.style.transform="",a.animated=!1}),300)},_index(a,t){let l=e.$refs[t].$el||e.$refs[t];return Array.from(l.children).findIndex((e=>e.getAttribute("data-key")===a.getAttribute("data-key")))}};return o({},t)}()),M(r.data)),r.computedApi),{getFontColor:G})}}),Ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAANtJREFUWEftlq0RAjEQhd+KtIDGQw9QAQpHCUhkRF48mgrogAKAIhAoJIIiwhxzzACXuTMJG5HYzLx9+Tb7I1A+ohwf1UCZBEgSwCzx/zi3ul+yHQIk9wBWiYO/5ETk4JxbfGrHDNwAjHMYCCE8vPejIQNbAJscBgDsSK57DTSXJBsCSSkYY67W2vvvw8qsgkz4o7KVQKwMKSLLEMIkcSpOADrNKGbgCGCeOPi7EV2cc9OhPqBuQDcFOdD3adYyLJOA6jAiqTuOSaovJLorWbuQ6C2ltRFVAv8m8ATBbFQh8UPqNAAAAABJRU5ErkJggg==";Symbol.toStringTag;const Ut={class:"scrollbar scrollX full-w draw-panel full-h"},Ht={class:"back flex-start"},Jt={class:"oneline",style:{"font-size":"18px","line-height":"2"}},Qt={key:0,style:{color:"red","margin-left":"5px"}},Yt={class:"flex-end"},Vt={class:"flex-center",style:{gap:"5px"}},Xt=["innerHTML"],Wt={class:"flex-center",style:{gap:"5px"}},jt=["innerHTML"],Nt={class:"flex-center",style:{gap:"5px"}},Kt=["innerHTML"],Gt={class:"flex-center",style:{gap:"5px"}},zt=["innerHTML"],qt={class:"flex-center",style:{gap:"5px"}},Zt=["innerHTML"],$t={class:"flex full-w flex-warp full-h scrollY scrollbar",id:"draw-panel"},_t={class:"full-w full-h"},el={class:"flex-start flex-nowarp full-w draw-body",style:{flex:"1"}},al={key:0,class:"functionBox"},tl={class:"flex-column-start"},ll=["src"],nl=["src"],rl=["src"],il=["src"],ol=["src"],sl=["src"],cl=["src"],dl=["src"],gl={class:"flex-column-end"},Al=["src"],hl={class:"pointer toolItem"},ul=["src"],pl=["src"],ml={class:"pointer toolItem"},Cl=["src"],yl=["src"],fl=["src"],vl={key:0,class:"operation-box full-w flex-end"},wl={key:0,class:"flex"},Dl=["innerHTML"],Sl=["innerHTML"],Ll=["innerHTML"],xl=["innerHTML"],bl=["innerHTML"],Il={key:1,class:"flex"},kl=["innerHTML"],Bl=["innerHTML"],Rl={key:1,class:"brush-slider flex-center"},Ml={class:"custom-button"},Fl={key:2,class:"eraser-slider flex-center"},El={class:"custom-button"},Tl=["src"],Pl={key:4,class:"gridInfo"},Ol={key:5,class:"colorSelector"},Ul=["onClick"],Hl={key:6,class:"colorSelector"},Jl=["title"],Ql={key:8,class:"palette-box scrollbar full-w"},Yl=["title","onClick"],Vl={class:"flex-start",style:{gap:"20px"}},Xl={class:"flex-end",style:{gap:"20px"}},Wl={key:0,class:"functionBox-bottom"},jl={class:"flex-center",style:{gap:"10px"}},Nl=["src"],Kl=["src"],Gl=["src"],zl=["src"],ql=["src"],Zl=["src"],$l=["src"],_l=["src"],en={class:"flex-center",style:{gap:"10px"}},an=["src"],tn={class:"pointer toolItem"},ln=["src"],nn=["src"],rn={class:"pointer toolItem"},on=["src"],sn=["src"],cn=["src"],dn={class:"full-w full-h scrollbar scrollY scrollXHidden",style:{padding:"0 10px 0 1px"}},gn={key:0,class:"full-w"},An={key:0,class:"function-block-column",style:{"margin-top":"15px"}},hn={class:"flex-between full-w"},un={class:"flex-start",style:{gap:"10px"}},pn={class:"function-label",style:{"margin-right":"0px"}},mn={class:"color-group-select-icon flex-center pointer"},Cn={class:"flex-start flex-warp common-color scrollbar"},yn=["title","onTouchstart","onClick"],fn={class:"function-block-column"},vn={class:"flex-between flex-nowarp full-w"},wn={style:{gap:"10px","margin-top":"10px"},class:"flex-start full-w"},Dn={style:{"margin-top":"10px"},class:"flex-between symmetric-box full-w"},Sn={style:{"margin-top":"10px"},class:"flex-between symmetric-box full-w"},Ln={key:0,class:"function-block function-block-between",style:{"margin-top":"5px"}},xn={class:"custom-button"},bn={key:1,class:"function-block function-block-between",style:{"margin-top":"20px"}},In={class:"custom-button"},kn={key:2,class:"function-block function-block-between",style:{"margin-top":"20px"}},Bn={class:"custom-button"},Rn={key:3,class:"function-block function-block-between",style:{"margin-top":"20px"}},Mn={class:"custom-button"},Fn={key:4,class:"function-block function-block-between",style:{"margin-top":"20px"}},En={class:"custom-button"},Tn={class:"function-block function-block-between"},Pn={class:"function-block function-block-between"},On={class:"function-block function-block-between"},Un={class:"function-block function-block-between"},Hn={class:"function-block function-block-between"},Jn={class:"function-block function-block-between",style:{"margin-top":"5px"}},Qn={class:"function-block function-block-between",style:{"margin-top":"5px"}},Yn={key:2,class:"function-block function-block-between",style:{"margin-top":"5px"}},Vn={class:"function-block function-block-between",style:{"margin-top":"5px"}},Xn={class:"function-block function-block-between",style:{"margin-top":"5px"}},Wn={class:"function-block function-block-between",style:{"margin-top":"5px"}},jn={class:"function-block function-block-between",style:{"margin-top":"5px"}},Nn={class:"function-block function-block-between",style:{"margin-top":"5px"}},Kn={class:"full-h flex flex-column pindou-list scrollbar text-center",style:{gap:"15px"}},Gn=["onClick"],zn=["src"],qn={key:0,class:"full-h flex flex-column pindou-list scrollbar text-center",style:{gap:"15px"}},Zn=["onClick"],$n=["src"],_n={key:1,class:"full-w full-h"},er={key:0,class:"full-w full-h scrollHidden"},ar={key:0,class:"full-w flex-end",style:{padding:"5px 0"}},tr={class:"flex-end"},lr={ref:"layerBox",id:"layer-box",class:"scrollbar scrollY full-w layer-list",style:{height:"calc(100% - 61px)"}},nr=["data-key"],rr=["data-key","disabled","onTouchstart","onClick"],ir={class:"flex-column-center full-w",style:{"padding-top":"2px"}},or={class:"full-w flex-between"},sr={class:"flex-start",style:{gap:"5px"}},cr=["onClick"],dr=["src"],gr={class:"layer-img flex-center"},Ar=["src"],hr={key:0},ur=["onDblclick","title"],pr={key:0,class:"flex-end",style:{gap:"5px"}},mr={key:0,class:"full-w",style:{padding:"20px 0px 0px 0px"}},Cr={class:"full-w flex-between"},yr={class:"flex-start",style:{gap:"5px"}},fr=["onClick"],vr=["src"],wr={key:1,class:"layer-img flex-center"},Dr=["src"],Sr={key:2},Lr=["onDblclick","title"],xr={key:0,class:"flex-end",style:{gap:"5px"}},br=["data-key"],Ir=["src","data-key"],kr={class:"frame-list scrollbar full-h flex flex-column",style:{"padding-right":"10px"},ref:"frameBox",id:"frame-box"},Br=["data-key"],Rr=["onClick","onTouchstart"],Mr=["src"],Fr=["data-key"],Er=["src","data-key"],Tr={class:"flex-between",style:{"margin-top":"10px"}},Pr={class:"flex-end"},Or={style:{"margin-top":"10px"}},Ur={class:"dialog-footer"};var Hr=ea(Pt,[["render",function(e,a,t,l,n,r){const i=F("ArrowLeftBold"),o=F("el-icon"),s=F("Loading"),c=F("Back"),d=F("Right"),g=F("Folder"),A=F("el-dropdown-item"),h=F("el-dropdown-menu"),u=F("el-dropdown"),p=F("FullScreen"),m=F("sketch-picker"),C=F("van-popover"),y=F("el-header"),f=F("el-tooltip"),v=F("el-button"),w=F("van-slider"),D=F("VueDragScale"),S=F("Expand"),L=F("van-floating-bubble"),x=F("ZoomIn"),b=F("ZoomOut"),I=F("Refresh"),k=F("Pointer"),B=F("VideoPlay"),R=F("Grid"),M=F("VideoCameraFilled"),X=F("PictureFilled"),W=F("Operation"),j=F("el-footer"),N=F("el-main"),K=F("el-container"),G=F("CaretBottom"),z=F("Plus"),te=F("MoreFilled"),le=F("search"),ne=F("el-input"),re=F("el-checkbox"),ie=F("van-divider"),oe=F("van-stepper"),se=F("el-switch"),ce=F("el-drawer"),de=F("View"),ge=F("Hide"),Ae=F("DocumentAdd"),he=F("CirclePlus"),ue=F("el-divider"),pe=F("Lock"),me=F("Unlock"),Ce=F("CopyDocument"),ye=F("Delete"),fe=F("el-popconfirm"),ve=F("ArrowDown"),we=F("ArrowUp"),De=F("arrow-down"),Se=F("el-timeline-item"),Le=F("el-timeline"),xe=F("el-checkbox-group"),be=F("MyColorDialog"),Ie=F("SpriteDialog"),ke=F("ReplaceColorDialog"),Be=F("CanvasRotateDialog"),Re=F("IntelligentStrokeDialog"),Me=F("IntelligentSliceDialog"),Fe=F("ExportDialog"),Ee=F("PreviewAnimDialog"),Te=F("PindouDialog"),Pe=F("LayerMenu"),Oe=F("FrameMenu"),Ue=F("MyColorMenu"),He=F("LinmoModeDialog"),Je=F("UploadImageLayerDialog"),Qe=F("IframeDialog"),Ye=F("el-color-picker"),Ve=F("el-option"),Xe=F("el-select"),We=F("el-dialog"),je=q("loading");return E(),Q("div",{class:"container full-h",style:V(e.checkzIndex)},[U(K,{class:"full-h flex-warp"},{default:P((()=>[O("div",Ut,[U(N,{class:"flex-column-center",style:{display:"flex",padding:"0","min-width":"360px"}},{default:P((()=>[U(y,{class:"flex-between",id:"project-header",style:{padding:"0 20px"}},{default:P((()=>[O("div",Ht,[U(o,{onClick:e.handleBack},{default:P((()=>[U(i)])),_:1},8,["onClick"]),O("h1",Jt,J(e.projectData.projectName),1),e.isSaveProject||e.isPreview?Y("",!0):(E(),Q("span",Qt,"*")),e.editSpaceStore.isAutoBackuping?(E(),T(o,{key:1,style:{"margin-left":"10px"},color:"green",class:ae({"is-loading":e.editSpaceStore.isAutoBackuping})},{default:P((()=>[U(s)])),_:1},8,["class"])):Y("",!0)]),O("div",Yt,[e.isPreview?Y("",!0):(E(),T(o,{key:0,style:{"margin-right":"20px"},onClick:e.handleRevoke,class:ae({isNotAllowed:e.loading||!e.historyRecord.length||8===e.currentTool||e.isControlMindObj})},{default:P((()=>[U(c)])),_:1},8,["onClick","class"])),e.isPreview?Y("",!0):(E(),T(o,{key:1,style:{"margin-right":"20px"},onClick:e.handleRecover,class:ae({isNotAllowed:e.loading||!e.historyRecord.length||8===e.currentTool||e.isControlMindObj})},{default:P((()=>[U(d)])),_:1},8,["onClick","class"])),U(u,{placement:"bottom",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:e.handleImportImage,disabled:e.pinDouMode},{default:P((()=>[O("div",Vt,[O("i",{innerHTML:e.$iconSvg.importImage,style:{"font-size":"18px"},class:"el-icon"},null,8,Xt),a[191]||(a[191]=O("span",null,"导入图像",-1))])])),_:1},8,["onClick","disabled"]),U(A,{onClick:e.handleImportImageForGif,disabled:e.pinDouMode},{default:P((()=>[O("div",Wt,[O("i",{innerHTML:e.$iconSvg.gif,style:{"font-size":"18px"},class:"el-icon"},null,8,jt),a[192]||(a[192]=O("span",null,"导入GIF",-1))])])),_:1},8,["onClick","disabled"]),U(A,{onClick:e.handleSaveProject,disabled:e.pinDouMode},{default:P((()=>[O("div",Nt,[O("i",{innerHTML:e.$iconSvg.save,style:{"font-size":"18px"},class:"el-icon"},null,8,Kt),a[193]||(a[193]=O("span",null,"保存项目",-1))])])),_:1},8,["onClick","disabled"]),U(A,{onClick:a[0]||(a[0]=a=>e.handleExportDialog(!0)),disabled:e.pinDouMode},{default:P((()=>[O("div",Gt,[O("i",{innerHTML:e.$iconSvg.exportProject,style:{"font-size":"18px"},class:"el-icon"},null,8,zt),a[194]||(a[194]=O("span",null,"导出项目",-1))])])),_:1},8,["disabled"]),U(A,{onClick:a[1]||(a[1]=a=>e.handleExportDialog(!1)),disabled:e.pinDouMode},{default:P((()=>[O("div",qt,[O("i",{innerHTML:e.$iconSvg.exportImage,style:{"font-size":"18px"},class:"el-icon"},null,8,Zt),a[195]||(a[195]=O("span",null,"导出图像",-1))])])),_:1},8,["disabled"])])),_:1})])),default:P((()=>[e.isPreview?Y("",!0):(E(),T(o,{key:0,style:{"margin-right":"20px"},size:"16"},{default:P((()=>[U(g)])),_:1}))])),_:1}),e.isPreview?Y("",!0):(E(),T(o,{key:2,class:ae({active:e.editSpaceStore.isFullWork}),style:{"margin-right":"20px"},onClick:e.handleScreenFull},{default:P((()=>[U(p)])),_:1},8,["class","onClick"])),U(C,{placement:"bottom-end",offset:[8,8],theme:e.editSpaceStore.themeValue?"dark":"light"},{reference:P((()=>[e.isPreview?Y("",!0):(E(),Q("div",{key:0,style:V([{backgroundColor:e.brushColor},{"margin-right":"0px"}]),class:"color-picker",onClick:a[5]||(a[5]=a=>e.brushColorVisible=!e.brushColorVisible)},null,4))])),default:P((()=>[U(m,{modelValue:e.brushColor,onCopy:a[2]||(a[2]=a=>e.handleCopyColor(e.brushColor)),onSave:a[3]||(a[3]=a=>e.handleSaveColor(!1,e.brushColor)),"onUpdate:modelValue":a[4]||(a[4]=a=>e.brushColor=a.hex8)},null,8,["modelValue"])])),_:1},8,["theme"])])])),_:1}),O("div",$t,[O("div",_t,[O("div",el,[e.isPreview||e.isEnableToolBoxToBottom?Y("",!0):(E(),Q("div",al,[O("div",tl,[U(f,{content:"画笔",placement:"right"},{default:P((()=>[O("div",{class:ae(["pointer toolItem flex-center",{active:0===e.currentTool}]),style:{"margin-top":"0"},onTouchstart:a[6]||(a[6]=a=>{e.handleTouchStartV2(a,(()=>{e.eraserSliderVisible=!1,e.brushSliderVisible=!0}),(()=>e.handleChangeTool(0)),e.isPreview,!0)}),onTouchmove:a[7]||(a[7]=(...a)=>e.handleTouchMove&&e.handleTouchMove(...a)),onTouchend:a[8]||(a[8]=(...a)=>e.handleTouchEnd&&e.handleTouchEnd(...a)),onClick:a[9]||(a[9]=a=>e.handleChangeTool(0))},[O("img",{src:e.requireIcon("brush")},null,8,ll)],34)])),_:1}),U(f,{content:"橡皮擦",placement:"right"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:1===e.currentTool}]),onTouchstart:a[10]||(a[10]=a=>{e.handleTouchStartV2(a,(()=>{e.brushSliderVisible=!1,e.eraserSliderVisible=!0}),(()=>e.handleChangeTool(1)),e.isPreview,!0)}),onTouchmove:a[11]||(a[11]=(...a)=>e.handleTouchMove&&e.handleTouchMove(...a)),onTouchend:a[12]||(a[12]=(...a)=>e.handleTouchEnd&&e.handleTouchEnd(...a)),onClick:a[13]||(a[13]=a=>e.handleChangeTool(1))},[O("img",{src:e.requireIcon("eraser")},null,8,nl)],34)])),_:1}),U(f,{content:"吸管",placement:"right"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:2===e.currentTool}]),onClick:a[14]||(a[14]=a=>e.handleChangeTool(2))},[O("img",{src:e.requireIcon("straw")},null,8,rl)],2)])),_:1}),U(f,{content:"油漆桶",placement:"right"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:4===e.currentTool}]),onClick:a[15]||(a[15]=a=>e.handleChangeTool(4))},[O("img",{src:e.requireIcon("bucket")},null,8,il)],2)])),_:1}),U(f,{content:"移动",placement:"right"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:7===e.currentTool}]),onClick:a[16]||(a[16]=a=>e.handleChangeTool(7))},[O("img",{src:e.requireIcon("move")},null,8,ol)],2)])),_:1}),U(f,{content:"形状",placement:"right"},{default:P((()=>[U(u,{placement:"bottom-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[18]||(a[18]=a=>e.drawShape("rect")),disabled:e.pinDouMode},{default:P((()=>a[196]||(a[196]=[H("矩 形")]))),_:1,__:[196]},8,["disabled"]),U(A,{onClick:a[19]||(a[19]=a=>e.drawShape("circle")),disabled:e.pinDouMode},{default:P((()=>a[197]||(a[197]=[H("圆 形")]))),_:1,__:[197]},8,["disabled"]),U(A,{onClick:a[20]||(a[20]=a=>e.drawShape("line")),disabled:e.pinDouMode},{default:P((()=>a[198]||(a[198]=[H("直 线")]))),_:1,__:[198]},8,["disabled"]),U(A,{onClick:a[21]||(a[21]=a=>e.drawShape("fillRect")),disabled:e.pinDouMode},{default:P((()=>a[199]||(a[199]=[H("填充矩形")]))),_:1,__:[199]},8,["disabled"]),Y("",!0)])),_:1})])),default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:3===e.currentTool}]),onClick:a[17]||(a[17]=a=>e.handleChangeTool(3))},[O("img",{src:e.requireShapeImg},null,8,sl)],2)])),_:1})])),_:1}),U(f,{content:"选区",placement:"right"},{default:P((()=>[U(u,{placement:"bottom-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[24]||(a[24]=a=>e.selectType="select")},{default:P((()=>a[201]||(a[201]=[H("手动选择")]))),_:1,__:[201]}),U(A,{onClick:a[25]||(a[25]=a=>e.selectType="quickSelect")},{default:P((()=>a[202]||(a[202]=[H("快速选择")]))),_:1,__:[202]}),U(A,{onClick:a[26]||(a[26]=a=>e.selectType="rangeSelect")},{default:P((()=>a[203]||(a[203]=[H("区域选择")]))),_:1,__:[203]}),U(A,{onClick:e.handleCancelSelect,disabled:8!==e.currentTool||e.isScaling},{default:P((()=>a[204]||(a[204]=[H("取消选择")]))),_:1,__:[204]},8,["onClick","disabled"]),U(A,{onClick:e.handleCopySelectData,disabled:8!==e.currentTool||e.isScaling},{default:P((()=>a[205]||(a[205]=[H("复 制")]))),_:1,__:[205]},8,["onClick","disabled"]),U(A,{onClick:e.handleRemoveSelect,disabled:8!==e.currentTool||e.isScaling},{default:P((()=>a[206]||(a[206]=[H("删 除")]))),_:1,__:[206]},8,["onClick","disabled"]),U(A,{disabled:""},{default:P((()=>a[207]||(a[207]=[H("移 动")]))),_:1,__:[207]})])),_:1})])),default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:8===e.currentTool}]),onClick:a[23]||(a[23]=a=>e.handleChangeTool(8))},[O("img",{src:e.requireSelectImg},null,8,cl)],2)])),_:1})])),_:1}),U(f,{content:"更多",placement:"right"},{default:P((()=>[U(u,{placement:"bottom-start",trigger:"click",disabled:e.pinDouMode},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[27]||(a[27]=a=>e.handleChangeTool(10))},{default:P((()=>a[208]||(a[208]=[H("精灵资源")]))),_:1,__:[208]}),U(A,{onClick:a[28]||(a[28]=a=>e.intelligentStrokeVisible=!0)},{default:P((()=>a[209]||(a[209]=[H("智能描边")]))),_:1,__:[209]}),U(A,{onClick:e.handleIntelligentCrop},{default:P((()=>a[210]||(a[210]=[H("智能裁剪")]))),_:1,__:[210]},8,["onClick"]),U(A,{onClick:e.handleIntelligentSliceVisible},{default:P((()=>a[211]||(a[211]=[H("智能切片")]))),_:1,__:[211]},8,["onClick"]),U(A,{onClick:e.handleOpenImageColorPicker},{default:P((()=>a[212]||(a[212]=[H("图片取色")]))),_:1,__:[212]},8,["onClick"])])),_:1})])),default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:[10].includes(e.currentTool)}])},[O("img",{src:e.requireIcon("more")},null,8,dl)],2)])),_:1},8,["disabled"])])),_:1})]),O("div",gl,[U(f,{content:"变换",placement:"right"},{default:P((()=>[U(u,{placement:"top-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[29]||(a[29]=a=>e.drawTransform("crop")),disabled:e.pinDouMode||e.isControlMindObj},{default:P((()=>a[213]||(a[213]=[H("裁剪")]))),_:1,__:[213]},8,["disabled"]),U(A,{onClick:a[30]||(a[30]=a=>e.drawTransform("scale")),disabled:e.pinDouMode||e.isControlMindObj},{default:P((()=>a[214]||(a[214]=[H("缩放")]))),_:1,__:[214]},8,["disabled"]),U(A,{onClick:a[31]||(a[31]=a=>e.drawTransform("hReverse")),disabled:e.pinDouMode},{default:P((()=>a[215]||(a[215]=[H("水平翻转")]))),_:1,__:[215]},8,["disabled"]),U(A,{onClick:a[32]||(a[32]=a=>e.drawTransform("vReverse")),disabled:e.pinDouMode},{default:P((()=>a[216]||(a[216]=[H("垂直翻转")]))),_:1,__:[216]},8,["disabled"]),U(A,{onClick:a[33]||(a[33]=a=>e.drawTransform("cReverse")),disabled:e.pinDouMode},{default:P((()=>a[217]||(a[217]=[H("中心翻转")]))),_:1,__:[217]},8,["disabled"]),U(A,{onClick:a[34]||(a[34]=a=>e.drawTransform("rotate")),disabled:e.pinDouMode||8===e.currentTool||e.isControlMindObj},{default:P((()=>a[218]||(a[218]=[H("旋转")]))),_:1,__:[218]},8,["disabled"])])),_:1})])),default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:9===e.currentTool||11===e.currentTool||e.isScaling}])},[O("img",{src:e.requireTransformImg},null,8,Al)],2)])),_:1})])),_:1}),U(f,{content:"滤镜",placement:"right"},{default:P((()=>[U(u,{placement:"top-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[35]||(a[35]=a=>e.handleFilter(1)),disabled:e.pinDouMode},{default:P((()=>a[219]||(a[219]=[H("黑 白")]))),_:1,__:[219]},8,["disabled"]),U(A,{onClick:a[36]||(a[36]=a=>e.handleFilter(2)),disabled:e.pinDouMode},{default:P((()=>a[220]||(a[220]=[H("反 相")]))),_:1,__:[220]},8,["disabled"]),U(A,{onClick:a[37]||(a[37]=a=>e.handleFilter(3)),disabled:e.pinDouMode},{default:P((()=>a[221]||(a[221]=[H("BGRA")]))),_:1,__:[221]},8,["disabled"])])),_:1})])),default:P((()=>[O("div",hl,[O("img",{src:e.requireIcon("filter")},null,8,ul)])])),_:1})])),_:1}),U(f,{content:"替换颜色",placement:"right"},{default:P((()=>[O("div",{class:"pointer toolItem",onClick:a[38]||(a[38]=(...a)=>e.handleOpenReplaceColorDialog&&e.handleOpenReplaceColorDialog(...a))},[O("img",{src:e.requireIcon("color")},null,8,pl)])])),_:1}),U(f,{content:"清空图层",placement:"right"},{default:P((()=>[U(u,{placement:"top-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[39]||(a[39]=a=>e.handleClearLayer("all")),disabled:e.pinDouMode},{default:P((()=>a[222]||(a[222]=[H("清空所有图层")]))),_:1,__:[222]},8,["disabled"]),U(A,{onClick:a[40]||(a[40]=a=>e.handleClearLayer("single")),disabled:e.pinDouMode},{default:P((()=>a[223]||(a[223]=[H("清空当前图层")]))),_:1,__:[223]},8,["disabled"])])),_:1})])),default:P((()=>[O("div",ml,[O("img",{src:e.requireIcon("clear")},null,8,Cl)])])),_:1})])),_:1}),U(f,{content:"拼豆模式",placement:"right"},{default:P((()=>[U(C,{actions:e.pindouTypeList,onSelect:e.handleSelectPindouMode,placement:"top-start",theme:e.editSpaceStore.themeValue?"dark":"light",offset:[0,2]},{reference:P((()=>[O("div",{class:ae(["pointer toolItem",{active:e.pinDouMode||e.pinDouDrawMode,isNotAllowed:e.isControlMindObj}])},[O("img",{src:e.requireIcon("pindou")},null,8,yl)],2)])),_:1},8,["actions","onSelect","theme"])])),_:1}),U(f,{content:"临摹模式",placement:"right"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:e.linmoMode}]),onClick:a[41]||(a[41]=(...a)=>e.handleLinmoMode&&e.handleLinmoMode(...a))},[O("img",{src:e.requireIcon("copy")},null,8,fl)],2)])),_:1})])])),Z((E(),Q("div",{onContextmenu:a[58]||(a[58]=e=>e.preventDefault()),class:"pixelBox scrollbar",id:"dropZone","element-loading-background":"#00000033"},[8===e.currentTool||9===e.currentTool||e.isScaling?(E(),Q("div",vl,[8===e.currentTool?(E(),Q("div",wl,[U(f,{content:"转智能对象",placement:"bottom"},{default:P((()=>[U(v,{type:"warning",size:"small",onClick:e.handleSaveMindForSelect,disabled:e.isScaling},{default:P((()=>[O("i",{innerHTML:e.$iconSvg.mindselect,class:"el-icon",style:{"font-size":"16px"}},null,8,Dl)])),_:1},8,["onClick","disabled"])])),_:1}),U(f,{content:"保存为精灵",placement:"bottom"},{default:P((()=>[U(v,{type:"warning",size:"small",onClick:e.handleSaveSpriteForSelect,disabled:e.isScaling},{default:P((()=>[O("i",{innerHTML:e.$iconSvg.spirit,class:"el-icon",style:{"font-size":"16px"}},null,8,Sl)])),_:1},8,["onClick","disabled"])])),_:1}),U(f,{content:"复制选区",placement:"bottom"},{default:P((()=>[U(v,{type:"success",size:"small",onClick:e.handleCopySelectData,disabled:e.isScaling},{default:P((()=>[O("i",{innerHTML:e.$iconSvg.selectcopy,class:"el-icon",style:{"font-size":"16px"}},null,8,Ll)])),_:1},8,["onClick","disabled"])])),_:1}),U(f,{content:"删除选区",placement:"bottom"},{default:P((()=>[U(v,{type:"danger",size:"small",onClick:e.handleRemoveSelect,disabled:e.isScaling},{default:P((()=>[O("i",{innerHTML:e.$iconSvg.deleteselect,class:"el-icon",style:{"font-size":"16px"}},null,8,xl)])),_:1},8,["onClick","disabled"])])),_:1}),U(f,{content:"取消选择",placement:"bottom"},{default:P((()=>[U(v,{type:"primary",size:"small",onClick:a[42]||(a[42]=a=>e.handleChangeTool(0)),disabled:e.isScaling},{default:P((()=>[O("i",{innerHTML:e.$iconSvg.cancelselect,class:"el-icon",style:{"font-size":"16px"}},null,8,bl)])),_:1},8,["disabled"])])),_:1})])):Y("",!0),9===e.currentTool||e.isScaling?(E(),Q("div",Il,[U(v,{type:"danger",size:"small",onClick:e.handleCancelScale},{default:P((()=>[O("i",{innerHTML:e.$iconSvg.closebox,class:"el-icon",style:{"font-size":"16px"}},null,8,kl)])),_:1},8,["onClick"]),U(v,{type:"success",size:"small",onClick:e.handleFinishScale},{default:P((()=>[O("i",{innerHTML:e.$iconSvg.checkbox,class:"el-icon",style:{"font-size":"16px"}},null,8,Bl)])),_:1},8,["onClick"])])):Y("",!0)])):Y("",!0),e.brushSliderVisible?(E(),Q("div",Rl,[U(w,{modelValue:e.brushSize,"onUpdate:modelValue":a[43]||(a[43]=a=>e.brushSize=a),max:20,min:1,vertical:""},{button:P((()=>[O("div",Ml,J(e.brushSize),1)])),_:1},8,["modelValue"])])):Y("",!0),e.eraserSliderVisible?(E(),Q("div",Fl,[U(w,{modelValue:e.eraserSize,"onUpdate:modelValue":a[44]||(a[44]=a=>e.eraserSize=a),max:20,min:1,vertical:""},{button:P((()=>[O("div",El,J(e.eraserSize),1)])),_:1},8,["modelValue"])])):Y("",!0),e.linmoPhoto?(E(),T(D,{key:3,linmoPhotoStyle:e.linmoPhotoStyle,isHighPreview:e.isHighPreview,linmoPhoto:e.linmoPhoto,onUpdate:e.handleUpdateLinmoStyle},null,8,["linmoPhotoStyle","isHighPreview","linmoPhoto","onUpdate"])):Y("",!0),O("canvas",{id:"PixelCanvas",width:"512",height:"512",onContextmenu:a[45]||(a[45]=e=>e.preventDefault()),style:V(e.canvasStyle)},null,36),O("canvas",{id:"Canvas",style:V(e.canvasStyle),onDblclick:a[46]||(a[46]=a=>e.isSpace=!1),width:"512",height:"512",onContextmenu:a[47]||(a[47]=e=>e.preventDefault())},null,36),Z(O("div",{class:ae(["ScaleBox",{"pointer-none":e.isSpace}]),style:V(e.canvasStyle)},[O("div",{id:"scale-box",style:V(e.scaleStyle)},[Z(O("img",{src:e.scaleImg,onContextmenu:a[48]||(a[48]=e=>e.preventDefault())},null,40,Tl),[[Ze,!1]]),O("canvas",{id:"scale-canvas",onContextmenu:a[49]||(a[49]=e=>e.preventDefault())},null,32)],4)],6),[[Ze,e.isScaling||e.isControlMindObj]]),Z(O("div",{class:ae(["resize-box",{"pointer-none":e.isSpace||e.isShift}]),id:"ResizeBox",style:V(e.resizeStyle)},a[224]||(a[224]=[O("div",{class:"resize-handle top-left"},null,-1),O("div",{class:"resize-handle top"},null,-1),O("div",{class:"resize-handle top-right"},null,-1),O("div",{class:"resize-handle right"},null,-1),O("div",{class:"resize-handle bottom-right"},null,-1),O("div",{class:"resize-handle bottom"},null,-1),O("div",{class:"resize-handle bottom-left"},null,-1),O("div",{class:"resize-handle left"},null,-1)]),6),[[Ze,e.isScaling||e.isControlMindObj]]),O("canvas",{id:"GridCanvas",width:"512",height:"512",onContextmenu:a[50]||(a[50]=e=>e.preventDefault())},null,32),O("canvas",{id:"BaseCanvas",width:"512",height:"512",onContextmenu:a[51]||(a[51]=e=>e.preventDefault())},null,32),Z(O("div",{class:"X-line",style:V(e.axisXStyle)},null,4),[[Ze,e.isHorizontal]]),Z(O("div",{class:"Y-line",style:V(e.axisYStyle)},null,4),[[Ze,e.isVertical]]),""===e.gridInfo||8===e.currentTool||9===e.currentTool||e.isScaling?Y("",!0):(E(),Q("p",Pl,J(e.gridInfo),1)),e.drawRecord.length&&Object.keys(e.colorStatList).length&&!e.pinDouMode?(E(),Q("div",Ol,[O("div",{class:"back-icon",onClick:a[52]||(a[52]=(...a)=>e.handleExpand&&e.handleExpand(...a))},[U(o,null,{default:P((()=>[U(S)])),_:1})]),O("div",{class:"color-body scrollbar full-layout",onTouchmove:a[53]||(a[53]=ee((()=>{}),["stop"]))},[(E(!0),Q($,null,_(e.colorStatList,((a,t)=>(E(),Q("div",{class:ae(["colorItem flex-center",{active:e.brushColor===t}]),key:t,onClick:a=>e.brushColor=t,style:V({backgroundColor:t,color:e.getFontColor(t)})},J(e.pinDouDrawMode?1==a?"":a:""),15,Ul)))),128))],32)])):Y("",!0),e.pinDouMode&&e.pindouBlockList[e.currentPindouIndex].colorStatList?(E(),Q("div",Hl,[O("div",{class:"back-icon",onClick:a[54]||(a[54]=(...a)=>e.handleExpand&&e.handleExpand(...a))},[U(o,null,{default:P((()=>[U(S)])),_:1})]),O("div",{class:"color-body scrollbar full-layout",onTouchmove:a[55]||(a[55]=ee((()=>{}),["stop"]))},[(E(!0),Q($,null,_(Array.from(e.pindouBlockList[e.currentPindouIndex].colorStatList),((a,t)=>(E(),Q("div",{class:"colorItem flex-center",key:t,title:a,style:V({backgroundColor:a[1][0],fontSize:"12px",color:e.getFontColor(a[1][0])})},J(`${a[0]}:${a[1][1]}`),13,Jl)))),128))],32)])):Y("",!0),e.isHidePindouMode?(E(),T(L,{key:7,style:{background:"#0052d9",color:"#fff"},axis:"xy",magnetic:"x",onClick:e.handleShowPindou},{default:P((()=>[H(J(e.pinDouMode?"预":"绘"),1)])),_:1},8,["onClick"])):Y("",!0),e.isShowColorPalette&&!e.isPreview?(E(),Q("div",Ql,[O("div",{class:"scrollbar-flex-content",style:V({transform:`translateX(${e.scrollTransformX}px)`}),onTouchstart:a[56]||(a[56]=a=>e.handleTouchStart(a,"scrollX")),onTouchmove:a[57]||(a[57]=(...a)=>e.handleTouchMove&&e.handleTouchMove(...a))},[(E(!0),Q($,null,_(e.editSpaceStore.myColorList.find((a=>a.id==e.currentColorGroup)).list||[],((a,t)=>(E(),Q("div",{key:t,style:V({backgroundColor:(null==a?void 0:a.color)||a,color:e.getFontColor((null==a?void 0:a.color)||a)}),class:"mycolor",title:(null==a?void 0:a.label)||"",onClick:t=>e.brushColor=e.handleTransformColorAsHex((null==a?void 0:a.color)||a)},J((null==a?void 0:a.label)||""),13,Yl)))),128))],36)])):Y("",!0)],32)),[[je,e.loading]])]),U(j,{class:"flex-between"},{default:P((()=>[O("div",Vl,[U(o,{onClick:a[59]||(a[59]=a=>e.handleResizeCanvas(e.layerScaleStep))},{default:P((()=>[U(x)])),_:1}),U(o,{onClick:a[60]||(a[60]=a=>e.handleResizeCanvas(-e.layerScaleStep))},{default:P((()=>[U(b)])),_:1}),U(o,{onClick:e.handleResetCanvas},{default:P((()=>[U(I)])),_:1},8,["onClick"]),U(o,{onClick:e.handleOpenMoveCanvas,class:ae({active:e.isSpace})},{default:P((()=>[U(k)])),_:1},8,["onClick","class"]),e.previewLoading||e.pinDouMode?e.previewLoading?(E(),T(o,{key:1,class:"is-loading"},{default:P((()=>[U(s)])),_:1})):Y("",!0):(E(),T(o,{key:0,onClick:e.handleOpenPreviewDialog},{default:P((()=>[U(B)])),_:1},8,["onClick"]))]),O("div",Xl,[e.pinDouMode?(E(),T(o,{key:0,onClick:a[61]||(a[61]=a=>e.pindouBlockDrawer=!0)},{default:P((()=>[U(R)])),_:1})):Y("",!0),U(o,{onClick:a[62]||(a[62]=a=>e.frameDrawer=!0)},{default:P((()=>[U(M)])),_:1}),U(o,{onClick:a[63]||(a[63]=a=>e.layerDrawer=!0)},{default:P((()=>[U(X)])),_:1}),e.isPreview||e.pinDouMode?Y("",!0):(E(),T(o,{key:1,onClick:a[64]||(a[64]=a=>e.menuDrawer=!0),class:ae({isNotAllowed:e.intelligentSliceVisible})},{default:P((()=>[U(W)])),_:1},8,["class"]))])])),_:1}),!e.isPreview&&e.isEnableToolBoxToBottom?(E(),Q("div",Wl,[O("div",jl,[U(f,{content:"画笔",placement:"top",trigger:"click"},{default:P((()=>[O("div",{class:ae(["pointer toolItem flex-center",{active:0===e.currentTool}]),style:{"margin-top":"0"},onTouchstart:a[65]||(a[65]=a=>{e.handleTouchStartV2(a,(()=>{e.eraserSliderVisible=!1,e.brushSliderVisible=!0}),(()=>e.handleChangeTool(0)),e.isPreview,!0)}),onTouchmove:a[66]||(a[66]=(...a)=>e.handleTouchMove&&e.handleTouchMove(...a)),onTouchend:a[67]||(a[67]=(...a)=>e.handleTouchEnd&&e.handleTouchEnd(...a)),onClick:a[68]||(a[68]=a=>e.handleChangeTool(0))},[O("img",{src:e.requireIcon("brush")},null,8,Nl)],34)])),_:1}),U(f,{content:"橡皮擦",placement:"top",trigger:"click"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:1===e.currentTool}]),onTouchstart:a[69]||(a[69]=a=>{e.handleTouchStartV2(a,(()=>{e.brushSliderVisible=!1,e.eraserSliderVisible=!0}),(()=>e.handleChangeTool(1)),e.isPreview,!0)}),onTouchmove:a[70]||(a[70]=(...a)=>e.handleTouchMove&&e.handleTouchMove(...a)),onTouchend:a[71]||(a[71]=(...a)=>e.handleTouchEnd&&e.handleTouchEnd(...a)),onClick:a[72]||(a[72]=a=>e.handleChangeTool(1))},[O("img",{src:e.requireIcon("eraser")},null,8,Kl)],34)])),_:1}),U(f,{content:"吸管",placement:"top",trigger:"click"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:2===e.currentTool}]),onClick:a[73]||(a[73]=a=>e.handleChangeTool(2))},[O("img",{src:e.requireIcon("straw")},null,8,Gl)],2)])),_:1}),U(f,{content:"油漆桶",placement:"top",trigger:"click"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:4===e.currentTool}]),onClick:a[74]||(a[74]=a=>e.handleChangeTool(4))},[O("img",{src:e.requireIcon("bucket")},null,8,zl)],2)])),_:1}),U(f,{content:"移动",placement:"top",trigger:"click"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:7===e.currentTool}]),onClick:a[75]||(a[75]=a=>e.handleChangeTool(7))},[O("img",{src:e.requireIcon("move")},null,8,ql)],2)])),_:1}),U(f,{content:"形状",placement:"top"},{default:P((()=>[U(u,{placement:"bottom-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[77]||(a[77]=a=>e.drawShape("rect")),disabled:e.pinDouMode},{default:P((()=>a[225]||(a[225]=[H("矩 形")]))),_:1,__:[225]},8,["disabled"]),U(A,{onClick:a[78]||(a[78]=a=>e.drawShape("circle")),disabled:e.pinDouMode},{default:P((()=>a[226]||(a[226]=[H("圆 形")]))),_:1,__:[226]},8,["disabled"]),U(A,{onClick:a[79]||(a[79]=a=>e.drawShape("line")),disabled:e.pinDouMode},{default:P((()=>a[227]||(a[227]=[H("直 线")]))),_:1,__:[227]},8,["disabled"]),U(A,{onClick:a[80]||(a[80]=a=>e.drawShape("fillRect")),disabled:e.pinDouMode},{default:P((()=>a[228]||(a[228]=[H("填充矩形")]))),_:1,__:[228]},8,["disabled"]),Y("",!0)])),_:1})])),default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:3===e.currentTool}]),onClick:a[76]||(a[76]=a=>e.handleChangeTool(3))},[O("img",{src:e.requireShapeImg},null,8,Zl)],2)])),_:1})])),_:1}),U(f,{content:"选区",placement:"top"},{default:P((()=>[U(u,{placement:"bottom-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[83]||(a[83]=a=>e.selectType="select")},{default:P((()=>a[230]||(a[230]=[H("手动选择")]))),_:1,__:[230]}),U(A,{onClick:a[84]||(a[84]=a=>e.selectType="quickSelect")},{default:P((()=>a[231]||(a[231]=[H("快速选择")]))),_:1,__:[231]}),U(A,{onClick:a[85]||(a[85]=a=>e.selectType="rangeSelect")},{default:P((()=>a[232]||(a[232]=[H("区域选择")]))),_:1,__:[232]}),U(A,{onClick:e.handleCancelSelect,disabled:8!==e.currentTool||e.isScaling},{default:P((()=>a[233]||(a[233]=[H("取消选择")]))),_:1,__:[233]},8,["onClick","disabled"]),U(A,{onClick:e.handleCopySelectData,disabled:8!==e.currentTool||e.isScaling},{default:P((()=>a[234]||(a[234]=[H("复 制")]))),_:1,__:[234]},8,["onClick","disabled"]),U(A,{onClick:e.handleRemoveSelect,disabled:8!==e.currentTool||e.isScaling},{default:P((()=>a[235]||(a[235]=[H("删 除")]))),_:1,__:[235]},8,["onClick","disabled"]),U(A,{disabled:""},{default:P((()=>a[236]||(a[236]=[H("移 动")]))),_:1,__:[236]})])),_:1})])),default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:8===e.currentTool}]),onClick:a[82]||(a[82]=a=>e.handleChangeTool(8))},[O("img",{src:e.requireSelectImg},null,8,$l)],2)])),_:1})])),_:1}),U(f,{content:"更多",placement:"top"},{default:P((()=>[U(u,{placement:"bottom-start",trigger:"click",disabled:e.pinDouMode},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[86]||(a[86]=a=>e.handleChangeTool(10))},{default:P((()=>a[237]||(a[237]=[H("精灵资源")]))),_:1,__:[237]}),U(A,{onClick:a[87]||(a[87]=a=>e.intelligentStrokeVisible=!0)},{default:P((()=>a[238]||(a[238]=[H("智能描边")]))),_:1,__:[238]}),U(A,{onClick:e.handleIntelligentCrop},{default:P((()=>a[239]||(a[239]=[H("智能裁剪")]))),_:1,__:[239]},8,["onClick"]),U(A,{onClick:e.handleIntelligentSliceVisible},{default:P((()=>a[240]||(a[240]=[H("智能切片")]))),_:1,__:[240]},8,["onClick"]),U(A,{onClick:e.handleOpenImageColorPicker},{default:P((()=>a[241]||(a[241]=[H("图片取色")]))),_:1,__:[241]},8,["onClick"])])),_:1})])),default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:[10].includes(e.currentTool)}])},[O("img",{src:e.requireIcon("more")},null,8,_l)],2)])),_:1},8,["disabled"])])),_:1})]),O("div",en,[U(f,{content:"变换",placement:"top"},{default:P((()=>[U(u,{placement:"top-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[88]||(a[88]=a=>e.drawTransform("crop")),disabled:e.pinDouMode||e.isControlMindObj},{default:P((()=>a[242]||(a[242]=[H("裁剪")]))),_:1,__:[242]},8,["disabled"]),U(A,{onClick:a[89]||(a[89]=a=>e.drawTransform("scale")),disabled:e.pinDouMode||e.isControlMindObj},{default:P((()=>a[243]||(a[243]=[H("缩放")]))),_:1,__:[243]},8,["disabled"]),U(A,{onClick:a[90]||(a[90]=a=>e.drawTransform("hReverse")),disabled:e.pinDouMode},{default:P((()=>a[244]||(a[244]=[H("水平翻转")]))),_:1,__:[244]},8,["disabled"]),U(A,{onClick:a[91]||(a[91]=a=>e.drawTransform("vReverse")),disabled:e.pinDouMode},{default:P((()=>a[245]||(a[245]=[H("垂直翻转")]))),_:1,__:[245]},8,["disabled"]),U(A,{onClick:a[92]||(a[92]=a=>e.drawTransform("cReverse")),disabled:e.pinDouMode},{default:P((()=>a[246]||(a[246]=[H("中心翻转")]))),_:1,__:[246]},8,["disabled"]),U(A,{onClick:a[93]||(a[93]=a=>e.drawTransform("rotate")),disabled:e.pinDouMode||8===e.currentTool||e.isControlMindObj},{default:P((()=>a[247]||(a[247]=[H("旋转")]))),_:1,__:[247]},8,["disabled"])])),_:1})])),default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:9===e.currentTool||11===e.currentTool||e.isScaling}])},[O("img",{src:e.requireTransformImg},null,8,an)],2)])),_:1})])),_:1}),U(f,{content:"滤镜",placement:"top"},{default:P((()=>[U(u,{placement:"top-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[94]||(a[94]=a=>e.handleFilter(1)),disabled:e.pinDouMode},{default:P((()=>a[248]||(a[248]=[H("黑 白")]))),_:1,__:[248]},8,["disabled"]),U(A,{onClick:a[95]||(a[95]=a=>e.handleFilter(2)),disabled:e.pinDouMode},{default:P((()=>a[249]||(a[249]=[H("反 相")]))),_:1,__:[249]},8,["disabled"]),U(A,{onClick:a[96]||(a[96]=a=>e.handleFilter(3)),disabled:e.pinDouMode},{default:P((()=>a[250]||(a[250]=[H("BGRA")]))),_:1,__:[250]},8,["disabled"])])),_:1})])),default:P((()=>[O("div",tn,[O("img",{src:e.requireIcon("filter")},null,8,ln)])])),_:1})])),_:1}),U(f,{content:"替换颜色",placement:"top",trigger:"click"},{default:P((()=>[O("div",{class:"pointer toolItem",onClick:a[97]||(a[97]=(...a)=>e.handleOpenReplaceColorDialog&&e.handleOpenReplaceColorDialog(...a))},[O("img",{src:e.requireIcon("color")},null,8,nn)])])),_:1}),U(f,{content:"清空图层",placement:"top",trigger:"click"},{default:P((()=>[U(u,{placement:"top-start",trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a[98]||(a[98]=a=>e.handleClearLayer("all")),disabled:e.pinDouMode},{default:P((()=>a[251]||(a[251]=[H("清空所有图层")]))),_:1,__:[251]},8,["disabled"]),U(A,{onClick:a[99]||(a[99]=a=>e.handleClearLayer("single")),disabled:e.pinDouMode},{default:P((()=>a[252]||(a[252]=[H("清空当前图层")]))),_:1,__:[252]},8,["disabled"])])),_:1})])),default:P((()=>[O("div",rn,[O("img",{src:e.requireIcon("clear")},null,8,on)])])),_:1})])),_:1}),U(f,{content:"拼豆模式",placement:"top",trigger:"click"},{default:P((()=>[U(C,{actions:e.pindouTypeList,onSelect:e.handleSelectPindouMode,placement:"top-end",theme:e.editSpaceStore.themeValue?"dark":"light",offset:[0,10]},{reference:P((()=>[O("div",{class:ae(["pointer toolItem",{active:e.pinDouMode||e.pinDouDrawMode,isNotAllowed:e.isControlMindObj}])},[O("img",{src:e.requireIcon("pindou")},null,8,sn)],2)])),_:1},8,["actions","onSelect","theme"])])),_:1}),U(f,{content:"临摹模式",placement:"top",trigger:"click"},{default:P((()=>[O("div",{class:ae(["pointer toolItem",{active:e.linmoMode}]),onClick:a[100]||(a[100]=(...a)=>e.handleLinmoMode&&e.handleLinmoMode(...a))},[O("img",{src:e.requireIcon("copy")},null,8,cn)],2)])),_:1})])])):Y("",!0)])])])),_:1})])])),_:1}),U(ce,{modelValue:e.menuDrawer,"onUpdate:modelValue":a[140]||(a[140]=a=>e.menuDrawer=a),title:"功 能",size:320,class:"z-drawer","append-to-body":"",onClick:e.closeMenu},{default:P((()=>[O("div",dn,[e.isPreview?Y("",!0):(E(),Q("div",gn,[e.editSpaceStore.myColorList.length?(E(),Q("div",An,[O("div",hn,[O("div",un,[O("span",pn,J(e.editSpaceStore.myColorList.find((a=>a.id==e.currentColorGroup)).groupName||"常用颜色"),1),U(u,{trigger:"click"},{dropdown:P((()=>[U(h,null,{default:P((()=>[(E(!0),Q($,null,_(e.editSpaceStore.myColorList,(a=>(E(),T(A,{key:a.id,onClick:t=>e.currentColorGroup=a.id},{default:P((()=>[H(J(a.groupName),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:P((()=>[O("div",mn,[U(o,null,{default:P((()=>[U(G)])),_:1})])])),_:1}),O("div",{class:"color-group-select-icon flex-center pointer",onClick:a[101]||(a[101]=a=>e.handleAdd(e.currentColorGroup))},[U(o,null,{default:P((()=>[U(z)])),_:1})]),O("div",{class:"color-group-select-icon flex-center pointer",onClick:a[102]||(a[102]=(...a)=>e.handleOpenMyColorDialog&&e.handleOpenMyColorDialog(...a))},[U(o,null,{default:P((()=>[U(te)])),_:1})])]),O("div",null,[U(ne,{modelValue:e.searchColorValue,"onUpdate:modelValue":a[103]||(a[103]=a=>e.searchColorValue=a),style:{width:"100px"},size:"small",placeholder:"搜索颜色",onFocus:e.handleCancelKeyboardEvent,onBlur:e.addKeyBoardEvent,onKeyup:a[104]||(a[104]=$e((a=>e.handleSearchColor(e.currentColorGroup)),["enter"]))},{prefix:P((()=>[U(o,{class:"el-input__icon"},{default:P((()=>[U(le)])),_:1})])),_:1},8,["modelValue","onFocus","onBlur"])])]),O("div",Cn,[(E(!0),Q($,null,_(e.searchColorList.length?e.searchColorList:e.editSpaceStore.myColorList.find((a=>a.id==e.currentColorGroup)).list||[],((t,l)=>(E(),Q("div",{key:l,style:V({backgroundColor:(null==t?void 0:t.color)||t,color:e.getFontColor((null==t?void 0:t.color)||t)}),class:"mycolor",title:(null==t?void 0:t.label)||"",onTouchstart:a=>e.handleTouchStart(a,(()=>e.handleMenu(a,"MyColorMenu",{color:(null==t?void 0:t.color)||t,gid:e.currentColorGroup,index:l,label:(null==t?void 0:t.label)||""}))),onTouchmove:a[105]||(a[105]=(...a)=>e.handleTouchMove&&e.handleTouchMove(...a)),onTouchend:a[106]||(a[106]=(...a)=>e.handleTouchEnd&&e.handleTouchEnd(...a)),onClick:a=>e.brushColor=e.handleTransformColorAsHex((null==t?void 0:t.color)||t)},J((null==t?void 0:t.label)||""),45,yn)))),128))])])):Y("",!0),O("div",fn,[O("div",vn,[a[253]||(a[253]=O("span",{class:"function-label",style:{margin:"0",width:"100px"}},"画布大小",-1)),U(re,{modelValue:e.isCheckedRatio,"onUpdate:modelValue":a[107]||(a[107]=a=>e.isCheckedRatio=a),size:"small",label:"保持横纵比",onChange:e.handleChangeRatio,disabled:e.pinDouMode},null,8,["modelValue","onChange","disabled"])]),O("div",wn,[U(ne,{modelValue:e.canvasWidth,"onUpdate:modelValue":a[108]||(a[108]=a=>e.canvasWidth=a),style:{"max-width":"100px"},type:"number",max:e.$config.canvasMaxSize,min:e.$config.canvasMinSize,size:"small",onFocus:e.handleCancelKeyboardEvent,onBlur:e.addKeyBoardEvent,disabled:e.pinDouMode||e.isScaling||8===e.currentTool||e.isControlMindObj,onChange:a[109]||(a[109]=a=>e.handleChangeCanvasSize(a,"canvasWidth"))},{prepend:P((()=>a[254]||(a[254]=[H("宽")]))),_:1},8,["modelValue","max","min","onFocus","onBlur","disabled"]),U(ne,{modelValue:e.canvasHeight,"onUpdate:modelValue":a[110]||(a[110]=a=>e.canvasHeight=a),style:{"max-width":"100px"},type:"number",max:e.$config.canvasMaxSize,min:e.$config.canvasMinSize,onFocus:e.handleCancelKeyboardEvent,onBlur:e.addKeyBoardEvent,size:"small",disabled:e.pinDouMode||e.isScaling||8===e.currentTool||e.isControlMindObj,onChange:a[111]||(a[111]=a=>e.handleChangeCanvasSize(a,"canvasHeight"))},{prepend:P((()=>a[255]||(a[255]=[H("高")]))),_:1},8,["modelValue","max","min","onFocus","onBlur","disabled"])]),O("div",Dn,[U(re,{modelValue:e.isShowRuler,"onUpdate:modelValue":a[112]||(a[112]=a=>e.isShowRuler=a),size:"small",label:"显示标尺"},null,8,["modelValue"]),U(re,{modelValue:e.isShowReferenceLine,"onUpdate:modelValue":a[113]||(a[113]=a=>e.isShowReferenceLine=a),size:"small",label:"显示参考线"},null,8,["modelValue"]),U(re,{modelValue:e.isShowGridLine,"onUpdate:modelValue":a[114]||(a[114]=a=>e.isShowGridLine=a),size:"small",label:"显示网格线",disabled:e.layerScale<15},null,8,["modelValue","disabled"])]),Z(O("div",Sn,[U(re,{modelValue:e.isHorizontal,"onUpdate:modelValue":a[115]||(a[115]=a=>e.isHorizontal=a),size:"small",label:"水平对称",disabled:e.pinDouMode,onChange:a[116]||(a[116]=a=>e.handleChangeBrushSymmetric(a,"isHorizontal"))},null,8,["modelValue","disabled"]),U(re,{modelValue:e.isVertical,"onUpdate:modelValue":a[117]||(a[117]=a=>e.isVertical=a),size:"small",label:"垂直对称",disabled:e.pinDouMode,onChange:a[118]||(a[118]=a=>e.handleChangeBrushSymmetric(a,"isVertical"))},null,8,["modelValue","disabled"]),U(re,{modelValue:e.isCenter,"onUpdate:modelValue":a[119]||(a[119]=a=>e.isCenter=a),size:"small",label:"中心对称",disabled:e.pinDouMode,onChange:a[120]||(a[120]=a=>e.handleChangeBrushSymmetric(a,"isCenter"))},null,8,["modelValue","disabled"])],512),[[Ze,[0,1,4].includes(e.currentTool)]])]),[0,1,3].includes(e.currentTool)||e.isShowGridLine||e.isHorizontal||e.isVertical?(E(),Q($,{key:1},[U(ie,{dashed:""}),[0,3].includes(e.currentTool)?(E(),Q("div",Ln,[a[256]||(a[256]=O("span",{class:"function-label",style:{width:"150px"}},"画笔大小",-1)),U(w,{modelValue:e.brushSize,"onUpdate:modelValue":a[121]||(a[121]=a=>e.brushSize=a),max:20,min:1},{button:P((()=>[O("div",xn,J(e.brushSize),1)])),_:1},8,["modelValue"])])):Y("",!0),[0,1].includes(e.currentTool)?(E(),Q("div",bn,[a[257]||(a[257]=O("span",{class:"function-label",style:{width:"150px"}},"橡皮擦大小",-1)),U(w,{modelValue:e.eraserSize,"onUpdate:modelValue":a[122]||(a[122]=a=>e.eraserSize=a),max:20,min:1},{button:P((()=>[O("div",In,J(e.eraserSize),1)])),_:1},8,["modelValue"])])):Y("",!0),e.isShowGridLine?(E(),Q("div",kn,[a[258]||(a[258]=O("span",{class:"function-label",style:{width:"150px"}},"网格线间隔",-1)),U(w,{modelValue:e.gridGapSize,"onUpdate:modelValue":[a[123]||(a[123]=a=>e.gridGapSize=a),a[124]||(a[124]=a=>e.handleDrawGridLine(200))],max:100,min:1},{button:P((()=>[O("div",Bn,J(e.gridGapSize),1)])),_:1},8,["modelValue"])])):Y("",!0),e.isHorizontal?(E(),Q("div",Rn,[a[259]||(a[259]=O("span",{class:"function-label",style:{width:"150px"}},"X对称轴偏移",-1)),U(w,{modelValue:e.XLineOffset,"onUpdate:modelValue":[a[125]||(a[125]=a=>e.XLineOffset=a),e.handleCheckAxisOffset],max:1024,min:1},{button:P((()=>[O("div",Mn,J(e.XLineOffset),1)])),_:1},8,["modelValue","onUpdate:modelValue"])])):Y("",!0),e.isVertical?(E(),Q("div",Fn,[a[260]||(a[260]=O("span",{class:"function-label",style:{width:"150px"}},"Y对称轴偏移",-1)),U(w,{modelValue:e.YLineOffset,"onUpdate:modelValue":[a[126]||(a[126]=a=>e.YLineOffset=a),e.handleCheckAxisOffset],max:1024,min:1},{button:P((()=>[O("div",En,J(e.YLineOffset),1)])),_:1},8,["modelValue","onUpdate:modelValue"])])):Y("",!0)],64)):Y("",!0),U(ie,{dashed:""}),Z(O("div",Tn,[a[261]||(a[261]=O("div",{class:"function-label"}," 容 差 ",-1)),U(oe,{modelValue:e.tolerance,"onUpdate:modelValue":a[127]||(a[127]=a=>e.tolerance=a),onFocus:e.handleCancelKeyboardEvent,onBlur:e.addKeyBoardEvent,min:0,max:200},null,8,["modelValue","onFocus","onBlur"])],512),[[Ze,[2,4].includes(e.currentTool)||8===e.currentTool&&"quickSelect"===e.selectType]]),O("div",Pn,[a[262]||(a[262]=O("div",{class:"function-label"}," 图层透明度 ",-1)),U(oe,{modelValue:e.layerAlpha,"onUpdate:modelValue":a[128]||(a[128]=a=>e.layerAlpha=a),disabled:e.pinDouMode||7===e.currentTool,onFocus:e.handleCancelKeyboardEvent,onChange:e.handleChangeLayerAlpha,onBlur:e.addKeyBoardEvent,min:0,max:100},null,8,["modelValue","disabled","onFocus","onChange","onBlur"])]),O("div",On,[a[263]||(a[263]=O("div",{class:"function-label"}," 图层缩放比 ",-1)),U(oe,{modelValue:e.layerScale,"onUpdate:modelValue":a[129]||(a[129]=a=>e.layerScale=a),onPlus:e.handleSetCanvasScale,onMinus:e.handleSetCanvasScale,onFocus:e.handleCancelKeyboardEvent,onBlur:e.handleLayerScaleRatio,min:.1,max:e.maxScale,step:e.layerScaleStep},null,8,["modelValue","onPlus","onMinus","onFocus","onBlur","max","step"])]),O("div",Un,[a[264]||(a[264]=O("div",{class:"function-label"}," 缩放步长 ",-1)),U(oe,{modelValue:e.layerScaleStep,"onUpdate:modelValue":a[130]||(a[130]=a=>e.layerScaleStep=a),onFocus:e.handleCancelKeyboardEvent,onBlur:e.addKeyBoardEvent,min:.05,max:5,step:.05},null,8,["modelValue","onFocus","onBlur"])]),O("div",Hn,[a[265]||(a[265]=O("div",{class:"function-label"}," 拼豆分块尺寸 ",-1)),U(oe,{modelValue:e.currentPindouBlockSize,"onUpdate:modelValue":a[131]||(a[131]=a=>e.currentPindouBlockSize=a),onFocus:e.handleCancelKeyboardEvent,onBlur:e.addKeyBoardEvent,min:e.$config.minPindouBlockSize,max:e.$config.maxPindouBlockSize,step:1},null,8,["modelValue","onFocus","onBlur","min","max"])]),U(ie,{dashed:""}),O("div",Jn,[a[266]||(a[266]=O("div",{class:"function-label"}," 画布格子 ",-1)),U(se,{modelValue:e.isEnableCanvasGrid,"onUpdate:modelValue":a[132]||(a[132]=a=>e.isEnableCanvasGrid=a),onChange:e.handleChangeCanvasGrid},null,8,["modelValue","onChange"])]),O("div",Qn,[a[267]||(a[267]=O("div",{class:"function-label"}," 画布抗锯齿 ",-1)),U(se,{modelValue:e.isEnableCanvasSmooth,"onUpdate:modelValue":a[133]||(a[133]=a=>e.isEnableCanvasSmooth=a)},null,8,["modelValue"])]),[0,1].includes(e.currentTool)?(E(),Q("div",Yn,[a[268]||(a[268]=O("div",{class:"function-label"}," 橡皮擦轨迹 ",-1)),U(se,{modelValue:e.isEnableEraserTrack,"onUpdate:modelValue":a[134]||(a[134]=a=>e.isEnableEraserTrack=a)},null,8,["modelValue"])])):Y("",!0),O("div",Vn,[a[269]||(a[269]=O("div",{class:"function-label"}," 橡皮擦一键擦除 ",-1)),U(se,{modelValue:e.isEnableQuickEraser,"onUpdate:modelValue":a[135]||(a[135]=a=>e.isEnableQuickEraser=a)},null,8,["modelValue"])]),O("div",Xn,[a[270]||(a[270]=O("div",{class:"function-label"}," 取色自动切换画笔 ",-1)),U(se,{modelValue:e.isAutoChangeBrush,"onUpdate:modelValue":a[136]||(a[136]=a=>e.isAutoChangeBrush=a)},null,8,["modelValue"])]),O("div",Wn,[a[271]||(a[271]=O("div",{class:"function-label"}," 快捷调色板 ",-1)),U(se,{modelValue:e.isShowColorPalette,"onUpdate:modelValue":a[137]||(a[137]=a=>e.isShowColorPalette=a)},null,8,["modelValue"])]),O("div",jn,[a[272]||(a[272]=O("div",{class:"function-label"}," 双指快捷操作 ",-1)),U(se,{modelValue:e.isDoubleFingers,"onUpdate:modelValue":a[138]||(a[138]=a=>e.isDoubleFingers=a)},null,8,["modelValue"])]),O("div",Nn,[a[273]||(a[273]=O("div",{class:"function-label"}," 工具栏置底 ",-1)),U(se,{modelValue:e.isEnableToolBoxToBottom,"onUpdate:modelValue":a[139]||(a[139]=a=>e.isEnableToolBoxToBottom=a),onChange:e.handleToolBox},null,8,["modelValue","onChange"])])]))])])),_:1},8,["modelValue","onClick"]),U(ce,{modelValue:e.pindouBlockDrawer,"onUpdate:modelValue":a[141]||(a[141]=a=>e.pindouBlockDrawer=a),title:"拼豆分块",size:140,class:"z-drawer","append-to-body":"",onClick:e.closeMenu},{default:P((()=>[O("div",Kn,[(E(!0),Q($,null,_(e.pindouBlockList,((a,t)=>(E(),Q("div",{key:t,onClick:a=>e.handleChangePindouBlock(t),class:ae(["pindou-item pointer",{active:e.currentPindouIndex===t,isNotAllowed:e.loading}])},[a.blockBitmap?(E(),Q("img",{key:0,draggable:"false",src:a.blockBitmap},null,8,zn)):Y("",!0)],10,Gn)))),128))])])),_:1},8,["modelValue","onClick"]),U(ce,{modelValue:e.layerDrawer,"onUpdate:modelValue":a[154]||(a[154]=a=>e.layerDrawer=a),title:"图 层",size:e.pinDouMode?140:320,class:"z-drawer","append-to-body":"",onClick:e.closeMenu},{default:P((()=>[e.pinDouMode?(E(),Q("div",qn,[(E(!0),Q($,null,_(e.drawRecord[e.currentFrameIndex].layer,((a,t)=>(E(),Q("div",{key:t,onClick:a=>e.handleChangeLayer(t),class:ae(["pindou-item pointer",{active:e.currentLayerIndex===t,isNotAllowed:e.loading}])},[O("img",{draggable:"false",src:a.currentLayerImg},null,8,$n)],10,Zn)))),128))])):(E(),Q("div",_n,[e.drawRecord.length?(E(),Q("div",er,[e.isPreview?Y("",!0):(E(),Q("div",ar,[O("div",tr,[e.currentFrameLayerVisible?(E(),T(o,{key:0,style:{"margin-right":"15px"},class:"pointer",onClick:a[142]||(a[142]=a=>e.handleChangeLayerVisible(-1))},{default:P((()=>[U(de)])),_:1})):(E(),T(o,{key:1,style:{"margin-right":"15px"},class:"pointer",onClick:a[143]||(a[143]=a=>e.handleChangeLayerVisible(-1))},{default:P((()=>[U(ge)])),_:1})),U(o,{style:{"margin-right":"15px"},class:"pointer",onClick:e.handleLayerMerge},{default:P((()=>[U(Ae)])),_:1},8,["onClick"]),U(o,{style:{"margin-right":"10px"},class:"pointer",onClick:e.handleAddLayer},{default:P((()=>[U(he)])),_:1},8,["onClick"])])])),e.isPreview?Y("",!0):(E(),T(ue,{key:1,"border-style":"dashed"})),O("div",lr,[U(xe,{modelValue:e.selectLayerList,"onUpdate:modelValue":a[153]||(a[153]=a=>e.selectLayerList=a),ref:"layerBoxGroup",id:"layer-item",style:{"padding-right":"10px"},min:1},{default:P((()=>[(E(!0),Q($,null,_(e.drawRecord[e.currentFrameIndex].layer,((t,l)=>{var n;return E(),Q("div",{class:"flex-between full-w",style:{gap:"5px"},"data-node":"LI","data-key":t.layerId,key:t.layerId},[U(re,{value:l},null,8,["value"]),O("div",{draggable:"true","data-key":t.layerId,disabled:e.pinDouMode,"data-node":"LI",class:ae(["layer-item flex-between pointer full-w",{active:e.currentLayerIndex===l,select:e.selectLayerList.includes(l)}]),style:{gap:"10px",flex:"1"},onTouchstart:a=>e.handleTouchStart(a,(()=>e.handleMenu(a,"LayerMenu",{layerData:t.layerId,index:l,currentFrameIndex:e.currentFrameIndex})),e.isPreview),onTouchmove:a[148]||(a[148]=(...a)=>e.handleTouchMove&&e.handleTouchMove(...a)),onTouchend:a[149]||(a[149]=(...a)=>e.handleTouchEnd&&e.handleTouchEnd(...a)),onClick:a=>e.handleChangeLayer(l)},[O("div",ir,[O("div",or,[O("div",sr,[O("div",{class:"pointer layer-pic",onClick:ee((a=>e.handleChangeLayerVisible(l)),["stop"])},[O("img",{src:e.requireVisibleImg(t.isRender)},null,8,dr)],8,cr),O("div",gr,[O("img",{draggable:"false",src:t.currentLayerImg,class:"layer-image"},null,8,Ar)]),e.currentEditLayer.index!==l||e.isPreview?(E(),Q("div",{key:1,onDblclick:a=>e.handleDoubleClickLayer(l,t.layerName),title:t.layerName,class:"oneline"},J(t.layerName),41,ur)):(E(),Q("div",hr,[U(ne,{modelValue:e.currentEditLayer.name,"onUpdate:modelValue":a[144]||(a[144]=a=>e.currentEditLayer.name=a),maxlength:10,onClick:ee((e=>null),["stop"]),onBlur:e.handleEditLayerName,onKeyup:$e(e.handleEditLayerName,["enter"]),placeholder:"请输入图层名称",size:"small"},null,8,["modelValue","onBlur","onKeyup"])]))]),e.isPreview?Y("",!0):(E(),Q("div",pr,[t.isLock?(E(),T(o,{key:0,color:"#ff0000",class:"pointer",onClick:ee((a=>e.handleLockLayer(l,!1)),["stop"])},{default:P((()=>[U(pe)])),_:2},1032,["onClick"])):(E(),T(o,{key:1,class:"pointer",onClick:ee((a=>e.handleLockLayer(l,!0)),["stop"])},{default:P((()=>[U(me)])),_:2},1032,["onClick"])),U(o,{class:"pointer",onClick:ee((a=>e.handleCopyLayer(l)),["stop"])},{default:P((()=>[U(Ce)])),_:2},1032,["onClick"]),U(fe,{title:"确认删除该图层？",width:"200",onConfirm:a=>e.handleDeleteLayer(l)},{reference:P((()=>[l!==e.drawRecord[e.currentFrameIndex].layer.length-1?(E(),T(o,{key:0,class:"pointer",onClick:a[145]||(a[145]=ee((()=>{}),["stop"]))},{default:P((()=>[U(ye)])),_:1})):Y("",!0)])),_:2},1032,["onConfirm"]),t.mindLayerList.length?(E(),Q($,{key:2},[t.isExpandMindList?Y("",!0):(E(),T(o,{key:0,class:"pointer",onClick:e=>t.isExpandMindList=!0},{default:P((()=>[U(ve)])),_:2},1032,["onClick"])),t.isExpandMindList?(E(),T(o,{key:1,class:"pointer",onClick:e=>t.isExpandMindList=!1},{default:P((()=>[U(we)])),_:2},1032,["onClick"])):Y("",!0)],64)):Y("",!0)]))]),t.mindLayerList.length&&t.isExpandMindList&&(null==(n=e.layerCrossList[t.layerId])?void 0:n.mindLayerList)?(E(),Q("div",mr,[U(Le,null,{default:P((()=>[(E(!0),Q($,null,_(t.mindLayerList,((n,r)=>(E(),T(Se,{key:n,center:"",type:"success",hollow:"","hide-timestamp":!0,placement:"top"},{default:P((()=>{var i,s,c,d;return[O("div",Cr,[O("div",yr,[e.layerCrossList[t.layerId].mindLayerList[n]?(E(),Q("div",{key:0,class:"pointer layer-pic",onClick:ee((a=>e.handleChangeLayerMindVisible(n,t.layerId)),["stop"])},[O("img",{src:e.requireVisibleImg(!e.layerCrossList[t.layerId].mindLayerList[n].isHide)},null,8,vr)],8,fr)):Y("",!0),e.layerCrossList[t.layerId].mindLayerList[n]?(E(),Q("div",wr,[O("img",{draggable:"false",src:e.layerCrossList[t.layerId].mindLayerList[n].mindObj},null,8,Dr)])):Y("",!0),e.currentEditLayer.mindIndex!==n||e.isPreview?(E(),Q("div",{key:3,onDblclick:a=>{var l,r;return e.handleDoubleClickLayerMind(n,null==(r=null==(l=e.layerCrossList[t.layerId])?void 0:l.mindLayerList[n])?void 0:r.mindName)},title:null==(s=null==(i=e.layerCrossList[t.layerId])?void 0:i.mindLayerList[n])?void 0:s.mindName,class:"oneline"},J(null==(d=null==(c=e.layerCrossList[t.layerId])?void 0:c.mindLayerList[n])?void 0:d.mindName),41,Lr)):(E(),Q("div",Sr,[U(ne,{modelValue:e.currentEditLayer.mindName,"onUpdate:modelValue":a[146]||(a[146]=a=>e.currentEditLayer.mindName=a),maxlength:10,onClick:ee((e=>null),["stop"]),onBlur:e.handleEditLayerMindName,onKeyup:$e(e.handleEditLayerMindName,["enter"]),placeholder:"请输入名称",size:"small"},null,8,["modelValue","onBlur","onKeyup"])]))]),e.isPreview?Y("",!0):(E(),Q("div",xr,[U(o,{onClick:ee((a=>e.handleSelectMindObj(n,l,r)),["stop"]),color:e.currentSelectMindId===n&&e.currentLayerId===t.layerId?"#ff0000":""},{default:P((()=>[U(k)])),_:2},1032,["onClick","color"]),U(fe,{title:"确认删除该智能对象？",width:"240",onConfirm:a=>e.handleDeleteLayerMind(r,t.layerId)},{reference:P((()=>[U(o,{class:"pointer"},{default:P((()=>[U(ye)])),_:1})])),_:2},1032,["onConfirm"]),U(u,null,{dropdown:P((()=>[U(h,null,{default:P((()=>[U(A,{onClick:a=>e.handleMindToPixel(1,n,r,t.layerId)},{default:P((()=>a[274]||(a[274]=[H("栅格化")]))),_:2,__:[274]},1032,["onClick"]),U(A,{onClick:a=>e.handleCopyMindObj(n,r,t.layerId,l)},{default:P((()=>a[275]||(a[275]=[H("复 制")]))),_:2,__:[275]},1032,["onClick"]),U(A,{onClick:a=>e.handleSaveMindForSprite(n,t.layerId)},{default:P((()=>a[276]||(a[276]=[H("保存精灵")]))),_:2,__:[276]},1032,["onClick"])])),_:2},1024)])),default:P((()=>[U(o,{onClick:a[147]||(a[147]=ee((()=>{}),["stop"]))},{default:P((()=>[U(De)])),_:1})])),_:2},1024)]))])]})),_:2},1024)))),128))])),_:2},1024)])):Y("",!0)])],42,rr),O("div",{class:"drag-box flex-center",onTouchstart:a[150]||(a[150]=a=>e.onMobileDragStart(a,e.pinDouMode,e.isPreview)),onTouchmove:a[151]||(a[151]=a=>e.onMobileDragOver(a,"layerBoxGroup")),onTouchend:a[152]||(a[152]=a=>e.onDragLayerEnd(a,"layerBoxGroup")),"data-key":t.layerId,"data-node":"LII"},[O("img",{src:Ot,"data-key":t.layerId,"data-node":"LI"},null,8,Ir)],40,br)],8,nr)})),128))])),_:1},8,["modelValue"])],512)])):Y("",!0)]))])),_:1},8,["modelValue","size","onClick"]),U(ce,{modelValue:e.frameDrawer,"onUpdate:modelValue":a[161]||(a[161]=a=>e.frameDrawer=a),title:"帧",size:160,class:"z-drawer","append-to-body":"",onClick:e.closeMenu},{default:P((()=>[O("div",kr,[(E(!0),Q($,null,_(e.drawRecord,((t,l)=>(E(),Q("div",{"data-key":t.frameId,"data-node":"LI",key:t.frameId,class:"flex-between"},[O("div",{onClick:a=>e.handleChangeFrame(l),onTouchstart:a=>e.handleTouchStart(a,(()=>e.handleMenu(a,"FrameMenu",{index:l})),e.isPreview),onTouchmove:a[155]||(a[155]=(...a)=>e.handleTouchMove&&e.handleTouchMove(...a)),onTouchend:a[156]||(a[156]=(...a)=>e.handleTouchEnd&&e.handleTouchEnd(...a)),class:ae(["frame-item pointer",{active:e.currentFrameIndex===l,isNotAllowed:e.loading}])},[t.currentFrameImg?(E(),Q("img",{key:0,draggable:"false",src:t.currentFrameImg,class:"frame-image"},null,8,Mr)):Y("",!0)],42,Rr),O("div",{class:"drag-box flex-center",onTouchstart:a[157]||(a[157]=a=>e.onMobileDragStart(a,e.pinDouMode,e.isPreview)),onTouchmove:a[158]||(a[158]=a=>e.onMobileDragOver(a,"frameBox")),onTouchend:a[159]||(a[159]=a=>e.onDragFrameEnd(a,"frameBox")),"data-key":t.frameId,"data-node":"LII"},[O("img",{src:Ot,"data-key":t.frameId,"data-node":"LI"},null,8,Er)],40,Fr)],8,Br)))),128)),e.drawRecord.length<e.maxFrame&&!e.isPreview?(E(),Q("div",{key:0,class:"frame-item pointer frame-add flex-center",onClick:a[160]||(a[160]=(...a)=>e.handleAddFrame&&e.handleAddFrame(...a))},[U(o,null,{default:P((()=>[U(z)])),_:1})])):Y("",!0)],512)])),_:1},8,["modelValue","onClick"]),(E(),T(_e,{to:"body"},[U(be,{ref:"MyColorDialog",onClose:e.addKeyBoardEvent,onDelete:a[162]||(a[162]=a=>e.currentColorGroup="1"),onSelect:a[163]||(a[163]=a=>e.brushColor=a)},null,8,["onClose"]),U(Ie,{ref:"SpriteDialog",onImport:e.handleImportSprite},null,8,["onImport"]),U(ke,{onClose:e.addKeyBoardEvent,ref:"ReplaceColorDialog",onConfirm:e.handleConfirmReplaceColor},null,8,["onClose","onConfirm"]),U(Be,{onClose:e.addKeyBoardEvent,ref:"CanvasRotateDialog",onConfirm:e.handleConfirmCanvasRotate},null,8,["onClose","onConfirm"]),e.intelligentStrokeVisible?(E(),T(Re,{key:0,visible:e.intelligentStrokeVisible,onConfirm:e.handleIntelligentStroke,onClose:a[164]||(a[164]=a=>e.intelligentStrokeVisible=!1)},null,8,["visible","onConfirm"])):Y("",!0),U(Me,{ref:"IntelligentSliceDialog",visible:e.intelligentSliceVisible,canvasOptions:e.intelligentSliceOptions,onConfirm:e.handleExportIntelligentSlice,onChange:e.handleIntelligentSlice,onClose:e.handleCloseIntelligentSlice},null,8,["visible","canvasOptions","onConfirm","onChange","onClose"]),e.exportVisible?(E(),T(Fe,{key:1,loading:e.exportLoaidng,visible:e.exportVisible,isExportProject:e.isExportProject,exportSingleImage:e.exportSingleImage,canvasOptions:{canvasWidth:e.canvasWidth,canvasHeight:e.canvasHeight,projectData:e.projectData},onExport:e.handleExport,onClose:a[165]||(a[165]=a=>e.handleCloseDialog("exportVisible"))},null,8,["loading","visible","isExportProject","exportSingleImage","canvasOptions","onExport"])):Y("",!0),U(Ee,{ref:"PreviewAnimDialog"},null,512),U(Te,{ref:"PindouDialog",canvasOptions:{width:e.pindouBlockWidth,height:e.pindouBlockHeight,isLargeCanvas:1},onChangeGrid:e.handleDrawPindouGridLine,onChangeRuler:e.handleDrawPindouRuler,onChangeShadow:e.handleDrawPindouShadow,onChangeReferenceLine:e.handleDrawPindouReferenceLine,onChangeAllBlock:a[166]||(a[166]=a=>e.isUpdateAllBlock=a),onChangeBrushMode:a[167]||(a[167]=a=>e.isEnablePindouBrushMode=a),onBlockHighlight:e.handlePindouBlockHighlight,onClose:e.handleCloseDialog,onChange:e.handlePindouEvent,onReplace:e.handleReplacePindouColor,onHighlight:e.handlePindouHighlight,onSelect:e.handleChangeBrushColor,onRemoveKeyBoard:e.handleCancelKeyboardEvent,onAddKeyBoard:e.addKeyBoardEvent,onHide:a[168]||(a[168]=a=>e.isHidePindouMode=!0),onExportExcel:e.handleExportPindouToExcel,onSave:e.handleTransformColorToPindou,onExport:e.handleExportPindou},null,8,["canvasOptions","onChangeGrid","onChangeRuler","onChangeShadow","onChangeReferenceLine","onBlockHighlight","onClose","onChange","onReplace","onHighlight","onSelect","onRemoveKeyBoard","onAddKeyBoard","onExportExcel","onSave","onExport"]),e.LayerMenu.visible&&!e.isPreview?(E(),T(Pe,{key:2,visible:e.LayerMenu.visible,left:e.LayerMenu.left,top:e.LayerMenu.top,contextData:e.LayerMenu.contextData,onCopy:e.handleCopyLayerData,onPixel:a[169]||(a[169]=a=>e.handleMindToPixel(0)),onPaste:e.handlePasteLayerData,onImport:e.handleImportImage,onSaveSprite:e.handleSaveSprite,onSaveMind:e.handleSaveMind,onExport:a[170]||(a[170]=a=>e.handleExportDialog(!1,"layer",e.currentLayerIndex))},null,8,["visible","left","top","contextData","onCopy","onPaste","onImport","onSaveSprite","onSaveMind"])):Y("",!0),e.FrameMenu.visible&&!e.isPreview?(E(),T(Oe,{key:3,visible:e.FrameMenu.visible,left:e.FrameMenu.left,top:e.FrameMenu.top,contextData:e.FrameMenu.contextData,onCopy:a[171]||(a[171]=a=>e.handleCopyFrame(a,"copy")),onDelete:a[172]||(a[172]=a=>e.handleDeleteFrame(a)),onPasteFrame:a[173]||(a[173]=a=>e.handleCopyFrame(a,"pasteData")),onCopyFrame:a[174]||(a[174]=a=>e.handleCopyFrame(a,"copyFrame")),onExport:a[175]||(a[175]=a=>e.handleExportDialog(!1,"frame",a))},null,8,["visible","left","top","contextData"])):Y("",!0),e.MyColorMenu.visible?(E(),T(Ue,{key:4,visible:e.MyColorMenu.visible,left:e.MyColorMenu.left,top:e.MyColorMenu.top,contextData:e.MyColorMenu.contextData,onCopy:a[176]||(a[176]=a=>e.handleCopyColor(a)),onEdit:e.handleEditMyColor,onDelete:e.handleDeleteMyColor},null,8,["visible","left","top","contextData","onEdit","onDelete"])):Y("",!0),U(He,{ref:"LinmoModeDialog",onClose:e.handleCloseDialog,onUpload:a[177]||(a[177]=a=>e.linmoPhoto=a),onUpdate:a[178]||(a[178]=a=>e.linmoPhotoStyle=a),onColor:a[179]||(a[179]=a=>e.brushColor=a),onHide:a[180]||(a[180]=a=>e.isHideLinmoMode=!0),onLock:e.handleLinmoFitCanvas,onHigh:a[181]||(a[181]=a=>e.isHighPreview=a)},null,8,["onClose","onLock"]),e.importLayerVisible?(E(),T(Je,{key:5,visible:e.importLayerVisible,canvasOptions:{canvasWidth:e.canvasWidth,canvasHeight:e.canvasHeight},onImport:e.handleImportImageLayer,onClose:a[182]||(a[182]=a=>e.handleCloseDialog("importLayerVisible"))},null,8,["visible","canvasOptions","onImport"])):Y("",!0),U(Qe,{ref:"IframeDialog"},null,512),U(We,{modelValue:e.addMyColorVisible,"onUpdate:modelValue":a[190]||(a[190]=a=>e.addMyColorVisible=a),width:"300",title:e.editMyColorMask?"修改颜色":"添加颜色","append-to-body":"",class:"z-dialog"},{footer:P((()=>[O("div",Ur,[U(v,{onClick:a[189]||(a[189]=a=>e.addMyColorVisible=!1)},{default:P((()=>a[280]||(a[280]=[H("取 消")]))),_:1,__:[280]}),U(v,{type:"primary",onClick:e.handleAddColor},{default:P((()=>a[281]||(a[281]=[H("保 存")]))),_:1,__:[281]},8,["onClick"])])])),default:P((()=>[O("div",Tr,[U(Ye,{modelValue:e.myColor,"onUpdate:modelValue":a[183]||(a[183]=a=>e.myColor=a),"show-alpha":""},null,8,["modelValue"]),U(Xe,{modelValue:e.myColorGroup,"onUpdate:modelValue":a[187]||(a[187]=a=>e.myColorGroup=a),placeholder:"选择分组",style:{width:"200px"}},{footer:P((()=>[e.isAddGroup?(E(),Q($,{key:1},[U(ne,{modelValue:e.myGroupName,"onUpdate:modelValue":a[185]||(a[185]=a=>e.myGroupName=a),class:"option-input",placeholder:"请输入分组",size:"small",maxlength:"10"},null,8,["modelValue"]),O("div",Pr,[U(v,{size:"small",onClick:a[186]||(a[186]=a=>{e.myGroupName="",e.isAddGroup=!1})},{default:P((()=>a[278]||(a[278]=[H("取消")]))),_:1,__:[278]}),U(v,{type:"primary",size:"small",onClick:e.addColorGroup},{default:P((()=>a[279]||(a[279]=[H("保存")]))),_:1,__:[279]},8,["onClick"])])],64)):(E(),T(v,{key:0,text:"",bg:"",size:"small",onClick:a[184]||(a[184]=a=>e.isAddGroup=!0)},{default:P((()=>a[277]||(a[277]=[H(" 新建分组 ")]))),_:1,__:[277]}))])),default:P((()=>[(E(!0),Q($,null,_(e.editSpaceStore.myColorList,(e=>(E(),T(Ve,{key:e.id,label:e.groupName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),O("div",Or,[U(ne,{modelValue:e.myColorLabel,"onUpdate:modelValue":a[188]||(a[188]=a=>e.myColorLabel=a),placeholder:"请输入颜色名称"},null,8,["modelValue"])])])),_:1},8,["modelValue","title"])]))],4)}],["__scopeId","data-v-05ce0282"]]);export{Hr as default};
